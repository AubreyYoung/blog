<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<title>Oracle Performance Diagnostic Guide - Slow Database</title>
<STYLE>
.odmtest     { font-family: Arial; font-size: 10pt; color: #FFFFFF; line-height:100%; position:relative; left:2; top:1; margin-top:0; margin-bottom:0; z-index:3 }
.odmTxtOnOld     { font-family: Arial; font-size: 10pt; color: #FFFFFF; line-height:100%; position:relative; left:0px; top:-15px; margin-top:-30; margin-bottom:0; cursor:default; z-index:3}
.odmTxtOffOld    { font-family: Arial; font-size: 10pt; color: #000000; line-height:100%; position:relative; left:0px; top:-15px; margin-top:-30; margin-bottom:0; cursor:default; z-index:3}
.odmTxtOn     { font-family: Arial; font-size: 10pt; color: #336699; margin-top:0; margin-bottom:0; font-weight:bold}
.odmTxtOff    { font-family: Arial; font-size: 10pt; color: #A6B3C8; margin-top:0; margin-bottom:0;  font-weight:bold}
.odmTxtFaded  { font-family: Arial; font-size: 10pt; color: #A6B3C8; margin-top:0; margin-bottom:0;  font-weight:bold}
.odmPic       { font-family: Arial; font-size: 12pt; color: #00FF00; line-height:100%; position:relative; left:0px; top:0px; margin-top:0; margin-bottom:0; cursor:default; z-index:2}
.detailTxtOn     { font-family: Arial; font-size: 10pt; color: #FFFFFF; line-height:100%; position:relative; left:0px; top:-15px; margin-top:-30; margin-bottom:0; cursor:default; z-index:3; text-align:center}
.detailTxtOff    { font-family: Arial; font-size: 10pt; color: #000000; line-height:100%; position:relative; left:0px; top:-15px; margin-top:-30; margin-bottom:0; cursor:default; z-index:3; text-align:center}
.detailTxtFaded  { font-family: Arial; font-size: 10pt; color: #A6B3C8; line-height:100%; position:relative; left:0px; top:-15px; margin-top:-30; margin-bottom:0; cursor:default; z-index:3; text-align:center}
.detailPic       { font-family: Arial; font-size: 12pt; line-height:100%; position:relative; left:0px; top:0px; margin-top:0; margin-bottom:0; cursor:default; z-index:2; text-align:center}
.tabTxtOn     { font-family: Arial; font-size: 10pt; color: #FFFFFF; line-height:100%; position:relative; left:5px; top:0px; margin-top:-30; margin-bottom:0; cursor:pointer; z-index:3; font-weight:bold}
.tabTxtOff    { font-family: Arial; font-size: 10pt; color: #000000; line-height:100%; position:relative; left:5px; top:0px; margin-top:-30; margin-bottom:0; cursor:pointer; z-index:3; font-weight:bold}
.tabPic       { font-family: Arial; font-size: 12pt; color: #00FF00; line-height:100%; position:relative; left:0px; top:0px; margin-top:0; margin-bottom:0; cursor:pointer; z-index:2}
.help         {color:#000000; background:#F6F8FA; font-size:10pt; font-family:Arial; margin-left:10px; margin-bottom:0px; border:2px solid #0D4988; padding:5px}
.RPHelp             { border:1px double #2B3366; font-family: Arial; font-size: 10pt; padding-left:4; padding-right:4; padding-top:1; padding-bottom:1; background-color:#CCCCCC; width:300 }
.RPHelpCR           { border:1px double #2B3366; font-family: Arial; font-size: 10pt; padding-left:4; padding-right:4; padding-top:1; padding-bottom:1; background-color:#CCCCCC; width:300; color:#FF0000 }
.qstTxtSm   { font-family: Arial; font-size: 10pt; margin-top:0; margin-bottom:0 }
.qstTxtMed   { font-family: Arial; font-size: 12pt; margin-top:0; margin-bottom:0 }
.HomeHdr1      { font-family: Arial; font-size: 16pt; color: #234A82; margin-top:0; margin-bottom:0; font-weight:bold }
.HomeHdr2      { font-family: Arial; font-size: 14pt; margin-top:0; margin-bottom:0; font-weight:bold }
.HomeHdr3      { font-family: Arial; font-size: 10pt; margin-top:0; margin-bottom:0; font-weight:bold }
.HomeHdr4      { font-family: Arial; font-size: 10pt; margin-top:0; margin-bottom:0; margin-left:15 }
.HomeDate      { font-family: Arial; font-size: 10pt; color: #234A82; margin-top:0; margin-bottom:0; font-weight:bold }
.detailEmptyLayer  { font-size: 1px; font-family: Arial; line-height: 100%; margin: 0 }
.detailEmptyLine 	{ font-family: Arial; font-size: 5pt; word-spacing:0; line-height:100%; color:#3C3C3C; margin-top:0; margin-bottom:0}
.detailHdrTxt       { font-family: Arial; font-size: 14pt; color: #000000; font-weight:bold; margin-bottom:0; margin-top:0 }
.detailSubHdrTxt    { font-family: Arial; font-size: 12pt; color: #000000; font-weight:bold; margin-bottom:0; margin-top:0 }
.detailLine         {color: #A6B3C8; margin-top:0; size:1}
.detailMainTxt      { font-family: Arial; font-size: 10pt; margin-top:0; margin-bottom:0 }
.detailBullet       { font-family: Arial; font-size: 10pt; margin-top:0; margin-bottom:0; list-style-type:disc }
.detailNumber       { font-family: Arial; font-size: 10pt; margin-top:0; margin-bottom:0; list-style-type:decimal }
.detailCmdTxt       { font-family: Courier New; font-size: 10pt; margin-top:0; margin-bottom:0 }
.detailTraceTxt     { font-family: Courier New; font-size: 8pt; color: #3C3C3C; margin-top:0; margin-bottom:0 }
.detailTraceBlk     { font-family: Courier New; font-size: 8pt; margin-top:0; margin-bottom:0 }
.detailTraceBlue    { font-family: Courier New; font-size: 8pt; color: #0000FF; margin-top:0; margin-bottom:0 }
.detailTraceRed     { font-family: Courier New; font-size: 8pt; color: #FF0000; margin-top:0; margin-bottom:0 }
.detailTraceGrn     { font-family: Courier New; font-size: 8pt; color: #00CC00; margin-top:0; margin-bottom:0 }
.detailTracePur     { font-family: Courier New; font-size: 8pt; color: #CC33FF; margin-top:0; margin-bottom:0 }
.detailTraceCursor  { font-family: Courier New; font-size: 8pt; color: #FF0000; margin-top:0; margin-bottom:0 }
.detailTraceSelect  { font-family: Courier New; font-size: 8pt; color: #FF0000; margin-top:0; margin-bottom:0 }
.detailTraceBind    { font-family: Courier New; font-size: 8pt; color: #0000FF; margin-top:0; margin-bottom:0 }
.detailTraceValue   { font-family: Courier New; font-size: 8pt; color: #00CC00; margin-top:0; margin-bottom:0 }
.detailTraceMsg     { font-family: Courier New; font-size: 8pt; color: #CC33FF; margin-top:0; margin-bottom:0; font-weight:bold }
.detailLevel1       { font-family: Arial; font-size: 10pt; color: #000000; margin-top:0; margin-bottom:0; font-style:italic; font-weight:bold }
.detailTbl          { padding:0; background-color:#EEF3F7 }
.detailTblHdr       { font-family: Arial; font-size: 9pt; margin-top:0; margin-bottom:0; margin-left:0; font-weight:bold }
.detailTblHdrSm     { font-family: Arial; font-size: 8pt; margin-top:0; margin-bottom:0; margin-left:0; font-weight:bold }
.detailTblBullet    { font-family: Arial; font-size: 9pt; margin-top:0; margin-bottom:0; margin-left:0 }
.detailTblTxt       { font-family: Arial; font-size: 9pt; word-spacing:0; line-height:100%; color:#234A82; margin-left:0; margin-right:0; margin-top:0; margin-bottom:0}
.detailTblTxtBlk    { font-family: Arial; font-size: 9pt; word-spacing:0; line-height:100%; color:#000000; margin-left:0; margin-right:0; margin-top:0; margin-bottom:0}
.detailTblTxt1      { font-family: Arial; font-size: 9pt; color:#234A82; }
.detailTblTxt2      { font-family: Arial; font-size: 9pt; word-spacing:0; line-height:100%; color:#234A82; margin-top:0; margin-bottom:0}
.detailTblTxt3      { font-family: Arial; font-size: 9pt; word-spacing:0; line-height:100%; color:#3C3C3C; margin-top:0; margin-bottom:0}
.detailTblTxt4      { font-family: Arial; font-size: 8pt; word-spacing:0; line-height:100%; color:#3C3C3C; margin-top:0; margin-bottom:0}
.detailTblCol1		{ background-color: #EEF3F7 }
.detailTblCol2		{ background-color: #C4D1E6 }
.detailTblEmptyLine { font-family: Arial; font-size: 5pt; word-spacing:0; line-height:100%; color:#3C3C3C; margin-top:0; margin-bottom:0}
.detailTblLine      { color: #A6B3C8; margin-top:0; size:2; width:90%}
.detailTblLowBG     { font-family: Arial; font-size: 9pt; margin:0; background-color:#00FF00; align:center; word-spacing:0; line-height:100%; text-align:center; color:#234A82}
.detailTblMedBG     { font-family: Arial; font-size: 9pt; margin:0; background-color:#FFFF00; align:center; word-spacing:0; line-height:100%; text-align:center; color:#234A82}
.detailTblHighBG    { font-family: Arial; font-size: 9pt; margin:0; background-color:#FF0000; align:center; word-spacing:0; line-height:100%; text-align:center; color:#234A82}
.breadcrumb         { font-family: Arial; font-size: 10pt; color: #234a82 }
.pagebreak          {page-break-after: always}
.htmlTitle          { font-family: Arial; font-size: 24pt; color: #234A82; font-weight:bold; margin-bottom:0; margin-top:0; text-align:center }
.htmlHdr            { font-family: Arial; font-size: 18pt; color: #234A82; font-weight:bold; margin-bottom:0; margin-top:0; text-align:center }
</STYLE>


</head>
<body>
<DIV ID="help_layer" style="color:black;background:transparent; visibility:hidden; position:absolute;left:0px;top:0px;z-index:70">help layer Text</DIV>
<table width="100%" border="0" cellspacing="1" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="95%">    <p class="HomeHdr1">Oracle Performance Diagnostic Guide (Version 3.20)</p></td>  </tr> 
<tr>    <td width="95%">    <p class="HomeHdr1">Slow Database</p></td>  </tr> <tr>    <td width="95%"><p class=HomeDate>9/11/2012</p></td>  </tr></table><br>

<p class="detailMainTxt">&nbsp;</p>
<p class="detailMainTxt">Welcome to the Oracle Performance Diagnostic Guide &nbsp; This guide is intended to help you resolve query tuning, hang/locking, and slow database 
 issues.&nbsp; The guide is not an automated tool but rather seeks to show methodologies, techniques, common causes, and solutions to performance problems.<br>
<br>
Most of the guide is finished but portions of the content under the Hang/Locking 
tab is still under development.
<p class="detailMainTxt">
Your feedback is very valuable to us - please  email your comments to: 
<a href="mailto:Vickie.Carbonneau@oracle.com?subject=Performance%20Diagnostic%20Guide%20Feedback&body=Please%20provide%20a%20rating%20of%201-10.%20%20(1%20being%20the%20lowest,%2010%20being%20the%20highest)%0D%0DRATING:%20%20">
Vickie.Carbonneau@oracle.com</a>
</p>

<p class="HomeHdr2">&nbsp;</p><p class="HomeHdr2">&nbsp;</p><p class="HomeHdr2"><b>Contents</b></p><p class="HomeHdr2">&nbsp;</p><table width="100%" border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111"><tr><td width="100%" valign="top" height="12"><p class="HomeHdr3"><a href="#Slow Database &gt; Identify the Issue &gt; Overview">Slow Database &gt; Identify the Issue &gt; Overview</a></p></td></tr><tr><td width="100%" valign="top" height="12"><p class="HomeHdr4"><a href="#Recognize a Slow Database Issue">Recognize a Slow Database Issue</a></p></td></tr><tr><td width="100%" valign="top" height="12"><p class="HomeHdr4"><a href="#Clarify the Issue">Clarify the Issue</a></p></td></tr><tr><td width="100%" valign="top" height="12"><p class="HomeHdr4"><a href="#Verify the Issue">Verify the Issue</a></p></td></tr><tr><td width="100%" valign="top" height="12"><p class="HomeHdr4"><a href="#Next Step - Data Collection">Next Step - Data Collection</a></p></td></tr><tr><td width="100%" valign="top" height="12"><p class="HomeHdr3"><a href="#Slow Database &gt; Identify the Issue &gt; Data Collection">Slow Database &gt; Identify the Issue &gt; Data Collection</a></p></td></tr><tr><td width="100%" valign="top" height="12"><p class="HomeHdr4"><a href="#Gather Database Performance Data">Gather Database Performance Data</a></p></td></tr><tr><td width="100%" valign="top" height="12"><p class="HomeHdr4"><a href="#Gather Operating System (OS) Performance Data">Gather Operating System (OS) Performance Data</a></p></td></tr><tr><td width="100%" valign="top" height="12"><p class="HomeHdr4"><a href="#Gather RDA Report">Gather RDA Report</a></p></td></tr><tr><td width="100%" valign="top" height="12"><p class="HomeHdr4"><a href="#Gather Application Logs (Optional)">Gather Application Logs (Optional)</a></p></td></tr><tr><td width="100%" valign="top" height="12"><p class="HomeHdr4"><a href="#Next Step - Analyze">Next Step - Analyze</a></p></td></tr><tr><td width="100%" valign="top" height="12"><p class="HomeHdr3"><a href="#Slow Database &gt; Identify the Issue&nbsp; &gt; Analysis">Slow Database &gt; Identify the Issue&nbsp; &gt; Analysis</a></p></td></tr><tr><td width="100%" valign="top" height="12"><p class="HomeHdr4"><a href="#Verify Oracle OS Resource Usage">Verify Oracle OS Resource Usage</a></p></td></tr><tr><td width="100%" valign="top" height="12"><p class="HomeHdr4"><a href="#Verify The Database is Slow">Verify The Database is Slow</a></p></td></tr><tr><td width="100%" valign="top" height="12"><p class="HomeHdr4"><a href="#Next Step - Determine a Cause">Next Step - Determine a Cause</a></p></td></tr><tr><td width="100%" valign="top" height="12"><p class="HomeHdr4"><a href="#Would You Like to Stop and Log a Service Request?">Would You Like to Stop and Log a Service Request?</a></p></td></tr><tr><td width="100%" valign="top" height="12"><p class="HomeHdr3"><a href="#Slow Database &gt; Determine a Cause &gt;Overview">Slow Database &gt; Determine a Cause &gt;Overview</a></p></td></tr><tr><td width="100%" valign="top" height="12"><p class="HomeHdr3"><a href="#Slow Database &gt; Determine a Cause &gt;Data Collection">Slow Database &gt; Determine a Cause &gt;Data Collection</a></p></td></tr><tr><td width="100%" valign="top" height="12"><p class="HomeHdr4"><a href="#Gather an Extended SQL Trace">Gather an Extended SQL Trace</a></p></td></tr><tr><td width="100%" valign="top" height="12"><p class="HomeHdr4"><a href="#Next Step - Analyze">Next Step - Analyze</a></p></td></tr><tr><td width="100%" valign="top" height="12"><p class="HomeHdr3"><a href="#Slow Database &gt; Determine a Cause &gt;Analysis">Slow Database &gt; Determine a Cause &gt;Analysis</a></p></td></tr><tr><td width="100%" valign="top" height="12"><p class="HomeHdr4"><a href="#Determine the Type of Performance Problem">Determine the Type of Performance Problem</a></p></td></tr><tr><td width="100%" valign="top" height="12"><p class="HomeHdr4"><a href="#Choose a Tuning Strategy">Choose a Tuning Strategy</a></p></td></tr><tr><td width="100%" valign="top" height="12"><p class="HomeHdr4"><a href="#Open a Service Request with Oracle Support Services">Open a Service Request with Oracle Support Services</a></p></td></tr><tr><td width="100%" valign="top" height="12"><p class="HomeHdr4"><a href="#Give Us Your Feedback">Give Us Your Feedback</a></p></td></tr><tr><td width="100%" valign="top" height="12"><p class="HomeHdr3"><a href="#Slow Database &gt; Reference">Slow Database &gt; Reference</a></p></td></tr><tr><td width="100%" valign="top" height="12"><p class="HomeHdr4"><a href="#Causes and Solutions">Causes and Solutions</a></p></td></tr><tr><td width="100%" valign="top" height="12"><p class="HomeHdr4"><a href="#Tools">Tools</a></p></td></tr>    </table>
<p class="HomeHdr2">&nbsp;</p><p class="HomeHdr2">&nbsp;</p><p class="HomeHdr2"><b>Feedback</b></p><p class="HomeHdr2">&nbsp;</p><p class="detailMainTxt">We look forward to your feedback.&nbsp; Please email any comments, suggestion to help improve this guide, or any issues that you have encountered with the tool usage to Vickie.Carbonneau@oracle.com, Technical Advisor, Center of Expertise (CoE).</p>
<p class=pagebreak>&nbsp;</p>




<table width="100%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">		<tr>      <td width="100%" colspan="4">      <p class="htmlHdr"><a name="Slow Database &gt; Identify the Issue &gt; Overview">Slow Database &gt; Identify the Issue &gt; Overview</a></p>      <p class="htmlHdr">&nbsp;</p>		</td></tr>		</table><br> <table width="100%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">     <tr>     <td width="100%" class="detailMainTxt">
<p>To properly identify the issue we want to resolve, we must do three things:
<ul>
<li> <b>Recognize</b> the issue </li><li> 
<b>Clarify</b> the details surrounding the issue </li>
<li> <b>Verify</b> that the issue is indeed the problem</li>
<ul>
<li>This will be done in the <i>Data Collection</i> and <i>Analysis</i> steps that follow</li>
</ul>
</ul>
</p> </td>   </tr> </table> <br> 

<table width="100%" border="0" cellspacing="1" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">   <tr>     <td width="2%" valign="top" align="left">&nbsp;</td>     <td width="98%">     <p class="detailHdrTxt"><a name="Recognize a Slow Database Issue">Recognize a Slow Database Issue</a></p><hr class="detailLine">     </td>   </tr> </table> <table width="100%" border="0" cellspacing="1" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">   <tr>       <td width="75%" valign="top"><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="3%"  class="detailMainTxt">&nbsp;</td>    <td width="97%" class="detailMainTxt"><b>What is a slow database issue?</b><br>
<br>
A slow database issue can manifest itself as: <br>
<ul>
<li>A large number of sessions that run slower than usual </li>
<li>The database permits logons and seems to be working (not hung) but takes much longer than usual to show results </li>
<li>Many different types of activity all slow down at around the same time</li>
</ul>
You might have identified this behavior from: <br>
<ul>
<li>benchmarking/testing </li>
<li>user complaints </li>
<li>statspack or AWR reports showing less throughput (e.g., transactions/sec) </li>
<li>statspack, AWR, or ASH reports showing much higher wait and/or CPU times than normal</li>
<li>OS data that shows more CPU consumption or I/O by Oracle processes than is normal</li>
</ul>
These problems might appear after: <br>
<ul>
<li>schema changes </li>
<li>changes in statistics gathering </li>
<li>changes in data volumes </li>
<li>changes in application </li>
<li>database upgrades </li>
</ul>    </td>  </tr>  <tr>    <td width="3%" class="detailMainTxt">&nbsp;</td>    <td width="97%" class="detailMainTxt">&nbsp;</td>  </tr>  </table><br></td> <td width="25%" valign="top"><table width="100%" height="46" border="1" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#A6B3C8" bgcolor="#EEF3F7">  <tr>   <td width="100%">    <p align="left" class="detailTblHdr">Documentation</td>  </tr>  <tr>    <td width="100%" valign="top">      <li class="detailTblBullet">    <a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/perf_overview.htm#i1006218">    Performance Tuning Overview</a></li>    </td>  </tr>  </table>  <br><table width="100%" height="46" border="1" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#A6B3C8" bgcolor="#EEF3F7">  <tr>   <td width="100%">    <p align="left" class="detailTblHdr">Notes</td>  </tr>  <tr>    <td width="100%" valign="top">      <li class="detailTblBullet">    <a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=402983.1">    Database Performance FAQ</a></li>    </td>  </tr>  </table>  <br><table width="100%" height="46" border="1" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#A6B3C8" bgcolor="#EEF3F7">  <tr>   <td width="100%">    <p align="left" class="detailTblHdr">White Papers</td>  </tr>  <tr>    <td width="100%" valign="top">      <li class="detailTblBullet">    <a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=148518.1">    Yet Another Performance Profiling Method </a></li>      <li class="detailTblBullet">    <a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=190124.1">    The COE Performance Method </a></li>    </td>  </tr>  </table>  <br><table width="100%" height="46" border="1" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#A6B3C8" bgcolor="#EEF3F7">  <tr>   <td width="100%">    <p align="left" class="detailTblHdr">Case Studies</td>  </tr>  <tr>    <td width="100%" valign="top">      <li class="detailTblBullet">    <a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=369412.1">    Resolving High CPU usage in Oracle Servers</a></li>      <li class="detailTblBullet">    <a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=369427.1">    The Mysterious Performance Drop</a></li>      <li class="detailTblBullet">    <a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=343235.1">    Intense and Random Buffer Busy Wait Performance</a></li>      <li class="detailTblBullet">    <a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=358303.1">    Diagnosing Another Buffer Busy Waits Issue</a></li>      <li class="detailTblBullet">    <a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=370363.1">    Using Real-Time Diagnostic Tools to Diagnose Intermittent Database Hangs</a></li>  </table></td></tr></table> <table width="100%" border="0" cellspacing="1" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">   <tr>     <td width="2%" valign="top" align="left">&nbsp;</td>     <td width="98%">     <p class="detailHdrTxt"><a name="Clarify the Issue">Clarify the Issue</a></p><hr class="detailLine">     </td>   </tr> </table> <table width="100%" border="0" cellspacing="1" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">   <tr>       <td width="75%" valign="top"><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="3%"  class="detailMainTxt">&nbsp;</td>    <td width="97%" class="detailMainTxt"><p>A clear problem statement is critical. You need to be clear on exactly what the problem is. It may be that in subsequent phases of working through the issue, the real problem becomes clearer and you have to revisit and re-clarify the issue. </p>

<p>To clarify the issue, you must know as much as possible of the following: 
<ul>
<li>When the system was slow and when it was OK. </li>
<li>Any related changes that coincide with the bad performance</li>
<li>The sequence of events leading up to the problem </li>
<li>Where/how was it noticed </li>
<li>The significance of the problem </li>
<li>What IS working </li>
<li>What is the expected or acceptable result? </li>
<li>What have you done to try to resolve the problem </li>
</ul>
</p>
As an example:<br>
<ul>
<li>A system performs poorly every morning between 10am and 12pm; it is OK at all other times. </li>
<li>The problem occurred after the latest application version was installed</li>
<li>It was noticed by end users. </li>
<li>It is making the application run slowly and preventing our system from taking orders. </li>
<li>System performs well except between 10am and 12pm </li>
<li>Orders are typically processed by the database in 200 mSec; during problem, they take 10 seconds </li>
<li>We tried re-gathering stats, but it did not make any difference. </li>
</ul>
<p><br><b>Why is this step mandatory? </b><br>
Skipping this step will be risky because you might attack the wrong problem and waste significant time and effort. A clear problem statement is critical to begin finding the cause and solution to the problem. 
</p>    </td>  </tr>  <tr>    <td width="3%" class="detailMainTxt">&nbsp;</td>    <td width="97%" class="detailMainTxt">&nbsp;</td>  </tr>  </table><br></td> <td width="25%" valign="top"><table width="100%" height="46" border="1" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#A6B3C8" bgcolor="#EEF3F7">  <tr>   <td width="100%">    <p align="left" class="detailTblHdr">Notes</td>  </tr>  <tr>    <td width="100%" valign="top">      <li class="detailTblBullet">    <a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=312789.1">    ODM Reference: Identify the Issue</a></li>  </table></td></tr></table> <table width="100%" border="0" cellspacing="1" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">   <tr>     <td width="2%" valign="top" align="left">&nbsp;</td>     <td width="98%">     <p class="detailHdrTxt"><a name="Verify the Issue">Verify the Issue</a></p><hr class="detailLine">     </td>   </tr> </table> <table width="100%" border="0" cellspacing="1" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">   <tr>       <td width="75%" valign="top"><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="3%"  class="detailMainTxt">&nbsp;</td>    <td width="97%" class="detailMainTxt"><p>Our objective in this step of the diagnostic process is to ensure the database shows symptoms of a performance problem. At this point, you need to collect data that verifies the existence of a problem. </p>
<p>To verify the existence of the issue you must collect : 
<ul>
<li>systemwide evidence using statspack, AWR, and/or ASH report when performance was <i>good</i> and bad </li>
<li>specific evidence of the poor performance for a session or several queries</li>
<li>extended SQL trace of one or more sessions during periods of good and bad performance </li>
</ul>
</p>
<p>The data above should also be collected during good performance to demonstrate the impact of the problem</p>
<p>Further examples and advice on what diagnostic information will be needed to resolve the problem will be discussed in the DATA COLLECTION section. </p>
<br>
Once the data is collected, you will review it to either verify there is a slow database issue, or decide it is a different issue.<br>
<br>
<p><b>Why is this step mandatory?</b><br>
If you skip this step, you might assume the database is the problem, but the problem may actually reside in the client or network.  The effort involved in tuning the database would be wasted in this case. </p>
    </td>  </tr>  <tr>    <td width="3%" class="detailMainTxt">&nbsp;</td>    <td width="97%" class="detailMainTxt">&nbsp;</td>  </tr>  </table><br></td> <td width="25%" valign="top"><table width="100%" height="46" border="1" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#A6B3C8" bgcolor="#EEF3F7">  <tr>   <td width="100%">    <p align="left" class="detailTblHdr">Notes</td>  </tr>  <tr>    <td width="100%" valign="top">      <li class="detailTblBullet">    <a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=312789.1">    ODM Reference: Identify the Issue</a></li>  </table></td></tr></table> <table width="100%" border="0" cellspacing="1" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">   <tr>     <td width="2%" valign="top" align="left">&nbsp;</td>     <td width="98%">     <p class="detailHdrTxt"><a name="Next Step - Data Collection">Next Step - Data Collection</a></p><hr class="detailLine">     </td>   </tr> </table> <table width="100%" border="0" cellspacing="1" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">   <tr>       <td width="75%" valign="top"><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="3%"  class="detailMainTxt">&nbsp;</td>    <td width="97%" class="detailMainTxt">When you have done the above, click "NEXT" to get some guidance on collecting data that will help to validate that you are looking at the right problem and that will help in diagnosing the cause of the problem.    </td>  </tr>  <tr>    <td width="3%" class="detailMainTxt">&nbsp;</td>    <td width="97%" class="detailMainTxt">&nbsp;</td>  </tr>  </table><p class="detailMainTxt">&nbsp;</p></td> <td width="25%" valign="top">&nbsp;</td></tr></table><p class=pagebreak>&nbsp;</p>
<table width="100%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">		<tr>      <td width="100%" colspan="4">      <p class="htmlHdr"><a name="Slow Database &gt; Identify the Issue &gt; Data Collection">Slow Database &gt; Identify the Issue &gt; Data Collection</a></p>      <p class="htmlHdr">&nbsp;</p>		</td></tr>		</table><br> <table width="100%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">     <tr>     <td width="100%" class="detailMainTxt">In this step, we will collect data to verify the performance problem is due to the database and not external to it.
<br>
<b>Note:</b>  Collect data when performance is good as well as when it was bad. </td>   </tr> </table> <br> <table width="100%" border="0" cellspacing="1" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">   <tr>     <td width="2%" valign="top" align="left">&nbsp;</td>     <td width="98%">     <p class="detailHdrTxt"><a name="Gather Database Performance Data">Gather Database Performance Data</a></p><hr class="detailLine">     </td>   </tr> </table> <table width="100%" border="0" cellspacing="1" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">   <tr>       <td width="75%" valign="top"><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="3%"  class="detailMainTxt">&nbsp;</td>    <td width="97%" class="detailMainTxt">Always collect instance-wide performance data, and in addition, collect extended SQL trace data if only certain sessions are slow but many others don't have a performance problem.<br>
<br>
<b>Be sure to gather data when performance was good AND bad so the traces can be compared.</b>    </td>  </tr>  <tr>    <td width="3%" class="detailMainTxt">&nbsp;</td>    <td width="97%" class="detailMainTxt">&nbsp;</td>  </tr>  </table> <table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"> <tr> <td width="3%" class="detailMainTxt">&nbsp;</td> <td width="2%" valign="top" align="left">&nbsp;</td> <td width="95%" class="detailSubHdrTxt">Is the Entire Database Slow? </td> </tr> <tr> <td width="3%" class="detailEmptyLayer">&nbsp;</td> <td width="2%" class="detailEmptyLayer">&nbsp;</td> <td width="95%"><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="100%" class="detailMainTxt">If the entire database seems slow, then instance-wide performance data is very useful for getting an overall context of performance in the database.  It can give a distorted picture if the database workload is very mixed (e.g., lots of OLTP and decision support SQL at the same time), but in general it is helpful to have this data.<br>
<br>
Depending on your database version, the data may be collected as follows:<br>
<ul>
<li>10.2.x or higher, all of the following are preferred:
<ul>
<li>Active Session History (ASH) reports</li>
<li>Automatic Diagnostic Database Monitor (ADDM) reports</li>
<li>Statspack reports</li>
</ul>
<br>
<li>10.1.x or higher, all of the following are preferred:
<ul>
<li>ADDM reports</li>
<li>Statspack reports</li>
</ul>
<br>
</li>
<li>8.1.6 - 9.2.x:  Statspack reports</li>
</ul>
<br>
For accuracy, the time interval should be as short as possible to capture the problem (around 10 - 15 minutes is ideal).<br>
<br>
In 10g or higher versions of the database, the AWR and statspack reports (statspack is preferred) include OS data.  This means you can avoid more in-depth OS data collection <b>if you collect the AWR or statspack snapshots during the performance problem</b>.<br>
<br>
<b>See the document references on this page for details on obtaining ASH / AWR / statspack reports. </b><br>    </td>  </tr>  <tr>    <td width="100%" class="detailEmptyLine">&nbsp;</td>  </tr>  </table> </td> </tr> <tr> <td width="100%" colspan="3" class="detailEmptyLine">&nbsp;</td> </tr> </table> <table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"> <tr> <td width="3%" class="detailMainTxt">&nbsp;</td> <td width="2%" valign="top" align="left">&nbsp;</td> <td width="95%" class="detailSubHdrTxt">Are Just Some Sessions Slow? </td> </tr> <tr> <td width="3%" class="detailEmptyLayer">&nbsp;</td> <td width="2%" class="detailEmptyLayer">&nbsp;</td> <td width="95%"><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="100%" class="detailMainTxt">If only certain sessions are slow, we'll need to focus on those sessions using an <b>extended SQL trace (Event 10046, level 12)</b>.  SQL trace data is extremely useful for diagnosing performance problems because we'll know exactly which SQL statements are most impacted and how they're impacted (CPU, wait, or idle time). The key is getting the trace from the most important and most impacted sessions as completely as possible.<br>
<br>
The following process will help you collect SQL trace data properly:<br>    </td>  </tr>  <tr>    <td width="100%" class="detailEmptyLine">&nbsp;</td>  </tr>  </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="1">Choose a session to trace</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt"><b>Target the most important / impacted sessions</b>
<ul>
<li>Users that are experiencing the problem most severely; e.g., normally the transaction is complete in 1 sec, but now it takes 30 sec.</li>
<li>Users that are aggressively accumulating time in the database</li>
<br>
The following queries will allow you to find the sessions currently logged into the database that have accumulated the most time on CPU or for certain wait events.  Use them to identify potential sessions to trace using 10046.<br>
<br>
These queries are filtering the sessions based on logon times less than 4 hours and the last call occurring within 30 minutes.  This is to find more currently relevant sessions instead of long running ones that accumulate a lot of time but aren't having a performance problem.  You may need to adjust these values to suit your environment.<br>
<br>
<u>Find Sessions with the Highest CPU Consumption</u><br>
<br>
<div style="BORDER-RIGHT: 1px solid; PADDING-RIGHT: 0.5em; BORDER-TOP: 1px solid; PADDING-LEFT: 0.5em; BACKGROUND: rgb(204,204,204) 0% 50%; PADDING-BOTTOM: 0.5em; MARGIN: 5px 20px 20px; OVERFLOW: auto; BORDER-LEFT: 1px solid; WIDTH: 95%; PADDING-TOP: 0.5em; BORDER-BOTTOM: 1px solid; moz-background-clip: initial; moz-background-inline-policy: initial; moz-background-origin: initial"><code class="awiz">
<pre>
-- sessions with highest CPU consumption
SELECT s.sid, s.serial#, p.spid as "OS PID",s.username, s.module, st.value/100 as "CPU sec"
FROM v$sesstat st, v$statname sn, v$session s, v$process p
WHERE sn.name = 'CPU used by this session' -- CPU
AND st.statistic# = sn.statistic#
AND st.sid = s.sid
AND s.paddr = p.addr
AND s.last_call_et < 1800 -- active within last 1/2 hour
AND s.logon_time > (SYSDATE - 240/1440) -- sessions logged on within 4 hours
ORDER BY st.value;

       SID    SERIAL# OS PID       USERNAME             MODULE                                      CPU sec
---------- ---------- ------------ -------------------- ---------------------------------------- ----------
       141       1125 15315        SYS                  sqlplus@coehq2 (TNS V1-V3)                     8.25
       147        575 10577        SCOTT                SQL*Plus                                     258.08
       131        696 10578        SCOTT                SQL*Plus                                     263.17
       139        218 10576        SCOTT                SQL*Plus                                     264.08
       133        354 10583        SCOTT                SQL*Plus                                     265.79
       135        277 10586        SCOTT                SQL*Plus                                     268.02

</pre></code></div>
<br>
<u>Find Sessions with Highest Waits of a Certain Type</u><br>
<br>
<div style="BORDER-RIGHT: 1px solid; PADDING-RIGHT: 0.5em; BORDER-TOP: 1px solid; PADDING-LEFT: 0.5em; BACKGROUND: rgb(204,204,204) 0% 50%; PADDING-BOTTOM: 0.5em; MARGIN: 5px 20px 20px; OVERFLOW: auto; BORDER-LEFT: 1px solid; WIDTH: 95%; PADDING-TOP: 0.5em; BORDER-BOTTOM: 1px solid; moz-background-clip: initial; moz-background-inline-policy: initial; moz-background-origin: initial"><code class="awiz">
<pre>
-- sessions with the highest time for a certain wait
SELECT s.sid, s.serial#, p.spid as "OS PID", s.username, s.module, se.time_waited
FROM v$session_event se, v$session s, v$process p
WHERE se.event = '&event_name' 
AND s.last_call_et < 1800 -- active within last 1/2 hour
AND s.logon_time > (SYSDATE - 240/1440) -- sessions logged on within 4 hours
AND se.sid = s.sid
AND s.paddr = p.addr
ORDER BY se.time_waited;

SQL> /
Enter value for event_name: db file sequential read

       SID    SERIAL# OS PID       USERNAME             MODULE                                   TIME_WAITED
---------- ---------- ------------ -------------------- ---------------------------------------- -----------
       141       1125 15315        SYS                  sqlplus@coehq2 (TNS V1-V3)                         4
       147        575 10577        SCOTT                SQL*Plus                                       45215
       131        696 10578        SCOTT                SQL*Plus                                       45529
       135        277 10586        SCOTT                SQL*Plus                                       50288
       139        218 10576        SCOTT                SQL*Plus                                       51331
       133        354 10583        SCOTT                SQL*Plus                                       51428

</pre></code></div>

<u>10g or higher: Find Sessions with the Highest DB Time</u><br>
<br>
<div style="BORDER-RIGHT: 1px solid; PADDING-RIGHT: 0.5em; BORDER-TOP: 1px solid; PADDING-LEFT: 0.5em; BACKGROUND: rgb(204,204,204) 0% 50%; PADDING-BOTTOM: 0.5em; MARGIN: 5px 20px 20px; OVERFLOW: auto; BORDER-LEFT: 1px solid; WIDTH: 95%; PADDING-TOP: 0.5em; BORDER-BOTTOM: 1px solid; moz-background-clip: initial; moz-background-inline-policy: initial; moz-background-origin: initial"><code class="awiz">
<pre>
-- sessions with highest DB Time usage
SELECT s.sid, s.serial#, p.spid as "OS PID", s.username, s.module, st.value/100 as "DB Time (sec)"
, stcpu.value/100 as "CPU Time (sec)", round(stcpu.value / st.value * 100,2) as "% CPU"
FROM v$sesstat st, v$statname sn, v$session s, v$sesstat stcpu, v$statname sncpu, v$process p
WHERE sn.name = 'DB time' -- CPU
AND st.statistic# = sn.statistic#
AND st.sid = s.sid
AND  sncpu.name = 'CPU used by this session' -- CPU
AND stcpu.statistic# = sncpu.statistic#
AND stcpu.sid = st.sid
AND s.paddr = p.addr
AND s.last_call_et < 1800 -- active within last 1/2 hour
AND s.logon_time > (SYSDATE - 240/1440) -- sessions logged on within 4 hours
AND st.value > 0;

       SID    SERIAL# OS PID       USERNAME MODULE                                   DB Time (sec) CPU Time (sec)      % CPU
---------- ---------- ------------ -------- ---------------------------------------- ------------- -------------- ----------
       141       1125 15315        SYS      sqlplus@coehq2 (TNS V1-V3)                       12.92           9.34      72.29
</pre>
<br>
<b>Note: sometimes DB Time can be lower than CPU Time when a session issues long-running recursive calls.
The DB Time statistic doesn't update until the top-level call is finished (versus the CPU statistic that updates as each call completes).</b>
</code></div>
<br>
</ul>
<b>Obtain a complete trace</b>
<ul>
<li>Ideally, start the trace as soon as the user logs on and begins the operation or transaction.  Continue tracing until the operation is finished.</li>
<li>Try to avoid starting or ending the trace in the middle of a call unless you know the call is not important to the solution</li>
</ul>	</td>	</tr>	</table><br> </td> </tr> </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="2">Collect the trace and generate a TKProf report</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt"><b>See the document references on this page for details 
                on obtaining extended SQL trace data.  Read <a target="detailWindow" 
                href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=376442.1">
                Recommended Method for Obtaining 10046 trace for Tuning</a> first</b><br>
<ul>
<li>Trace a Connected Session<br>
This is the most common way to get a trace file.<br>
</li>
<ul>
<li>Start tracing on a connected session</li>
<li>Coordinate with the user to start the operation</li>
<li>Let the trace collect while the operation is in progress</li>
<li>Stop tracing when the operation is done</li>
<li>Gather the trace file from the "user_dump_dest" location (you can usually identify the file just by looking at the timestamp).</li>
</ul>
<br>
<li>Alternative: Trace Using a Test Script<br>
Sometimes you may be able to script a reproducible test case.<br>
</li>
<ul>
  <li>Put ALTER SESSION commands to start / stop the tracing in the test script</li>
  <li>Run the test script and collect the trace file from the "user_dump_dest" location (you can usually identify the file just by looking at the timestamp).</li>
</ul>
<br>
<li>Other Considerations</li>
<ul>
<li>Shared Servers:  Tracing shared servers could cause many separate trace files to be produced as the session moves to different Oracle processes during execution.  Use the 10g utility, "trcsess" to combine these separate files into one.</li>
</ul>
<br>
<li><p>Generate a TKProf report and sort the SQL 
statements in order of most elapsed time using the following command:</p></li>
</ul>
<blockquote>
<p><b>tkprof &lt;trace file name&gt; &lt;output file name&gt;  <font color="#0000ff">sort=fchela,exeela,prsela</font></b></p>
</blockquote>
	</td>	</tr>	</table><br> </td> </tr> </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="3">Make sure trace file contains only data from the recent test</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt"> <p>If this session has been traced recently, there may be other traces mixed in the file with the recent trace collected</p></li>
<li><p>We should extract only the trace data that is part of the recent tests.  See the place in the sample trace below where it says "Cut away lines above this point".</p>

<table width="98%" class="detailTbl" border="1" >
  <tr>
    <td width="100%">
      <p align="left" class="detailMainTxt"><i><b>Trace file from a long running process that has been traced intermittently over several days</b></i></p>
      <p align="left" class="detailTraceBlk">. . .</p>
      <p align="left" class="detailTraceRed"><b>*** <font color="#FF0000">2006-07-24 13:35:05.642</font>
      </b><font color="#0000FF">&lt;== Timestamp from a previous tracing</font></p>
      <p align="left" class="detailTraceBlk">WAIT #8: nam='SQL*Net message from client' ela= 20479935 p1=1650815232 p2=1 p3=0</p>
      <p align="left" class="detailTraceBlk">=====================</p>
      <p align="left" class="detailTraceBlk">PARSING IN CURSOR #9 len=43 dep=0 uid=57 oct=3 lid=57 tim=1007742062095 hv=4018512766 ad='97039a58'</p>
      <p align="left" class="detailTraceBlk"><b><font color="#008000">select e.empno, d.deptno</font></b><font color="#0000FF">&lt;== Previous cursor that was traced
      </font> </p>
      <p align="left" class="detailTraceBlk"><b><font color="#008000">from emp e, dept d</font></b></p>
      <p align="left" class="detailTraceBlk">END OF STMT</p>
      <p align="left" class="detailTraceBlk">PARSE #9:c=630000,e=864645,p=10,cr=174,cu=0,mis=1,r=0,dep=0,og=4,tim=1007742062058</p>
      <p align="left" class="detailTraceBlk">BINDS #9:</p>
      <p align="left" class="detailTraceBlk">EXEC #9:c=0,e=329,p=0,cr=0,cu=0,mis=0,r=0,dep=0,og=4,tim=1007742062997</p>
      <p align="left" class="detailTraceBlk">WAIT #9: nam='SQL*Net message to client' ela= 18 p1=1650815232 p2=1 p3=0</p>
      <p align="left" class="detailTraceBlk">. . .</p>
      <p align="left" class="detailTraceBlk">FETCH #9:c=10000,e=513,p=0,cr=1,cu=0,mis=0,r=15,dep=0,og=4,tim=1007742148898</p>
      <p align="left" class="detailTraceBlk">WAIT #9: nam='SQL*Net message from client' ela= 2450 p1=1650815232 p2=1 p3=0</p>
      <p align="left" class="detailTraceBlk">WAIT #9: nam='SQL*Net message to client' ela= 7 p1=1650815232 p2=1 p3=0</p>
      <p align="left" class="detailTraceBlk">FETCH #9:c=0,e=233,p=0,cr=0,cu=0,mis=0,r=10,dep=0,og=4,tim=1007742152065</p>
      <p align="left" class="detailTraceBlk">. . .</p>
      <p align="left" class="detailTraceBlk">&nbsp;</p>
      <p align="left" class="detailTracePur"><b>====&gt; CUT AWAY LINES ABOVE THIS POINT - THEY AREN'T PART OF THIS TEST &lt;====</b></p>
      <p align="left" class="detailTraceBlk"><b><font color="#FF0000">*** 2006-07-24 18:35:48.850</font></b></p>
      <font color="#0000FF">&lt;== Timestamp for the tracing we want (notice its about 5 hours later)</font></p>
      <p align="left" class="detailTraceBlk">=====================</p>
      <p align="left" class="detailTraceBlk">PARSING IN CURSOR #10 len=69 dep=0 uid=57 oct=42 lid=57 tim=1007783391548 hv=3164292706 ad='9915de10'</p>
      <p align="left" class="detailTraceBlk">alter session set events '10046 trace name context forever, level 12'</p>
      <p align="left" class="detailTraceBlk">END OF STMT</p>
      <p align="left" class="detailTraceBlk">. . .</p>
      <p align="left" class="detailTraceBlk">=====================</p>
      <p align="left" class="detailTraceBlk">PARSING IN CURSOR #3 len=68 dep=0 uid=57 oct=3 lid=57 tim=1007831212596 hv=1036028368 ad='9306bee0'</p>
      <p align="left" class="detailTraceBlk"><b><font color="#008000">select e.empno, d.dname</font></b><font color="#0000FF">&lt;== Cursor that was traced</font></p>
      <p align="left" class="detailTraceBlk"><b><font color="#008000">from emp e, dept d</font></b></p>
      <p align="left" class="detailTraceBlk"><b><font color="#008000">where e.deptno = d.deptno</font></b></p>
      <p align="left" class="detailTraceBlk">END OF STMT</p>
      <p align="left" class="detailTraceBlk">PARSE #3:c=20000,e=17200,p=0,cr=6,cu=0,mis=1,r=0,dep=0,og=4,tim=1007831212566</p>
      <p align="left" class="detailTraceBlk">BINDS #3:</p>
      <p align="left" class="detailTraceBlk">EXEC #3:c=0,e=321,p=0,cr=0,cu=0,mis=0,r=0,dep=0,og=4,tim=1007831213512</p>
      <p align="left" class="detailTraceBlk">WAIT #3: nam='SQL*Net message to client' ela= 15 p1=1650815232 p2=1 p3=0</p>
      <p align="left" class="detailTraceBlk">WAIT #3: nam='db file sequential read' ela= 7126 p1=4 p2=11 p3=1</p>
      <p align="left" class="detailTraceBlk">. . .</p>
      <p align="left" class="detailTraceBlk">FETCH #3:c=10000,e=39451,p=12,cr=14,cu=0,mis=0,r=1,dep=0,og=4,tim=1007831253359</p>
      <p align="left" class="detailTraceBlk">WAIT #3: nam='SQL*Net message from client' ela= 2009 p1=1650815232 p2=1 p3=0</p>
      <p align="left" class="detailTraceBlk">WAIT #3: nam='SQL*Net message to client' ela= 10 p1=1650815232 p2=1 p3=0</p>
      <p align="left" class="detailTraceBlk">FETCH #3:c=0,e=654,p=0,cr=1,cu=0,mis=0,r=13,dep=0,og=4,tim=1007831256674</p>
      <p align="left" class="detailTraceBlk">WAIT #3: nam='SQL*Net message from client' ela= 13030644 p1=1650815232 p2=1 p3=0</p>
      <p align="left" class="detailTraceBlk">STAT #3 id=1 cnt=14 pid=0 pos=1 obj=0 op='HASH JOIN (cr=15 pr=12 pw=0 time=39402 us)'</p>
      <p align="left" class="detailTraceBlk">=====================</p>
      <p align="left" class="detailTraceBlk">PARSING IN CURSOR #7 len=55 dep=0 uid=57 oct=42 lid=57 tim=1007844294588 hv=2217940283 ad='95037918'</p>
      <p align="left" class="detailTraceBlk">
        <font color="#FF0000">
        <b>alter session set events '10046 trace name context off</b>'</font>
        <font color="#0000FF">&lt;== tracing turned off </font> </p>
      <p align="left" class="detailTraceBlk">END OF STMT</p>
        </td>
  </tr>
</table>
<br>
<p>If you are unsure about how to edit the trace file, it is best to capture the trace again using a session that does not have a trace file already.  To confirm, check the OS PID of the session you intend to trace and look for a file with that PID in the user_dump_dest.</p>

	</td>	</tr>	</table><br> </td> </tr> </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="4">Make sure the trace is complete</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt"><p>If the trace started or ended during a call, its best to rethink how the trace is started to ensure this doesn't happen.  <br>
<br>
You can get an idea for the the amount of time attributed to the call that was in progress at the beginning or end of the trace by looking at the timestamps to find the total time spent prior to the first call and comparing it to the call's elapsed time (although if there were other fetch calls before the first one in the trace, you'll miss those) .  The following trace file excerpt was taken by turning on the trace after the query had been executing for a few minutes.</p>
   <table width="98%" class="detailTbl" border="1" >
  <tr>
    <td width="100%"><p align="left" class="detailTraceBlk">*** 2006-07-24 15:00:45.538 
    <font color="#0000FF">&lt;== Time when the trace was started</font></p>
    <p align="left" class="detailTraceBlk">WAIT #3: nam='db file scattered read' ela= 18598 p1=4 p2=69417 p3=8 
    <font color="#0000FF">&lt;== Wait</font></p>
	<p align="left" class="detailTraceBlk">*** 2006-07-24 15:01:16.849 
    <font color="#0000FF">&lt;== 10g will print timestamps if trace hasn't been written to in a while</font></p>
	<p align="left" class="detailTraceBlk"><font color="#008000">WAIT #3: nam='db file scattered read' ela= 20793 p1=4 p2=126722 p3=7</font><p align="left" class="detailTraceBlk">. . .
	<p align="left" class="detailTraceBlk">*** 2006-07-24 15:27:46.076</p>
	<p align="left" class="detailTraceBlk"><b><font color="#008000">WAIT #3: nam='db file sequential read' ela= 226 p1=4 p2=127625 p3=1 &lt;== Yet more waits</font></b></p>
	<p align="left" class="detailTraceBlk"><b><font color="#008000">WAIT #3: nam='db file sequential read' ela= 102 p1=4 p2=45346 p3=1</font></b></p>
	<p align="left" class="detailTraceBlk"><b><font color="#008000">WAIT #3: nam='db file sequential read' ela= 127 p1=4 p2=127626 p3=1</font></b></p>
	<p align="left" class="detailTraceBlk"><b><font color="#008000">WAIT #3: nam='db file scattered read' ela= 2084 p1=4 p2=127627 p3=16</font></b></p>
	<p align="left" class="detailTraceBlk">. . .</p>
	<p align="left" class="detailTraceBlk">*** 2006-07-24 15:30:28.536 
    <font color="#0000FF">&lt;== Final timestamp before end of FETCH call</font></p>
	<p align="left" class="detailTraceBlk"><b><font color="#008000">WAIT #3: nam='db file scattered read' ela= 5218 p1=4 p2=127705 p3=16</font></b>
    <font color="#0000FF">&lt;== Final wait</font></p>
	<p align="left" class="detailTraceBlk">WAIT #3: nam='SQL*Net message from client' ela= 1100 p1=1650815232 p2=1 p3=0</p>
	<p align="left" class="detailTraceBlk">=====================</p>
	<p align="left" class="detailTraceBlk">PARSING IN CURSOR #3 len=39 dep=0 uid=57 oct=0 lid=57 tim=1014506207489 hv=1173176699 ad='931230c8'</p>
	<p align="left" class="detailTraceBlk">select count(*) from big_tab1, big_tab2 
    <font color="#0000FF">&lt;== This is not a real parse call, just printed for 
    convenience</font></p>
	<p align="left" class="detailTraceBlk">END OF STMT
    <p align="left" class="detailTraceBlk">&nbsp;</p>
	<p align="left" class="detailTraceBlk">FETCH #3:c=0,<b><font color="#FF0000">e=11</font></b>,p=0,cr=0,cu=0,mis=0,r=0,dep=0,og=0,tim=1014506207466
    <font color="#0000FF">&lt;== Completion of FETCH call</font></p>
	<p align="left" class="detailTraceBlk"><font color="#0000FF">Notice the FETCH reports 11 microSec elapsed. This is wrong as you can see from timestamps -</font></p>
	<p align="left" class="detailTraceBlk"><font color="#0000FF">It should be around 30 minutes. Maybe this is a feature?</font></p>
  </td>
  </tr>
</table>
<br>
<p>As you can see at the top of the file, the trace was started in the middle of a call that was reading from a file and causing waits.  When the call completed, the amount of time for the fetch was incorrectly reported.</p>
	</td>	</tr>	</table><br> </td> </tr> </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="5">Repeat to Capture Good Performance Trace</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt">Repeat the above steps during a period of good performance if possible.  This will give you a reference trace to compare against.	</td>	</tr>	</table><br> </td> </tr> </table> </td> </tr> <tr> <td width="100%" colspan="3" class="detailEmptyLine">&nbsp;</td> </tr> </table><br></td> <td width="25%" valign="top"><table width="100%" height="46" border="1" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#A6B3C8" bgcolor="#EEF3F7">  <tr>   <td width="100%">    <p align="left" class="detailTblHdr">Documentation</td>  </tr>  <tr>    <td width="100%" valign="top">      <li class="detailTblBullet">    <a target="detailWindow" href="http://download.oracle.com/docs/cd/B14117_01/server.101/b10752/sqltrace.htm#8723">    Understanding SQL Trace and TKProf</a></li>      <li class="detailTblBullet">    <a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/autostat.htm#sthref362">    Automatic Workload Repository</a></li>      <li class="detailTblBullet">    <a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/autostat.htm#i35176">    Automatic Workload Repository Reports</a></li>      <li class="detailTblBullet">    <a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/autostat.htm#PFGRF02606">    Active Session History Reports</a></li>    </td>  </tr>  </table>  <br><table width="100%" height="46" border="1" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#A6B3C8" bgcolor="#EEF3F7">  <tr>   <td width="100%">    <p align="left" class="detailTblHdr">Reference</td>  </tr>  <tr>    <td width="100%" valign="top">      <li class="detailTblBullet">    <a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=94224.1">    Statspack Complete Reference</a></li>      <li class="detailTblBullet">    <a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/license.102/b14199/options.htm#CIHHIGBI">    Oracle Diagnostic Pack Licensing Information</a></li>    </td>  </tr>  </table>  <br><table width="100%" height="46" border="1" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#A6B3C8" bgcolor="#EEF3F7">  <tr>   <td width="100%">    <p align="left" class="detailTblHdr">How-To</td>  </tr>  <tr>    <td width="100%" valign="top">      <li class="detailTblBullet">    <a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=1058210.6">    How To Collect 10046 Trace Data</a></li>      <li class="detailTblBullet">    <a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=376442.1">    Recommended Method for Obtaining 10046 trace for Tuning</a></li>      <li class="detailTblBullet">    <a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=108312.1">    How To Generate TKProf reports</a></li>      <li class="detailTblBullet">    <a target="detailWindow" href="http://www.oracle.com/technology/obe/10gr2_2day_dba/monitoring/monitoring.htm">    OTN: Oracle By Example: Monitoring and Tuning the Database</a></li>    </td>  </tr>  </table>  <br><table width="100%" height="46" border="1" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#A6B3C8" bgcolor="#EEF3F7">  <tr>   <td width="100%">    <p align="left" class="detailTblHdr">Scripts and Tools</td>  </tr>  <tr>    <td width="100%" valign="top">      <li class="detailTblBullet">    <a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=352363.1">    Collect 10046 Traces Automatically with LTOM</a></li>  </table></td></tr></table> <table width="100%" border="0" cellspacing="1" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">   <tr>     <td width="2%" valign="top" align="left">&nbsp;</td>     <td width="98%">     <p class="detailHdrTxt"><a name="Gather Operating System (OS) Performance Data">Gather Operating System (OS) Performance Data</a></p><hr class="detailLine">     </td>   </tr> </table> <table width="100%" border="0" cellspacing="1" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">   <tr>       <td width="75%" valign="top"><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="3%"  class="detailMainTxt">&nbsp;</td>    <td width="97%" class="detailMainTxt">OS data is needed to see the overall performance of the machine(s) where Oracle is running.    </td>  </tr>  <tr>    <td width="3%" class="detailMainTxt">&nbsp;</td>    <td width="97%" class="detailMainTxt">&nbsp;</td>  </tr>  </table> <table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"> <tr> <td width="3%" class="detailMainTxt">&nbsp;</td> <td width="2%" valign="top" align="left">&nbsp;</td> <td width="95%" class="detailSubHdrTxt">Automatically Using Tools </td> </tr> <tr> <td width="3%" class="detailEmptyLayer">&nbsp;</td> <td width="2%" class="detailEmptyLayer">&nbsp;</td> <td width="95%"><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="100%" class="detailMainTxt">This section will discuss how to gather data using scripts or tools.  Describe when/why you'd use the particular tool, but use the sidebar refs to point to a doc that gives the details on how to setup and use.<br>
<br>
<b>10g or higher</b>: If you have obtained a 10gR2 or higher statspack report, you do not need to collect detailed OS data as described below to verify CPU or memory saturation.  However, the data captured using the following tools are thorough and may improve the quality of the diagnosis in some cases.<br>    </td>  </tr>  <tr>    <td width="100%" class="detailEmptyLine">&nbsp;</td>  </tr>  </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="1">OS Watcher (OSW) (Preferred Method)</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt">OS Watcher (OSW) is a collection of UNIX shell scripts intended to collect and archive operating system and network metrics to aid support in diagnosing performance issues. OSW operates as a set of background processes on the server and gathers OS data on a regular basis, invoking such Unix utilities as vmstat, netstat and iostat.<br>
<br>
OSW is the preferred way of gathering data on Unix-based systems because it is very simple to install and will collect files that can be analyzed later by Oracle engineers.<br>
<br>
Please read the <a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=301137.1">OS Watcher User's Guide</a> for more information on setting up OSW and collecting data.  Use <a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=461053.1">OSWg</a> to graph the data for quick analysis.
	</td>	</tr>	</table><br> </td> </tr> </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="2">LTOM </li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt">The Lite Onboard Monitor (LTOM) is a java program designed as a real-time diagnostic platform for deployment to a customer site. LTOM differs from other support tools, as it is proactive rather than reactive. LTOM provides real-time automatic problem detection and data collection. LTOM is very well suited to transient and unpredictable performance issues..<br>
<br>
Please read the <a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=352363.1">LTOM - The On-Board Monitor User's Guide</a> for more information.	</td>	</tr>	</table><br> </td> </tr> </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="3">Enterprise Manager</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt">Enterprise Manager's performance management pages in Grid Control or DB Control  include charts that show CPU  and memory performance data.  To see these charts, click on the host target name (in the "General" section) and then click on the "Performance" page link.  From here you will see charts for CPU, memory, and I/O utilization as well as detailed process information.<br>
<br>
Enterprise Manager is very good for real-time analysis; however, screen captures will be required for later analysis by Oracle Support.	</td>	</tr>	</table><br> </td> </tr> </table> </td> </tr> <tr> <td width="100%" colspan="3" class="detailEmptyLine">&nbsp;</td> </tr> </table> <table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"> <tr> <td width="3%" class="detailMainTxt">&nbsp;</td> <td width="2%" valign="top" align="left">&nbsp;</td> <td width="95%" class="detailSubHdrTxt">Manually </td> </tr> <tr> <td width="3%" class="detailEmptyLayer">&nbsp;</td> <td width="2%" class="detailEmptyLayer">&nbsp;</td> <td width="95%"><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="100%" class="detailMainTxt">OS Watcher is preferred over manual methods.  But if you are unable to use OS Watcher and wish to manually collect OS data, please read <a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=224176.1">How to use OS commands to diagnose Database Performance issues</a> for more information.    </td>  </tr>  <tr>    <td width="100%" class="detailEmptyLine">&nbsp;</td>  </tr>  </table> </td> </tr> <tr> <td width="100%" colspan="3" class="detailEmptyLine">&nbsp;</td> </tr> </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr> 	  <td width="3%" class="detailMainTxt">&nbsp;</td>    <td width="97%" class="detailMainTxt"><b>Note:<br>
<b>Data should be gathered at the same time as the database performance data is gathered</b>    </td>  </tr>  <tr>  <td width="100%" colspan="3" class="detailEmptyLine">&nbsp;</td>  </tr>  </table><br></td> <td width="25%" valign="top"><table width="100%" height="46" border="1" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#A6B3C8" bgcolor="#EEF3F7">  <tr>   <td width="100%">    <p align="left" class="detailTblHdr">How-To</td>  </tr>  <tr>    <td width="100%" valign="top">      <li class="detailTblBullet">    <a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=224176.1">    How to use OS commands to diagnose Database Performance issues</a></li>    </td>  </tr>  </table>  <br><table width="100%" height="46" border="1" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#A6B3C8" bgcolor="#EEF3F7">  <tr>   <td width="100%">    <p align="left" class="detailTblHdr">Scripts and Tools</td>  </tr>  <tr>    <td width="100%" valign="top">      <li class="detailTblBullet">    <a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=301137.1">    OS Watcher User's Guide</a></li>      <li class="detailTblBullet">    <a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=352363.1">    LTOM - The On-Board Monitor User's Guide</a></li>  </table></td></tr></table> <table width="100%" border="0" cellspacing="1" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">   <tr>     <td width="2%" valign="top" align="left">&nbsp;</td>     <td width="98%">     <p class="detailHdrTxt"><a name="Gather RDA Report">Gather RDA Report</a></p><hr class="detailLine">     </td>   </tr> </table> <table width="100%" border="0" cellspacing="1" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">   <tr>       <td width="75%" valign="top"><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="3%"  class="detailMainTxt">&nbsp;</td>    <td width="97%" class="detailMainTxt">The RDA will collect many different bits of data about your system that will be used at various points of this effort.  Please read the <a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=330364.1">Remote Diagnostic Agent (RDA) 4 - Main Man Page</a> for more information.    </td>  </tr>  <tr>    <td width="3%" class="detailMainTxt">&nbsp;</td>    <td width="97%" class="detailMainTxt">&nbsp;</td>  </tr>  </table><br></td> <td width="25%" valign="top"><table width="100%" height="46" border="1" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#A6B3C8" bgcolor="#EEF3F7">  <tr>   <td width="100%">    <p align="left" class="detailTblHdr">Reference</td>  </tr>  <tr>    <td width="100%" valign="top">      <li class="detailTblBullet">    <a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=330364.1">    Remote Diagnostic Agent (RDA) 4 - Main Man Page</a></li>  </table></td></tr></table> <table width="100%" border="0" cellspacing="1" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">   <tr>     <td width="2%" valign="top" align="left">&nbsp;</td>     <td width="98%">     <p class="detailHdrTxt"><a name="Gather Application Logs (Optional)">Gather Application Logs (Optional)</a></p><hr class="detailLine">     </td>   </tr> </table> <table width="100%" border="0" cellspacing="1" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">   <tr>       <td width="75%" valign="top"><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="3%"  class="detailMainTxt">&nbsp;</td>    <td width="97%" class="detailMainTxt">Applications will often record when a call was made to the database and how long it took.  This can be valuable for determining if the database call is taking too long.  If the database calls are quick, then its possible that the problem is due to the client or network.  If database calls appear slow, then the problem could well be in the database.<br>
<br>
<b>Caution:</b>  Application logs are not always instrumented properly and they might incorrectly imply a slow database.  This can happen when:
<ul>
<li>The "call" to the database includes many other actions not directly involved with the call to Oracle</li>
<li>The client is on a slow machine where all calls are bogged down, including those to the database</li>
</ul>
Nevertheless, it is a good idea to obtain these logs to help diagnose the problem. Contact your application developer or administrator for information on how to enable and collect these logs.    </td>  </tr>  <tr>    <td width="3%" class="detailMainTxt">&nbsp;</td>    <td width="97%" class="detailMainTxt">&nbsp;</td>  </tr>  </table><p class="detailMainTxt">&nbsp;</p></td> <td width="25%" valign="top">&nbsp;</td></tr></table> <table width="100%" border="0" cellspacing="1" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">   <tr>     <td width="2%" valign="top" align="left">&nbsp;</td>     <td width="98%">     <p class="detailHdrTxt"><a name="Next Step - Analyze">Next Step - Analyze</a></p><hr class="detailLine">     </td>   </tr> </table> <table width="100%" border="0" cellspacing="1" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">   <tr>       <td width="75%" valign="top"><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="3%"  class="detailMainTxt">&nbsp;</td>    <td width="97%" class="detailMainTxt">When you have collected the data, click "NEXT" to receive guidance on analyzing the data to verify if the performance problem is with the database or external to it.    </td>  </tr>  <tr>    <td width="3%" class="detailMainTxt">&nbsp;</td>    <td width="97%" class="detailMainTxt">&nbsp;</td>  </tr>  </table><p class="detailMainTxt">&nbsp;</p></td> <td width="25%" valign="top">&nbsp;</td></tr></table><p class=pagebreak>&nbsp;</p>
<table width="100%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">		<tr>      <td width="100%" colspan="4">      <p class="htmlHdr"><a name="Slow Database &gt; Identify the Issue&nbsp; &gt; Analysis">Slow Database &gt; Identify the Issue&nbsp; &gt; Analysis</a></p>      <p class="htmlHdr">&nbsp;</p>		</td></tr>		</table><br> <table width="100%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">     <tr>     <td width="100%" class="detailMainTxt"><p>This step will analyze the data collected in the previous step to verify if the database is slow or the problem lies outside of the database.</p> </td>   </tr> </table> <br> <table width="100%" border="0" cellspacing="1" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">   <tr>     <td width="2%" valign="top" align="left">&nbsp;</td>     <td width="98%">     <p class="detailHdrTxt"><a name="Verify Oracle OS Resource Usage">Verify Oracle OS Resource Usage</a></p><hr class="detailLine">     </td>   </tr> </table> <table width="100%" border="0" cellspacing="1" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">   <tr>       <td width="75%" valign="top"><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="3%"  class="detailMainTxt">&nbsp;</td>    <td width="97%" class="detailMainTxt">This step will verify that:
<br>
<ul>
<li>There are enough CPU and memory resources for Oracle processes, or if not, then at least Oracle is using those resources and more detailed analysis of the database is required
<li>OR, non-Oracle processes are using most of the CPU or memory; this is not an Oracle tuning issue</li>
</ul>    </td>  </tr>  <tr>    <td width="3%" class="detailMainTxt">&nbsp;</td>    <td width="97%" class="detailMainTxt">&nbsp;</td>  </tr>  </table> <table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"> <tr> <td width="3%" class="detailMainTxt">&nbsp;</td> <td width="2%" valign="top" align="left">&nbsp;</td> <td width="95%" class="detailSubHdrTxt">Check CPU Consumption </td> </tr> <tr> <td width="3%" class="detailEmptyLayer">&nbsp;</td> <td width="2%" class="detailEmptyLayer">&nbsp;</td> <td width="95%"><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="100%" class="detailMainTxt">A system needs sufficient CPU for good, solid performance.  Analyze CPU utilization by answering the following questions:    </td>  </tr>  <tr>    <td width="100%" class="detailEmptyLine">&nbsp;</td>  </tr>  </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="1">Are CPU resources scarce?</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt">We will check CPU usage by looking for: <br>
<ul>
<li>Total CPU utilization (USER + SYS) should be less than 90%</li>
<ul>
<li>Batch or reporting applications can use higher CPU utilization to maximize throughput, but generally OLTP must have some headroom to permit a stable response time.</li>
</ul>
<br>
<li>Run queue size per CPU less than 4</li>
<ul>
<li>The run queue size is a very good indicator of CPU utilization problems.  In general, when the run queue per CPU is 4 or higher, the system may experience performance problems (of course, the higher the run queue size the worse the problem).  This is an indicator of how many processes must wait for a CPU on average and can be used as a gauge on the scarcity of CPU resources.</li>
</ul>
</ul>
Check CPU usage depending on how you collected OS data:<br>
<br>
<b>10gR2 Statspack Reports </b>
<br>
See the following section:<br>
<p class=detailTraceTxt>
<div style="BORDER-RIGHT: 1px solid; PADDING-RIGHT: 0.5em; BORDER-TOP: 1px solid; PADDING-LEFT: 0.5em; BACKGROUND: rgb(204,204,204) 0% 50%; PADDING-BOTTOM: 0.5em; MARGIN: 5px 20px 20px; OVERFLOW: auto; BORDER-LEFT: 1px solid; WIDTH: 95%; PADDING-TOP: 0.5em; BORDER-BOTTOM: 1px solid; moz-background-clip: initial; moz-background-inline-policy: initial; moz-background-origin: initial"><code class="awiz">
<pre>
Host CPU  (CPUs: 1)
~~~~~~~~              Load Average
                      Begin     End      User  System    Idle     WIO     WCPU
                    ------- -------   ------- ------- ------- ------- --------
                       2.83   <b>10.16     83.54   16.09</b>    0.37    0.24 #######
</pre></code></div>
The "Load Average" begin/end values will tell you the approximate run queue size per CPU.  In this case, it was around 10.16 (saturated).<br>
<br>
The "User" + "System" values will tell you the total CPU utilization.  In this case it was 99.63%  (83.54 + 16.09) (saturated).
</p>
<b>10gR1: AWR or Statspack Reports </b>
<ol>
<li>Go to the <i>OS Statistics</i> or <i>Operating System Statistics</i> section of the report, E.g.:</li>
<div style="BORDER-RIGHT: 1px solid; PADDING-RIGHT: 0.5em; BORDER-TOP: 1px solid; PADDING-LEFT: 0.5em; BACKGROUND: rgb(204,204,204) 0% 50%; PADDING-BOTTOM: 0.5em; MARGIN: 5px 20px 20px; OVERFLOW: auto; BORDER-LEFT: 1px solid; WIDTH: 95%; PADDING-TOP: 0.5em; BORDER-BOTTOM: 1px solid; moz-background-clip: initial; moz-background-inline-policy: initial; moz-background-origin: initial"><code class="awiz">
<pre>
OS Statistics  DB/Inst: DB10GR2/DB10gR2  Snaps: 20-21
-> ordered by statistic type (CPU use, Virtual Memory, Hardware Config), Name

Statistic                                  Total
------------------------- ----------------------
<b>BUSY_TIME                                 14,257</b>
IDLE_TIME                                     53
IOWAIT_TIME                                   34
SYS_TIME                                   2,302
USER_TIME                                 11,955
LOAD                                          10
<b>OS_CPU_WAIT_TIME                         156,500</b>
VM_IN_BYTES                                    0
PHYSICAL_MEMORY_BYTES              2,081,890,304
<b>NUM_CPUS                                       1</b>
</pre></code></div>
<li>Calculate CPU Utilization = 100% * BUSY_TIME / (BUSY_TIME + IDLE_TIME)<br></li>
<li>Approximate the run queue size per CPU as: <br>
RunQ/CPU = OS_CPU_WAIT_TIME / (NUM_CPUS *  BUSY_TIME)<br>
<br>
In this case, it was:<br>
<div style="BORDER-RIGHT: 1px solid; PADDING-RIGHT: 0.5em; BORDER-TOP: 1px solid; PADDING-LEFT: 0.5em; BACKGROUND: rgb(204,204,204) 0% 50%; PADDING-BOTTOM: 0.5em; MARGIN: 5px 20px 20px; OVERFLOW: auto; BORDER-LEFT: 1px solid; WIDTH: 95%; PADDING-TOP: 0.5em; BORDER-BOTTOM: 1px solid; moz-background-clip: initial; moz-background-inline-policy: initial; moz-background-origin: initial"><code class="awiz">
<pre>
	CPU Utilization = 100* 14257 / (14257 + 53) = 99.6%
	RunQ / CPU = 156500 / (1 * 14257) = 10.98
</pre></code></div>
</li>
</ol>
Note: in 10gR1, *_TIME was *_TICKS<br>
<br>
<b>Enterprise Manager</b>
<ol>
<li>In the <i>General</i> section of the database tab, click on the name of your host</li>
<li>On the host page, examine the chart for CPU utilization.  Select the "CPU Details" view from the pull-down menu.  This will show you charts of CPU utilization and CPU load.</li>
</ol>
<b>OS Watcher</b>
<ul>
<li>Graph the data using OSWg and inspect the CPU utilization and run queue charts.</li>
</ul>
<b>LTOM</b>
<ul>
<li>Use the LTOM profiler to generate the CPU charts</li>
</ul>

<br>
If CPU is not saturated, then proceed to check memory utilization below; otherwise check if Oracle processes are using most of the CPU in the next step.	</td>	</tr>	</table><br> </td> </tr> </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="2">What processes are using most of the CPU?</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt">Examine the data you collected to find out what kind of process is using most of the CPU.  The analysis method depends on which type of data you collected - see below:<br>
<br>
<br>
<b>10gR2 Statspack</b><br>
<br>
Look for this section:<br>
<div style="BORDER-RIGHT: 1px solid; PADDING-RIGHT: 0.5em; BORDER-TOP: 1px solid; PADDING-LEFT: 0.5em; BACKGROUND: rgb(204,204,204) 0% 50%; PADDING-BOTTOM: 0.5em; MARGIN: 5px 20px 20px; OVERFLOW: auto; BORDER-LEFT: 1px solid; WIDTH: 95%; PADDING-TOP: 0.5em; BORDER-BOTTOM: 1px solid; moz-background-clip: initial; moz-background-inline-policy: initial; moz-background-origin: initial"><code class="awiz">
<pre>
Instance CPU
~~~~~~~~~~~~
              % of total CPU for Instance:   74.27
              <b>% of busy  CPU for Instance:   74.55</b>
  %DB time waiting for CPU - Resource Mgr:
</pre></code></div>
The "% of busy  CPU for Instance" will tell you approximately how much of the host CPU is used by this instance.  In this case, it was 74.55%; this instance is the main cause for the host's CPU saturation.<br>
<br>
<br>
<b>10gR1 Statspack</b><br>
<br>
<ol>
<li>Obtain the total CPU utilized for the host (in cs): Find the <i>OS Statistics</i> section, <i>BUSY_TICKS</i></li>
<li>Obtain the total CPU utilized by the instance's foreground sessions (in cs): Find the <i>Instance Activity Stats</i> section, read the total value of the <i>CPU used by this session</i> statistic</li>
<li>Calculate % of busy CPU for instance = 100% * "CPU used by this session" / BUSY_TICKS </li>
</ol>
For example:<br>
<div style="BORDER-RIGHT: 1px solid; PADDING-RIGHT: 0.5em; BORDER-TOP: 1px solid; PADDING-LEFT: 0.5em; BACKGROUND: rgb(204,204,204) 0% 50%; PADDING-BOTTOM: 0.5em; MARGIN: 5px 20px 20px; OVERFLOW: auto; BORDER-LEFT: 1px solid; WIDTH: 95%; PADDING-TOP: 0.5em; BORDER-BOTTOM: 1px solid; moz-background-clip: initial; moz-background-inline-policy: initial; moz-background-origin: initial"><code class="awiz">
<pre>
	...
OS Statistics  DB/Inst: DB10GR2/DB10gR2  Snaps: 20-21
-> ordered by statistic type (CPU use, Virtual Memory, Hardware Config), Name

Statistic                                  Total
------------------------- ----------------------
<b>BUSY_TIME                                 14,257</b>
	...
	
Instance Activity Stats  DB/Inst: DB10GR2/DB10gR2  Snaps: 20-21

Statistic                                      Total     per Second    per Trans
--------------------------------- ------------------ -------------- ------------
<b>CPU used by this session                      10,724           75.5        446.8</b>
...	

</pre></code></div>	
In the example above,<br>
% CPU utilized by this instance = 100 * 10724 / 14257 = 75.2% <br>
<br>
If most of the CPU is used by this instance, then you have verified that Oracle is responsible for the CPU consumption.
<br>
<br>
<b>OSWatcher</b><br>
<br>
<ol>
<li>Navigate to the OSW archive directory and then to the directory with "top" reports, <i>oswtop</i></li>
<li>Examine the files there which correspond to the time of the performance problem; look at the top processes using CPU<br>
<br>
For example:<br>
<div style="BORDER-RIGHT: 1px solid; PADDING-RIGHT: 0.5em; BORDER-TOP: 1px solid; PADDING-LEFT: 0.5em; BACKGROUND: rgb(204,204,204) 0% 50%; PADDING-BOTTOM: 0.5em; MARGIN: 5px 20px 20px; OVERFLOW: auto; BORDER-LEFT: 1px solid; WIDTH: 95%; PADDING-TOP: 0.5em; BORDER-BOTTOM: 1px solid; moz-background-clip: initial; moz-background-inline-policy: initial; moz-background-origin: initial"><code class="awiz">
<pre>
	zzz ***Thu Feb 8 15:03:14 PST 2007
load averages:  3.57,  4.23,  3.32    15:03:15
105 processes: 98 sleeping, 6 running, 1 on cpu

Memory: 2048M real, 29M free, 4316M swap in use, 1847M swap free


   PID USERNAME THR PRI NICE  SIZE   RES STATE    TIME    CPU COMMAND<b>
 19003 oracle     1  32    0    0K    0K run      6:37 25.13% oracle
  6446 oracle     1   0    0    0K    0K run      0:05 21.31% oracle</b>
  1980 oracle    30  29   10  200M   53M sleep    1:23  4.83% java
  6408 oracle     1  59    0   26M   12M sleep    0:01  2.68% perl
 26471 oracle     1  59    0    0K    0K sleep    0:01  1.48% oracle
  6424 oracle     1  59    0    0K    0K sleep    0:00  0.81% oracle
   697 oracle    14  59   -5    0K    0K sleep  340:59  0.67% ocssd.bin
  6455 oracle     1  59    0    0K    0K sleep    0:00  0.56% oracle
 28744 oracle     1  59    0    0K    0K sleep    3:50  0.25% oracle
</pre></code></div>
The top two Oracle processes use around 46% of the CPU.  However, because <i>top</i> doesn't give complete information on the process, you'll still need to determine which instance the oracle processes belong to (if more than one on the machine).</li><br>
<br>
<li>If most of them are Oracle processes, then check which instance they belong to (if you have more than one instance on the machine)</li>
<li>Determine if they are all part of the same instance or not; you may have more than once instance that is affecting performance</li>
</ol>
If most of the CPU is used by this instance, then you have verified that Oracle is responsible for the CPU consumption.<br>
<br>
<br>
<b>LTOM Profiler</b><br>
<br>
Under construction<br>
<br>
<br>
<b>Enterprise Manager</b><br>
<br>
<ol>
<li>In the <i>General</i> section of the database tab, click on the name of your host</li>
<li>On the host page, click on the <i>Performance</i> tab</li>
<li>Review the list of processes in the <i>Process</i> section at the bottom of the page</li>
<li>If most of them are Oracle processes, then check which instance they belong to (if you have more than one instance on the machine)</li>
<li>Determine if they are all part of the same instance or not; you may have more than once instance that is affecting performance</li>
</ol>
If most of the CPU is used by this instance, then you have verified that Oracle is responsible for the CPU consumption.<br>
<br>
<b>Are Oracle processes using most of the CPU?</b><br>
<br>
<ul>
<li>If Oracle processes use most of the CPU, continue to the next item below to check memory consumption.</li><br>
<li>If non-Oracle processes are using most of the CPU, the problem appears to be outside of Oracle; this tuning effort should be aborted and the non-Oracle processes should be investigated or more CPUs should be added to the system.
</li>
</ul>	</td>	</tr>	</table><br> </td> </tr> </table> </td> </tr> <tr> <td width="100%" colspan="3" class="detailEmptyLine">&nbsp;</td> </tr> </table> <table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"> <tr> <td width="3%" class="detailMainTxt">&nbsp;</td> <td width="2%" valign="top" align="left">&nbsp;</td> <td width="95%" class="detailSubHdrTxt">Check Memory Consumption </td> </tr> <tr> <td width="3%" class="detailEmptyLayer">&nbsp;</td> <td width="2%" class="detailEmptyLayer">&nbsp;</td> <td width="95%"><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="100%" class="detailMainTxt">Database performance can be very slow and unpredictable when the system is short on memory.  Answer the two questions below to determine if there is a memory problem on your system.    </td>  </tr>  <tr>    <td width="100%" class="detailEmptyLine">&nbsp;</td>  </tr>  </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="1">Is there a memory shortage?</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt">Regardless of the tool used to collect the data, you will need to consider the following metrics when looking for a memory shortage:
<ul>
<li><b>Memory Utilization (% or free KB)</b>: measures how much physical memory has been allocated to processes.  When this is around 100% the system will utilize more and more swap; the severity of the shortage is evident by the following two metrics.</li><br>
<li><b>Memory Page Scan Rate (pages/s)</b>: a measure of how hard the page scanner is working to reclaim memory.  When this is in the hundreds/sec, its likely that there is a memory shortage.</li><br>
<li><b>Swap Utilization (% or free KB)</b>: how much of the swap device is being used.  As physical memory becomes scarce this percentage goes up.  Compare this value to a baseline to see if swap usage increased beyond a normal amount for the system.  As swap approaches 100% utilization, the memory crunch gets worse and the system becomes unstable (and could crash). </li>
</ul>
You are seeing a memory shortage If you see memory utilization close to 100%, the scan rate in the hundreds / sec, and a large percentage of the swap device utilized.<br>
<br>
These metrics can be seen using the following tools or data collection:<br>
<br>
<b>Enterprise Manager</b><br>
<ol>
<li>In the <i>General</i> section of the database tab, click on the name of your host</li>
<li>On the host page, examine the chart for memory utilization.  Select the "Memory Details" view from the pull-down menu.  This will show you charts of memory utilization, swap utilization, and page scanner activity.</li>
</ol>
<b>OS Watcher</b><br>
<ol>
<li>Use OSWg to create graphs of the OS data, specifically the memory graphs</li>
<li>Examine the graphs for "Memory: Available Swap" and "Memory: Scan Rate"</li>
</ol>
<b>LTOM Profiler</b><br>
<ol>
<li>Create an LTOM Profiler output directory</li>
<li>Click on the link for <i>Operating System Memory </i>
<li>Examine the graphs for "Memory: Available Swap" and "Memory: Scan Rate"</li>
</ol>
<br>
<br>
If there is NOT a memory shortage, then proceed to verify if the database is slow.  Otherwise, find the processes using memory with the following step.	</td>	</tr>	</table><br> </td> </tr> </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="2">What is using most of the memory?</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt">Determine which processes are using most of the memory (Oracle or non-Oracle) using the following methods/data collection.<br>
<br>
<b>10gR2 Statspack</b><br>
<ol>
<li>Look for this section:
<div style="BORDER-RIGHT: 1px solid; PADDING-RIGHT: 0.5em; BORDER-TOP: 1px solid; PADDING-LEFT: 0.5em; BACKGROUND: rgb(204,204,204) 0% 50%; PADDING-BOTTOM: 0.5em; MARGIN: 5px 20px 20px; OVERFLOW: auto; BORDER-LEFT: 1px solid; WIDTH: 95%; PADDING-TOP: 0.5em; BORDER-BOTTOM: 1px solid; moz-background-clip: initial; moz-background-inline-policy: initial; moz-background-origin: initial"><code class="awiz">
<pre>
Memory Statistics                       Begin          End
~~~~~~~~~~~~~~~~~                ------------ ------------
                  Host Mem (MB):      1,985.4      1,985.4
                   SGA use (MB):        228.0        228.0
                   PGA use (MB):         55.4         54.5
    <b>% Host Mem used for SGA+PGA:         14.3         14.2</b>
</pre></code></div>
</li>
<li>If the value of "% Host Mem used for SGA+PGA" is high, then you have verified that this instance is responsible for the memory consumption</li>
</ol>
<br>
<b>Enterprise Manager</b><br>
<ol>
<li>In the <i>General</i> section of the database tab, click on the name of your host</li>
<li>On the host page, click on the <i>Performance</i> tab</li>
<li>Sort the list of processes in the <i>Process</i> section at the bottom of the page by "Memory Utilization %" (selectable in the "View by" dropdown list)</li>
<li>If most of them are Oracle processes, then check which instance they belong to (if you have more than one instance on the machine)</li>
<li>Determine if they are all part of the same instance or not; you may have more than once instance that is affecting performance</li>
</ol>
<br>
<b>OSWatcher</b><br>
<ol>
<li>Go to the OSWatcher "archive/oswps" directory; this directory has output of the "ps" command taken at every sample interval</li>
<li>Choose a ps output file during the performance problem</li>
<li>Look at one of the ps outputs that was obtained during the problem</li>
<div style="BORDER-RIGHT: 1px solid; PADDING-RIGHT: 0.5em; BORDER-TOP: 1px solid; PADDING-LEFT: 0.5em; BACKGROUND: rgb(204,204,204) 0% 50%; PADDING-BOTTOM: 0.5em; MARGIN: 5px 20px 20px; OVERFLOW: auto; BORDER-LEFT: 1px solid; WIDTH: 95%; PADDING-TOP: 0.5em; BORDER-BOTTOM: 1px solid; moz-background-clip: initial; moz-background-inline-policy: initial; moz-background-origin: initial"><code class="awiz">
<pre>
	zzz ***Thu Feb 8 15:00:08 PST 2007
 F S      UID   PID  PPID  C PRI NI     ADDR     SZ    WCHAN    STIME TTY      TIME CMD
 8 R   oracle 21150     1  0  79 20        ?    241          14:43:19 pts/5    0:00 /usr/bin/ksh ./OSWatcher.sh
 8 S   oracle 14258     1  0  40 20        ?  44958        ?   Jan 25 ?        0:01 ora_q001_DB10gR2
 8 O   oracle  4057  4055  0  69 20        ?    151          15:00:08 pts/5    0:00 ps -elf
 8 S   oracle 28748     1  0  40 20        ?  34961        ? 16:19:40 ?        0:00 ora_d000_DB9iR2
<b> 8 R   oracle 19003 19002 27  77 20        ? 439930          14:41:33 ?        5:49 oracleDB10gR2 (DESCRIPTION=(LOCAL=Y</b>
 8 S   oracle  8842     1  0  40 20        ?   4017        ?   Dec 26 ?        0:41 /u01/app/oracle/product/DB10gR2/bin
 8 S   oracle  4048  4045  0  59 20        ?    173        ? 15:00:08 pts/5    0:00 iostat -xn 1 3
</pre></code></div>
<li>Sort the processes by the  "SZ" column to see which ones are using the most memory (this includes mapped shared memory so care must be taken to subtract the size of the SGA from each value)</li>
<li>Determine if they are all part of the same instance or not; you may have more than once instance that is affecting performance</li>
</ol>
<br>
<b>Are Oracle processes using most of the memory?</b><br>
<br>
<ul>
<li>If Oracle processes use most of the memory, you have verified an Oracle performance problem.  Click NEXT to continue to the next phase, "Determine a Cause" and proceed to: Analysis > Choose a Tuning Strategy > Oracle Memory Consumption.</li><br>
<li>If non-Oracle processes are using most of the memory, the problem appears to be outside of Oracle; this tuning effort should be aborted and the non-Oracle processes should be investigated or more memory should be added to the system.</li>
</ul>	</td>	</tr>	</table><br> </td> </tr> </table> </td> </tr> <tr> <td width="100%" colspan="3" class="detailEmptyLine">&nbsp;</td> </tr> </table><br></td> <td width="25%" valign="top"><table width="100%" height="46" border="1" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#A6B3C8" bgcolor="#EEF3F7">  <tr>   <td width="100%">    <p align="left" class="detailTblHdr">Scripts and Tools</td>  </tr>  <tr>    <td width="100%" valign="top">      <li class="detailTblBullet">    <a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/em.102/b31949/host_3rdparty_management.htm#sthref1530">    Oracle Enterprise Manager Concepts, Host Performance Page</a></li>      <li class="detailTblBullet">    <a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=461053.1">    OSWg User's Guide</a></li>      <li class="detailTblBullet">    <a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=301137.1">    OS Watcher User's Guide</a></li>      <li class="detailTblBullet">    <a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=352363.1">    LTOM - The On-Board Monitor User's Guide</a></li>  </table></td></tr></table> <table width="100%" border="0" cellspacing="1" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">   <tr>     <td width="2%" valign="top" align="left">&nbsp;</td>     <td width="98%">     <p class="detailHdrTxt"><a name="Verify The Database is Slow">Verify The Database is Slow</a></p><hr class="detailLine">     </td>   </tr> </table> <table width="100%" border="0" cellspacing="1" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">   <tr>       <td width="75%" valign="top"><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="3%"  class="detailMainTxt">&nbsp;</td>    <td width="97%" class="detailMainTxt">A performance problem may appear to be due to the database but may actually be caused by a slow client (usually middle-tier) or network.  This step will help you verify if the database is really the cause for the slow performance, or if you should look elsewhere.<br>
<br>
The main idea in these comparison is to compare the total "DB Time" between the "good" and "bad" reports.  DB Time is the total time spent in the database either working (using CPU) or waiting for a non-idle event.  When there is a performance problem, DB Time increases (usually because there are many more sessions waiting for non-idle events).<br>
<br>
Analyze the following reports depending on what you've collected in the previous step:<br>    </td>  </tr>  <tr>    <td width="3%" class="detailMainTxt">&nbsp;</td>    <td width="97%" class="detailMainTxt">&nbsp;</td>  </tr>  </table> <table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"> <tr> <td width="3%" class="detailMainTxt">&nbsp;</td> <td width="2%" valign="top" align="left">&nbsp;</td> <td width="95%" class="detailSubHdrTxt">Analyze the ASH, AWR, or Statspack Reports </td> </tr> <tr> <td width="3%" class="detailEmptyLayer">&nbsp;</td> <td width="2%" class="detailEmptyLayer">&nbsp;</td> <td width="95%"><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="100%" class="detailMainTxt">Analyze the ASH , AWR, or statspack reports you collected to verify if the database is causing the performance problem.<br>
<br>
Choose <b>one</b> of the following analysis methods, depending on what you've collected:<br>    </td>  </tr>  <tr>    <td width="100%" class="detailEmptyLine">&nbsp;</td>  </tr>  </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="1">10.2.x: Compare ASH Reports Between Good and Bad Performance Periods</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt">Compare the <i>average active sessions</i> in an ASH report during good performance and bad performance.  The average active sessions will show you how many sessions were either on CPU or waiting for a non-idle event.  When performance is bad due to the database, the number of active sessions will be higher than when performance was good.  This is because when there is some resource bottleneck, more sessions will need to actively wait for that resource and this increases the number active sessions.<br>
<br>
For example, here is an ASH report summary for a database during a busy period when performance was good:<br>
<br>
<div style="BORDER-RIGHT: 1px solid; PADDING-RIGHT: 0.5em; BORDER-TOP: 1px solid; PADDING-LEFT: 0.5em; BACKGROUND: rgb(204,204,204) 0% 50%; PADDING-BOTTOM: 0.5em; MARGIN: 5px 20px 20px; OVERFLOW: auto; BORDER-LEFT: 1px solid; WIDTH: 95%; PADDING-TOP: 0.5em; BORDER-BOTTOM: 1px solid; moz-background-clip: initial; moz-background-inline-policy: initial; moz-background-origin: initial"><code class="awiz">
<pre>
          Analysis Begin Time:   13-Feb-07 10:28:03
            Analysis End Time:   13-Feb-07 10:43:03
                 Elapsed Time:        15.0 (mins)
                 Sample Count:       2,387
      <b>Average Active Sessions:        2.65</b>
  Avg. Active Session per CPU:        2.65
                Report Target:   None specified

Top User Events              DB/Inst: DB10GR2/DB10gR2  (Feb 13 10:28 to 10:43)

                                                               Avg Active
Event                               Event Class     % Activity   Sessions
----------------------------------- --------------- ---------- ----------
db file sequential read             User I/O             40.13       1.06
db file parallel read               User I/O             29.91       0.79
CPU + Wait for CPU                  CPU                   8.97       0.24
          -------------------------------------------------------------
</pre></code></div>
<br>
Here is the same server and application during a period of bad performance:<br>
<div style="BORDER-RIGHT: 1px solid; PADDING-RIGHT: 0.5em; BORDER-TOP: 1px solid; PADDING-LEFT: 0.5em; BACKGROUND: rgb(204,204,204) 0% 50%; PADDING-BOTTOM: 0.5em; MARGIN: 5px 20px 20px; OVERFLOW: auto; BORDER-LEFT: 1px solid; WIDTH: 95%; PADDING-TOP: 0.5em; BORDER-BOTTOM: 1px solid; moz-background-clip: initial; moz-background-inline-policy: initial; moz-background-origin: initial"><code class="awiz">
<pre>
          Analysis Begin Time:   12-Feb-07 15:12:49
            Analysis End Time:   12-Feb-07 15:27:55
                 Elapsed Time:        15.1 (mins)
                 Sample Count:       9,161
      <b>Average Active Sessions:       10.11</b>
  Avg. Active Session per CPU:       10.11
                Report Target:   None specified

Top User Events              DB/Inst: DB10GR2/DB10gR2  (Feb 12 15:12 to 15:27)

                                                               Avg Active
Event                               Event Class     % Activity   Sessions
----------------------------------- --------------- ---------- ----------
read by other session               User I/O             53.40       5.40
CPU + Wait for CPU                  CPU                  37.24       3.77
db file scattered read              User I/O              4.90       0.50
          -------------------------------------------------------------
</pre></code></div>
<br>
Notice the increase in the <i>Average Active Sessions</i> when performance was bad - it is about a 5X increase (from 2.65 to 10.11).  Notice also the change in the <i>Top User Events</i>; the main waits went from <i>db file sequential read</i> to <i>read by other session</i> and <i>CPU + Wait for CPU</i> along with <i>db file scattered read</i>.  This was due to an index being dropped on an important table.  A query that normally used the index was performing full table scans during the period of bad performance.	</td>	</tr>	</table><br> </td> </tr> </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="2">10.2.x: Use AWR Diff Report to Compare Good and Bad Performance Periods</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt"><ol>
<li>Use the AWR difference script (using $OH/rdbms/admin/awrddrpt.sql) to generate a report</li>
<li>Check if DBTime increased during bad period (shown in the top of the report or in the "Time Model" section)<br>
	<br>
	For example:<br>
<div style="BORDER-RIGHT: 1px solid; PADDING-RIGHT: 0.5em; BORDER-TOP: 1px solid; PADDING-LEFT: 0.5em; BACKGROUND: rgb(204,204,204) 0% 50%; PADDING-BOTTOM: 0.5em; MARGIN: 5px 20px 20px; OVERFLOW: auto; BORDER-LEFT: 1px solid; WIDTH: 95%; PADDING-TOP: 0.5em; BORDER-BOTTOM: 1px solid; moz-background-clip: initial; moz-background-inline-policy: initial; moz-background-origin: initial"><code class="awiz">
<pre>
Snapshot Set  Begin Snap Id ...      Elapsed Time (min)       <b>DB Time (min)</b>    Avg Active Users
------------ -------------- ... -------------------------- ---------------- -------------------
1st                    2519 ...                      60.27             <b>1.62</b>                 0.03
2nd                    2518 ...                      59.54            <b>17.48</b>                 0.29
</pre></code></div>  
<b>Note: You must compare snapshot periods of the same length!</b></li>
</ol>	</td>	</tr>	</table><br> </td> </tr> </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="3">10.1.x or higher: Compare AWR Reports Between Good and Bad Performance Periods</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt"><ol>
<li>Generate an AWR report (using $OH/rdbms/admin/awrrpt.sql) for the good and bad periods</li>
<li>In the <i>Time Model Statistics</i> section, look for "DB TIME" in each report<br>
	<br>
	For example:<br>
	<div style="BORDER-RIGHT: 1px solid; PADDING-RIGHT: 0.5em; BORDER-TOP: 1px solid; PADDING-LEFT: 0.5em; BACKGROUND: rgb(204,204,204) 0% 50%; PADDING-BOTTOM: 0.5em; MARGIN: 5px 20px 20px; OVERFLOW: auto; BORDER-LEFT: 1px solid; WIDTH: 95%; PADDING-TOP: 0.5em; BORDER-BOTTOM: 1px solid; moz-background-clip: initial; moz-background-inline-policy: initial; moz-background-origin: initial"><code class="awiz">
<pre>
Time Model Statistics              DB/Inst: DB10GR2/DB10gR2  Snaps: 2468-2469
-> <b>Total time in database user-calls (DB Time): 14.2s</b>
-> Statistics including the word "background" measure background process
   time, and so do not contribute to the DB time statistic
-> Ordered by % or DB time desc, Statistic name

Statistic Name                                       Time (s) % of DB Time
------------------------------------------ ------------------ ------------
sql execute elapsed time                                 14.1         99.2
DB CPU                                                   10.0         70.6
parse time elapsed                                        7.9         56.0
hard parse elapsed time                                   7.4         52.0
hard parse (sharing criteria) elapsed time                1.3          9.5
PL/SQL execution elapsed time                             1.1          8.0
sequence load elapsed time                                0.0           .2
repeated bind elapsed time                                0.0           .1
hard parse (bind mismatch) elapsed time                   0.0           .0
<b>DB time                                                  14.2          N/A</b>
          -------------------------------------------------------------
</pre></code></div>  
	</li>
<li>Check if DBTime increased during bad period</li>
</ul>	</td>	</tr>	</table><br> </td> </tr> </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="4">Compare Statspack Reports Between Good and Bad Performance Periods</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt">Manually compare the files to see if the total DB Time increased during the bad period.  Do this for <b>both</b> good and bad periods:<br>
<ol>
<li>Generate a statspack report (using $OH/rdbms/admin/spreport) </li>
<li>Determine the total DB Time:<br>
	<br>
	<u>10g or higher statspack:</u><br>
	<br>
	Use the <i>Time Model</i> statistics:<br>
<div style="BORDER-RIGHT: 1px solid; PADDING-RIGHT: 0.5em; BORDER-TOP: 1px solid; PADDING-LEFT: 0.5em; BACKGROUND: rgb(204,204,204) 0% 50%; PADDING-BOTTOM: 0.5em; MARGIN: 5px 20px 20px; OVERFLOW: auto; BORDER-LEFT: 1px solid; WIDTH: 95%; PADDING-TOP: 0.5em; BORDER-BOTTOM: 1px solid; moz-background-clip: initial; moz-background-inline-policy: initial; moz-background-origin: initial"><code class="awiz">
<pre>
Time Model System Stats  DB/Inst: DB10GR2/DB10gR2  Snaps: 31-32
-> Ordered by % of DB time desc, Statistic name

Statistic                                       Time (s) % of DB time
----------------------------------- -------------------- ------------
sql execute elapsed time                            11.3         99.8
DB CPU                                               6.6         58.0
parse time elapsed                                   5.2         45.7
hard parse elapsed time                              5.1         45.1
PL/SQL execution elapsed time                        0.0           .2
repeated bind elapsed time                           0.0           .1
<b>DB time                                             11.3</b>
          -------------------------------------------------------------
</pre></code></div>  
<br>
<u>Any version of statspack:</u><br>
<br>
Calculate "Total DB Time" by adding the top 5 non-idle, <i>foreground</i> timed events</li>
<div style="BORDER-RIGHT: 1px solid; PADDING-RIGHT: 0.5em; BORDER-TOP: 1px solid; PADDING-LEFT: 0.5em; BACKGROUND: rgb(204,204,204) 0% 50%; PADDING-BOTTOM: 0.5em; MARGIN: 5px 20px 20px; OVERFLOW: auto; BORDER-LEFT: 1px solid; WIDTH: 95%; PADDING-TOP: 0.5em; BORDER-BOTTOM: 1px solid; moz-background-clip: initial; moz-background-inline-policy: initial; moz-background-origin: initial"><code class="awiz">
<pre>
Top 5 Timed Events                                                    Avg %Total
~~~~~~~~~~~~~~~~~~                                                   wait   Call
Event                                            Waits    Time (s)   (ms)   Time
----------------------------------------- ------------ ----------- ------ ------
CPU time                                                         7          84.1
db file sequential read                            325           1      2    9.1
log file parallel write                             12           0     17    2.6
control file parallel write                          7           0     22    1.9
SQL*Net break/reset to client                        6           0     19    1.4
          -------------------------------------------------------------
</pre></code></div>

Foreground (FG)</i> event time can be estimated by subtracting the <i>Background (BG)</i> wait time for each event you see in the top 5 timed events.  Some events will not have a BG component; in general you can ignore BG events for a quick estimate.<br>
	<br>
	For example, for the Top 5 Timed Events above, here were the foreground and background waits:<br>
<div style="BORDER-RIGHT: 1px solid; PADDING-RIGHT: 0.5em; BORDER-TOP: 1px solid; PADDING-LEFT: 0.5em; BACKGROUND: rgb(204,204,204) 0% 50%; PADDING-BOTTOM: 0.5em; MARGIN: 5px 20px 20px; OVERFLOW: auto; BORDER-LEFT: 1px solid; WIDTH: 95%; PADDING-TOP: 0.5em; BORDER-BOTTOM: 1px solid; moz-background-clip: initial; moz-background-inline-policy: initial; moz-background-origin: initial"><code class="awiz">	
<pre>	
Wait Events  DB/Inst: DB10GR2/DB10gR2  Snaps: 31-32

                                                                    Avg
                                                %Time Total Wait   wait    Waits
Event                                    Waits  -outs   Time (s)   (ms)     /txn
--------------------------------- ------------ ------ ---------- ------ --------
db file sequential read                    325      0          1      2     29.5
<b>log file parallel write                     12      0          0     17      1.1 &lt== has BG event component
control file parallel write                  7      0          0     22      0.6 &lt== has BG event component</b>
SQL*Net break/reset to client                6      0          0     19      0.5
log file sync                                8      0          0      4      0.7
. . .

Background Wait Events  DB/Inst: DB10GR2/DB10gR2  Snaps: 31-32
-> %Timeouts:  value of 0 indicates value was < .5%.  Value of null is truly 0
-> Only events with Total Wait Time (s) >= .001 are shown
-> ordered by Total Wait Time desc, Waits desc (idle events last)

                                                                    Avg
                                                %Time Total Wait   wait    Waits
Event                                    Waits  -outs   Time (s)   (ms)     /txn
--------------------------------- ------------ ------ ---------- ------ --------
<b>log file parallel write                     13      0          0     17      1.2
control file parallel write                  7      0          0     22      0.6</b>
. . .	
</pre></code></div>
The <i>log file parallel write</i> and <i>control file parallel write</i> events are 100% background events.  That means the total DB Time can 
be approximated as: <br>
<i>Est. Total DB Time = CPU time (7 sec) + db file sequential read (1 sec)</i> = 8 seconds<br>
<br>
</li>  
<li>Check if DBTime increased during bad period</li>
</ol>
<i>




	</td>	</tr>	</table><br> </td> </tr> </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="5">Analyze a Single Statspack / AWR Report</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt">Using a single statspack is not reliable for issue verification; if you decide to use this, please be advised that there is a chance the problem is outside of the database and your tuning efforts may be wasted.<br>
<br>
With a single statspack, we can look at the type of timed events that are in the "Top 5" and see if they're "unhealthy", e.g., concurrency or RAC waits:<br>
<br>
Some unhealthy events are:
<ul>
<li>Enqueues</li>
<li>Latches</li>
<li>Buffer busy waits</li>
<li>Row cache lock waits</li>
<li>Free buffer waits</li>
<li>RAC waits (having to do with GC)</li>
<li>Library cache lock or pin waits</li>
<li>Shared cursor S to X waits</li>
</ul>
Unhealthy events need more diagnostic effort to determine what is causing them.  E.g., a library cache latch problem will not be solved by tuning a query to perform fewer buffer gets.  Solutions to these type of problems are sometimes difficult to implement; e.g., rewrite parts of the application to avoid locking conflicts.<br>
<br>
<br>
Some "healthy" events are:
<ul>
<li>CPU</li>
<li>db file sequential read</li>
<li>db file scattered read</li>
<li>direct path read</li>
<li>direct path write</li>
</ul>
<br>
The presence of healthy events mean that you will need to either add capacity like CPUs or I/O, or maybe tune the SQL.  Either way, the solution is achievable  by some common solutions.	</td>	</tr>	</table><br> </td> </tr> </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="100%" class="detailMainTxt"><br>
<b>How to Proceed</b>
<br>
<ul>
<li>If DBTime is greater during bad period, it is likely the database is causing the problem; you have verified the problem is in the database.
<ul>
<li>Note where the database is spending its time: CPU or top few wait events</li>
<li>click the NEXT button to proceed to the next step </li>
</ul>
</li>
<br>
<li>Otherwise, check the clients / mid-tiers.  Ideally, the client or mid-tiers have a diagnostic log with timing data for calls made to the database.  Read this log to see the database performance from the client's point of view.</li><br>
<li>If no bottlenecks are found in the clients / mid-tiers (no CPU or memory bottlenecks), you may continue with this process and assume the database has the performance problem.  An extended SQL trace (see the next phase of this process) will be very important for finding the cause.</li>
<ul>
<li>Note where the database is spending its time: CPU or top few wait events</li>
<li>click the NEXT button to proceed to the next step </li>
</ul>
</ul> </td> </tr> <tr> <td width="100%" class="detailEmptyLine">&nbsp;</td>  </tr>  </table> </td> </tr> <tr> <td width="100%" colspan="3" class="detailEmptyLine">&nbsp;</td> </tr> </table> <table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"> <tr> <td width="3%" class="detailMainTxt">&nbsp;</td> <td width="2%" valign="top" align="left">&nbsp;</td> <td width="95%" class="detailSubHdrTxt">Analyze the Extended SQL Trace </td> </tr> <tr> <td width="3%" class="detailEmptyLayer">&nbsp;</td> <td width="2%" class="detailEmptyLayer">&nbsp;</td> <td width="95%"><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="100%" class="detailMainTxt"><br>Analyze the SQL trace data you collected to verify if the database is causing the performance problem.     </td>  </tr>  <tr>    <td width="100%" class="detailEmptyLine">&nbsp;</td>  </tr>  </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="1">Preferred: Compare Two TKProfs (Good and Bad Performance)</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt">We can verify if the database is the cause of the performance problem by comparing the same operation's trace files when performance was good and when it was bad.<br>
<br>
Follow this process to verify the database has a performance problem :<br>
<ol type="a">
<li>Start with the "good-performing" trace file</li>
<br>
<li>Go to the end of the TKProf and note the values for the following <b>(for both non-recursive and recursive)</b>:
<ul>
<li>total elapsed time</li>
<li>total calls </li>
<li>idle time, i.e., SQL*Net Message from client wait, total waited</li>
<li>total number of rows returned </li>
</ul>
</li>
<br>
<li>Derive the following metrics:
<ul>
<li><b>elapsed time / call </b> = (total elapsed recursive + total elapsed non-rec) / total calls </li>
<li><b>rows / call </b> = total rows / total calls </li>
<li><b>total idle time / call</b> =[ idle time (non-recursive) + idle time (recursive)] / total calls </li>
</ul>
<br>
</li>
<li>Repeat steps (b) and (c) for the "bad-performing" trace file<br>
<br>
</li>
<li>Compare each of the derived metrics between the "good" trace and "bad" trace and see which are higher, similar, or lower</li>
<br>
<br>
<li>Look in the table for the combination of symptoms that matches what you see in your comparison:<br>
</li>
</ol>
<br>
<table border=0 cellspacing=0 cellpadding=0 width=480 style='width:5.0in;
 border-collapse:collapse;mso-padding-alt:0in 0in 0in 0in'>
 <tr style='height:27.75pt'>
  <td width=129 nowrap valign=bottom style='width:97.0pt;border:solid windowtext 1.0pt;
  background:#6C84FA;padding:.75pt .75pt 0in .75pt;height:27.75pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-size:9.0pt;font-family:Arial'>Elapsed Time / Call</span></b><b><span
  style='font-size:9.0pt;font-family:Arial;mso-fareast-font-family:"Arial Unicode MS"'><o:p></o:p></span></b></p>
  </td>
  <td width=100 nowrap valign=bottom style='width:75.0pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext 1.0pt;background:#6C84FA;
  padding:.75pt .75pt 0in .75pt;height:27.75pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-size:9.0pt;font-family:Arial'>Rows / Call</span></b><b><span
  style='font-size:9.0pt;font-family:Arial;mso-fareast-font-family:"Arial Unicode MS"'><o:p></o:p></span></b></p>
  </td>
  <td width=84 nowrap valign=bottom style='width:63.0pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext 1.0pt;background:#6C84FA;
  padding:.75pt .75pt 0in .75pt;height:27.75pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-size:9.0pt;font-family:Arial'>Total Idle Time</span></b><b><span
  style='font-size:9.0pt;font-family:Arial;mso-fareast-font-family:"Arial Unicode MS"'><o:p></o:p></span></b></p>
  </td>
  <td width=167 nowrap valign=bottom style='width:125.0pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext 1.0pt;background:#6C84FA;
  padding:.75pt .75pt 0in .75pt;height:27.75pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-size:9.0pt;font-family:Arial'>Verification Result</span></b><b><span
  style='font-size:9.0pt;font-family:Arial;mso-fareast-font-family:"Arial Unicode MS"'><o:p></o:p></span></b></p>
  </td>
 </tr>
 <tr style='height:12.75pt'>
  <td nowrap valign=bottom style='border-top:none;border-left:solid windowtext 1.0pt;
  border-bottom:solid windowtext .5pt;border-right:solid windowtext .5pt;
  mso-border-top-alt:solid windowtext 1.0pt;background:#99CCFF;padding:.75pt .75pt 0in .75pt;
  height:12.75pt'>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial'>Similar</span><span
  style='font-size:10.0pt;font-family:Arial;mso-fareast-font-family:"Arial Unicode MS"'><o:p></o:p></span></p>
  </td>
  <td nowrap valign=bottom style='border-top:none;border-left:none;border-bottom:
  solid windowtext .5pt;border-right:solid windowtext .5pt;mso-border-top-alt:
  solid windowtext 1.0pt;background:#99CCFF;padding:.75pt .75pt 0in .75pt;
  height:12.75pt'>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial'>Similar</span><span
  style='font-size:10.0pt;font-family:Arial;mso-fareast-font-family:"Arial Unicode MS"'><o:p></o:p></span></p>
  </td>
  <td nowrap valign=bottom style='border-top:none;border-left:none;border-bottom:
  solid windowtext .5pt;border-right:solid windowtext .5pt;mso-border-top-alt:
  solid windowtext 1.0pt;background:#99CCFF;padding:.75pt .75pt 0in .75pt;
  height:12.75pt'>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial'>Similar</span><span
  style='font-size:10.0pt;font-family:Arial;mso-fareast-font-family:"Arial Unicode MS"'><o:p></o:p></span></p>
  </td>
  <td nowrap valign=bottom style='border-top:none;border-left:none;border-bottom:
  solid windowtext .5pt;border-right:solid windowtext 1.0pt;mso-border-top-alt:
  solid windowtext 1.0pt;background:#E6E6E6;padding:.75pt .75pt 0in .75pt;
  height:12.75pt'>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial'>No
  Problem</span><span style='font-size:10.0pt;font-family:Arial;mso-fareast-font-family:
  "Arial Unicode MS"'><o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='height:12.75pt'>
  <td nowrap valign=bottom style='border-top:none;border-left:solid windowtext 1.0pt;
  border-bottom:solid windowtext .5pt;border-right:solid windowtext .5pt;
  mso-border-top-alt:solid windowtext .5pt;background:#99CCFF;padding:.75pt .75pt 0in .75pt;
  height:12.75pt'>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial'>Higher</span><span
  style='font-size:10.0pt;font-family:Arial;mso-fareast-font-family:"Arial Unicode MS"'><o:p></o:p></span></p>
  </td>
  <td nowrap valign=bottom style='border-top:none;border-left:none;border-bottom:
  solid windowtext .5pt;border-right:solid windowtext .5pt;mso-border-top-alt:
  solid windowtext .5pt;background:#99CCFF;padding:.75pt .75pt 0in .75pt;
  height:12.75pt'>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial'>Similar</span><span
  style='font-size:10.0pt;font-family:Arial;mso-fareast-font-family:"Arial Unicode MS"'><o:p></o:p></span></p>
  </td>
  <td nowrap valign=bottom style='border-top:none;border-left:none;border-bottom:
  solid windowtext .5pt;border-right:solid windowtext .5pt;mso-border-top-alt:
  solid windowtext .5pt;background:#99CCFF;padding:.75pt .75pt 0in .75pt;
  height:12.75pt'>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial'>Similar</span><span
  style='font-size:10.0pt;font-family:Arial;mso-fareast-font-family:"Arial Unicode MS"'><o:p></o:p></span></p>
  </td>
  <td nowrap valign=bottom style='border-top:none;border-left:none;border-bottom:
  solid windowtext .5pt;border-right:solid windowtext 1.0pt;mso-border-top-alt:
  solid windowtext .5pt;background:#E6E6E6;padding:.75pt .75pt 0in .75pt;
  height:12.75pt'>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial'>Database
  Problem</span><span style='font-size:10.0pt;font-family:Arial;mso-fareast-font-family:
  "Arial Unicode MS"'><o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='height:12.75pt'>
  <td nowrap valign=bottom style='border-top:none;border-left:solid windowtext 1.0pt;
  border-bottom:solid windowtext .5pt;border-right:solid windowtext .5pt;
  mso-border-top-alt:solid windowtext .5pt;background:#99CCFF;padding:.75pt .75pt 0in .75pt;
  height:12.75pt'>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial'>Similar</span><span
  style='font-size:10.0pt;font-family:Arial;mso-fareast-font-family:"Arial Unicode MS"'><o:p></o:p></span></p>
  </td>
  <td nowrap valign=bottom style='border-top:none;border-left:none;border-bottom:
  solid windowtext .5pt;border-right:solid windowtext .5pt;mso-border-top-alt:
  solid windowtext .5pt;background:#99CCFF;padding:.75pt .75pt 0in .75pt;
  height:12.75pt'>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial'>Similar</span><span
  style='font-size:10.0pt;font-family:Arial;mso-fareast-font-family:"Arial Unicode MS"'><o:p></o:p></span></p>
  </td>
  <td nowrap valign=bottom style='border-top:none;border-left:none;border-bottom:
  solid windowtext .5pt;border-right:solid windowtext .5pt;mso-border-top-alt:
  solid windowtext .5pt;background:#99CCFF;padding:.75pt .75pt 0in .75pt;
  height:12.75pt'>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial'>Higher</span><span
  style='font-size:10.0pt;font-family:Arial;mso-fareast-font-family:"Arial Unicode MS"'><o:p></o:p></span></p>
  </td>
  <td nowrap valign=bottom style='border-top:none;border-left:none;border-bottom:
  solid windowtext .5pt;border-right:solid windowtext 1.0pt;mso-border-top-alt:
  solid windowtext .5pt;background:#E6E6E6;padding:.75pt .75pt 0in .75pt;
  height:12.75pt'>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial'>Client
  Problem (General)</span><span style='font-size:10.0pt;font-family:Arial;
  mso-fareast-font-family:"Arial Unicode MS"'><o:p></o:p></span></p>
  </td>
 </tr>
 <tr style='height:13.5pt'>
  <td nowrap valign=bottom style='border-top:none;border-left:solid windowtext 1.0pt;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext .5pt;
  mso-border-top-alt:solid windowtext .5pt;background:#99CCFF;padding:.75pt .75pt 0in .75pt;
  height:13.5pt'>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial'>Similar or Higher</span><span
  style='font-size:10.0pt;font-family:Arial;mso-fareast-font-family:"Arial Unicode MS"'><o:p></o:p></span></p>
  </td>
  <td nowrap valign=bottom style='border-top:none;border-left:none;border-bottom:
  solid windowtext 1.0pt;border-right:solid windowtext .5pt;mso-border-top-alt:
  solid windowtext .5pt;background:#99CCFF;padding:.75pt .75pt 0in .75pt;
  height:13.5pt'>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial'>Lower</span><span
  style='font-size:10.0pt;font-family:Arial;mso-fareast-font-family:"Arial Unicode MS"'><o:p></o:p></span></p>
  </td>
  <td nowrap valign=bottom style='border-top:none;border-left:none;border-bottom:
  solid windowtext 1.0pt;border-right:solid windowtext .5pt;mso-border-top-alt:
  solid windowtext .5pt;background:#99CCFF;padding:.75pt .75pt 0in .75pt;
  height:13.5pt'>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial'>Higher</span><span
  style='font-size:10.0pt;font-family:Arial;mso-fareast-font-family:"Arial Unicode MS"'><o:p></o:p></span></p>
  </td>
  <td nowrap valign=bottom style='border-top:none;border-left:none;border-bottom:
  solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;mso-border-top-alt:
  solid windowtext .5pt;background:#E6E6E6;padding:.75pt .75pt 0in .75pt;
  height:13.5pt'>
  <p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial'>Client
  Problem (Arraysize)</span><span style='font-size:10.0pt;font-family:Arial;
  mso-fareast-font-family:"Arial Unicode MS"'><o:p></o:p></span></p>
  </td>
 </tr>
</table>
<br>
<br>
<b><u>Summary of Verification Results</u></b><br>
<br>
<i><b>No Problem</b></i>: The trace files were similar.  This indicates neither the database nor the database client appeared to be slow.  The problem may be in front of the database client / mid-tier; i.e., a user's browser or network might be slow.  <br>
<b>Stop the database tuning effort and instead focus on the clients.</b><br>
<br>
<i><b>Database Problem</b></i>:  The trace file comparison shows higher elapsed time per call which means the database is taking longer to do the same work.  <br>
<b>The database has been verified as the performance problem.  Click NEXT to determine a cause for this problem.</b><br>
<br>
<i><b>Client Problem (General)</b></i>:  The trace file comparison shows the database as being more idle and not taking more elapsed time per call.  This usually means either the database client or network is taking longer to send requests to the database, and hence appears slower from the end user's point of view.  <br>
<b>Stop the database tuning effort and instead investigate the database clients to see why they are slower.</b><br>
<br>
<i><b>Client Problem (Arraysize)</b></i>:  The client is processing fewer rows per call with the database.  This is ineffecient behavior because it introduces delays while more calls are needed to move rows in or out of the database from the client and causes the database to work harder (more logical reads, block pins, context switches, etc).  To fix this problem, the client will need to request more rows per call.  <br>
<b>Stop the database tuning effort and instead focus on the clients.</b><br>
<br>
<br>
<u><b>Analysis Example</b></u><br>
<br>
The following TKProf was collected during a period of <b>good</b> performance:<br>
<br>
<div style="BORDER-RIGHT: 1px solid; PADDING-RIGHT: 0.5em; BORDER-TOP: 1px solid; PADDING-LEFT: 0.5em; BACKGROUND: rgb(204,204,204) 0% 50%; PADDING-BOTTOM: 0.5em; MARGIN: 5px 20px 20px; OVERFLOW: auto; BORDER-LEFT: 1px solid; WIDTH: 95%; PADDING-TOP: 0.5em; BORDER-BOTTOM: 1px solid; moz-background-clip: initial; moz-background-inline-policy: initial; moz-background-origin: initial"><code class="awiz">
<pre>
. . .

********************************************************************************

OVERALL TOTALS FOR ALL <b>NON-RECURSIVE STATEMENTS</b>

call     count       cpu    elapsed       disk      query    current        rows
------- ------  -------- ---------- ---------- ---------- ----------  ----------
Parse        0      0.00       0.00          0          0          0           0
Execute      0      0.00       0.00          0          0          0           0
Fetch        0      0.00       0.00          0          0          0           0
------- ------  -------- ---------- ---------- ---------- ----------  ----------
total        0      0.00       <b>0.00</b>          0          0          0           0
                               <b>^
                         <i>total elapsed time</i></b>
                         
Misses in library cache during parse: 0

Elapsed times include waiting on following events:
  Event waited on                             Times   Max. Wait  Total Waited
  ----------------------------------------   Waited  ----------  ------------
  PL/SQL lock timer                             198        1.13        193.94


OVERALL TOTALS FOR ALL <b>RECURSIVE STATEMENTS</b>

call     count       cpu    elapsed       disk      query    current        rows
------- ------  -------- ---------- ---------- ---------- ----------  ----------
Parse        0      0.00       0.00          0          0          0           0
Execute   1964      1.23       5.88        184         38       3205         784
Fetch     1180      4.97      33.31       8185      51952          0       15886
------- ------  -------- ---------- ---------- ---------- ----------  ----------
total     <b>3144</b>      6.20      <b>39.19</b>       8369      51990       3205       <b>16670</b>
           <b>^                     ^                                           ^
      <i>total calls       total elapsed time                              total rows</i></b>
                         

Misses in library cache during parse: 0

<b>Elapsed times include waiting on following events:</b>
  Event waited on                             Times   Max. Wait  Total Waited
  ----------------------------------------   Waited  ----------  ------------
  db file sequential read                      1736        1.41         16.15
  db file parallel read                         821        0.96         13.36
  read by other session                           5        0.03          0.05

<b><i>*** no idle events for this session's trace ***</i></b>

    2  user  SQL statements in session.
    0  internal SQL statements in session.
    2  SQL statements in session.
********************************************************************************
</pre>
</code></div>

The derived metrics for the data collected in the previous example are:<br>
<div style="BORDER-RIGHT: 1px solid; PADDING-RIGHT: 0.5em; BORDER-TOP: 1px solid; PADDING-LEFT: 0.5em; BACKGROUND: rgb(204,204,204) 0% 50%; PADDING-BOTTOM: 0.5em; MARGIN: 5px 20px 20px; OVERFLOW: auto; BORDER-LEFT: 1px solid; WIDTH: 95%; PADDING-TOP: 0.5em; BORDER-BOTTOM: 1px solid; moz-background-clip: initial; moz-background-inline-policy: initial; moz-background-origin: initial"><code class="awiz">
elapsed time / call = 39.19 / 3144 = 0.0125 sec/call <br>
rows / call = 16670 / 3144 = 5.3 rows/call<br>
total idle time / call = 0 / 3144 =  0 secs / call<br>

</code></div>

The derived metrics for the data collected during the <b>bad</b> period (not shown) are:<br>
<br>
<div style="BORDER-RIGHT: 1px solid; PADDING-RIGHT: 0.5em; BORDER-TOP: 1px solid; PADDING-LEFT: 0.5em; BACKGROUND: rgb(204,204,204) 0% 50%; PADDING-BOTTOM: 0.5em; MARGIN: 5px 20px 20px; OVERFLOW: auto; BORDER-LEFT: 1px solid; WIDTH: 95%; PADDING-TOP: 0.5em; BORDER-BOTTOM: 1px solid; moz-background-clip: initial; moz-background-inline-policy: initial; moz-background-origin: initial"><code class="awiz">

elapsed time / call = 284.16  / 90 = 3.16 sec/call <br>
rows / call = 440 / 90 = 4.89 rows/call<br>
total idle time / call = 0 / 90 = 0 secs<br>

</code></div>
Note: both TKProfs were based on trace files for the same amount of time (5 minutes) of a typical session.<br>
<br>
When we compare the good and bad TKProfs we get:<br>
<br>

<div style="BORDER-RIGHT: 1px solid; PADDING-RIGHT: 0.5em; BORDER-TOP: 1px solid; PADDING-LEFT: 0.5em; BACKGROUND: rgb(204,204,204) 0% 50%; PADDING-BOTTOM: 0.5em; MARGIN: 5px 20px 20px; OVERFLOW: auto; BORDER-LEFT: 1px solid; WIDTH: 95%; PADDING-TOP: 0.5em; BORDER-BOTTOM: 1px solid; moz-background-clip: initial; moz-background-inline-policy: initial; moz-background-origin: initial"><code class="awiz">
elapsed time / call was HIGHER (0.0125 vs. 3.16)<br>
rows / call was SIMILAR (5.3 vs. 4.89)<br>
total idle time / call  was SIMILAR (0 vs. 0) 
</code></div>

<br>
We conclude this was a DATABASE PROBLEM (higher, similar, similar) after looking up the combination of symptoms in the table above.<br>
	</td>	</tr>	</table><br> </td> </tr> </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="2">Alternative: Analyze One TKProf (Bad Performance)</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt">This method is not as accurate as comparing two trace files, but we can usually get a good idea if the database is causing most of the problem or not.  For this analysis we will review just the trace of the bad performing case and look for how much time was spent in the database versus waiting for a client.<br>
<br>
Follow this process to verify the database has a performance problem :<br>
<ol type="a">
<li>Go to the end of the TKProf and note the values for the following <b>(for both non-recursive and recursive)</b>:
<ul>
<li>total elapsed time</li>
<li>idle time, i.e., SQL*Net Message from client wait, total waited</li>
</ul>
</li>
<br>
<li>Derive the following metrics:
<ul>
<li><b>total DB elapsed time</b> = total elapsed time (non-recursive) + total elapsed time (recursive) </li>
<li><b>total idle time</b> = idle time (non-recursive) + idle time (recursive) </li>
</ul>
</li>
</ol>
<b>Verification Result</b><br>
<br>
If the total DB elapsed time is greater than the total idle time, then the database is responsible for most of the time the session spent during the trace.  <br>
<b>The database has been verified as the performance problem.  Click NEXT to determine a cause for this problem.</b><br>
<br>
If the total elapsed time is less than the total idle time, then the client  is responsible for most the time the session spent during the trace. <br>
<b>Stop the database tuning effort and instead investigate the database clients to see why they are slower.</b> <br>
<br>Check the average number of rows per call (divide total rows by total calls) and see if it is less than 10.  Generally, a low number of rows / call indicates room for improvement with regard to array processing; larger array sizes should reduce the client and DB time (although if you make the arraysize too large, response time may suffer for OLTP applications).  Also, keep in mind that to really determine if the client time is significant, one must know how the application is being used, if the user's "think time" is expected and natural, and what is the expected database call time.<br>
<br>
Some typical causes and solutions for client waits can be found in this guide under:<br>
<i>Slow Database > Determine a Cause >Analysis > Reduce Client Bottlenecks</i>	</td>	</tr>	</table><br> </td> </tr> </table> </td> </tr> <tr> <td width="100%" colspan="3" class="detailEmptyLine">&nbsp;</td> </tr> </table><p class="detailMainTxt">&nbsp;</p></td> <td width="25%" valign="top">&nbsp;</td></tr></table> <table width="100%" border="0" cellspacing="1" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">   <tr>     <td width="2%" valign="top" align="left">&nbsp;</td>     <td width="98%">     <p class="detailHdrTxt"><a name="Next Step - Determine a Cause">Next Step - Determine a Cause</a></p><hr class="detailLine">     </td>   </tr> </table> <table width="100%" border="0" cellspacing="1" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">   <tr>       <td width="75%" valign="top"><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="3%"  class="detailMainTxt">&nbsp;</td>    <td width="97%" class="detailMainTxt">If the analysis above has verified the problem is with the database, click "NEXT" to move to the next phase of this process where you will receive guidance to determine a cause for the slow database performance.    </td>  </tr>  <tr>    <td width="3%" class="detailMainTxt">&nbsp;</td>    <td width="97%" class="detailMainTxt">&nbsp;</td>  </tr>  </table><p class="detailMainTxt">&nbsp;</p></td> <td width="25%" valign="top">&nbsp;</td></tr></table> <table width="100%" border="0" cellspacing="1" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">   <tr>     <td width="2%" valign="top" align="left">&nbsp;</td>     <td width="98%">     <p class="detailHdrTxt"><a name="Would You Like to Stop and Log a Service Request?">Would You Like to Stop and Log a Service Request?</a></p><hr class="detailLine">     </td>   </tr> </table> <table width="100%" border="0" cellspacing="1" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">   <tr>       <td width="75%" valign="top"><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="3%"  class="detailMainTxt">&nbsp;</td>    <td width="97%" class="detailMainTxt">
<p>We would encourage you to continue until at least the "Determine a Cause", "Data Collection" step, but If you would like to stop at this point and receive assistance from Oracle Support Services, please do the following:</p>
<ul>
<li>Please copy and paste the following into the SR:</li>
<blockquote>
<p>Last Diagnostic Step = Performance_Diagnostic_Guide.Slow_Database.Issue_Identification.Data_Collection</p>
</blockquote>
<li>Enter the problem statement and how the issue has been verified (if performed)</li>
<li>Gather the OS and database performance data and prepare to upload it to the SR</li>
<li>Optionally, gather an RDA</li>
<li>Gather other relevant information you may have such as timing data for typical queries</li>
</ul>
<p>The more data you collect ahead of time and upload to Oracle, the fewer round trips will be required for this data and the quicker the problem will be resolved.</p>
<p><a target="detailWindow" href="https://support.oracle.com/epmos/faces/SrCreate">Click here to log your service request</a></p>
    </td>  </tr>  <tr>    <td width="3%" class="detailMainTxt">&nbsp;</td>    <td width="97%" class="detailMainTxt">&nbsp;</td>  </tr>  </table><p class="detailMainTxt">&nbsp;</p></td> <td width="25%" valign="top">&nbsp;</td></tr></table><p class=pagebreak>&nbsp;</p>
<table width="100%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">		<tr>      <td width="100%" colspan="4">      <p class="htmlHdr"><a name="Slow Database &gt; Determine a Cause &gt;Overview">Slow Database &gt; Determine a Cause &gt;Overview</a></p>      <p class="htmlHdr">&nbsp;</p>		</td></tr>		</table><br> <table width="100%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">     <tr>     <td width="100%" class="detailMainTxt">At this point we have verified the slow database performance; now, we seek to determine the cause for this. The overall process for this is:
<br>
<br>
<b>Data Collection</b>
<ol>
<li>You will need the extended SQL trace you collected in the Issue Identification > Data Collection step, OR gather one now by: <br>
<ul>
<li> Identifying the top few sessions that are affected</li>
<li>Obtain an extended SQL trace of the top sessions</li>
</ul></li><br>
<li>Review the trace to confirm the main DB time components (CPU and/or waits) and how they compare to the overall components from the database-wide data gathered in the prior Issue Identification > Data Collection steps</li>
</ol>
<b>Analysis</b>
<ol>
<li>Look for common causes for the main DB time components</li>
<li>Review possible solutions for the likely cause</li>
<li>Implement the best solution</li>
<li>Verify that the solution solved the problem or more work is needed</li>
</ol>
Its very important to remember that every cause that is identified should be justified by the facts we have collected. If a cause cannot be justified, it should not be identified as a cause (i.e., we are not trying to guess at a solution).
 </td>   </tr> </table> <br><p class=pagebreak>&nbsp;</p>
<table width="100%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">		<tr>      <td width="100%" colspan="4">      <p class="htmlHdr"><a name="Slow Database &gt; Determine a Cause &gt;Data Collection">Slow Database &gt; Determine a Cause &gt;Data Collection</a></p>      <p class="htmlHdr">&nbsp;</p>		</td></tr>		</table><br> <table width="100%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">     <tr>     <td width="100%" class="detailMainTxt">
<p>This phase is very critical to resolving the query
performance problem because accurate data about the query's execution plan and underlying objects are essential for us to determine a cause for the slow performance.</p> </td>   </tr> </table> <br> <table width="100%" border="0" cellspacing="1" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">   <tr>     <td width="2%" valign="top" align="left">&nbsp;</td>     <td width="98%">     <p class="detailHdrTxt"><a name="Gather an Extended SQL Trace">Gather an Extended SQL Trace</a></p><hr class="detailLine">     </td>   </tr> </table> <table width="100%" border="0" cellspacing="1" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">   <tr>       <td width="75%" valign="top"><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="3%"  class="detailMainTxt">&nbsp;</td>    <td width="97%" class="detailMainTxt"><p>The extended SQL trace (10046 trace at level 12) will capture execution statistics of all SQL statements issued by 
a session during the trace.  It will show us how much time is being spent 
per statement, how much of the time was due to CPU or wait events, and 
what the bind values were. We will be able to see specifically which statements are running slower and which wait events may be applicable.</p>
For detailed information on how to use the 10046 trace event, see the "How To" article on the side called, <a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=376442.1">Recommended Method for Obtaining 10046 trace for Tuning</a><br>
<br>
<b>You may have already gathered the SQL trace in the prior data collection step if only a few sessions were affected; otherwise you will need to gather the data now.</b><br>
<br>
A summary of the steps needed to obtain the 10046 and TKProf are listed below:    </td>  </tr>  <tr>    <td width="3%" class="detailMainTxt">&nbsp;</td>    <td width="97%" class="detailMainTxt">&nbsp;</td>  </tr>  </table> <table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"> <tr> <td width="3%" class="detailMainTxt">&nbsp;</td> <td width="2%" valign="top" align="left">&nbsp;</td> <td width="95%" class="detailSubHdrTxt">Collecting the Trace </td> </tr> <tr> <td width="3%" class="detailEmptyLayer">&nbsp;</td> <td width="2%" class="detailEmptyLayer">&nbsp;</td> <td width="95%"><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="100%" class="detailMainTxt">The following process will help you collect SQL trace data properly:<br>    </td>  </tr>  <tr>    <td width="100%" class="detailEmptyLine">&nbsp;</td>  </tr>  </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="1">Choose a session to trace</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt"><b>Target the most important / impacted sessions</b>
<ul>
<li>Users that are experiencing the problem most severely; e.g., normally the transaction is complete in 1 sec, but now it takes 30 sec.</li>
<li>Users that are aggressively accumulating time in the database</li>
<br>
The following queries will allow you to find the sessions currently logged into the database that have accumulated the most time on CPU or for certain wait events.  Use them to identify potential sessions to trace using 10046.<br>
<br>
These queries are filtering the sessions based on logon times less than 4 hours and the last call occurring within 30 minutes.  This is to find more currently relevant sessions instead of long running ones that accumulate a lot of time but aren't having a performance problem.  You may need to adjust these values to suit your environment.<br>
<br>
<u>Find Sessions with the Highest CPU Consumption</u><br>
<br>
<div style="BORDER-RIGHT: 1px solid; PADDING-RIGHT: 0.5em; BORDER-TOP: 1px solid; PADDING-LEFT: 0.5em; BACKGROUND: rgb(204,204,204) 0% 50%; PADDING-BOTTOM: 0.5em; MARGIN: 5px 20px 20px; OVERFLOW: auto; BORDER-LEFT: 1px solid; WIDTH: 95%; PADDING-TOP: 0.5em; BORDER-BOTTOM: 1px solid; moz-background-clip: initial; moz-background-inline-policy: initial; moz-background-origin: initial"><code class="awiz">
<pre>
-- sessions with highest CPU consumption
SELECT s.sid, s.serial#, p.spid as "OS PID",s.username, s.module, st.value/100 as "CPU sec"
FROM v$sesstat st, v$statname sn, v$session s, v$process p
WHERE sn.name = 'CPU used by this session' -- CPU
AND st.statistic# = sn.statistic#
AND st.sid = s.sid
AND s.paddr = p.addr
AND s.last_call_et < 1800 -- active within last 1/2 hour
AND s.logon_time > (SYSDATE - 240/1440) -- sessions logged on within 4 hours
ORDER BY st.value;

       SID    SERIAL# OS PID       USERNAME             MODULE                                      CPU sec
---------- ---------- ------------ -------------------- ---------------------------------------- ----------
       141       1125 15315        SYS                  sqlplus@coehq2 (TNS V1-V3)                     8.25
       147        575 10577        SCOTT                SQL*Plus                                     258.08
       131        696 10578        SCOTT                SQL*Plus                                     263.17
       139        218 10576        SCOTT                SQL*Plus                                     264.08
       133        354 10583        SCOTT                SQL*Plus                                     265.79
       135        277 10586        SCOTT                SQL*Plus                                     268.02

</pre></code></div>
<br>
<u>Find Sessions with Highest Waits of a Certain Type</u><br>
<br>
<div style="BORDER-RIGHT: 1px solid; PADDING-RIGHT: 0.5em; BORDER-TOP: 1px solid; PADDING-LEFT: 0.5em; BACKGROUND: rgb(204,204,204) 0% 50%; PADDING-BOTTOM: 0.5em; MARGIN: 5px 20px 20px; OVERFLOW: auto; BORDER-LEFT: 1px solid; WIDTH: 95%; PADDING-TOP: 0.5em; BORDER-BOTTOM: 1px solid; moz-background-clip: initial; moz-background-inline-policy: initial; moz-background-origin: initial"><code class="awiz">
<pre>
-- sessions with the highest time for a certain wait
SELECT s.sid, s.serial#, p.spid as "OS PID", s.username, s.module, se.time_waited
FROM v$session_event se, v$session s, v$process p
WHERE se.event = '&event_name' 
AND s.last_call_et < 1800 -- active within last 1/2 hour
AND s.logon_time > (SYSDATE - 240/1440) -- sessions logged on within 4 hours
AND se.sid = s.sid
AND s.paddr = p.addr
ORDER BY se.time_waited;

SQL> /
Enter value for event_name: db file sequential read

       SID    SERIAL# OS PID       USERNAME             MODULE                                   TIME_WAITED
---------- ---------- ------------ -------------------- ---------------------------------------- -----------
       141       1125 15315        SYS                  sqlplus@coehq2 (TNS V1-V3)                         4
       147        575 10577        SCOTT                SQL*Plus                                       45215
       131        696 10578        SCOTT                SQL*Plus                                       45529
       135        277 10586        SCOTT                SQL*Plus                                       50288
       139        218 10576        SCOTT                SQL*Plus                                       51331
       133        354 10583        SCOTT                SQL*Plus                                       51428

</pre></code></div>

<u>10g or higher: Find Sessions with the Highest DB Time</u><br>
<br>
<div style="BORDER-RIGHT: 1px solid; PADDING-RIGHT: 0.5em; BORDER-TOP: 1px solid; PADDING-LEFT: 0.5em; BACKGROUND: rgb(204,204,204) 0% 50%; PADDING-BOTTOM: 0.5em; MARGIN: 5px 20px 20px; OVERFLOW: auto; BORDER-LEFT: 1px solid; WIDTH: 95%; PADDING-TOP: 0.5em; BORDER-BOTTOM: 1px solid; moz-background-clip: initial; moz-background-inline-policy: initial; moz-background-origin: initial"><code class="awiz">
<pre>
-- sessions with highest DB Time usage
SELECT s.sid, s.serial#, p.spid as "OS PID", s.username, s.module, st.value/100 as "DB Time (sec)"
, stcpu.value/100 as "CPU Time (sec)", round(stcpu.value / st.value * 100,2) as "% CPU"
FROM v$sesstat st, v$statname sn, v$session s, v$sesstat stcpu, v$statname sncpu, v$process p
WHERE sn.name = 'DB time' -- CPU
AND st.statistic# = sn.statistic#
AND st.sid = s.sid
AND  sncpu.name = 'CPU used by this session' -- CPU
AND stcpu.statistic# = sncpu.statistic#
AND stcpu.sid = st.sid
AND s.paddr = p.addr
AND s.last_call_et < 1800 -- active within last 1/2 hour
AND s.logon_time > (SYSDATE - 240/1440) -- sessions logged on within 4 hours
AND st.value > 0;

       SID    SERIAL# OS PID       USERNAME MODULE                                   DB Time (sec) CPU Time (sec)      % CPU
---------- ---------- ------------ -------- ---------------------------------------- ------------- -------------- ----------
       141       1125 15315        SYS      sqlplus@coehq2 (TNS V1-V3)                       12.92           9.34      72.29
</pre>
<br>
<b>Note: sometimes DB Time can be lower than CPU Time when a session issues long-running recursive calls.
The DB Time statistic doesn't update until the top-level call is finished (versus the CPU statistic that updates as each call completes).</b>
</code></div>
<br>
</ul>
<b>Obtain a complete trace</b>
<ul>
<li>Ideally, start the trace as soon as the user logs on and begins the operation or transaction.  Continue tracing until the operation is finished.</li>
<li>Try to avoid starting or ending the trace in the middle of a call unless you know the call is not important to the solution</li>
</ul>	</td>	</tr>	</table><br> </td> </tr> </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="2">Collect the trace and generate a TKProf report</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt">
<b>See the document references on this page for details on obtaining extended SQL trace data.  Read 
<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=376442.1">
Recommended Method for Obtaining 10046 trace for Tuning</a> first</b><br>
<ul>
<li>Trace a Connected Session<br>
This is the most common way to get a trace file.<br>
</li>
<ul>
<li>Start tracing on a connected session</li>
<li>Coordinate with the user to start the operation</li>
<li>Let the trace collect while the operation is in progress</li>
<li>Stop tracing when the operation is done</li>
<li>Gather the trace file from the "user_dump_dest" location (you can usually identify the file just by looking at the timestamp).</li>
</ul>
<br>
<li>Alternative: Trace Using a Test Script<br>
Sometimes you may be able to script a reproducible test case.<br>
</li>
<ul>
  <li>Put ALTER SESSION commands to start / stop the tracing in the test script</li>
  <li>Run the test script and collect the trace file from the "user_dump_dest" location (you can usually identify the file just by looking at the timestamp).</li>
</ul>
<br>
<li>Other Considerations</li>
<ul>
<li>Shared Servers:  Tracing shared servers could cause many separate trace files to be produced as the session moves around to various Oracle processes on each call .  Use the 10g utility, "trcsess" to combine these separate files into one.</li>
</ul>
<br>
<li><p>Generate a TKProf report and sort the SQL 
statements in order of most elapsed time using the following command:</p></li>
</ul>
<blockquote>
<p><b>tkprof &lt;trace file name&gt; &lt;output file name&gt;  <font color="#0000ff">sort=fchela,exeela,prsela</font></b></p>
</blockquote>
	</td>	</tr>	</table><br> </td> </tr> </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="3">Make sure trace file contains only data from the recent test</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt"> <p>If this session has been traced recently, there may be other traces mixed in the file with the recent trace collected</p></li>
<li><p>We should extract only the trace data that is part of the recent tests.  See the place in the sample trace below where it says "Cut away lines above this point".</p>

<table width="98%" class="detailTbl" border="1" >
  <tr>
    <td width="100%">
      <p align="left" class="detailMainTxt"><i><b>Trace file from a long running process that has been traced intermittently over several days</b></i></p>
      <p align="left" class="detailTraceBlk">. . .</p>
      <p align="left" class="detailTraceRed"><b>*** <font color="#FF0000">2006-07-24 13:35:05.642</font>
      </b><font color="#0000FF">&lt;== Timestamp from a previous tracing</font></p>
      <p align="left" class="detailTraceBlk">WAIT #8: nam='SQL*Net message from client' ela= 20479935 p1=1650815232 p2=1 p3=0</p>
      <p align="left" class="detailTraceBlk">=====================</p>
      <p align="left" class="detailTraceBlk">PARSING IN CURSOR #9 len=43 dep=0 uid=57 oct=3 lid=57 tim=1007742062095 hv=4018512766 ad='97039a58'</p>
      <p align="left" class="detailTraceBlk"><b><font color="#008000">select e.empno, d.deptno</font></b><font color="#0000FF">&lt;== Previous cursor that was traced
      </font> </p>
      <p align="left" class="detailTraceBlk"><b><font color="#008000">from emp e, dept d</font></b></p>
      <p align="left" class="detailTraceBlk">END OF STMT</p>
      <p align="left" class="detailTraceBlk">PARSE #9:c=630000,e=864645,p=10,cr=174,cu=0,mis=1,r=0,dep=0,og=4,tim=1007742062058</p>
      <p align="left" class="detailTraceBlk">BINDS #9:</p>
      <p align="left" class="detailTraceBlk">EXEC #9:c=0,e=329,p=0,cr=0,cu=0,mis=0,r=0,dep=0,og=4,tim=1007742062997</p>
      <p align="left" class="detailTraceBlk">WAIT #9: nam='SQL*Net message to client' ela= 18 p1=1650815232 p2=1 p3=0</p>
      <p align="left" class="detailTraceBlk">. . .</p>
      <p align="left" class="detailTraceBlk">FETCH #9:c=10000,e=513,p=0,cr=1,cu=0,mis=0,r=15,dep=0,og=4,tim=1007742148898</p>
      <p align="left" class="detailTraceBlk">WAIT #9: nam='SQL*Net message from client' ela= 2450 p1=1650815232 p2=1 p3=0</p>
      <p align="left" class="detailTraceBlk">WAIT #9: nam='SQL*Net message to client' ela= 7 p1=1650815232 p2=1 p3=0</p>
      <p align="left" class="detailTraceBlk">FETCH #9:c=0,e=233,p=0,cr=0,cu=0,mis=0,r=10,dep=0,og=4,tim=1007742152065</p>
      <p align="left" class="detailTraceBlk">. . .</p>
      <p align="left" class="detailTraceBlk">&nbsp;</p>
      <p align="left" class="detailTracePur"><b>====&gt; CUT AWAY LINES ABOVE THIS POINT - THEY AREN'T PART OF THIS TEST &lt;====</b></p>
      <p align="left" class="detailTraceBlk"><b><font color="#FF0000">*** 2006-07-24 18:35:48.850</font></b></p>
      <font color="#0000FF">&lt;== Timestamp for the tracing we want (notice its about 5 hours later)</font></p>
      <p align="left" class="detailTraceBlk">=====================</p>
      <p align="left" class="detailTraceBlk">PARSING IN CURSOR #10 len=69 dep=0 uid=57 oct=42 lid=57 tim=1007783391548 hv=3164292706 ad='9915de10'</p>
      <p align="left" class="detailTraceBlk">alter session set events '10046 trace name context forever, level 12'</p>
      <p align="left" class="detailTraceBlk">END OF STMT</p>
      <p align="left" class="detailTraceBlk">. . .</p>
      <p align="left" class="detailTraceBlk">=====================</p>
      <p align="left" class="detailTraceBlk">PARSING IN CURSOR #3 len=68 dep=0 uid=57 oct=3 lid=57 tim=1007831212596 hv=1036028368 ad='9306bee0'</p>
      <p align="left" class="detailTraceBlk"><b><font color="#008000">select e.empno, d.dname</font></b><font color="#0000FF">&lt;== Cursor that was traced</font></p>
      <p align="left" class="detailTraceBlk"><b><font color="#008000">from emp e, dept d</font></b></p>
      <p align="left" class="detailTraceBlk"><b><font color="#008000">where e.deptno = d.deptno</font></b></p>
      <p align="left" class="detailTraceBlk">END OF STMT</p>
      <p align="left" class="detailTraceBlk">PARSE #3:c=20000,e=17200,p=0,cr=6,cu=0,mis=1,r=0,dep=0,og=4,tim=1007831212566</p>
      <p align="left" class="detailTraceBlk">BINDS #3:</p>
      <p align="left" class="detailTraceBlk">EXEC #3:c=0,e=321,p=0,cr=0,cu=0,mis=0,r=0,dep=0,og=4,tim=1007831213512</p>
      <p align="left" class="detailTraceBlk">WAIT #3: nam='SQL*Net message to client' ela= 15 p1=1650815232 p2=1 p3=0</p>
      <p align="left" class="detailTraceBlk">WAIT #3: nam='db file sequential read' ela= 7126 p1=4 p2=11 p3=1</p>
      <p align="left" class="detailTraceBlk">. . .</p>
      <p align="left" class="detailTraceBlk">FETCH #3:c=10000,e=39451,p=12,cr=14,cu=0,mis=0,r=1,dep=0,og=4,tim=1007831253359</p>
      <p align="left" class="detailTraceBlk">WAIT #3: nam='SQL*Net message from client' ela= 2009 p1=1650815232 p2=1 p3=0</p>
      <p align="left" class="detailTraceBlk">WAIT #3: nam='SQL*Net message to client' ela= 10 p1=1650815232 p2=1 p3=0</p>
      <p align="left" class="detailTraceBlk">FETCH #3:c=0,e=654,p=0,cr=1,cu=0,mis=0,r=13,dep=0,og=4,tim=1007831256674</p>
      <p align="left" class="detailTraceBlk">WAIT #3: nam='SQL*Net message from client' ela= 13030644 p1=1650815232 p2=1 p3=0</p>
      <p align="left" class="detailTraceBlk">STAT #3 id=1 cnt=14 pid=0 pos=1 obj=0 op='HASH JOIN (cr=15 pr=12 pw=0 time=39402 us)'</p>
      <p align="left" class="detailTraceBlk">=====================</p>
      <p align="left" class="detailTraceBlk">PARSING IN CURSOR #7 len=55 dep=0 uid=57 oct=42 lid=57 tim=1007844294588 hv=2217940283 ad='95037918'</p>
      <p align="left" class="detailTraceBlk">
        <font color="#FF0000">
        <b>alter session set events '10046 trace name context off</b>'</font>
        <font color="#0000FF">&lt;== tracing turned off </font> </p>
      <p align="left" class="detailTraceBlk">END OF STMT</p>
        </td>
  </tr>
</table>
<br>
<p>If you are unsure about how to edit the trace file, it is best to capture the trace again using a session that does not have a trace file already.  To confirm, check the OS PID of the session you intend to trace and look for a file with that PID in the user_dump_dest.</p>

	</td>	</tr>	</table><br> </td> </tr> </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="4">Make sure the trace is complete</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt"><p>If the trace started or ended during a call, its best to rethink how the trace is started to ensure this doesn't happen.  <br>
<br>
You can get an idea for the the amount of time attributed to the call that was in progress at the beginning or end of the trace by looking at the timestamps to find the total time spent prior to the first call and comparing it to the call's elapsed time (although if there were other fetch calls before the first one in the trace, you'll miss those) .  The following trace file excerpt was taken by turning on the trace after the query had been executing for a few minutes.</p>
   <table width="98%" class="detailTbl" border="1" >
  <tr>
    <td width="100%"><p align="left" class="detailTraceBlk">*** 2006-07-24 15:00:45.538 
    <font color="#0000FF">&lt;== Time when the trace was started</font></p>
    <p align="left" class="detailTraceBlk">WAIT #3: nam='db file scattered read' ela= 18598 p1=4 p2=69417 p3=8 
    <font color="#0000FF">&lt;== Wait</font></p>
	<p align="left" class="detailTraceBlk">*** 2006-07-24 15:01:16.849 
    <font color="#0000FF">&lt;== 10g will print timestamps if trace hasn't been written to in a while</font></p>
	<p align="left" class="detailTraceBlk"><font color="#008000">WAIT #3: nam='db file scattered read' ela= 20793 p1=4 p2=126722 p3=7</font><p align="left" class="detailTraceBlk">. . .
	<p align="left" class="detailTraceBlk">*** 2006-07-24 15:27:46.076</p>
	<p align="left" class="detailTraceBlk"><b><font color="#008000">WAIT #3: nam='db file sequential read' ela= 226 p1=4 p2=127625 p3=1 &lt;== Yet more waits</font></b></p>
	<p align="left" class="detailTraceBlk"><b><font color="#008000">WAIT #3: nam='db file sequential read' ela= 102 p1=4 p2=45346 p3=1</font></b></p>
	<p align="left" class="detailTraceBlk"><b><font color="#008000">WAIT #3: nam='db file sequential read' ela= 127 p1=4 p2=127626 p3=1</font></b></p>
	<p align="left" class="detailTraceBlk"><b><font color="#008000">WAIT #3: nam='db file scattered read' ela= 2084 p1=4 p2=127627 p3=16</font></b></p>
	<p align="left" class="detailTraceBlk">. . .</p>
	<p align="left" class="detailTraceBlk">*** 2006-07-24 15:30:28.536 
    <font color="#0000FF">&lt;== Final timestamp before end of FETCH call</font></p>
	<p align="left" class="detailTraceBlk"><b><font color="#008000">WAIT #3: nam='db file scattered read' ela= 5218 p1=4 p2=127705 p3=16</font></b>
    <font color="#0000FF">&lt;== Final wait</font></p>
	<p align="left" class="detailTraceBlk">WAIT #3: nam='SQL*Net message from client' ela= 1100 p1=1650815232 p2=1 p3=0</p>
	<p align="left" class="detailTraceBlk">=====================</p>
	<p align="left" class="detailTraceBlk">PARSING IN CURSOR #3 len=39 dep=0 uid=57 oct=0 lid=57 tim=1014506207489 hv=1173176699 ad='931230c8'</p>
	<p align="left" class="detailTraceBlk">select count(*) from big_tab1, big_tab2 
    <font color="#0000FF">&lt;== This is not a real parse call, just printed for 
    convenience</font></p>
	<p align="left" class="detailTraceBlk">END OF STMT
    <p align="left" class="detailTraceBlk">&nbsp;</p>
	<p align="left" class="detailTraceBlk">FETCH #3:c=0,<b><font color="#FF0000">e=11</font></b>,p=0,cr=0,cu=0,mis=0,r=0,dep=0,og=0,tim=1014506207466
    <font color="#0000FF">&lt;== Completion of FETCH call</font></p>
	<p align="left" class="detailTraceBlk"><font color="#0000FF">Notice the FETCH reports 11 microSec elapsed. This is wrong as you can see from timestamps -</font></p>
	<p align="left" class="detailTraceBlk"><font color="#0000FF">It should be around 30 minutes. Maybe this is a feature?</font></p>
  </td>
  </tr>
</table>
<br>
<p>As you can see at the top of the file, the trace was started in the middle of a call that was reading from a file and causing waits.  When the call completed, the amount of time for the fetch was incorrectly reported.</p>
	</td>	</tr>	</table><br> </td> </tr> </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="100%" class="detailMainTxt">If you have verified the TKProf has been properly collected, then proceed to the next section if you also have an ASH, AWR, or statspack report; otherwise click NEXT to analyze the TKProf in detail. </td> </tr> <tr> <td width="100%" class="detailEmptyLine">&nbsp;</td>  </tr>  </table> </td> </tr> <tr> <td width="100%" colspan="3" class="detailEmptyLine">&nbsp;</td> </tr> </table> <table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"> <tr> <td width="3%" class="detailMainTxt">&nbsp;</td> <td width="2%" valign="top" align="left">&nbsp;</td> <td width="95%" class="detailSubHdrTxt">Comparing the TKProf to ASH / AWR / Statspack </td> </tr> <tr> <td width="3%" class="detailEmptyLayer">&nbsp;</td> <td width="2%" class="detailEmptyLayer">&nbsp;</td> <td width="95%"><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="100%" class="detailMainTxt">If you have an ASH, AWR, or statspack report (because the whole DB seemed slow), its a good idea to compare the TKProf with the instance-wide report.  The point is to confirm that the bottlenecks seen at the whole instance level are consistent with what you see in a session via TKProf.<br>
<br>
If the two don't match, then maybe you identified or traced the wrong session.  If only a few sessions are slow, then its quite possible that their CPU and wait profiles differ from the overall database.  In that case, you can focus on what you've found in the TKProf without needing to correlate it to the overall instance (but you should make sure you traced the correct session).<br>
<br>
Compare the files as follows:    </td>  </tr>  <tr>    <td width="100%" class="detailEmptyLine">&nbsp;</td>  </tr>  </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="1">Review the TKProf</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt">Identify the timed events of the TKProf.<br>
Go to the "OVERALL TOTALS" section and note:
<ul>
<lI>Total CPU; add total CPU for recursive and non-recursive statements</li>
<li>Total DB Time; Add the total elapsed time for recursive and non-recursive statements</li>
<li>Find the percentage of the total DB time the CPU and  top waits represent
<br>
<br>
For example: <br>
<br>
<div style="BORDER-RIGHT: 1px solid; PADDING-RIGHT: 0.5em; BORDER-TOP: 1px solid; PADDING-LEFT: 0.5em; BACKGROUND: rgb(204,204,204) 0% 50%; PADDING-BOTTOM: 0.5em; MARGIN: 5px 20px 20px; OVERFLOW: auto; BORDER-LEFT: 1px solid; WIDTH: 95%; PADDING-TOP: 0.5em; BORDER-BOTTOM: 1px solid; moz-background-clip: initial; moz-background-inline-policy: initial; moz-background-origin: initial"><code class="awiz">
<pre>
********************************************************************************

OVERALL TOTALS FOR ALL NON-RECURSIVE STATEMENTS

call     count       cpu    elapsed       disk      query    current        rows
------- ------  -------- ---------- ---------- ---------- ----------  ----------
Parse        0      0.00       0.00          0          0          0           0
Execute      0      0.00       0.00          0          0          0           0
Fetch        0      0.00       0.00          0          0          0           0
------- ------  -------- ---------- ---------- ---------- ----------  ----------
total        0      <b>0.00</b>       <b>0.00</b>          0          0          0           0

Misses in library cache during parse: 0

Elapsed times include waiting on following events:
  Event waited on                             Times   Max. Wait  Total Waited
  ----------------------------------------   Waited  ----------  ------------
  read by other session                          14        0.20          1.54
  db file scattered read                         30        0.00          0.01
  db file sequential read                         7        0.00          0.00
  PL/SQL lock timer                               6        1.02          6.00


OVERALL TOTALS FOR ALL RECURSIVE STATEMENTS

call     count       cpu    elapsed       disk      query    current        rows
------- ------  -------- ---------- ---------- ---------- ----------  ----------
Parse        0      0.00       0.00          0          0          0           0
Execute     57      0.06       0.02          0          5         28          24
Fetch       33     24.52     284.13      17025     312555          0         416
------- ------  -------- ---------- ---------- ---------- ----------  ----------
total       90     <b>24.58</b>     <b>284.16</b>      17025     312560         28         440

Misses in library cache during parse: 0

Elapsed times include waiting on following events:
  Event waited on                             Times   Max. Wait  Total Waited
  ----------------------------------------   Waited  ----------  ------------
  read by other session                        1374        0.96        158.10
  db file scattered read                       2622        0.57          7.11
  db file sequential read                       721        0.23          0.81
  latch: cache buffers chains                     5        0.25          0.51

    2  user  SQL statements in session.
    0  internal SQL statements in session.
    2  SQL statements in session.
********************************************************************************
</pre></code></div>
<br>
The amount of CPU and DB time is:<br>
<br>
Total CPU time = 24.58 sec<br>
Total DB Time = 284.16 sec<br>
<br> 
As a percentage of DB Time:<br>
<br>
Wait: "read by other session" = 158.10 / 284.16 = <b>55.6%</b><br>
CPU = 24.58 / 284.16 * 100% = <b>8.7%</b><br>
Wait: "db file scattered read" = 7.11 / 284.16 = <b>2.5%</b><br>
</li>
</ul>

	</td>	</tr>	</table><br> </td> </tr> </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="2">Review the ASH, AWR, or Statspack Report</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt">ASH Report: 
<ul>
<li>Identify the main bottlenecks in the ASH report by viewing the <i>Top User Events</i> (order by "% Activity")<br>
<br>
For example:<br>
<br>
<div style="BORDER-RIGHT: 1px solid; PADDING-RIGHT: 0.5em; BORDER-TOP: 1px solid; PADDING-LEFT: 0.5em; BACKGROUND: rgb(204,204,204) 0% 50%; PADDING-BOTTOM: 0.5em; MARGIN: 5px 20px 20px; OVERFLOW: auto; BORDER-LEFT: 1px solid; WIDTH: 95%; PADDING-TOP: 0.5em; BORDER-BOTTOM: 1px solid; moz-background-clip: initial; moz-background-inline-policy: initial; moz-background-origin: initial"><code class="awiz">
<pre>
Top User Events              DB/Inst: DB10GR2/DB10gR2  (Feb 12 15:12 to 15:27)

                                                               Avg Active
Event                               Event Class     % Activity   Sessions
----------------------------------- --------------- ---------- ----------
read by other session               User I/O             53.40       5.40
CPU + Wait for CPU                  CPU                  37.24       3.77
db file scattered read              User I/O              4.90       0.50
</pre></code></div>
</li>
</ul>
<br>
AWR / Statspack Reports:
<ul>
<li>Identify the main bottlenecks of the AWR and statspack reports by viewing the <i>Top 5 Timed Events, % Total Call Time</i><br>
<br>
For example:<br>
<br>
<div style="BORDER-RIGHT: 1px solid; PADDING-RIGHT: 0.5em; BORDER-TOP: 1px solid; PADDING-LEFT: 0.5em; BACKGROUND: rgb(204,204,204) 0% 50%; PADDING-BOTTOM: 0.5em; MARGIN: 5px 20px 20px; OVERFLOW: auto; BORDER-LEFT: 1px solid; WIDTH: 95%; PADDING-TOP: 0.5em; BORDER-BOTTOM: 1px solid; moz-background-clip: initial; moz-background-inline-policy: initial; moz-background-origin: initial"><code class="awiz">
<pre>
Top 5 Timed Events                                                    Avg %Total
~~~~~~~~~~~~~~~~~~                                                   wait   Call
Event                                            Waits    Time (s)   (ms)   Time
----------------------------------------- ------------ ----------- ------ ------
read by other session                           15,436       1,752    113   79.6
CPU time                                                       268          12.2
db file scattered read                          40,981          98      2    4.5
PL/SQL lock timer                                   60          60   1001    2.7
db file sequential read                         12,504          11      1     .5
</pre></code></div>
</li>
</ul>	</td>	</tr>	</table><br> </td> </tr> </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="3">Compare the Timed Events</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt">If the percentage of the top timed events of the TKProf match the percentages in the instance-wide reports, then the trace has captured at a session level what was seen at an instance-wide level.<br>
<br>
In the example above, the event <i>read by other session</i> is the most significant wait in the AWR report and the TKProf reports.  The 10046 / TKProf are a good representation at the session level for what is happening instance-wide. 	</td>	</tr>	</table><br> </td> </tr> </table> </td> </tr> <tr> <td width="100%" colspan="3" class="detailEmptyLine">&nbsp;</td> </tr> </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr> 	  <td width="3%" class="detailMainTxt">&nbsp;</td>    <td width="97%" class="detailMainTxt">Proceed to the analysis section to determine a cause for the timed events seen in the TKProf report if you have confirmed the TKProf / trace is valid.    </td>  </tr>  <tr>  <td width="100%" colspan="3" class="detailEmptyLine">&nbsp;</td>  </tr>  </table><br></td> <td width="25%" valign="top"><table width="100%" height="46" border="1" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#A6B3C8" bgcolor="#EEF3F7">  <tr>   <td width="100%">    <p align="left" class="detailTblHdr">Documentation</td>  </tr>  <tr>    <td width="100%" valign="top">      <li class="detailTblBullet">    <a target="detailWindow" href="http://download.oracle.com/docs/cd/B14117_01/server.101/b10752/sqltrace.htm#8723">    Understanding SQL Trace and TKProf</a></li>    </td>  </tr>  </table>  <br><table width="100%" height="46" border="1" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#A6B3C8" bgcolor="#EEF3F7">  <tr>   <td width="100%">    <p align="left" class="detailTblHdr">How-To</td>  </tr>  <tr>    <td width="100%" valign="top">      <li class="detailTblBullet">    <a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=1058210.6">    How To Collect 10046 Trace Data</a></li>      <li class="detailTblBullet">    <a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=376442.1">    Recommended Method for Obtaining 10046 trace for Tuning</a></li>    </td>  </tr>  </table>  <br><table width="100%" height="46" border="1" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#A6B3C8" bgcolor="#EEF3F7">  <tr>   <td width="100%">    <p align="left" class="detailTblHdr">SCRIPTS/TOOLS</td>  </tr>  <tr>    <td width="100%" valign="top">      <li class="detailTblBullet">    <a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=108312.1">    How To Generate TKProf reports</a></li>      <li class="detailTblBullet">    <a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=352363.1">    Collect 10046 Traces Automatically with LTOM</a></li>  </table></td></tr></table> <table width="100%" border="0" cellspacing="1" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">   <tr>     <td width="2%" valign="top" align="left">&nbsp;</td>     <td width="98%">     <p class="detailHdrTxt"><a name="Next Step - Analyze">Next Step - Analyze</a></p><hr class="detailLine">     </td>   </tr> </table> <table width="100%" border="0" cellspacing="1" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">   <tr>       <td width="75%" valign="top"><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="3%"  class="detailMainTxt">&nbsp;</td>    <td width="97%" class="detailMainTxt"><p>In the following step, you will receive guidance on interpreting the data you collected to determine the cause for the performance problem; click "NEXT" to continue.</p>    </td>  </tr>  <tr>    <td width="3%" class="detailMainTxt">&nbsp;</td>    <td width="97%" class="detailMainTxt">&nbsp;</td>  </tr>  </table><p class="detailMainTxt">&nbsp;</p></td> <td width="25%" valign="top">&nbsp;</td></tr></table><p class=pagebreak>&nbsp;</p>
<table width="100%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">		<tr>      <td width="100%" colspan="4">      <p class="htmlHdr"><a name="Slow Database &gt; Determine a Cause &gt;Analysis">Slow Database &gt; Determine a Cause &gt;Analysis</a></p>      <p class="htmlHdr">&nbsp;</p>		</td></tr>		</table><br> <table width="100%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">     <tr>     <td width="100%" class="detailMainTxt">The data collected in the previous step will be analyzed in this step to determine a cause.<br>
Database tuning is often an iterative process where bottlenecks are identified and removed with each iteration.  If performance doesn't reach your goals after implementing a solution, be sure to re-identify the issue and repeat this process. </td>   </tr> </table> <br> <table width="100%" border="0" cellspacing="1" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">   <tr>     <td width="2%" valign="top" align="left">&nbsp;</td>     <td width="98%">     <p class="detailHdrTxt"><a name="Determine the Type of Performance Problem">Determine the Type of Performance Problem</a></p><hr class="detailLine">     </td>   </tr> </table> <table width="100%" border="0" cellspacing="1" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">   <tr>       <td width="75%" valign="top"><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="3%"  class="detailMainTxt">&nbsp;</td>    <td width="97%" class="detailMainTxt">Using previously collected data, you need to determine the most significant bottleneck in the database.  If you have already determined the type of problem, proceed to the <i>Tuning Strategy</i> section below.    </td>  </tr>  <tr>    <td width="3%" class="detailMainTxt">&nbsp;</td>    <td width="97%" class="detailMainTxt">&nbsp;</td>  </tr>  </table> <table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"> <tr> <td width="3%" class="detailMainTxt">&nbsp;</td> <td width="2%" valign="top" align="left">&nbsp;</td> <td width="95%" class="detailSubHdrTxt">CPU Consumption </td> </tr> <tr> <td width="3%" class="detailEmptyLayer">&nbsp;</td> <td width="2%" class="detailEmptyLayer">&nbsp;</td> <td width="95%"><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="100%" class="detailMainTxt">An Oracle CPU performance problem can be identified by symptoms seen at the OS level and at the database level.  For details on what to look for, see the section <i>Slow Database > Identify the Issue  > Analysis > Verify Oracle OS Resource Usage</i>.<br>
<br>
In summary:    </td>  </tr>  <tr>    <td width="100%" class="detailEmptyLine">&nbsp;</td>  </tr>  </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="1">OS Symptoms</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt">OS performance data shows:
<ul>
<li>OS CPU utilization greater than 90%</li>
<li>OS run queue size per CPU is greater than 4</li>
<li>Most of the CPU is used by Oracle processes</li>
</ul>	</td>	</tr>	</table><br> </td> </tr> </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="2">Database Symptoms</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt">Database performance data shows:
<ul>
<li>TKProf shows most of the session's time is spent for CPU rather than waits (or if database waits account for a small amount of the total database elapsed time)</li>
<li>AWR or statspack shows that CPU is the top component of DB time</li>
<li>Oracle 10g+: Time model data shows CPU usage is the major component of DB Time</li>
</ul>	</td>	</tr>	</table><br> </td> </tr> </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="100%" class="detailMainTxt"><br>If your data shows symptoms of a CPU consumption problem, proceed to the section below called, "Choose a Tuning Strategy" and select the "Reduce CPU Consumption" strategy. </td> </tr> <tr> <td width="100%" class="detailEmptyLine">&nbsp;</td>  </tr>  </table> </td> </tr> <tr> <td width="100%" colspan="3" class="detailEmptyLine">&nbsp;</td> </tr> </table> <table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"> <tr> <td width="3%" class="detailMainTxt">&nbsp;</td> <td width="2%" valign="top" align="left">&nbsp;</td> <td width="95%" class="detailSubHdrTxt">Wait Bottleneck </td> </tr> <tr> <td width="3%" class="detailEmptyLayer">&nbsp;</td> <td width="2%" class="detailEmptyLayer">&nbsp;</td> <td width="95%"><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="100%" class="detailMainTxt">This section will show you how to confirm a wait bottleneck and which waits are slowing down the database.    </td>  </tr>  <tr>    <td width="100%" class="detailEmptyLine">&nbsp;</td>  </tr>  </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="100%" class="detailMainTxt"><br>If your data shows symptoms of a wait bottleneck, proceed to the section below called, "Choose a Tuning Strategy" and select the "Reduce Wait Bottlenecks" strategy. </td> </tr> <tr> <td width="100%" class="detailEmptyLine">&nbsp;</td>  </tr>  </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="1">TKProf</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt">Compare overall CPU time to overall elapsed time.  If non-idle waits account for most of the elapsed time, then you have a wait bottleneck problem otherwise its a CPU consumption problem.<br>
<br>
If you have a wait bottleneck:
<ul>
<li>Examine the waits to find the largest ones</li>
<li>Go to the Choose a Tuning Strategy Section, Reduce Wait Bottlenecks to determine a cause for the waits</li>
</ul>
For example: <br>
<br>
In this case, we see a large bottleneck for the <i>read by other session</i> waits.  There are also waits for the CPU (i.e., significant run queue size due to CPU saturation) which accounts for the difference between the total elapsed time and the sum of the CPU time and wait times.<br>
<br>
<div style="BORDER-RIGHT: 1px solid; PADDING-RIGHT: 0.5em; BORDER-TOP: 1px solid; PADDING-LEFT: 0.5em; BACKGROUND: rgb(204,204,204) 0% 50%; PADDING-BOTTOM: 0.5em; MARGIN: 5px 20px 20px; OVERFLOW: auto; BORDER-LEFT: 1px solid; WIDTH: 95%; PADDING-TOP: 0.5em; BORDER-BOTTOM: 1px solid; moz-background-clip: initial; moz-background-inline-policy: initial; moz-background-origin: initial"><code class="awiz">
<pre>
********************************************************************************

OVERALL TOTALS FOR ALL NON-RECURSIVE STATEMENTS

call     count       cpu    elapsed       disk      query    current        rows
------- ------  -------- ---------- ---------- ---------- ----------  ----------
Parse        0      0.00       0.00          0          0          0           0
Execute      0      0.00       0.00          0          0          0           0
Fetch        0      0.00       0.00          0          0          0           0
------- ------  -------- ---------- ---------- ---------- ----------  ----------
total        0      <b>0.00</b>       <b>0.00</b>          0          0          0           0

Misses in library cache during parse: 0

Elapsed times include waiting on following events:
  Event waited on                             Times   Max. Wait  Total Waited
  ----------------------------------------   Waited  ----------  ------------
  read by other session                          14        0.20          1.54
  db file scattered read                         30        0.00          0.01
  db file sequential read                         7        0.00          0.00
  PL/SQL lock timer                               6        1.02          6.00


OVERALL TOTALS FOR ALL RECURSIVE STATEMENTS

call     count       cpu    elapsed       disk      query    current        rows
------- ------  -------- ---------- ---------- ---------- ----------  ----------
Parse        0      0.00       0.00          0          0          0           0
Execute     57      0.06       0.02          0          5         28          24
Fetch       33     24.52     284.13      17025     312555          0         416
------- ------  -------- ---------- ---------- ---------- ----------  ----------
total       90     <b>24.58</b>     <b>284.16</b>      17025     312560         28         440

Misses in library cache during parse: 0

Elapsed times include waiting on following events:
  Event waited on                             Times   Max. Wait  Total Waited
  ----------------------------------------   Waited  ----------  ------------
  <b>read by other session                        1374        0.96        158.10</b>
  db file scattered read                       2622        0.57          7.11
  db file sequential read                       721        0.23          0.81
  latch: cache buffers chains                     5        0.25          0.51

    2  user  SQL statements in session.
    0  internal SQL statements in session.
    2  SQL statements in session.
********************************************************************************
</pre></code></div>	</td>	</tr>	</table><br> </td> </tr> </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="2">AWR / Statspack Reports</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt">Review the section, <i>Top 5 Timed Events</i>.  If CPU accounts for most of the call time, then you have a CPU consumption problem; otherwise a wait bottleneck.<br>
<br>
If you have a wait bottleneck:
<ul>
<li>Examine the waits to find the largest ones</li>
<li>Go to the Choose a Tuning Strategy Section, Reduce Wait Bottlenecks to determine a cause for the waits</li>
</ul>
For example: <br>
<br>
In this case, we see a large bottleneck for the <i>read by other session</i> waits (79.6% of total call time):<br>
<br>
<div style="BORDER-RIGHT: 1px solid; PADDING-RIGHT: 0.5em; BORDER-TOP: 1px solid; PADDING-LEFT: 0.5em; BACKGROUND: rgb(204,204,204) 0% 50%; PADDING-BOTTOM: 0.5em; MARGIN: 5px 20px 20px; OVERFLOW: auto; BORDER-LEFT: 1px solid; WIDTH: 95%; PADDING-TOP: 0.5em; BORDER-BOTTOM: 1px solid; moz-background-clip: initial; moz-background-inline-policy: initial; moz-background-origin: initial"><code class="awiz">
<pre>
Top 5 Timed Events                                                    Avg %Total
~~~~~~~~~~~~~~~~~~                                                   wait   Call
Event                                            Waits    Time (s)   (ms)   Time
----------------------------------------- ------------ ----------- ------ ------
<b>read by other session                           15,436       1,752    113   79.6</b>
CPU time                                                       268          12.2
db file scattered read                          40,981          98      2    4.5
PL/SQL lock timer                                   60          60   1001    2.7
db file sequential read                         12,504          11      1     .5
</pre></code></div>	</td>	</tr>	</table><br> </td> </tr> </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="3">ASH Reports</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt">Review the section, <i>Top User Events, % Activity</i>.  If CPU accounts for most of the call time, then you have a CPU consumption problem; otherwise a wait bottleneck.<br>
<br>
If you have a wait bottleneck:
<ul>
<li>Examine the waits to find the largest ones</li>
<li>Go to the Choose a Tuning Strategy Section, Reduce Wait Bottlenecks to determine a cause for the waits</li>
</ul>
For example: <br>
<br>
In this case, we see a large bottleneck for the <i>read by other session</i> waits (53.4% of the session activity):<br>
<br>
<div style="BORDER-RIGHT: 1px solid; PADDING-RIGHT: 0.5em; BORDER-TOP: 1px solid; PADDING-LEFT: 0.5em; BACKGROUND: rgb(204,204,204) 0% 50%; PADDING-BOTTOM: 0.5em; MARGIN: 5px 20px 20px; OVERFLOW: auto; BORDER-LEFT: 1px solid; WIDTH: 95%; PADDING-TOP: 0.5em; BORDER-BOTTOM: 1px solid; moz-background-clip: initial; moz-background-inline-policy: initial; moz-background-origin: initial"><code class="awiz">
<pre>
Top User Events              DB/Inst: DB10GR2/DB10gR2  (Feb 12 15:12 to 15:27)

                                                               Avg Active
Event                               Event Class     % Activity   Sessions
----------------------------------- --------------- ---------- ----------
<b>read by other session</b>               User I/O             <b>53.40</b>       5.40
CPU + Wait for CPU                  CPU                  37.24       3.77
db file scattered read              User I/O              4.90       0.50
</pre></code></div>	</td>	</tr>	</table><br> </td> </tr> </table> </td> </tr> <tr> <td width="100%" colspan="3" class="detailEmptyLine">&nbsp;</td> </tr> </table> <table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"> <tr> <td width="3%" class="detailMainTxt">&nbsp;</td> <td width="2%" valign="top" align="left">&nbsp;</td> <td width="95%" class="detailSubHdrTxt">Client Bottleneck </td> </tr> <tr> <td width="3%" class="detailEmptyLayer">&nbsp;</td> <td width="2%" class="detailEmptyLayer">&nbsp;</td> <td width="95%"><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="100%" class="detailMainTxt">Client bottlenecks are detected by observing that sessions spend most of their time waiting for an event outside of the database (usually <i>SQL*Net message from client</i>).  These can be:
<ul>
<li>In between any calls to the database</li>
<li>In between a set of FETCH calls for one or more of the same cursors</li>
</ul>
Consider the steps to diagnosing client waits:    </td>  </tr>  <tr>    <td width="100%" class="detailEmptyLine">&nbsp;</td>  </tr>  </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="1">Confirm that client bottlenecks are occurring</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt">Client waits can be seen in aggregate in a TKProf file by looking at the bottom where the <i>OVERALL TOTALS</i> section shows the total database call elapsed time and the total waits for the <i>SQL*Net message from client</i> events. <br>
<br>
For example:<br>
<br>
<div style="BORDER-RIGHT: 1px solid; PADDING-RIGHT: 0.5em; BORDER-TOP: 1px solid; PADDING-LEFT: 0.5em; BACKGROUND: rgb(204,204,204) 0% 50%; PADDING-BOTTOM: 0.5em; MARGIN: 5px 20px 20px; OVERFLOW: auto; BORDER-LEFT: 1px solid; WIDTH: 95%; PADDING-TOP: 0.5em; BORDER-BOTTOM: 1px solid; moz-background-clip: initial; moz-background-inline-policy: initial; moz-background-origin: initial"><code class="awiz">
<pre>
********************************************************************************

OVERALL TOTALS FOR ALL NON-RECURSIVE STATEMENTS

call     count       cpu    elapsed       disk      query    current        rows
------- ------  -------- ---------- ---------- ---------- ----------  ----------
Parse        6      0.04       0.04          0          0          0           0
Execute      7      0.00       0.00          0          0          0           0
Fetch      100      1.92       2.08       6655       7744          0        1404
------- ------  -------- ---------- ---------- ---------- ----------  ----------
total      113      1.96       <b>2.12</b>       6655       7744          0        1404

Misses in library cache during parse: 6
Misses in library cache during execute: 1

Elapsed times include waiting on following events:
  Event waited on                             Times   Max. Wait  Total Waited
  ----------------------------------------   Waited  ----------  ------------
  SQL*Net message to client                     109        0.00          0.00
  <b>SQL*Net message from client                   109       39.96        187.32</b>
  db file sequential read                       393        0.00          0.04
  db file scattered read                        490        0.07          0.50
  SQL*Net break/reset to client                   2        0.00          0.00


OVERALL TOTALS FOR ALL RECURSIVE STATEMENTS

call     count       cpu    elapsed       disk      query    current        rows
------- ------  -------- ---------- ---------- ---------- ----------  ----------
Parse        0      0.00       0.00          0          0          0           0
Execute      0      0.00       0.00          0          0          0           0
Fetch        0      0.00       0.00          0          0          0           0
------- ------  -------- ---------- ---------- ---------- ----------  ----------
total        0      0.00       <b>0.00</b>          0          0          0           0

Misses in library cache during parse: 0

    7  user  SQL statements in session.
    0  internal SQL statements in session.
    7  SQL statements in session.
********************************************************************************
</pre></code></div>

In this example we see the total database time is only a small percentage of the total time:<br>
<br>
<ul>
Note: Add NON-RECURSIVE and RECURSIVE times<br>
<br>
<li>Database elapsed time = total elapsed = 2.12 + 0 = 2.12 sec</li>
<li>Client Idle time = SQL*Net message from client = 187.32 + 0 = 187.32 sec</li>
<li>Total Time = Database elapsed time + Client Idle time = 2.12 + 187.32 = 189.44 sec</li>
<li>% Client Idle Time = Client Idle Time / Total Time = 187.32 / 189.44 * 100% = <b>98.9%</b></li>
</ul>

Since almost 99% of the time is time waiting for the client, this warrants further investigation to see if the waits can be addressed by reducing the number of fetch calls or speeding up the clients.<br>	</td>	</tr>	</table><br> </td> </tr> </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="2">Check if most of the elapsed time is spent waiting <i>between</i> ANY TYPE of call</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt">The best way to see this is to examine the raw 10046 trace file and observe the waits for <i>SQL*Net message from client</i> events shown on lines beginning with "WAIT #0".  These waits aren't part of any open cursor but represent waits for a new call from the client.<br>
<br>
For example:<br>

<div style="BORDER-RIGHT: 1px solid; PADDING-RIGHT: 0.5em; BORDER-TOP: 1px solid; PADDING-LEFT: 0.5em; BACKGROUND: rgb(204,204,204) 0% 50%; PADDING-BOTTOM: 0.5em; MARGIN: 5px 20px 20px; OVERFLOW: auto; BORDER-LEFT: 1px solid; WIDTH: 95%; PADDING-TOP: 0.5em; BORDER-BOTTOM: 1px solid; moz-background-clip: initial; moz-background-inline-policy: initial; moz-background-origin: initial"><code class="awiz">
<pre>
FETCH #2:c=0,e=2829,p=5,cr=11,cu=0,mis=0,r=9,dep=0,og=1,tim=4144651383971
WAIT #2: nam='SQL*Net message from client' ela= 646165 driver id=1650815232 #bytes=1 p3=0 obj#=51516 tim=4144652030609
STAT #2 id=1 cnt=100 pid=0 pos=1 obj=51516 op='TABLE ACCESS BY INDEX ROWID BIG1 (cr=167 pr=83 pw=0 time=1057 us)'
STAT #2 id=2 cnt=100 pid=1 pos=1 obj=59541 op='INDEX RANGE SCAN I_BIG1 (cr=10 pr=0 pw=0 time=161 us)'
WAIT #0: nam='SQL*Net message to client' ela= 10 driver id=1650815232 #bytes=1 p3=0 obj#=51516 tim=4144652031862
*** 2007-02-13 19:55:33.322
<b>WAIT #0: nam='SQL*Net message from client' ela= 30933361 driver id=1650815232 #bytes=1 p3=0 obj#=51516 tim=4144682965398</b>
=====================
PARSING IN CURSOR #1 len=74 dep=0 uid=54 oct=3 lid=54 tim=4144682972867 hv=1218416003 ad='88be1a58'
select object_id,object_name from big1 where object_id between 151 and 200
END OF STMT
PARSE #1:c=10000,e=6895,p=0,cr=0,cu=0,mis=1,r=0,dep=0,og=1,tim=4144682972835
EXEC #1:c=0,e=327,p=0,cr=0,cu=0,mis=0,r=0,dep=0,og=1,tim=4144682973675
WAIT #1: nam='SQL*Net message to client' ela= 13 driver id=1650815232 #bytes=1 p3=0 obj#=51516 tim=4144682973960
WAIT #1: nam='db file sequential read' ela= 148 file#=4 block#=29933 blocks=1 obj#=51516 tim=4144682974666
FETCH #1:c=0,e=768,p=1,cr=4,cu=0,mis=0,r=1,dep=0,og=1,tim=4144682974941
</pre></code></div>

In the above trace, we see two kinds of WAITs: WAIT #0 and WAIT #1.  The # is associated with a cursor when its greater than 0.  In the example, the "WAIT #0, SQL*Net message from client" line is a wait after the last fetch was completed and the database was waiting for a new call.  The "WAIT #1, SQL*Net message from client" line was for the client but for an open cursor that was being fetched.  If fewer fetches were done, the waits on lines like "WAIT #1" could've been reduced.  The "WAIT #0" could only be reduced by a faster client.	</td>	</tr>	</table><br> </td> </tr> </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="3">Check if most of the elapsed time is spent waiting <i>between</i> FETCH calls</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt"><p>Evidence of waits <i>between</i> calls can be spotted by looking at the following:</p>
<p>1) In the TKProf, you will notice the total time spent in the database is small compared to the time waited by the client.  You will also see the bulk of the time in "SQL*Net message from client" in the waits section, as shown below:</p>
<table width="98%" class="detailTbl" border="1">
  <tr>
    <td width="100%"><p class="detailMainTxt"><i><b>TKProf of a session where the client used an arraysize of 2 and caused many fetch calls</b></i></p>
    <p class="detailMainTxt">&nbsp;</p>
<pre class="detailTraceBlk">select empno, ename from  emp

call     count     cpu  elapsed  disk   query  current    rows
------- ------  ------ -------- ----- ------- --------  ------
Parse        1    0.00     0.00     0       0        0       0
Execute      1    0.00     0.00     0       0        0       0
Fetch        <b><font color="#FF0000">8</font></b>    0.00     0.00     0      14        0      <b><font color="#FF0000">14</font></b>
------- ------  ------ -------- ----- ------- --------  ------
total       10    0.00     0.00     0      14        0      14


Rows     Row Source Operation
-------  ---------------------------------------------------
     14  TABLE ACCESS FULL EMP (cr=14 pr=0 pw=0 time=377 us)


Elapsed times include waiting on following events:
  Event waited on                Times   Max. Wait  Total Waited
  ---------------------------   Waited  ----------  ------------
  SQL*Net message to client          8        0.00          0.00
  <b><font color="#FF0000">SQL*Net message from client</font></b>        <b><font color="#FF0000">8</font></b>       29.36         <b><font color="#FF0000">78.39</font></b></pre>
<p align="left" class="detailMainTxt">&nbsp;</p>
<p align="left" class="detailMainTxt"><font color="#0066CC">Notice above: 8 fetch calls to return 14 rows. 78.39 seconds waiting for &quot;SQL*Net message from client&quot; for 8 waits. Each wait corresponds to each fetch call. The total database time was 377 microSeconds, but the total elapsed time to fetch all 14 rows was 78.39 seconds due to client waits. If you reduce the number of fetches, you will reduce the overall elapsed time. In any case, the database is fine, the problem is really external to the database.
</font> </p>
    </td>
  </tr>
</table>
<p>2) To confirm whether the waits are due to a slow client, examine the 10046 trace for the SQL statement and look for WAITs in between FETCH calls, as follows:</p>
<table width="98%" class="detailTbl" border="1">
  <tr>
    <td width="100%">
    <p align="left" class="detailTraceBlk">PARSING IN CURSOR #2 len=29 dep=0 uid=57 oct=3 lid=57 tim=1016349402066 hv=3058029015 ad='94239ec0'</p>
    <p class="detailTraceBlk">select empno, ename from emp</p>
    <p align="left" class="detailTraceBlk">END OF STMT</p>
<p align="left" class="detailTraceBlk">PARSE #2:c=0,e=5797,p=0,cr=0,cu=0,mis=1,r=0,dep=0,og=4,tim=1016349402036</p>
<p align="left" class="detailTraceBlk">EXEC #2:c=0,e=213,p=0,cr=0,cu=0,mis=0,r=0,dep=0,og=4,tim=1016349402675</p>
<p align="left" class="detailTraceBlk"><b><font color="#FF0000">WAIT #2: nam='SQL*Net message to client' ela= 12 p1=1650815232 p2=1 p3=0</font></b></p>
<p align="left" class="detailTraceBlk"><b><font color="#008000">FETCH #2:c=0,e=423,p=0,cr=7,cu=0,mis=0,r=1,dep=0,og=4,tim=1016349403494
</font></b><font color="#0000FF">&lt;== Call Finished </font>
      <p align="left" class="detailTraceBlk"><b><font color="#FF0000">WAIT #2: nam='SQL*Net message from client' ela= 1103179 p1=1650815232 p2=1 p3=0</font></b>
      <font color="#0000FF">&lt;== Wait for client</span> </font>
      <p align="left" class="detailTraceBlk">WAIT #2: nam='SQL*Net message to client' ela= 10 p1=1650815232 p2=1 p3=0</p>
<p align="left" class="detailTraceBlk"><b><font color="#008000">FETCH #2:c=0,e=330,p=0,cr=1,cu=0,mis=0,r=2,dep=0,og=4,tim=1016350507608
</font></b><font color="#0000FF">&lt;== Call Finished (2 rows)</font>
      <p align="left" class="detailTraceBlk"><b><font color="#FF0000">WAIT #2: nam='SQL*Net message from client' ela= 29367263 p1=1650815232 p2=1 p3=0</font></b>
      <font color="#0000FF">&lt;== Wait for client</font></p>
<p align="left" class="detailTraceBlk">WAIT #2: nam='SQL*Net message to client' ela= 9 p1=1650815232 p2=1 p3=0</p>
<p align="left" class="detailTraceBlk"><font color="#008000"><b>FETCH #2:c=0,e=321,p=0,cr=1,cu=0,mis=0,r=2,dep=0,og=4,tim=1016379876558</b>
</font><font color="#0000FF">&lt;== Call Finished (2 rows) </font>
      <p align="left" class="detailTraceBlk"><font color="#FF0000"><b>WAIT #2: nam='SQL*Net message from client' ela= 11256970 p1=1650815232 p2=1 p3=0</b></font>
      <font color="#0000FF">&lt;== Wait for client</font></p>
<p align="left" class="detailTraceBlk">WAIT #2: nam='SQL*Net message to client' ela= 10 p1=1650815232 p2=1 p3=0</p>
<p align="left" class="detailTraceBlk">. . .</p>
<p align="left" class="detailTraceBlk"><b><font color="#008000">FETCH #2:c=0,e=486,p=0,cr=1,cu=0,mis=0,r=1,dep=0,og=4,tim=1016409054527</font></b></p>
<p align="left" class="detailTraceBlk">WAIT #2: nam='SQL*Net message from client' ela= 18747616 p1=1650815232 p2=1 p3=0</p>
<p align="left" class="detailTraceBlk">STAT #2 id=1 cnt=14 pid=0 pos=1 obj=49049 op='TABLE ACCESS FULL EMP (cr=14 pr=0 pw=0 time=377 us)'
      <p align="left" class="detailMainTxt">&nbsp;</p>
      <p align="left" class="detailMainTxt"><font color="#0000FF">Notice: Between each FETCH call, there is a wait for the client. The client is slow and responds every 1 - 2 seconds.</font></p>
      </td>
  </tr>
</table>
<br>
Client or network bottlenecks are often associated with these wait events:
<ul>
<li><i>SQL*Net message from client</i>; waiting for the client</li>
<li><i>SQL*Net more data from client</i>; waiting for additional data from the client</li>
<li><i>SQL*net more data to client</i>; lots of data being sent back to the client (maybe not strictly a client wait, but usually best to solve from a client's point of view)</li>
</ul>
If the TKProf / trace files show symptoms of a client bottleneck, go to the <i>Tuning Strategy</i> section below under <i>Client Bottlenecks</i> to identify potential causes and solutions.
	</td>	</tr>	</table><br> </td> </tr> </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="100%" class="detailMainTxt"><br>If your data shows symptoms of a client bottleneck, proceed to the section below called, "Choose a Tuning Strategy" and select the "Reduce Client Bottlenecks" strategy. </td> </tr> <tr> <td width="100%" class="detailEmptyLine">&nbsp;</td>  </tr>  </table> </td> </tr> <tr> <td width="100%" colspan="3" class="detailEmptyLine">&nbsp;</td> </tr> </table> <table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"> <tr> <td width="3%" class="detailMainTxt">&nbsp;</td> <td width="2%" valign="top" align="left">&nbsp;</td> <td width="95%" class="detailSubHdrTxt">Oracle Memory Consumption </td> </tr> <tr> <td width="3%" class="detailEmptyLayer">&nbsp;</td> <td width="2%" class="detailEmptyLayer">&nbsp;</td> <td width="95%"><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="100%" class="detailMainTxt">Memory consumption problems are described in detail in the section, <i>Slow Database > Identify the Issue  > Analysis > Verify Oracle OS Resource Usage > Check Memory Consumption</i>.  Please review the analysis techniques there.    </td>  </tr>  <tr>    <td width="100%" class="detailEmptyLine">&nbsp;</td>  </tr>  </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="100%" class="detailMainTxt"><br>If your data shows symptoms of a memory consumption problem, proceed to the section below called, "Choose a Tuning Strategy" and select the "Reduce Oracle Memory Consumption" strategy. </td> </tr> <tr> <td width="100%" class="detailEmptyLine">&nbsp;</td>  </tr>  </table> </td> </tr> <tr> <td width="100%" colspan="3" class="detailEmptyLine">&nbsp;</td> </tr> </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr> 	  <td width="3%" class="detailMainTxt">&nbsp;</td>    <td width="97%" class="detailMainTxt">Proceed to the next section to analyze the cause for the bottleneck.    </td>  </tr>  <tr>  <td width="100%" colspan="3" class="detailEmptyLine">&nbsp;</td>  </tr>  </table><p class="detailMainTxt">&nbsp;</p></td> <td width="25%" valign="top">&nbsp;</td></tr></table> <table width="100%" border="0" cellspacing="1" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">   <tr>     <td width="2%" valign="top" align="left">&nbsp;</td>     <td width="98%">     <p class="detailHdrTxt"><a name="Choose a Tuning Strategy">Choose a Tuning Strategy</a></p><hr class="detailLine">     </td>   </tr> </table> <table width="100%" border="0" cellspacing="1" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">   <tr>       <td width="75%" valign="top"><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="3%"  class="detailMainTxt">&nbsp;</td>    <td width="97%" class="detailMainTxt">Choose one of the tuning strategies below depending on the kind of performance problem that was verified earlier.    </td>  </tr>  <tr>    <td width="3%" class="detailMainTxt">&nbsp;</td>    <td width="97%" class="detailMainTxt">&nbsp;</td>  </tr>  </table> <table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"> <tr> <td width="3%" class="detailMainTxt">&nbsp;</td> <td width="2%" valign="top" align="left">&nbsp;</td> <td width="95%" class="detailSubHdrTxt">Oracle 10g+ ==> Use ADDM to Tune the Database </td> </tr> <tr> <td width="3%" class="detailEmptyLayer">&nbsp;</td> <td width="2%" class="detailEmptyLayer">&nbsp;</td> <td width="95%"><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="100%" class="detailMainTxt"><p>
Oracle 10g is able to perform automated tuning analysis using ADDM. This is the preferred way to begin a tuning effort if you are using Oracle 10g.  You can always tune the database manually as a last resort.<br>
<br>
Note: You must be licensed for the "Tuning Pack" to use ADDM.
</p>    </td>  </tr>  <tr>    <td width="100%" class="detailEmptyLine">&nbsp;</td>  </tr>  </table> </td> </tr> <tr> <td width="100%" colspan="3" class="detailEmptyLine">&nbsp;</td> </tr> </table> <table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"> <tr> <td width="3%" class="detailMainTxt">&nbsp;</td> <td width="2%" valign="top" align="left">&nbsp;</td> <td width="95%" class="detailSubHdrTxt">Reduce CPU Consumption </td> </tr> <tr> <td width="3%" class="detailEmptyLayer">&nbsp;</td> <td width="2%" class="detailEmptyLayer">&nbsp;</td> <td width="95%"><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="100%" class="detailMainTxt">There are two major types of CPU usage in the database: <br>
<ul>
<li><b>Parse CPU</b> : CPU used whenever Oracle parses (and optimizes) a statement. </li>
<li><b>Non-Parse CPU</b>:   CPU usage by Oracle NOT involving parsing.  This can be for things like reading blocks in the buffer cache,  performing a sort or a join, reading a file, etc. This is also called "Other" CPU.
</ul>
CPU is also tracked as "Recursive CPU".  This means CPU was used by a statement running "underneath" another statement. Typically this is due to SQL issued by PL/SQL or by internal SQL statements that Oracle has to run to process the top level query or operation.  In general, one can just focus on parse CPU and non-parse CPU because recursive CPU contains both and is not as useful for tuning.<br>
<br>
<b>Determine CPU Usage Type from TKProf</b>
<ul>
<li><b>Parse CPU</b>:  In the Overall Totals section, add the Parse CPU for both recusive and non-recursive statements</li>
<li><b>Total CPU</b>:  In the Overall Totals section, add the Total CPU for both recusive and non-recursive statements</li>
<li><b>Non-parse CPU</b>: total CPU - parse CPU</li>
<li>Determine which is larger: parse CPU or non-parse CPU</li>
</ul>
Consider the following causes for high parse CPU or other CPU:    </td>  </tr>  <tr>    <td width="100%" class="detailEmptyLine">&nbsp;</td>  </tr>  </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="1">Parse CPU Usage</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt"><b>Facts Required for Analysis</b>:
<ul>
<li>Is most of the parse time due to one (or a few queries) OR due to all queries?<br>
Check this by generating a new TKProf report sorted by parse CPU time as follows:<br>
<pre>tkpof trace_file_name output_file sort=prscpu </pre>
<br>
Review the parse CPU values of the queries at the top of the file and work your way down to see if parse CPU usage was widespread.
</li><br>
<li>Are the queries with high parse time being HARD parsed?<br>
Look at the queries in the TKProf with high parse CPU and see if "Misses in library cache during parse" is close to the total number of parses for that statement.</li>
</ul>
Review the following common observations to see if any match your data:	</td>	</tr>	</table><br> <table width="100%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"> <tr><td width="100%" class="detailMainTxt"> <p><b>Note:</b> This list shows some common observations and causes but is not a complete list.  If you do not find a possible cause in this list, you can always open a service request with Oracle to investigate other possible causes.  Please see the section below called, "Open a Service Request with Oracle Support Services". </p> </td></tr> </table> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>One or a few queries with High CPU usage during HARD parse</b></i></p>    <br><p class="detailTblTxt3">High CPU usage during hard parses are often seen with large statements involving many objects or partitioned objects.</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3"><ol>
<li>Check if the statement was hard parsed</li>
<li>Compare parse cpu time to parse elapsed time to see if  parse cpu time is more than 50%</i>
</ol></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Dynamic sampling is being used for the query and impacting the parse time</i></b></p>    <br><p class="detailTblTxt3">Dynamic sampling is performed by the CBO (naturally at parse time) when it is either requested via hint or parameter, or by default because statistics are missing.  Depending on the level of the dynamic sampling, it may take some time to complete - this time is reflected in the parse time for the statement.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>The parse time is responsible for most of  the query's overall elapsed time</li>
<li>The execution plan output of SQLTXPLAIN, the UTLXPLS script, or a 10053 trace will show if dynamic sampling was used while optimizing the query.</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Alternatives to Dynamic Sampling</i></b></p>    <br><p class="detailTblTxt3">If the parse time is high due to dynamic sampling, alternatives may be needed to obtain the desired plan without using dynamic sampling.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; some alternatives are easy to implement (add a hint), whereas others are more difficult (determine the hint required by comparing plans)</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; in general, the solution will affect only the query.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Some alternatives to dynamic sampling are:<br>
<ol>
<li>In 10g or higher, use the SQL Tuning Advisor (STA)  to generate a profile for the query (in fact, its unlikely you'll even set dynamic sampling on a query that has been tuned by the STA)</li>
<li>Find the hints needed to implement the plan normally generated with dynamic sampling and modify the query with the hints</li>
<li>Use a stored outline to capture the plan generated with dynamic sampling</li>
</ol>
<br>
For very volatile data (in which dynamic sampling was helping obtain a good plan), an approach can be used where an application will choose one of several hinted queries depending on the state of the data (i.e., if data recently deleted use query #1, else query #2).
</p>    <br><p class="detailTblTxt3">Documents for hints:<br></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/hintsref.htm#sthref1602">Using Optimizer Hints</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=221970.1">Forcing a Known Plan Using Hints</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=50607.1">How to Specify an Index Hint</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=29236.1">QREF:  SQL Statement HINTS</a></p>    <br><p class="detailTblTxt3">Documents for stored outlines / plan stability:<br></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/outlines.htm#sthref1787">Using Plan Stability</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=67536.1">Stored Outline Quick Reference</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=122812.1">How to Tune a Query that Cannot be Modified</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=102311.1">How to Move Stored Outlines for One Application from One Database to Another</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Query has many IN LIST parameters / OR statements</i></b></p>    <br><p class="detailTblTxt3">The CBO may take a long time to cost a statement with dozens of IN LIST / OR clauses.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>The parse time is responsible for most of  the query's overall elapsed time</li>
<li>The query has a large set of IN LIST values or OR clauses.</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Implement the NO_EXPAND hint to avoid transforming the query block</i></b></p>    <br><p class="detailTblTxt3">In versions 8.x and higher, this will avoid the transformation to separate query blocks with UNION ALL (and save parse time) while still allowing indexes to be used with the IN-LIST ITERATOR operation.  By avoiding a large number of query blocks, the CBO will save time (and hence the parse time will be shorter) since it doesn't have to optimize each block.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; hint applied to a query.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; hint applied only to the query and will not affect other queries.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the reference documents.</p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62153.1">Optimization of large inlists/multiple OR`s</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/B19306_01/server.102/b14200/sql_elements006.htm#SQLRF50502">NO_EXPAND Hint </a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Partitioned table with many partitions</i></b></p>    <br><p class="detailTblTxt3">The use of partitioned tables with many partitions (more than 1,000) may cause high parse CPU times while the CBO determines an execution plan.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ol>
<li>The parse time is responsible for most of  the query's overall elapsed time</li>
<li>Determine total number of partitions for all tables used in the query.</li>
<li>If the number is over 1,000, this cause is likely</li>
</ol>
</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   9.2.0.x, 10.0.0: Bug 2785102 - Query involving many partitions (>1000) has high CPU/memory use</i></b></p>    <br><p class="detailTblTxt3">A query involving a table with a large number of partitions takes a long time to  parse, causes rowcache  contention, and high CPU consumption. The case of this bug involved a table with greater than 10000 partitions and global statistics ere not gathered.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; application of a patchset.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; patchsets generally are low risk because they have been regression tested.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Apply patchset 9.2.0.4<br>
<br>
Workaround: <br>Set "_improved_row_length_enabled"=false</p>    <br><p class="detailTblTxt3">Additional bug information:</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=BUG&id=2785102">Bug 2785102</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>Many queries being HARD parsed</b></i></p>    <br><p class="detailTblTxt3">Hard parsing is costly for the database since it has to create various memory structures in the library cache and also optimize the SQL statement.  If many queries are being hard parsed, parse CPU will be high.</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3"><ol>
<li>Check if many statements were hard parsed</li>
</ol></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Unshared SQL Due to Literals</i></b></p>    <br><p class="detailTblTxt3">SQL statements are using literal values where a bind value could have been used.  The literal values cause the statement to be unshared and will force a hard parse.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><br>
TKProf :
<ul class="detailTblTxt3">
<li>Use the report sorted by elapsed parse time</li>
<li>Look at the top statements and determine if they are being hard parsed; these will have "Misses in the library cache" equal or close to the total number of parses</li>
<li>Examine the statements that are being hard parsed and look for the presence of literal values.</li></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Rewrite the SQL to use bind values</i></b></p>    <br><p class="detailTblTxt3">Rewriting the SQL to use bind values will allow the statement to be reused when specific values in the statement change but the overall statement is the same.  This is the best way to promote sharing of SQL statements in the library cache.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium or high effort; rewriting statements requires a change to the application but the change is rather trivial.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; the use of bind values could lead to worse execution plans for some statements.  The statements modified to use binds values should be thoroughly tested to avoid regressing the statement's performance.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Troubleshooting</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=296377.1">Handling and resolving unshared cursors/large version_counts</a></p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#sthref551">7.3.1.3 SQL Sharing Criteria</a></p>    <br><p class="detailTblTxt3">Searches</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/ranked?word=bind+variables&partno=b14407">Pro*C/C++ Precompiler Programmer's Guide</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/ranked?word=bind+variables&partno=b14211">Performance Tuning Guide</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Use the CURSOR_SHARING initialization parameter</i></b></p>    <br><p class="detailTblTxt3">The CURSOR_SHARING parameter will substitute literal values with bind values in a statement automatically.  The settings for this parameter are:
<ul class="detailTblTxt3">
<li><i>EXACT</i>: Leave the statement as it was written with literals (default value)</li>
<li><i>FORCE</i>: Substitute all literals with binds (as much as possible)</li>
<li><i>SIMILAR</i>: Substitute literals with binds only if the query's execution plan won't change (i.e., safe literal replacement)</li>
</ul>
In general, most OLTP apps that use equality predicates will see little change to their execution plans, but the effects of these parameters should be tested in your application.<br>
<br>
These parameters can be set at the session level to further contain their effects - this is the preferred way to use them to minimize widespread changes.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; an init.ora / spfile change.  In the worst case it may require a LOGON trigger to set it for a session.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; the use of bind values could lead to worse execution plans for some statements.  Risk can be mitigated by using SIMILAR instead of FORCE but this may not make enough statements shareable.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams035.htm#sthref154">Reference: CURSOR_SHARING Parameter</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=94036.1">Init.ora Parameter "CURSOR_SHARING" Reference Note</a></p>    <br><p class="detailTblTxt3">Troubleshooting</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#i31512">CURSOR_SHARING for Existing Applications</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=296377.1">Handling and resolving unshared cursors/large version_counts</a></p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#sthref551">7.3.1.3 SQL Sharing Criteria</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Shared SQL being aged out</i></b></p>    <br><p class="detailTblTxt3">The shared pool is too small and is causing many statements that could be shared to age out of the library cache and later reloaded.  Each reload requires a hard parse and impacts the CPU and latches.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><br>
TKProf:
<ul class="detailTblTxt3">
<li>Use the report sorted by elapsed parse time</li>
<li>Look at the top statements and determine if they are being hard parsed; these will have "Misses in the library cache" equal or close to the total number of parses</li>
<li>Examine the statements that are being hard parsed and look for the ABSENCE of literal values, this means these statements could have been shared but weren't (this is not entirely reliable since you could have statements that use binds but will not be executed again).</li>
</ul>
AWR or statspack reports:<br>
<ul class="detailTblTxt3">
<li>Library Cache statistics section shows that <i>reloads</i> are high (usually several thousand per hour) and little or no invalidations are seen </li>
<li>The "% SQL with executions>1" is over 60%, meaning statements are being shared</li>
<u/ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Increase the size of the shared pool</i></b></p>    <br><p class="detailTblTxt3">Increasing the shared pool size will reduce the need to age out statements that could be shared.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; an init.ora / spfile change. </p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; increasing the size of the shared pool is not risky unless:
<ul class="detailTblTxt3">
<li>There are many unshared statements due to literals
<br>
For more details, see: <a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a>
</li>
<li>The machine doesn't have enough physical memory and starts swapping
<br>
<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=17094.1">TECH: Unix Virtual Memory, Paging & Swapping explained</a></li>
</ul>
Verify the above points before changing the size of the shared pool.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14231/create.htm#BABDBIGB">Admin: Using Manual Shared Memory Management, see Specifying the Shared Pool Size</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams196.htm#sthref804">Reference: SHARED_POOL_SIZE Parameter</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams196.htm#CHDGGAIB">Reference: SHARED_POOL_SIZE and Automatic Storage Management</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   10g+: Use the <i>Automatic Shared Memory Manager (ASMM)</i> to adjust the shared pool size</i></b></p>    <br><p class="detailTblTxt3">ASMM will automate memory sizing for the shared pool to ensure an optimal amount is available. You will need to set a reasonable value for SGA_MAX_SIZE and SGA_TARGET to enable ASMM.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; an init.ora / spfile change. </p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; ASMM will ensure sufficient memory is available.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm">Concepts: Memory Architecture</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm#CNCPT810">Concepts: Automatic Shared Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14231/create.htm#BABGCBHI">Admin: Using Automatic Shared Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#i30970">Performance Tuning: Configuring and Using the Shared Pool and Large Pool</a></p>    <br><p class="detailTblTxt3">Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=257643.1">Oracle Database 10g Automated SGA Memory Tuning</a></p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=295626.1">How To Use Automatic Shared Memory Management (ASMM) In Oracle10g</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=270935.1">Shared pool sizing in 10g</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Keep ("pin") frequently used large PL/SQL and cursor objects in the shared pool</i></b></p>    <br><p class="detailTblTxt3">Use the DBMS_SHARED_POOL.KEEP() procedure to mark large, frequently used PL/SQL and SQL objects in the shared pool and avoid them being aged out.  This will reduce reloads and fragmentation since the object doesn't need to keep reentering the shared pool over and over.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; need to identify which objects should be kept and then run a procedure to keep them.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; if you aren't careful in keeping these objects, you may keep too many of them and cause ORA-4031 errors.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm">Concepts: Memory Architecture</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#sthref647">Performance Tuning: Keeping Large Objects to Prevent Aging</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/appdev.102/b14258/d_shpool.htm#sthref7134">PL/SQL DBMS_SHARED_POOL</a></p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=1012047.6">How To Pin Objects in Your Shared Pool</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=101627.1">How to Automate Pinning Objects in Shared Pool at Database Startup</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=305529.1">How To Use SYS.DBMS_SHARED_POOL In a PL/SQL Stored procedure To Pin objects in Oracle's Shared Pool</a></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=61760.1">Using the Oracle DBMS_SHARED_POOL Package</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p><br> </td> </tr> </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="2">Non-Parse CPU Usage</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt">Non-Parse CPU usage is usually due to poor performing SQL statements or PL/SQL procedures.  In this case, CPU is used for these two types of calls:
<ul>
<li><b>EXECUTE</b>: tracks CPU usage by PL/SQL, DML, and DDL statements.  This also includes CPU used to retrieve rows affected by the DML statement.
</li><br>
<li><b>FETCH</b>: tracks CPU usage by SELECT statements when rows are being accessed and being prepared to return to the client.  This includes the effort to traverse indexes, read blocks, perform join operations, and basically follow a query's execution plan to obtain rows.
</li>
</ul>
<b>Facts Required for Analysis</b>:
<ul>
<li>Is most of the non-parse CPU time due to one (or a few queries) OR due to all queries?<br>
Check this by generating a new TKProf report sorted by fetch and execute CPU time as follows:<br>
<pre>tkpof trace_file_name output_file sort=fchcpu,execpu </pre>
Review the fetch and execute CPU values of the queries at the top of the file and work your way down to see if this type of CPU usage was widespread.
</li><br>
<li>Is most of the CPU time spent for fetching or executing?<br>
If most time is spent executing, focus attention on DML and PL/SQL, otherwise on SELECT statements
</li>
</ul>
Review the following common observations to see if any match your data:	</td>	</tr>	</table><br> <table width="100%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"> <tr><td width="100%" class="detailMainTxt"> <p><b>Note:</b> This list shows some common observations and causes but is not a complete list.  If you do not find a possible cause in this list, you can always open a service request with Oracle to investigate other possible causes.  Please see the section below called, "Open a Service Request with Oracle Support Services". </p> </td></tr> </table> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>One or a few queries use most non-parse CPU</b></i></p>    <br><p class="detailTblTxt3">One or a few queries stand out as the heaviest users of non-parse CPU time.  This signifies that those particular queries need to be tuned.</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>TKProf: Only a few statements consume most of the total CPU usage (top statements when TKProf is sorted by fetch and execute CPU time) </li>
<br>
<li>AWR or statspack: Only a few SQL statements are reported to have the highest CPU usage, and these statements' CPU usage is responsible for most of the database's CPU time (as reported in the <i>Top 5 Timed Events</i> section)</li>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   SQL tuning required</i></b></p>    <br><p class="detailTblTxt3">If one or a few statements use most of the fetch or execute time, then these statements need to be tuned.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">Most of the CPU time either in the entire instance (shown in AWR or statspack) or within a session (shown in TKProf) is consumed by one or a few statements.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   10g+: Tune the query using the SQL Tuning Advisor</i></b></p>    <br><p class="detailTblTxt3">Oracle's SQL Tuning Advisor can help tune specific SQL statements quickly and easily if you are licensed to use the Enterprise Manager Tuning Pack.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; the SQL Tuning Advisor is easy to use and requires little user effort to tune a statement.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">The tuning action will generally be to create a statement profile.  The profile affects only a single statement.  Other recommendations may have wide ranging effects and should be tested thoroughly.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=262687.1 ">How to use the Sql Tuning Advisor</a></p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_tune.htm%23PFGRF028">Automatic SQL Tuning </a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14196%2Fmontune003.htm%23sthref784">Using Advisors to Optimize Database Performance</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_tune.htm%23sthref1144">Using SQL Tuning Advisor with Oracle Enterprise Manager</a></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fappdev.102%2Fb14258%2Fd_sqltun.htm%23sthref7584">SQL Tuning Advisor Subprograms </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/sql_tune.htm#CHDBIGDF">Using SQL Tuning Advisor APIs </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=271196.1">Automatic SQL Tuning - SQL Profiles</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Tune the query using the Performance Diagnostic Guide's Query Tuning Section</i></b></p>    <br><p class="detailTblTxt3">This is a query tuning problem that needs to be addressed in detail using the information in the Performance Diagnostic Guide's Query Tuning section.<br></p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; manual query tuning can be easy or difficult depending on the query and application.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; generally query tuning actions will affect only a single query.  Of course this will depend on the ultimate actions taken and some of them can affect an entire instance.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Click on the Query Tuning tab, then skip to the Determine a Cause > Data Collection step.<br>
<br>
Other helpful documents are listed below:</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_1016.htm%23PFGRF006">SQL Tuning Overview </a></p>    <br><p class="detailTblTxt3"> How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=233112.1">Diagnosing Query Tuning Problems</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=67522.1">Diagnosing Why a Query is Not Using an Index</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p><br> </td> </tr> </table> </td> </tr> <tr> <td width="100%" colspan="3" class="detailEmptyLine">&nbsp;</td> </tr> </table> <table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"> <tr> <td width="3%" class="detailMainTxt">&nbsp;</td> <td width="2%" valign="top" align="left">&nbsp;</td> <td width="95%" class="detailSubHdrTxt">Reduce Wait Bottlenecks </td> </tr> <tr> <td width="3%" class="detailEmptyLayer">&nbsp;</td> <td width="2%" class="detailEmptyLayer">&nbsp;</td> <td width="95%"><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="100%" class="detailMainTxt">Review the wait categories below to find the main waits that are affecting your database.  The categories contain wait events that are most commonly found in performance issues - the list is NOT exhaustive but does cover events found causing problems in over 90% of wait-related performance problems with the database.    </td>  </tr>  <tr>    <td width="100%" class="detailEmptyLine">&nbsp;</td>  </tr>  </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="1">Wait Events Summary</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt">Once you have determined the wait bottlenecks, you can examine possible causes and solutions in the sections below.  The various wait events are categorized according to the following table: <br>
<br>
<table border="2" cellpadding="0" cellspacing="0" style="border-style:solid; border-collapse: collapse; padding-left:4; padding-right:4; padding-top:1; padding-bottom:1" bordercolor="#336699" width="80%" class="detailTraceTxt">
 <tr>
  <td width="50%"><p class="detailTblHdr">Event Name</p></td>
  <td width="50%"><p class="detailTblHdr">Category</p></td>
 </tr>
 <tr>
  <td width="50%" class="detailTblCol1"><p>buffer busy waits</p></td>
  <td width="50%" class="detailTblCol2"><p>Concurrency - Buffer Busy Waits</p></td>
 </tr>
 <tr>
  <td width="50%" class="detailTblCol1"><p>db file scattered read</span></p></td>
  <td width="50%" class="detailTblCol2"><p>Reads / Writes</p></td>
 </tr>
 <tr>
  <td width="50%" class="detailTblCol1"><p>db file sequential read</p></td>
  <td width="50%" class="detailTblCol2"><p>Reads / Writes</p></td>
 </tr>
 <tr bordercolor="#333333">
  <td width="50%" class="detailTblCol1"><p>direct path read</p></td>
  <td width="50%" class="detailTblCol2"><p>Reads / Writes</p></td>
 </tr>
 <tr bordercolor="#333333">
  <td width="50%" class="detailTblCol1"><p>direct path write</p></td>
  <td width="50%" class="detailTblCol2"><p>Reads / Writes</p></td>
 </tr>
 <tr bordercolor="#333333">
  <td width="50%" class="detailTblCol1"><p>enq: TM - contention</p></td>
  <td width="50%" class="detailTblCol2"><p>Concurrency - Enqueues / Locks / Pins</p></td>
 </tr>
 <tr bordercolor="#333333">
  <td width="50%" class="detailTblCol1"><p>enq: TX - contention</p></td>
  <td width="50%" class="detailTblCol2"><p>Concurrency - Enqueues / Locks / Pins</p></td>
 </tr>
 <tr bordercolor="#333333">
  <td width="50%" class="detailTblCol1"><p>enq: TX - row lock contention</p></td>
  <td width="50%" class="detailTblCol2"><p>Concurrency - Enqueues / Locks / Pins</p></td>
 </tr>
 <tr bordercolor="#333333">
  <td width="50%" class="detailTblCol1"><p>free buffer waits</p></td>
  <td width="50%" class="detailTblCol2"><p>Reads / Writes</p></td>
 </tr>
 <tr bordercolor="#333333">
  <td width="50%" class="detailTblCol1"><p>global cache cr request</p></td>
  <td width="50%" class="detailTblCol2"><p>Cluster</p></td>
 </tr>
 <tr bordercolor="#333333">
  <td width="50%" class="detailTblCol1"><p>latch: cache buffers chains</p></td>
  <td width="50%" class="detailTblCol2"><p>Concurrency - Latches and Mutexes</p></td>
 </tr>
 <tr bordercolor="#333333">
  <td width="50%" class="detailTblCol1"><p>latch: library cache</p></td>
  <td width="50%" class="detailTblCol2"><p>Concurrency - Latches and Mutexes</p></td>
 </tr>
 <tr bordercolor="#333333">
  <td width="50%" class="detailTblCol1"><p>latch: shared pool</p></td>
  <td width="50%" class="detailTblCol2"><p>Concurrency - Latches and Mutexes</p></td>
 </tr>
 <tr bordercolor="#333333">
  <td width="50%" class="detailTblCol1"><p>library cache lock</p></td>
  <td width="50%" class="detailTblCol2"><p>Concurrency - Enqueues / Locks / Pins</p></td>
 </tr>
 <tr bordercolor="#333333">
  <td width="50%" class="detailTblCol1"><p>library cache pin</p></td>
  <td width="50%" class="detailTblCol2"><p>Concurrency - Enqueues / Locks / Pins</p></td>
 </tr>
 <tr bordercolor="#333333">
  <td width="50%" class="detailTblCol1"><p>log buffer space</p></td>
  <td width="50%" class="detailTblCol2"><p>Configuration</p></td>
 </tr>
 <tr bordercolor="#333333">
  <td width="50%" class="detailTblCol1"><p>log file sync</p></td>
  <td width="50%" class="detailTblCol2"><p>Commit</p></td>
 </tr>
 <tr bordercolor="#333333">
  <td width="50%" class="detailTblCol1"><p>read by other session</p></td>
  <td width="50%" class="detailTblCol2"><p>Concurrency - Buffer Busy Waits
</p></td>
 </tr>
</table>
<br>
See the 10gR2 documentation for <a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/instance_tune.htm#sthref888">Wait Events Statistics</a> for helpful information on specific wait events.


	</td>	</tr>	</table><br> </td> </tr> </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="2">Cluster</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt">Waits related to Real Application Cluster resources (for example, global cache resources such as 'gc buffer busy'.  Typical events:<br>
<br>
<u>Oracle 10g:</u>
<ul>
<li>gc buffer busy</li>
<li>gc cr request</li>
<li>gc cr block 2-way</li>
<li>gc cr block 3-way</li>
<li>gc current block busy</li>
<li>gc current block 2-way</li>
<li>gc current block 3-way</li>
<li>gc current block busy</li>
</ul>
<u>Oracle 9.2.x:</u>
<ul>
<li>TBD</li>
</ul>
<u>Oracle 9.0.1.x:</u>
<ul>
<li>TBD</li>
</ul>
<b>Facts Required for Analysis</b>:
<ul>
<li>TKProf, elapsed times for events (Overall Totals, recursive and non-recursive):
<ul>
<li>Total wait time for the event</li>
<li>Average wait for the event = total wait time / total waits</li>
</ul>
</li>
</ul>	</td>	</tr>	</table><br> <table width="100%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"> <tr><td width="100%" class="detailMainTxt"> <p><b>Note:</b> This list shows some common observations and causes but is not a complete list.  If you do not find a possible cause in this list, you can always open a service request with Oracle to investigate other possible causes.  Please see the section below called, "Open a Service Request with Oracle Support Services". </p> </td></tr> </table> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>wait: global cache CR request</b></i></p>    <br><p class="detailTblTxt3">The event is waited for when a session is looking for a consistent read version of a block but cannot find it in its local cache. It also implies that the current block is not cached locally. The wait ends when either a block or a grant arrives.
Depending on whether the remote instance has the block cached or not, the requesting instance receives
<li>A CR block, resulting in the statistic <i>global cache cr block received</i> to be incremented
<li>A grant, resulting in the statistic <i>global cache gets</i> to be incremented
<li>(9i RAC Only) A current block, resulting in the statistic <i>global cache current blocks received</i> to be incremented.</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>TKProf: 
<ul class="detailTblTxt3">
<li>Overall wait event summary for non-recursive and recursive statements shows significant amount of time for <i>global cache CR request</i> waits.</li>
</ul>
<br>
<li>AWR or statspack: 
<ul class="detailTblTxt3">
<li>Significant waits for <i>global cache CR request</i></li>
</ul>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   CPU saturation</i></b></p>    <br><p class="detailTblTxt3">CPU saturation can induce certain wait events like latch contention, log file sync, or cluster-related events.  <br>
<br>
In some cases, a foreground process depends on a background process for an operation (e.g., a  foreground's commit waits for logwriter to flush redo to disk).  If the background process has to wait for CPU, then any dependent foreground processes will also wait.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">OS Data shows that CPU utilization is at or near 100% and the run queue size per CPU is greater than 4.  This condition should have been caught earlier in the diagnostic process when OS data was being analyzed.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate the reasons for CPU saturation</i></b></p>    <br><p class="detailTblTxt3">See this guide's "Issue Identification > Analysis > Verify Oracle OS Resource Usage" section for more details.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Determine which processes are using most of the CPU on the machine.  They could be Oracle processes (including more than one instance) or non-Oracle processes.  If they are Oracle processes, then you should have detected this already in a previous step and investigated the reasons for Oracle's CPU consumption (of course, better late than never).  Otherwise, you will need to find out the reason for the non-Oracle CPU consumption (outside of our scope).
<br>
You can use various OS tools and Oracle EM to investigate this.<br>
<br>
Oracle recommends using the "OS Watcher" utility to capture OS diagnostics because it offers an easy way to capture data and report OS data for several platforms.<br>
<br>
There are also commands available in Unix flavors that can help.  For example, use the <i><b>top</b></i> utility or the <i><b>ps</b></i> command, ps -ef -o pid,pcpu,comm | sort -k 2 (this will give you a sorted list of processes using CPU - look at the 2nd column, "% CPU").<br>
<br>
See the documents below for additional details.</p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id= 224176.1">How to use OS commands to diagnose Database Performance issues?</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=164768.1">Diagnosing High CPU Utilization</a></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=301137.1">OS Watcher User Guide</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://st-doc.us.oracle.com/10/102/em.102/b31949/host_3rdparty_management.htm#sthref1533">Enterprise Manager: Host Performance page</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Inefficient SQL causing too many block reads across nodes</i></b></p>    <br><p class="detailTblTxt3">A poorly performing SQL statement will require an excessive amount of reads.  In a RAC database those reads may require bringing blocks from other nodes and waiting for those blocks to arrive.
</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">TKProf: <br>
<ul class="detailTblTxt3">
<li>Significant waits on <i>global cache CR request</i></li>
<li>SQL statements perform 100 or more logical reads (query + current) per row per execution</li>
<li>Full table scans (in a RAC database) may be seen in the execution plan for a statement that is waiting on this event</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   10g+: Tune the query using the SQL Tuning Advisor</i></b></p>    <br><p class="detailTblTxt3">Oracle's SQL Tuning Advisor can help tune specific SQL statements quickly and easily if you are licensed to use the Enterprise Manager Tuning Pack.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; the SQL Tuning Advisor is easy to use and requires little user effort to tune a statement.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">The tuning action will generally be to create a statement profile.  The profile affects only a single statement.  Other recommendations may have wide ranging effects and should be tested thoroughly.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=262687.1 ">How to use the Sql Tuning Advisor</a></p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_tune.htm%23PFGRF028">Automatic SQL Tuning </a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14196%2Fmontune003.htm%23sthref784">Using Advisors to Optimize Database Performance</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_tune.htm%23sthref1144">Using SQL Tuning Advisor with Oracle Enterprise Manager</a></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fappdev.102%2Fb14258%2Fd_sqltun.htm%23sthref7584">SQL Tuning Advisor Subprograms </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/sql_tune.htm#CHDBIGDF">Using SQL Tuning Advisor APIs </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=271196.1">Automatic SQL Tuning - SQL Profiles</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Tune the query using the Performance Diagnostic Guide's Query Tuning Section</i></b></p>    <br><p class="detailTblTxt3">This is a query tuning problem that needs to be addressed in detail using the information in the Performance Diagnostic Guide's Query Tuning section.<br></p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; manual query tuning can be easy or difficult depending on the query and application.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; generally query tuning actions will affect only a single query.  Of course this will depend on the ultimate actions taken and some of them can affect an entire instance.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Click on the Query Tuning tab, then skip to the Determine a Cause > Data Collection step.<br>
<br>
Other helpful documents are listed below:</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_1016.htm%23PFGRF006">SQL Tuning Overview </a></p>    <br><p class="detailTblTxt3"> How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=233112.1">Diagnosing Query Tuning Problems</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=67522.1">Diagnosing Why a Query is Not Using an Index</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Buffer cache is too small</i></b></p>    <br><p class="detailTblTxt3">A small buffer cache will cause more physical reads or, for a RAC database, additional block transfers than would otherwise be required.
</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">TKProf: <br>
<ul class="detailTblTxt3">
<li>Significant waits on <db file sequential read</i> waits , and/or for RAC, <i>global cache CR request</i></li>
<li>SQL statements perform 10 or fewer logical reads (query + current) per row per table per execution, meaning that the statement is reasonably tuned (i.e., if a query joins 2 tables and returns 10 rows, one would expect less than 10*2*3 = 60 logical reads per execution</li>
<li>Full table scans (in a RAC database) are NOT seen in the execution plan for a statement that is waiting on this event</li>
<li>The application is an OLTP type of application and in the overall section of the report,  physical reads ("disk") are equal or close to the number of logical reads (query + current).
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Manually Increase the size of the buffer cache using the <i>db cache size</i> parameter</i></b></p>    <br><p class="detailTblTxt3">Increase the size of the buffer cache and monitor the effects of the change.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; change an initialization parameter</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk. However, there must be sufficient memory on the machine to avoid memory shortage problems.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm#CNCPT007">Concepts: Oracle Memory Architecture</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fmemory.htm%23sthref485">Configuring and Using the Buffer Cache</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   10g+: Use automatic shared memory management (ASMM) </i></b></p>    <br><p class="detailTblTxt3">ASMM will seek to optimize the size of the buffer cache without human intervention.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; change an initialization parameter</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk. Be sure to set SGA_TARGET to a reasonable value.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm">Concepts: Memory Architecture</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm#CNCPT810">Concepts: Automatic Shared Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14231/create.htm#BABGCBHI">Admin: Using Automatic Shared Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#i30970">Performance Tuning: Configuring and Using the Shared Pool and Large Pool</a></p>    <br><p class="detailTblTxt3">Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=257643.1">Oracle Database 10g Automated SGA Memory Tuning</a></p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=295626.1">How To Use Automatic Shared Memory Management (ASMM) In Oracle10g</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=270935.1">Shared pool sizing in 10g</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   More lock manager processes are needed</i></b></p>    <br><p class="detailTblTxt3">The database may require more lock manager processes to meet the demands of the database.  When the lock managers are too busy, block transfers will take longer and cause waits for these blocks.
</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">TKProf: <br>
<ul class="detailTblTxt3">
<li>Significant waits on <i>global cache CR request</i></li>
<li>SQL statements perform 100 or fewer logical reads (query + current) per row per execution, meaning that the statement is reasonably tuned</li>
<li>Full table scans (in a RAC database) are not seen in the execution plan for a statement that is waiting on this event</li>
</ul>
OS data:<br>
<ul class="detailTblTxt3">
<li>The LMD process is very busy for the instance, possibly using as much as one CPU on a consistent basis</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Increase the number of lock manager processes </i></b></p>    <br><p class="detailTblTxt3">Increase the number of Lock Manager processes for the instance by altering the value of the init.ora parameter <i> _LM_DLMD_PROCS </i></p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; change an initialization parameter</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk. </p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=120201.1">TBD</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p><br> </td> </tr> </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="3">Commit</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt">This wait class only comprises one wait event - wait for redo log write confirmation after a commit (that is, 'log file sync').  <br>
<ul>
<li>log file sync</li>
</ul>
<b>Facts Required for Analysis</b>:
<ul>
<li>TKProf, elapsed times for events (Overall Totals, recursive and non-recursive):
<ul>
<li>Total wait time for the event</li>
<li>Average wait for the event = total wait time / total waits</li>
</ul>
</li>
<li>AWR or statspack report
<ul>
<li>Waits, average wait time for <i>log file sync</i></li>
<li>Instance Statistics, <i>user commits</i></li>
<li>Instance Statistics, <i>user calls</i></li>
<li>Calculate, user calls / commit</i>
</ul>
</li>
</ul>	</td>	</tr>	</table><br> <table width="100%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"> <tr><td width="100%" class="detailMainTxt"> <p><b>Note:</b> This list shows some common observations and causes but is not a complete list.  If you do not find a possible cause in this list, you can always open a service request with Oracle to investigate other possible causes.  Please see the section below called, "Open a Service Request with Oracle Support Services". </p> </td></tr> </table> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>Wait: log file sync</b></i></p>    <br><p class="detailTblTxt3">When a user session commits (or rolls back), the session's redo information must be flushed to the redo logfile by
the LGWR background process. This event shows the time that it takes for  the LGWR to complete the write and then post the requester. The server process performing the COMMIT or ROLLBACK waits under this event for the write to the redo log to complete.<br>
<br>
Wait class: Commit, typically foreground</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>TKProf: Overall summary for non-recursive and recursive statements shows significant amount of time for <i>log file sync</i> waits. </li>
<br>
<li>AWR or statspack: <i>log file sync</i> waits is among the top timed events</li>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Frequent commits by the application</i></b></p>    <br><p class="detailTblTxt3">The application is committing frequently (and possibly unnecessarily</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>Significant amount of the total time in TKProf is due to this wait event</li>
<li>In the AWR or Statspack report, the average wait time for <i>log file sync</i> is much higher than the average wait time for <i>log file parallel write</i> - meaning that most of the wait for log writer is NOT due to waiting for the redo to be written</li>
<br>
<li>In the AWR or Statspack report, the average <i>user commits</i> / <i>user call</i> is less than 30 - meaning that commits are happening frequently</li> 
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Reduce the rate of commits or rollbacks</i></b></p>    <br><p class="detailTblTxt3">Look into the application and determine if more rows can be processed per commit.  Sometimes a developer will allow the underlying language to "auto-commit" by default; this is suboptimal and should be controlled by the developer.<br>
<br>
If the ratio of rollbacks to commits is more than 10 percent, investigate if this is unexpected or can be avoided.  Rollback operations will cause the logwriter to flush redo and induce waits on <i>log file sync</i> waits just as commits would.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; this will require some work and coordination with developers to examine their code.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; however, the business needs must be well understood to commit at the right times.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=34592.1">WAITEVENT: "log file sync" Reference Note</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=34583.1">WAITEVENT: "log file parallel write" Reference Note</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Redolog file write performance problems</i></b></p>    <br><p class="detailTblTxt3">Logwriter is not able to write to the redo log files efficiently; writes are taking too long.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>Significant amount of the total time in TKProf is due to this wait event</li>
<br>
<li>In the AWR or Statspack report, the average wait time for <i>log file sync</i> is very similar to the average wait time for <i>log file parallel write</i> - meaning that most of the wait for log writer is  due to waiting for the redo to be written</li>
<li>The average time for the <i>log file parallel write</i> event is more than 20msec
<br>
<li>In the AWR or Statspack report, the average <i>user commits</i> / <i>user call</i> is more than 30 - meaning that commits are NOT happening frequently</li> 
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate redolog file write performance</i></b></p>    <br><p class="detailTblTxt3">Work with the system administrator to examine the filesystems where the redologs are located.  Look for other processes that may be writing to that same location or a capacity problem.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; this will require some work and coordination with system administrators to examine the filesystems.  The redolog files may need to be moved.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; may involve some downtime.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=34592.1">WAITEVENT: "log file sync" Reference Note</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=34583.1">WAITEVENT: "log file parallel write" Reference Note</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   CPU saturation</i></b></p>    <br><p class="detailTblTxt3">CPU saturation can induce certain wait events like latch contention, log file sync, or cluster-related events.  <br>
<br>
In some cases, a foreground process depends on a background process for an operation (e.g., a  foreground's commit waits for logwriter to flush redo to disk).  If the background process has to wait for CPU, then any dependent foreground processes will also wait.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">OS Data shows that CPU utilization is at or near 100% and the run queue size per CPU is greater than 4.  This condition should have been caught earlier in the diagnostic process when OS data was being analyzed.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate the reasons for CPU saturation</i></b></p>    <br><p class="detailTblTxt3">See this guide's "Issue Identification > Analysis > Verify Oracle OS Resource Usage" section for more details.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Determine which processes are using most of the CPU on the machine.  They could be Oracle processes (including more than one instance) or non-Oracle processes.  If they are Oracle processes, then you should have detected this already in a previous step and investigated the reasons for Oracle's CPU consumption (of course, better late than never).  Otherwise, you will need to find out the reason for the non-Oracle CPU consumption (outside of our scope).
<br>
You can use various OS tools and Oracle EM to investigate this.<br>
<br>
Oracle recommends using the "OS Watcher" utility to capture OS diagnostics because it offers an easy way to capture data and report OS data for several platforms.<br>
<br>
There are also commands available in Unix flavors that can help.  For example, use the <i><b>top</b></i> utility or the <i><b>ps</b></i> command, ps -ef -o pid,pcpu,comm | sort -k 2 (this will give you a sorted list of processes using CPU - look at the 2nd column, "% CPU").<br>
<br>
See the documents below for additional details.</p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id= 224176.1">How to use OS commands to diagnose Database Performance issues?</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=164768.1">Diagnosing High CPU Utilization</a></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=301137.1">OS Watcher User Guide</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://st-doc.us.oracle.com/10/102/em.102/b31949/host_3rdparty_management.htm#sthref1533">Enterprise Manager: Host Performance page</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p><br> </td> </tr> </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="4">Concurrency - Buffer Busy Waits</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt">Waits for miscellaneous internal database resources used to coordinate operations.  Typical events:
<ul>
<li>buffer busy waits</li>
<li>read by other session</li>
</ul>
<b>Facts Required for Analysis</b>:<br>
<br>
The key is to determine which segments and statements are causing the performance problems.  Please read the note, <a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=413931.1">How to Identify The Segment Associated with Buffer Busy Waits</a> for more details.<br>
<br>
After you determine which segment is associated with the buffery busy waits, examine the table below for common causes.	</td>	</tr>	</table><br> <table width="100%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"> <tr><td width="100%" class="detailMainTxt"> <p><b>Note:</b> This list shows some common observations and causes but is not a complete list.  If you do not find a possible cause in this list, you can always open a service request with Oracle to investigate other possible causes.  Please see the section below called, "Open a Service Request with Oracle Support Services". </p> </td></tr> </table> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>Wait: Buffer busy waits</b></i></p>    <br><p class="detailTblTxt3"><i>Buffer busy waits </i> indicate that there are some buffers in the buffer cache that multiple processes are attempting to either access concurrently while its being read from disk or waiting for another session's block change to complete. In this case (<i>buffer busy wait > data block</i>),  the contention is on the actual block where the data is stored, and can be either a table or an index.<br>
<br>
Wait class: Concurrency, typically foreground</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>TKProf: 
<ul class="detailTblTxt3">
<li>Overall wait event summary for non-recursive and recursive statements shows significant amount of time for <i>buffer busy waits</i>.</li>
</ul>
<br>
<li>AWR or statspack: 
<ul class="detailTblTxt3">
<li>Oracle 9.2 or higher: <i>buffer busy waits</i> is among the top timed events</li>
</ul>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Suboptimal Segment Storage Configuration</i></b></p>    <br><p class="detailTblTxt3">Concurrent INSERTs with a suboptimal freelist configuration can lead to <i>buffer busy wait</i> contention as multiple sessions attempt to insert data into the same block (because it appears on the freelist to them).</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><br>
TKProf:
<ul class="detailTblTxt3">
<li>Use the TKProf reports sorted by elapsed execute time</li>
<li>Look at the top statements and determine if they are seeing buffer busy waits and are INSERT statements.</li>
</ul>
AWR or statspack reports:<br>
<ul class="detailTblTxt3">
<li><i>buffer busy wait</i> event is among the top ones</li>
<li>SQL with highest wait time (derive as elapsed time - cpu time) are INSERT statements</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Use ASSM or add additional freelists and/or freelist groups</i></b></p>    <br><p class="detailTblTxt3">Heavy INSERT activity by concurrent sessions can cause multiple sessions to attempt their insert into the same blocks because automatic segment space management (ASSM) is NOT used AND there is only a single freelist, too few process freelists, and/or no freelist groups.<br>
<br>
The best solution is to use ASSM since it is sometimes tricky to arrive at a correct freelist or freelist group setting.<br>
<br>
Adding process freelists will help remove contention as each process will map to separate blocks.  Freelists can be added at any time without rebuilding the table.<br>
<br>
Adding freelist groups will also remove contention by mapping processes to other freelists.  This is of greatest benefit in RAC environments where the freelist group block itself will be associated with an instance, but will still help in single instance environments as well.  The table must be rebuilt to change the freelist group setting.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; may require rebuilding the table.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Changing space attributes tables introduces some risk of performance degredation if not properly tested.  Testing is important.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/logical.htm#i13690">Concepts: Freelists</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/instance_tune.htm#sthref915">Performance Tuning: Buffer Busy Waits, Segment Header Contention</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14231/tspaces.htm#ADMIN10065">Admin Guide: Specifying Segment Space Management in Locally Managed Tablespaces</a></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=34405.1">WAITEVENT: "buffer busy waits" Reference Note</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Preallocate extents</i></b></p>    <br><p class="detailTblTxt3">Tables that undergo concurrent inserts will often suffer contention for the HW enqueue or buffer busy waits if their storage settings are not optimized.  One solution is to avoid the HW contention in the first place by preallocating extents.  This will avoid the need to dynamically allocate extents and hence avoid contention on the HW enqueue</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; involves changes to the tables storage clause.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Changing space attributes tables introduces some risk of performance degredation if not properly tested.  Testing is important.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10592/clauses001.htm#g1053419">Allocate Extent Clause</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10592/statements_3001.htm#i2133144">Allocating Extents: Example </a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Heavy insert activity affecting an index segment</i></b></p>    <br><p class="detailTblTxt3">Concurrent INSERTs or updates may see contention when a related index has a key that is constantly increasing (e.g., a key based on a sequence number)</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><br>
TKProf:
<ul class="detailTblTxt3">
<li>Use the TKProf reports sorted by elapsed execute time</li>
<li>Look at the top statements and determine if they are seeing buffer busy waits and are DML statements.</li>
<li>The raw trace shows the buffer busy wait's file (P1) and block (P2) values resolve to an index segment</li>
</ul>
AWR or statspack reports:<br>
<ul class="detailTblTxt3">
<li><i>buffer busy wait</i> event is among the top ones</li>
<li>SQL with highest wait time (derive as elapsed time - cpu time) are INSERT statements</li>
<li>9.2+ : the segments with the most buffer busy waits are indexes (as shown on the <i>Top Buffer Busy Waits per Segment</i> section</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Use reverse key indexes</i></b></p>    <br><p class="detailTblTxt3">Index leaf blocks may see contention due to key values that are increasing steadily (using a sequence) and concentrated in a leaf block on the "right-hand side" of the index.  Look at using <i>reverse key indexes</i> (if range scans aren't commonly used against the segment).<br>
<br>
A reverse key index will spread keys around evenly and avoid creating these hot leaf blocks.  However, the reverse key index will not be usable for index range scans, so care must be taken to ensure that access is normally done via equality predicates.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; will require rebuilding an index.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; some queries may run much slower because they will not be able to use an index for range scans and may resort to full table scans.  Determine if range scans are needed before implementing this.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/schema.htm#sthref998">Concepts: Reverse Key Indexes</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14200/statements_5010.htm#i2062403">SQL Reference: Create index syntax:</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/design.htm#sthref152">Performance Tuning Guide: Reverse Key Indexes</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Use hash partitioning to spread index values around</i></b></p>    <br><p class="detailTblTxt3">Hash partitions will randomly spread out the data and reduce contention on leaf blocks.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; requires rebuilding the table.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; no risky side effects.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/partconc.htm#i462869">Concepts: Overview of Hash Partitioning</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14231/partiti.htm#i1006255">When to Use Hash Partitioning</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/data_acc.htm#i21879">Performance Tuning Guide: Using Partitioned Indexes for Performance: </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14200/statements_5010.htm#sthref6642">SQL Ref: Create Index, Index Partitioning Clauses, GLOBAL PARTITION BY HASH:</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14200/statements_5010.htm#i2169259">Creating a Hash-Partitioned Global Index: Example</a></p>    <br><p class="detailTblTxt3">Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=125314.1">Boosting Performance by Hash and Composite Partitions</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Use natural keys instead of sequence numbers</i></b></p>    <br><p class="detailTblTxt3">Change the application to use a different key (i.e., a composite natural key) that does not increase monotonically.  Obviously, this kind of change may take some time to implement because it may require many changes to application as well as changes to the physical data model.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblHighBG">      <p align="center"><b>H</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">High effort; may require changes to the data model and application code.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk if implemented properly.  But, changes of this magnitude are risky if not designed or tested properly.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/design.htm#i28156">Performance Tuning: Serializing within Indexes</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Many concurrent SQL statements performing physical reads</i></b></p>    <br><p class="detailTblTxt3">Many concurrent physical reads against the same blocks will result in <i>buffer busy waits</i> as one session gets to do the actual physical read and the others will be blocked by the buffer busy wait event until the read completes.<br>
<br>
This is usually an indication that the SQL statement must be tuned.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><br>
TKProf:
<ul class="detailTblTxt3">
<li>Use the TKProf reports sorted by elapsed execute time</li>
<li>Look at the top statements and determine if they are seeing buffer busy waits and are SELECT statements or DDL with a SELECT subquery.</li>
<li>The SQL statement performs many physical reads (i.e., <i>disk</i> on the TKProf); you see events like <i>db file scattered reads</i> or <i>db file sequential reads</i> taking significant amounts of time</li>
</ul>
AWR or statspack reports:<br>
<ul class="detailTblTxt3">
<li><i>buffer busy wait</i> event is among the top ones</li>
<li>SQL with highest wait time (derive as elapsed time - cpu time) are SELECT statements</li>
<li>Events like <i>db file scattered reads</i> or <i>db file sequential reads</i> are prominent in the top events lists</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   10g+: Tune the query using the SQL Tuning Advisor</i></b></p>    <br><p class="detailTblTxt3">Oracle's SQL Tuning Advisor can help tune specific SQL statements quickly and easily if you are licensed to use the Enterprise Manager Tuning Pack.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; the SQL Tuning Advisor is easy to use and requires little user effort to tune a statement.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">The tuning action will generally be to create a statement profile.  The profile affects only a single statement.  Other recommendations may have wide ranging effects and should be tested thoroughly.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=262687.1 ">How to use the Sql Tuning Advisor</a></p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_tune.htm%23PFGRF028">Automatic SQL Tuning </a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14196%2Fmontune003.htm%23sthref784">Using Advisors to Optimize Database Performance</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_tune.htm%23sthref1144">Using SQL Tuning Advisor with Oracle Enterprise Manager</a></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fappdev.102%2Fb14258%2Fd_sqltun.htm%23sthref7584">SQL Tuning Advisor Subprograms </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/sql_tune.htm#CHDBIGDF">Using SQL Tuning Advisor APIs </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=271196.1">Automatic SQL Tuning - SQL Profiles</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Tune the query using the Performance Diagnostic Guide's Query Tuning Section</i></b></p>    <br><p class="detailTblTxt3">This is a query tuning problem that needs to be addressed in detail using the information in the Performance Diagnostic Guide's Query Tuning section.<br></p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; manual query tuning can be easy or difficult depending on the query and application.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; generally query tuning actions will affect only a single query.  Of course this will depend on the ultimate actions taken and some of them can affect an entire instance.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Click on the Query Tuning tab, then skip to the Determine a Cause > Data Collection step.<br>
<br>
Other helpful documents are listed below:</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_1016.htm%23PFGRF006">SQL Tuning Overview </a></p>    <br><p class="detailTblTxt3"> How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=233112.1">Diagnosing Query Tuning Problems</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=67522.1">Diagnosing Why a Query is Not Using an Index</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Many concurrent SQL statements performing physical reads and I/O performance is poor</i></b></p>    <br><p class="detailTblTxt3">Many concurrent physical reads against the same blocks will result in <i>buffer busy waits</i> as one session gets to do the actual physical read and the others will be blocked by the buffer busy wait event until the read completes.<br>
<br>
This is usually an indication that the SQL statement must be tuned.  The waits can be amplified greatly when physical reads are slow due to poor I/O subsystem performance.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><br>
TKProf:
<ul class="detailTblTxt3">
<li>Use the TKProf reports sorted by elapsed execute time</li>
<li>Look at the top statements and determine if they are seeing buffer busy waits and are SELECT statements or DDL with a SELECT subquery.</li>
<li>The SQL statement performs many physical reads (i.e., <i>disk</i> on the TKProf); you see events like <i>db file scattered read</i> or <i>db file sequential read</i> taking significant amounts of time</li>
<li>The average time for <i>db file scattered read</i> or <i>db file sequential read</i> is around 20 mSec or higher (derive from: total wait time / waits).</li>
</ul>
AWR or statspack reports:<br>
<ul class="detailTblTxt3">
<li><i>buffer busy wait</i> event is among the top ones</li>
<li>SQL with highest wait time (derive as elapsed time - cpu time) are SELECT statements</li>
<li>Events like <i>db file scattered reads</i> or <i>db file sequential reads</i> are prominent in the top events lists</li>
<li>The average time for <i>db file scattered read</i> or <i>db file sequential read</i> is around 20 mSec or higher.</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   10g+: Tune the query using the SQL Tuning Advisor</i></b></p>    <br><p class="detailTblTxt3">Oracle's SQL Tuning Advisor can help tune specific SQL statements quickly and easily if you are licensed to use the Enterprise Manager Tuning Pack.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; the SQL Tuning Advisor is easy to use and requires little user effort to tune a statement.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">The tuning action will generally be to create a statement profile.  The profile affects only a single statement.  Other recommendations may have wide ranging effects and should be tested thoroughly.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=262687.1 ">How to use the Sql Tuning Advisor</a></p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_tune.htm%23PFGRF028">Automatic SQL Tuning </a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14196%2Fmontune003.htm%23sthref784">Using Advisors to Optimize Database Performance</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_tune.htm%23sthref1144">Using SQL Tuning Advisor with Oracle Enterprise Manager</a></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fappdev.102%2Fb14258%2Fd_sqltun.htm%23sthref7584">SQL Tuning Advisor Subprograms </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/sql_tune.htm#CHDBIGDF">Using SQL Tuning Advisor APIs </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=271196.1">Automatic SQL Tuning - SQL Profiles</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Tune the query using the Performance Diagnostic Guide's Query Tuning Section</i></b></p>    <br><p class="detailTblTxt3">This is a query tuning problem that needs to be addressed in detail using the information in the Performance Diagnostic Guide's Query Tuning section.<br></p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; manual query tuning can be easy or difficult depending on the query and application.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; generally query tuning actions will affect only a single query.  Of course this will depend on the ultimate actions taken and some of them can affect an entire instance.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Click on the Query Tuning tab, then skip to the Determine a Cause > Data Collection step.<br>
<br>
Other helpful documents are listed below:</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_1016.htm%23PFGRF006">SQL Tuning Overview </a></p>    <br><p class="detailTblTxt3"> How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=233112.1">Diagnosing Query Tuning Problems</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=67522.1">Diagnosing Why a Query is Not Using an Index</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate possible I/O performance problems</i></b></p>    <br><p class="detailTblTxt3">To investigate further you must:
<ul class="detailTblTxt3">
<li>Find out which file numbers are causing the highest average waits and then determine which filesystem contains the file</li>
<li>Determine why the filesystems are performing poorly.  Some common causes are:
<ul class="detailTblTxt3">
<li>"hot filesystems" - too many active files on the same filesystem exhausting the I/O bandwidth</li>
<li>hardware problem</li>
<li>In Parallel Execution (PX) is being used, determine if the I/O subsystem is saturated by having too many slaves in use.</li>
</ul>
</ul>
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; depends on the skill level of the system administrators.  Correcting a problem can involve major effort to move files to a new destination.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; hardware changes and structural database changes carry risk that may require a restore.  Backups should be taken and restoring procedures should be tested before attempting changes.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/iodesign.htm#g37279">I/O Configuration and Design</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/instance_tune.htm#sthref924">Wait Event: db file scattered read</a></p>    <br><p class="detailTblTxt3"> Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=223117.1">Tuning I/O-related waits</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Additional Diagnostics Needed</i></b></p>    <br><p class="detailTblTxt3">Additional diagnostics and analysis are needed to find a solution.  </p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">There is insufficient information to suggest a specific cause.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Additional Diagnostics Needed</i></b></p>    <br><p class="detailTblTxt3">Additional diagnostics and analysis are needed to find a solution.  Please file a Service Request to obtain assistance.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Diagnostic efforts vary depending on the problem.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Risks involved in collecting diagnostics vary depending on the kind of diagnostics being obtained.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Please file an SR for more details on what should be done next.</p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>wait: read by other session</b></i></p>    <br><p class="detailTblTxt3">A session wants to pin a block that is currently being read from disk into the buffer cache by another session.</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3">TKProf or AWR
<ul class="detailTblTxt3">
<li>Significant waits for the <i>read by other session</i> event</li>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   SQL tuning required; no I/O problems</i></b></p>    <br><p class="detailTblTxt3">If performance time is dominated by this wait event, then SQL tuning may reduce the number of reads and speed up queries.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>Significant amount of the total time in TKProf is due to this wait event</li>
<li>The average time for this event (total time / wait count) should be less than 20 mSec to discount an I/O problem.</li></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   10g+: Tune the query using the SQL Tuning Advisor</i></b></p>    <br><p class="detailTblTxt3">Oracle's SQL Tuning Advisor can help tune specific SQL statements quickly and easily if you are licensed to use the Enterprise Manager Tuning Pack.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; the SQL Tuning Advisor is easy to use and requires little user effort to tune a statement.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">The tuning action will generally be to create a statement profile.  The profile affects only a single statement.  Other recommendations may have wide ranging effects and should be tested thoroughly.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=262687.1 ">How to use the Sql Tuning Advisor</a></p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_tune.htm%23PFGRF028">Automatic SQL Tuning </a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14196%2Fmontune003.htm%23sthref784">Using Advisors to Optimize Database Performance</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_tune.htm%23sthref1144">Using SQL Tuning Advisor with Oracle Enterprise Manager</a></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fappdev.102%2Fb14258%2Fd_sqltun.htm%23sthref7584">SQL Tuning Advisor Subprograms </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/sql_tune.htm#CHDBIGDF">Using SQL Tuning Advisor APIs </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=271196.1">Automatic SQL Tuning - SQL Profiles</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Tune the query using the Performance Diagnostic Guide's Query Tuning Section</i></b></p>    <br><p class="detailTblTxt3">This is a query tuning problem that needs to be addressed in detail using the information in the Performance Diagnostic Guide's Query Tuning section.<br></p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; manual query tuning can be easy or difficult depending on the query and application.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; generally query tuning actions will affect only a single query.  Of course this will depend on the ultimate actions taken and some of them can affect an entire instance.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Click on the Query Tuning tab, then skip to the Determine a Cause > Data Collection step.<br>
<br>
Other helpful documents are listed below:</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_1016.htm%23PFGRF006">SQL Tuning Overview </a></p>    <br><p class="detailTblTxt3"> How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=233112.1">Diagnosing Query Tuning Problems</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=67522.1">Diagnosing Why a Query is Not Using an Index</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   I/O performance problems</i></b></p>    <br><p class="detailTblTxt3">The average time for a an I/O is exceeds typical standards for I/O performance (less than 20 mSec).  </p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>Significant amount of the total time in TKProf is due to this wait event</li>
<li>The average time for this event (total time / wait count) is more than 20 mSec</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate possible I/O performance problems</i></b></p>    <br><p class="detailTblTxt3">To investigate further you must:
<ul class="detailTblTxt3">
<li>Find out which file numbers are causing the highest average waits and then determine which filesystem contains the file</li>
<li>Determine why the filesystems are performing poorly.  Some common causes are:
<ul class="detailTblTxt3">
<li>"hot filesystems" - too many active files on the same filesystem exhausting the I/O bandwidth</li>
<li>hardware problem</li>
<li>In Parallel Execution (PX) is being used, determine if the I/O subsystem is saturated by having too many slaves in use.</li>
</ul>
</ul>
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; depends on the skill level of the system administrators.  Correcting a problem can involve major effort to move files to a new destination.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; hardware changes and structural database changes carry risk that may require a restore.  Backups should be taken and restoring procedures should be tested before attempting changes.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/iodesign.htm#g37279">I/O Configuration and Design</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/instance_tune.htm#sthref924">Wait Event: db file scattered read</a></p>    <br><p class="detailTblTxt3"> Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=223117.1">Tuning I/O-related waits</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Buffer cache is too small</i></b></p>    <br><p class="detailTblTxt3">A small buffer cache will cause more physical reads or, for a RAC database, additional block transfers than would otherwise be required.
</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">TKProf: <br>
<ul class="detailTblTxt3">
<li>Significant waits on <db file sequential read</i> waits , and/or for RAC, <i>global cache CR request</i></li>
<li>SQL statements perform 10 or fewer logical reads (query + current) per row per table per execution, meaning that the statement is reasonably tuned (i.e., if a query joins 2 tables and returns 10 rows, one would expect less than 10*2*3 = 60 logical reads per execution</li>
<li>Full table scans (in a RAC database) are NOT seen in the execution plan for a statement that is waiting on this event</li>
<li>The application is an OLTP type of application and in the overall section of the report,  physical reads ("disk") are equal or close to the number of logical reads (query + current).
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Manually Increase the size of the buffer cache using the <i>db cache size</i> parameter</i></b></p>    <br><p class="detailTblTxt3">Increase the size of the buffer cache and monitor the effects of the change.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; change an initialization parameter</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk. However, there must be sufficient memory on the machine to avoid memory shortage problems.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm#CNCPT007">Concepts: Oracle Memory Architecture</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fmemory.htm%23sthref485">Configuring and Using the Buffer Cache</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   10g+: Use automatic shared memory management (ASMM) </i></b></p>    <br><p class="detailTblTxt3">ASMM will seek to optimize the size of the buffer cache without human intervention.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; change an initialization parameter</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk. Be sure to set SGA_TARGET to a reasonable value.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm">Concepts: Memory Architecture</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm#CNCPT810">Concepts: Automatic Shared Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14231/create.htm#BABGCBHI">Admin: Using Automatic Shared Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#i30970">Performance Tuning: Configuring and Using the Shared Pool and Large Pool</a></p>    <br><p class="detailTblTxt3">Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=257643.1">Oracle Database 10g Automated SGA Memory Tuning</a></p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=295626.1">How To Use Automatic Shared Memory Management (ASMM) In Oracle10g</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=270935.1">Shared pool sizing in 10g</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Additional Diagnostics Needed</i></b></p>    <br><p class="detailTblTxt3">Additional diagnostics and analysis are needed to find a solution.  </p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">There is insufficient information to suggest a specific cause.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Additional Diagnostics Needed</i></b></p>    <br><p class="detailTblTxt3">Additional diagnostics and analysis are needed to find a solution.  Please file a Service Request to obtain assistance.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Diagnostic efforts vary depending on the problem.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Risks involved in collecting diagnostics vary depending on the kind of diagnostics being obtained.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Please file an SR for more details on what should be done next.</p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p><br> </td> </tr> </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="5">Concurrency - Enqueues / Locks / Pins</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt">Waits related to enqueues or locks; these usually result from user application code (for example, lock waits caused by row level locking or explicit lock commands).  Typical events:
<ul>
<li>enqueue</li>
<li>enq: HW - contention</li>
<li>enq: ST - contention</li>
<li>enq: TM - contention</li>
<li>enq: TX - row lock contention</li>
<li>enq: TX - index contention</li>
<li>enq: TX - allocate ITL entry</li>
<li>library cache load lock</li>
<li>library cache lock</li>
<li>library cache pin</li>
<li>PL/SQL lock timer</li>
<li>row cache lock</li>
</ul>

<b>Facts Required for Analysis</b>:<br>
<br>
For enqueue waits, the key is to determine which enqueue type (and mode held) is causing the performance problem.  Please read the note, <a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=413934.1">How to Determine The Lock Type and Mode from an Enqueue Wait
</a> for more details.<br>
<br>
For all other waits, it will be helpful to at least identify the top SQL statements associated with the waits using this technique:<br>
<br>
  <ol type="a">
    <li>In the &quot;Overall Totals&quot (recursive and non-recursive) section, look for wait events with high elapsed times for the lock or pin waits</li>
    <li>In the &quot;Overall Totals&quot; section, determine which call type is associated with the highest elapsed time: parse, execute, or fetch </li>
    <li>Generate a new TKProf report sorted by the call type found for the highest elapsed times in step b. For example:<br /><br />For execute calls: 
      <pre>tkpof trace_file_name output_file sort=exeela </pre>For fetch calls: 
      <pre>tkpof trace_file_name output_file sort=fchela </pre>
    </li>
    <li>Note the top statements in this new TKProf report - these are the main statements that are waiting. </li>
  </ol>
<br>
Examine the table below for common causes of the wait events you found.	</td>	</tr>	</table><br> <table width="100%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"> <tr><td width="100%" class="detailMainTxt"> <p><b>Note:</b> This list shows some common observations and causes but is not a complete list.  If you do not find a possible cause in this list, you can always open a service request with Oracle to investigate other possible causes.  Please see the section below called, "Open a Service Request with Oracle Support Services". </p> </td></tr> </table> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b> 9.2 or prior: wait: enqueue, type HW <br>
10g+: wait: enq: HW - contention
 </b></i></p>    <br><p class="detailTblTxt3">The HW enqueue is used to serialise the allocation of space above the highwater mark in an object.  This lock is acquired when a segment's high water mark is moved, which typically is the case during heavy inserts.</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3">Statspack shows significant waits (more than 10%) for "enqueue" and the "Enqueue Activities" section show most of the enqueue wait time is for the "HW" enqueue.<br>
<br>
AWR  shows the wait event, "enq: HW - Contention" in the "Top 5 Timed Events" section and it is more than 10% of total DBTime.</p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Suboptimal Segment Storage Configuration</i></b></p>    <br><p class="detailTblTxt3">Concurrent INSERTs with a suboptimal freelist configuration can lead to <i>buffer busy wait</i> contention as multiple sessions attempt to insert data into the same block (because it appears on the freelist to them).</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><br>
TKProf:
<ul class="detailTblTxt3">
<li>Use the TKProf reports sorted by elapsed execute time</li>
<li>Look at the top statements and determine if they are seeing buffer busy waits and are INSERT statements.</li>
</ul>
AWR or statspack reports:<br>
<ul class="detailTblTxt3">
<li><i>buffer busy wait</i> event is among the top ones</li>
<li>SQL with highest wait time (derive as elapsed time - cpu time) are INSERT statements</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Use ASSM or add additional freelists and/or freelist groups</i></b></p>    <br><p class="detailTblTxt3">Heavy INSERT activity by concurrent sessions can cause multiple sessions to attempt their insert into the same blocks because automatic segment space management (ASSM) is NOT used AND there is only a single freelist, too few process freelists, and/or no freelist groups.<br>
<br>
The best solution is to use ASSM since it is sometimes tricky to arrive at a correct freelist or freelist group setting.<br>
<br>
Adding process freelists will help remove contention as each process will map to separate blocks.  Freelists can be added at any time without rebuilding the table.<br>
<br>
Adding freelist groups will also remove contention by mapping processes to other freelists.  This is of greatest benefit in RAC environments where the freelist group block itself will be associated with an instance, but will still help in single instance environments as well.  The table must be rebuilt to change the freelist group setting.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; may require rebuilding the table.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Changing space attributes tables introduces some risk of performance degredation if not properly tested.  Testing is important.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/logical.htm#i13690">Concepts: Freelists</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/instance_tune.htm#sthref915">Performance Tuning: Buffer Busy Waits, Segment Header Contention</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14231/tspaces.htm#ADMIN10065">Admin Guide: Specifying Segment Space Management in Locally Managed Tablespaces</a></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=34405.1">WAITEVENT: "buffer busy waits" Reference Note</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Preallocate extents</i></b></p>    <br><p class="detailTblTxt3">Tables that undergo concurrent inserts will often suffer contention for the HW enqueue or buffer busy waits if their storage settings are not optimized.  One solution is to avoid the HW contention in the first place by preallocating extents.  This will avoid the need to dynamically allocate extents and hence avoid contention on the HW enqueue</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; involves changes to the tables storage clause.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Changing space attributes tables introduces some risk of performance degredation if not properly tested.  Testing is important.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10592/clauses001.htm#g1053419">Allocate Extent Clause</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10592/statements_3001.htm#i2133144">Allocating Extents: Example </a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   enq: HW - contention: Deeper investigation needed.</i></b></p>    <br><p class="detailTblTxt3">If none of the other causes are likely, then additional diagnostics are needed for this problem.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">There is insufficient information to suggest a cause.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Additional HW Enqueue Diagnostics Needed</i></b></p>    <br><p class="detailTblTxt3">Additional diagnostics and analysis are needed to find a solution.  Please review the following articles for more information or file a Service Request to obtain assistance.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Diagnostic efforts vary depending on the problem.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Risks involved in collecting diagnostics vary depending on the kind of diagnostics being obtained.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=419348.1">How To Analyze the Wait Statistic: 'enq: HW - contention'</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=740075.1">'enq HW - contention' For Busy LOB Segment'</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=846562.1">Troubleshooting Guide (TSG) - Large Objects (LOBs)'</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>10g+: wait: enq: RO - fast object reuse
 </b></i></p>    <br><p class="detailTblTxt3">The RO (Reuse Object) enqueue is used to manage the process of checkpointing dirty blocks belonging to an object that is being dropped.  This is needed to guarantee proper recovery.</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3">AWR  shows the wait event, "enq: RO - fast object reuse" in the "Top 5 Timed Events" section and it is more than 10% of total DBTime.</p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   enq: RO- fast object reuse: Deeper investigation needed.</i></b></p>    <br><p class="detailTblTxt3">If none of the other causes are likely, then additional diagnostics are needed for this problem.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">There is insufficient information to suggest a cause.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Additional RO Enqueue Diagnostics Needed</i></b></p>    <br><p class="detailTblTxt3">Additional diagnostics and analysis are needed to find a solution.  Please review the following articles for more information or file a Service Request to obtain assistance.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Diagnostic efforts vary depending on the problem.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Risks involved in collecting diagnostics vary depending on the kind of diagnostics being obtained.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=6776107.8">TRUNCATE of highly partitioned table can be slow</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=785232.1">CKPT causes another process to wait too long for 'enq: RO - fast object reuse'</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=762085.1">'enq: RO - fast object reuse' contention when gathering schema/table statistics in </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=787672.1">Apply Servers Waiting on RO Enqueue</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=5566439.8">Bug 5566439 - Dropping a partitioned table is slow ('enq: RO - fast object reuse' </a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>9.2 or prior:  wait:  enqueue, type TM <br>
10g+: wait: enq: TM - contention</b></i></p>    <br><p class="detailTblTxt3">This could be for various reasons and is identified in pre-10g versions as waits for <i>enqueue</i> for the TM enqueue.<br>
In 10g, the wait is <i>enq: TM - contention</i>
<br>
Wait class: Concurrency, typically foreground</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>TKProf: 
<ul class="detailTblTxt3">
<li>Overall wait event summary for non-recursive and recursive statements shows significant amount of time for <i>enqueue</i> waits for TM enqueue or <i>enq:TM - contention</i> waits.</li>
<li>In the raw 10046 trace file, most wait's P1 field decodes to TM</li>
</ul>
<br>
<li>AWR or statspack: 
<ul class="detailTblTxt3">
<li>pre-10g: <i>enqueue</i> waits; <i>Enqueue Activities</i> show most waits for TM enqueue</li>
<li>10g: <i>enq:TM - contention</i> is among the top timed events</li>
</ul>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Foreign key columns missing an index</i></b></p>    <br><p class="detailTblTxt3">Foreign key columns should be indexed to avoid locking issues with the parent or child tables.  The exact behavior varies by version but in all versions, Oracle will use indexes to avoid locks or use a more permissive lock mode.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">TKProf: <br>
<ul class="detailTblTxt3">
<li>Lock wait is for TM enqueue, generally in mode 3 or 4</li>
<li>Statement involves an update to a parent or child table that has an FK constraint on a column being changed</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Create indexes on the child table's foreign key columns</i></b></p>    <br><p class="detailTblTxt3">An index on a foreign key column will permit Oracle to either avoid or minimize lock waits when rows in the parent or child table are changed.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; requires creation of an index.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/data_int.htm#sthref3104">Concepts (10gR2): No Index on the Foreign Key</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B10501_01/server.920/a96524/c22integ.htm#8581">Concepts (9iR2): No Index on the Foreign Key</a></p>    <br><p class="detailTblTxt3">Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=33453.1">Referential Integrity and Locking</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   ANALYZE INDEX is blocking DML statements</i></b></p>    <br><p class="detailTblTxt3">An index is being analyzed using the ANALYZE INDEX <index name> VALIDATE STRUCTURE command while a DML operation on the underlying table is being attempted (requiring a TM lock to be placed).</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">The ANALYZE INDEX command acquires a TM enqueue in share mode on the underlying table; this will block other sessions when they attempt to place a TM lock that is incompatible with a share-mode lock.<br>
<br>
The following query shows the command type for the session currently blocking another session with the TM enqueue:<br>
<pre>
select s.command 
from v$lock l, v$session s 
where l.sid = s.sid  
and l.block = 1 
and l.type='TM'
</pre>
If the command type is 63 (versions 9.2 - 11.x), then an analyze index command is responsible for the blocking.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Run the ANALYZE INDEX command during a maintenance window or quiet time</i></b></p>    <br><p class="detailTblTxt3">There is no workaround such as an "ONLINE" option for the ANALYZE INDEX VALIDATE STRUCTURE command.  You will simply need to avoid the contention by scheduling the command when there is no contention likely.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Depends on the availability requirements of the system; no extra effort is involved - just rescheduling.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; the analyze index command may be interrupted if necessary. The index statistics that it populates do not directly affect execution plans.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Not Applicable - solution is trivial.</p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Parallel DML Being Used While Other DML Performed on Same Objects</i></b></p>    <br><p class="detailTblTxt3">Parallel DML will acquire TM enqueues on the partitions involved (share mode) as well as the entire table (row exclusive).  No other DML against affected partitions will be allowed until the PDML transaction completes.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">This cause is likely if there are:<br>
	<ul>
	<li>waits on the TM enqueue</li>
	<li>sessions waiting are either attempting to perform PDML or are waiting for another session performing PDML</li>
	</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Schedule the PDML to occur during a quiet time</i></b></p>    <br><p class="detailTblTxt3">Schedule the PDML activity when the system is quiet to avoid impacting users.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Depends on the availability requirements of the system; no extra effort is involved - just rescheduling.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; some contention is possible if the time period was not quiet enough</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">N/A</p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Use a custom parallel DML script</i></b></p>    <br><p class="detailTblTxt3">Sometimes its possible to avoid contention by controlling which partitions are going to concurrently receive DML through individual sessions rather than a single PDML command.  This involves splitting the workload in some way and performing the DML across several sessions.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblHighBG">      <p align="center"><b>H</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">It could take some time to split the workload properly and script the job to run across sessions.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Contention can be stopped by stopping the jobs.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">N/A</p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>9.2 or prior: Wait: "enqueue"; TX Contention, Mode 4</b></i></p>    <br><p class="detailTblTxt3"><i>TX enqueue contention in mode 4</i> (share mode) may be due to a variety of causes.  They are not due to specific row locks but for operations related to transaction management like: <br>
<ul class="detailTblTxt3">
<li>Lack of ITLs in a block</li>
<li>Foreign key constraints without an index on a child table's key column</li>
<li>Index block splits</li>
</ul>
<br>
Wait class: Concurrency, typically foreground</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>TKProf: 
<ul class="detailTblTxt3">
<li>Overall wait event summary for non-recursive and recursive statements shows significant amount of time for the <i>enqueue</i> event</li>
<li>In the raw 10046 trace file, most wait's P1 field decodes to type TX, mode 4</li>
</ul>
<br>
<li>AWR or statspack: 
<ul class="detailTblTxt3">
<li>Oracle 9.2 or prior: <i>enqueue</i> is among the top timed events</li>
<li><i>Enqueue Activities</i> section shows that TX enqueues account for a significant amount of the enqueue times</li>
<li>Its not possible to know the modes requested without looking at the raw 10046 trace file or by looking at V$SESSION_WAIT, V$LOCK, or similar during the wait.</li>
</ul>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Insufficient ITLs in a block</i></b></p>    <br><p class="detailTblTxt3">Waits for the TX enqueue in mode 4 can occur if the session is waiting for an ITL (interested transaction list) slot in a block. This happens when the session wants to lock a row in the block but one or more other sessions have rows locked in the same block, and there is no free ITL slot in the block. Usually, Oracle dynamically adds another ITL slot. This may not be possible if there is insufficient free space in the block to add an ITL. If so, the session waits for a slot with a TX enqueue in mode 4.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><b>Prior to 9.2.x:</b> <br>
In versions prior to 9.2.x, it is difficult to pinpoint an ITL wait exactly.  Consider this justified if you have examined other causes for TX, mode 4 waits and none are justifiable.<br>
<br>
<b>9.2.x</b>:<br>
Using statspack snapshots taken at level 7, look in the segment statistics section to see which segments have the highest ITL waits (e.g., <i>Segments by ITL Waits</i>).  If these are a significant portion of the TX enqueue waits (see the <i>Enqueue Activities</i> section), then this cause is justified.<br>
<br>
In 10g, the wait event itself tells you this is an ITL wait, so it is justified from the wait event.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Increase the table's <i>INITRANS</I> setting </i></b></p>    <br><p class="detailTblTxt3">Increase the table's <i>INITRANS</I> setting to account for the number of concurrent sessions changing an individual  block.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; may require rebuilding the table.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; no risky side effects except if INITRANS is set too large and the block size is small (this will waste a lot of block space).</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14200/clauses007.htm#g1058547">SQL Ref: INITRANS </a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Index contention due to block splits</i></b></p>    <br><p class="detailTblTxt3">This wait can occur when a transaction is inserting a row in an index and has to wait for the end of an index block split being done by another transaction.  In this case the session is waiting for the TX enqueue in mode 4 (share).</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">To identify which segment is involved:
<ul class="detailTblTxt3"><li>Look in the TKProf of one or more sessions that experience the most of this kind of wait. </li>
<li>Find the statement that waited the longest amount of time on the event with long TX, mode 4 waits.  This is generally an insert statement. </li>
<li>Examine the statement to find the indexes involved. </li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Use reverse key indexes</i></b></p>    <br><p class="detailTblTxt3">Index leaf blocks may see contention due to key values that are increasing steadily (using a sequence) and concentrated in a leaf block on the "right-hand side" of the index.  Look at using <i>reverse key indexes</i> (if range scans aren't commonly used against the segment).<br>
<br>
A reverse key index will spread keys around evenly and avoid creating these hot leaf blocks.  However, the reverse key index will not be usable for index range scans, so care must be taken to ensure that access is normally done via equality predicates.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; will require rebuilding an index.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; some queries may run much slower because they will not be able to use an index for range scans and may resort to full table scans.  Determine if range scans are needed before implementing this.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/schema.htm#sthref998">Concepts: Reverse Key Indexes</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14200/statements_5010.htm#i2062403">SQL Reference: Create index syntax:</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/design.htm#sthref152">Performance Tuning Guide: Reverse Key Indexes</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Use hash partitioning to spread index values around</i></b></p>    <br><p class="detailTblTxt3">Hash partitions will randomly spread out the data and reduce contention on leaf blocks.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; requires rebuilding the table.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; no risky side effects.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/partconc.htm#i462869">Concepts: Overview of Hash Partitioning</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14231/partiti.htm#i1006255">When to Use Hash Partitioning</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/data_acc.htm#i21879">Performance Tuning Guide: Using Partitioned Indexes for Performance: </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14200/statements_5010.htm#sthref6642">SQL Ref: Create Index, Index Partitioning Clauses, GLOBAL PARTITION BY HASH:</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14200/statements_5010.htm#i2169259">Creating a Hash-Partitioned Global Index: Example</a></p>    <br><p class="detailTblTxt3">Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=125314.1">Boosting Performance by Hash and Composite Partitions</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Use natural keys instead of sequence numbers</i></b></p>    <br><p class="detailTblTxt3">Change the application to use a different key (i.e., a composite natural key) that does not increase monotonically.  Obviously, this kind of change may take some time to implement because it may require many changes to application as well as changes to the physical data model.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblHighBG">      <p align="center"><b>H</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">High effort; may require changes to the data model and application code.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk if implemented properly.  But, changes of this magnitude are risky if not designed or tested properly.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/design.htm#i28156">Performance Tuning: Serializing within Indexes</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>9.2 or prior: Wait: "enqueue"; TX Contention, Mode 6</b></i></p>    <br><p class="detailTblTxt3"><i>TX enqueue contention in mode 6</i> (exclusive mode) usually occurs when one session is updating or deleting a row, while another session wishes to update or delete the same row. <br>
<br>
Wait class: Concurrency, typically foreground</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>TKProf: 
<ul class="detailTblTxt3">
<li>Overall wait event summary for non-recursive and recursive statements shows significant amount of time for <i>enqueue</i> waits.</li>
<li>In the raw 10046 trace file, most wait's P1 field decodes to TX in mode 6</li>
</ul>
<br>
<li>AWR or statspack: 
<ul class="detailTblTxt3">
<li>Oracle 9.2 or prior: <i>enqueue</i> is among the top timed events</li>
<li><i>Enqueue Activities</i> section shows that TX enqueues account for a significant amount of the enqueue times</li>
<li>Its not possible to know the modes requested</li>
</ul>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Waiting for a row level lock due to faulty application design</i></b></p>    <br><p class="detailTblTxt3">Flaws in application design are often the reason for locks being held for a long time.  A couple of scenarios to illustrate this are:<br>
<br>
<b>1)</b> A user navigates to a certain row on a page and makes a change without committing it.  The user then leaves the page for a time while the row is locked.  If another user wants to update the same row, he or she will have to wait.  This type of situation can be detected by identifying the blocking session (either through V$LOCK or V$SESSION.BLOCKING_SESSION in 10g) and finding out how long it has been idle using the column V$SESSION.LAST_CALL_ET.<br>
<br>
<b> 2)</b> The application starts a transaction and locks or updates rows then executes one or more long running queries before it commits the changes.  This has the effect of holding the row locks a long time; the solution is to tune the SQL in between the row lock and the final commit.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>Use the utllockt.sql script to identify locking problems. Focus on locks where the lock type is TX and LMode is 6 (Exclusive) and check if locks are being held for a long time.</li>
<li>Trace the lock HOLDER shown in the output of the utllockt.sql script using the 10046 event to see what its doing</li>
<li>Look for long running queries that cause row locks to be held a long time or other problems in the application</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   SELECT FOR UPDATE locks too many rows</i></b></p>    <br><p class="detailTblTxt3">Sometimes a "pessimistic" locking strategy is implemented with SELECT FOR UPDATE statements that are missing predicates and are too "greedy" with their locking.  Examine these statements to see if they are locking more rows than they actually need to lock.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; requires access and examination of application code.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk if implemented properly.  But, changes of this magnitude are risky if not designed or tested properly.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">If the locking situation is in progress (not at some point in the past), the following steps may help identify the reason for it:

<ol>
<li>Identify the session holding the TX enqueue that is being waited on.  You can use <i>utllockt.sql</i> (see Note ID 166534.1).</li>
<li>Look for recent cursors that the session has executed and are still open by querying V$OPEN_CURSOR for the session identified in step 1.  For example:<br>
<pre>
SELECT sql_text FROM v$open_cursor WHERE sid = 1234</pre></li>
<li>See if any cursors involve FOR UPDATE, UPDATE, or DELETE</li>
<li>Examine these cursors to see if they are selecting too many rows</li>
<li>Change the application to lock fewer rows at time.  Sometimes this may require splitting up the work into a SELECT statement that finds candidate rows to lock and then a SELECT FOR UPDATE to lock an individual row.  There are many ways to implement this kind of change - it all depends on the application.</li>
</ol>

Sometimes, the cursor that locked the rows is no longer open and other cursors have executed since then.  In these cases it is difficult to find the exact cause of the blocking without looking at the application in depth.  One clue that may help is knowing the SQL for the <i>waiting</i> session and then examining the application code for other places and situations where the tables in the SQL statement may be locked.  You can find the SQL and exact ROWID being waited on by issuing the following query:<br>
<pre>
select s.sid, s.serial#, s.username, s.module, s.ROW_WAIT_OBJ# object_id,
 dbms_rowid.rowid_create(1, s.row_wait_obj#, s.row_wait_file#, 
 s.row_wait_block#, s.row_wait_row#) my_rowid
 s.sql_hash_value, s.sql_address, sq.SQL_TEXT,
 from v$session_wait sw, v$session s, v$sql sq, v$lock l
 where sw.event = 'enqueue'
 and sw.sid = s.sid
 and l.type = 'TX' and l.request = 6
 and l.sid = s.sid
 and s.sql_hash_value = sq.hash_value and s.sql_address = sq.address
</pre>
Note: "object_id" can be used to query DBA_OBJECTS.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/consist.htm">Concepts: Data Concurrency and Consistency</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/consist.htm#i5704">How Oracle Locks Data</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/consist.htm#sthref2071">Concepts: Row Locks (TX)</a></p>    <br><p class="detailTblTxt3"> Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=102925.1">Tracing sessions: waiting on an enqueue</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62354.1">TX Transaction locks - Example wait scenarios</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=197057.1">TX Lock "Transaction Enqueue"</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Long running statement while locks are held</i></b></p>    <br><p class="detailTblTxt3">A long running statement may delay the time between a transaction starts (via some DML) and commits.  This statement may need to be tuned.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; requires access and examination of application code.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk if implemented properly.  But, changes of this magnitude are risky if not designed or tested properly.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">If the locking situation is in progress (not at some point in the past), the following steps may help identify the reason for it:

<ol>
<li>Identify the session holding the TX enqueue that is being waited on.  You can use <i>utllockt.sql</i> (see Note ID 166534.1).</li>
<li>For the session identified in step 1 (lock holder), check if it is currently executing SQL.  For example, assuming the session ID is 12:<br>
<pre>
SELECT s.sid, s.status, sq.sql_text
FROM v$session s, v$sql sq
WHERE s.sid = 12
and s.status = 'ACTIVE'
and s.sql_hash_value = sq.hash_value
and s.sql_address = sq.address
</pre></li>
<li>Investigate the performance of this cursor.  At this point, the problem becomes a query tuning problem.  You can use this guide for help or the SQL Tuning Advisor (10g or higher with EM Tuning Pack license).</li>
<li>Tune the query and evaluate whether the locking problem has been resolved.  If it hasn't been resolved, examine the application in more detail to see if the application should be changed.</li>
</ol><br>
See the documents below for more information.</p>    <br><p class="detailTblTxt3">10g+: SQL Tuning Advisor</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=262687.1 ">How to use the Sql Tuning Advisor</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_tune.htm%23PFGRF028">Automatic SQL Tuning </a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14196%2Fmontune003.htm%23sthref784">Using Advisors to Optimize Database Performance</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_tune.htm%23sthref1144">Using SQL Tuning Advisor with Oracle Enterprise Manager</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fappdev.102%2Fb14258%2Fd_sqltun.htm%23sthref7584">SQL Tuning Advisor Subprograms </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/sql_tune.htm#CHDBIGDF">Using SQL Tuning Advisor APIs </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=271196.1">Automatic SQL Tuning - SQL Profiles</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=120201.1">TBD</a></p>    <br><p class="detailTblTxt3">Manual Tuning</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_1016.htm%23PFGRF006">SQL Tuning Overview </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=233112.1">Diagnosing Query Tuning Problems</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=67522.1">Diagnosing Why a Query is Not Using an Index</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>10g+: Wait: enq - TX row lock contention</b></i></p>    <br><p class="detailTblTxt3">In 10g, <i>enq: TX -  row lock contention </i> in mode 6 (exclusive mode) usually occurs when one session is updating or deleting a row, while another session wishes to update or delete the same row. <br>
<br>
Wait class: Concurrency, typically foreground</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>TKProf: 
<ul class="detailTblTxt3">
<li>Overall wait event summary for non-recursive and recursive statements shows significant amount of time for <i>enq: TX row lock contention</i> waits.</li>
<li>optional: In the raw 10046 trace file, most wait's P1 field decodes to TX in mode 6</li>
</ul>
<br>
<li>AWR or statspack: 
<ul class="detailTblTxt3">
<li><i>enq: TX - row lock contention</i> is among the top timed events</li>
</ul>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Waiting for a row level lock due to faulty application design</i></b></p>    <br><p class="detailTblTxt3">Flaws in application design are often the reason for locks being held for a long time.  A couple of scenarios to illustrate this are:<br>
<br>
<b>1)</b> A user navigates to a certain row on a page and makes a change without committing it.  The user then leaves the page for a time while the row is locked.  If another user wants to update the same row, he or she will have to wait.  This type of situation can be detected by identifying the blocking session (either through V$LOCK or V$SESSION.BLOCKING_SESSION in 10g) and finding out how long it has been idle using the column V$SESSION.LAST_CALL_ET.<br>
<br>
<b> 2)</b> The application starts a transaction and locks or updates rows then executes one or more long running queries before it commits the changes.  This has the effect of holding the row locks a long time; the solution is to tune the SQL in between the row lock and the final commit.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>Use the utllockt.sql script to identify locking problems. Focus on locks where the lock type is TX and LMode is 6 (Exclusive) and check if locks are being held for a long time.</li>
<li>Trace the lock HOLDER shown in the output of the utllockt.sql script using the 10046 event to see what its doing</li>
<li>Look for long running queries that cause row locks to be held a long time or other problems in the application</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   SELECT FOR UPDATE locks too many rows</i></b></p>    <br><p class="detailTblTxt3">Sometimes a "pessimistic" locking strategy is implemented with SELECT FOR UPDATE statements that are missing predicates and are too "greedy" with their locking.  Examine these statements to see if they are locking more rows than they actually need to lock.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; requires access and examination of application code.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk if implemented properly.  But, changes of this magnitude are risky if not designed or tested properly.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">If the locking situation is in progress (not at some point in the past), the following steps may help identify the reason for it:

<ol>
<li>Identify the session holding the TX enqueue that is being waited on.  You can use <i>utllockt.sql</i> (see Note ID 166534.1).</li>
<li>Look for recent cursors that the session has executed and are still open by querying V$OPEN_CURSOR for the session identified in step 1.  For example:<br>
<pre>
SELECT sql_text FROM v$open_cursor WHERE sid = 1234</pre></li>
<li>See if any cursors involve FOR UPDATE, UPDATE, or DELETE</li>
<li>Examine these cursors to see if they are selecting too many rows</li>
<li>Change the application to lock fewer rows at time.  Sometimes this may require splitting up the work into a SELECT statement that finds candidate rows to lock and then a SELECT FOR UPDATE to lock an individual row.  There are many ways to implement this kind of change - it all depends on the application.</li>
</ol>

Sometimes, the cursor that locked the rows is no longer open and other cursors have executed since then.  In these cases it is difficult to find the exact cause of the blocking without looking at the application in depth.  One clue that may help is knowing the SQL for the <i>waiting</i> session and then examining the application code for other places and situations where the tables in the SQL statement may be locked.  You can find the SQL and exact ROWID being waited on by issuing the following query:<br>
<pre>
select s.sid, s.serial#, s.username, s.module, s.ROW_WAIT_OBJ# object_id,
 dbms_rowid.rowid_create(1, s.row_wait_obj#, s.row_wait_file#, 
 s.row_wait_block#, s.row_wait_row#) my_rowid
 s.sql_hash_value, s.sql_address, sq.SQL_TEXT,
 from v$session_wait sw, v$session s, v$sql sq, v$lock l
 where sw.event = 'enqueue'
 and sw.sid = s.sid
 and l.type = 'TX' and l.request = 6
 and l.sid = s.sid
 and s.sql_hash_value = sq.hash_value and s.sql_address = sq.address
</pre>
Note: "object_id" can be used to query DBA_OBJECTS.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/consist.htm">Concepts: Data Concurrency and Consistency</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/consist.htm#i5704">How Oracle Locks Data</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/consist.htm#sthref2071">Concepts: Row Locks (TX)</a></p>    <br><p class="detailTblTxt3"> Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=102925.1">Tracing sessions: waiting on an enqueue</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62354.1">TX Transaction locks - Example wait scenarios</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=197057.1">TX Lock "Transaction Enqueue"</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Long running statement while locks are held</i></b></p>    <br><p class="detailTblTxt3">A long running statement may delay the time between a transaction starts (via some DML) and commits.  This statement may need to be tuned.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; requires access and examination of application code.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk if implemented properly.  But, changes of this magnitude are risky if not designed or tested properly.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">If the locking situation is in progress (not at some point in the past), the following steps may help identify the reason for it:

<ol>
<li>Identify the session holding the TX enqueue that is being waited on.  You can use <i>utllockt.sql</i> (see Note ID 166534.1).</li>
<li>For the session identified in step 1 (lock holder), check if it is currently executing SQL.  For example, assuming the session ID is 12:<br>
<pre>
SELECT s.sid, s.status, sq.sql_text
FROM v$session s, v$sql sq
WHERE s.sid = 12
and s.status = 'ACTIVE'
and s.sql_hash_value = sq.hash_value
and s.sql_address = sq.address
</pre></li>
<li>Investigate the performance of this cursor.  At this point, the problem becomes a query tuning problem.  You can use this guide for help or the SQL Tuning Advisor (10g or higher with EM Tuning Pack license).</li>
<li>Tune the query and evaluate whether the locking problem has been resolved.  If it hasn't been resolved, examine the application in more detail to see if the application should be changed.</li>
</ol><br>
See the documents below for more information.</p>    <br><p class="detailTblTxt3">10g+: SQL Tuning Advisor</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=262687.1 ">How to use the Sql Tuning Advisor</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_tune.htm%23PFGRF028">Automatic SQL Tuning </a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14196%2Fmontune003.htm%23sthref784">Using Advisors to Optimize Database Performance</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_tune.htm%23sthref1144">Using SQL Tuning Advisor with Oracle Enterprise Manager</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fappdev.102%2Fb14258%2Fd_sqltun.htm%23sthref7584">SQL Tuning Advisor Subprograms </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/sql_tune.htm#CHDBIGDF">Using SQL Tuning Advisor APIs </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=271196.1">Automatic SQL Tuning - SQL Profiles</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=120201.1">TBD</a></p>    <br><p class="detailTblTxt3">Manual Tuning</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_1016.htm%23PFGRF006">SQL Tuning Overview </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=233112.1">Diagnosing Query Tuning Problems</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=67522.1">Diagnosing Why a Query is Not Using an Index</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>10g+: Wait: enq - TX allocate ITL entry</b></i></p>    <br><p class="detailTblTxt3">Waits for <i>enq:TX allocate ITL entry (in mode 4) can occur if the session is waiting for an ITL (interested transaction list) slot in a block. This happens when the session wants to lock a row in the block but one or more other sessions have rows locked in the same block, and there is no free ITL slot in the block. Usually, Oracle dynamically adds another ITL slot. This may not be possible if there is insufficient free space in the block to add an ITL. If so, the session waits for a slot with a TX enqueue in mode 4.
<br>
Wait class: Concurrency, typically foreground</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>TKProf: 
<ul class="detailTblTxt3">
<li>Overall wait event summary for non-recursive and recursive statements shows significant amount of time for <i>enq:TX - allocate ITL entry</i> waits.</li>
<li>optional: In the raw 10046 trace file, most wait's P1 field decodes to TX in mode 4</li>
</ul>
<br>
<li>AWR or statspack: 
<ul class="detailTblTxt3">
<li><i>enq:TX - allocate ITL entry</i> is among the top timed events</li>
</ul>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Insufficient ITLs in a block</i></b></p>    <br><p class="detailTblTxt3">Waits for the TX enqueue in mode 4 can occur if the session is waiting for an ITL (interested transaction list) slot in a block. This happens when the session wants to lock a row in the block but one or more other sessions have rows locked in the same block, and there is no free ITL slot in the block. Usually, Oracle dynamically adds another ITL slot. This may not be possible if there is insufficient free space in the block to add an ITL. If so, the session waits for a slot with a TX enqueue in mode 4.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><b>Prior to 9.2.x:</b> <br>
In versions prior to 9.2.x, it is difficult to pinpoint an ITL wait exactly.  Consider this justified if you have examined other causes for TX, mode 4 waits and none are justifiable.<br>
<br>
<b>9.2.x</b>:<br>
Using statspack snapshots taken at level 7, look in the segment statistics section to see which segments have the highest ITL waits (e.g., <i>Segments by ITL Waits</i>).  If these are a significant portion of the TX enqueue waits (see the <i>Enqueue Activities</i> section), then this cause is justified.<br>
<br>
In 10g, the wait event itself tells you this is an ITL wait, so it is justified from the wait event.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Increase the table's <i>INITRANS</I> setting </i></b></p>    <br><p class="detailTblTxt3">Increase the table's <i>INITRANS</I> setting to account for the number of concurrent sessions changing an individual  block.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; may require rebuilding the table.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; no risky side effects except if INITRANS is set too large and the block size is small (this will waste a lot of block space).</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14200/clauses007.htm#g1058547">SQL Ref: INITRANS </a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>10g+: Wait: enq - TX index contention</b></i></p>    <br><p class="detailTblTxt3">This wait can occur when a transaction is inserting a row in an index and has to wait for the end of an index block split being done by another transaction.  In this case the session is waiting for the TX enqueue in mode 4 (share).
<br>
Wait class: Concurrency, typically foreground</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>TKProf: 
<ul class="detailTblTxt3">
<li>Overall wait event summary for non-recursive and recursive statements shows significant amount of time for <i>enq:TX - allocate ITL entry</i> waits.</li>
<li>optional: In the raw 10046 trace file, most wait's P1 field decodes to TX in mode 4</li>
</ul>
<br>
<li>AWR or statspack: 
<ul class="detailTblTxt3">
<li><i>enq:TX - allocate ITL entry</i> is among the top timed events</li>
</ul>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Index contention due to block splits</i></b></p>    <br><p class="detailTblTxt3">This wait can occur when a transaction is inserting a row in an index and has to wait for the end of an index block split being done by another transaction.  In this case the session is waiting for the TX enqueue in mode 4 (share).</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">To identify which segment is involved:
<ul class="detailTblTxt3"><li>Look in the TKProf of one or more sessions that experience the most of this kind of wait. </li>
<li>Find the statement that waited the longest amount of time on the event with long TX, mode 4 waits.  This is generally an insert statement. </li>
<li>Examine the statement to find the indexes involved. </li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Use reverse key indexes</i></b></p>    <br><p class="detailTblTxt3">Index leaf blocks may see contention due to key values that are increasing steadily (using a sequence) and concentrated in a leaf block on the "right-hand side" of the index.  Look at using <i>reverse key indexes</i> (if range scans aren't commonly used against the segment).<br>
<br>
A reverse key index will spread keys around evenly and avoid creating these hot leaf blocks.  However, the reverse key index will not be usable for index range scans, so care must be taken to ensure that access is normally done via equality predicates.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; will require rebuilding an index.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; some queries may run much slower because they will not be able to use an index for range scans and may resort to full table scans.  Determine if range scans are needed before implementing this.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/schema.htm#sthref998">Concepts: Reverse Key Indexes</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14200/statements_5010.htm#i2062403">SQL Reference: Create index syntax:</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/design.htm#sthref152">Performance Tuning Guide: Reverse Key Indexes</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Use hash partitioning to spread index values around</i></b></p>    <br><p class="detailTblTxt3">Hash partitions will randomly spread out the data and reduce contention on leaf blocks.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; requires rebuilding the table.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; no risky side effects.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/partconc.htm#i462869">Concepts: Overview of Hash Partitioning</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14231/partiti.htm#i1006255">When to Use Hash Partitioning</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/data_acc.htm#i21879">Performance Tuning Guide: Using Partitioned Indexes for Performance: </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14200/statements_5010.htm#sthref6642">SQL Ref: Create Index, Index Partitioning Clauses, GLOBAL PARTITION BY HASH:</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14200/statements_5010.htm#i2169259">Creating a Hash-Partitioned Global Index: Example</a></p>    <br><p class="detailTblTxt3">Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=125314.1">Boosting Performance by Hash and Composite Partitions</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Use natural keys instead of sequence numbers</i></b></p>    <br><p class="detailTblTxt3">Change the application to use a different key (i.e., a composite natural key) that does not increase monotonically.  Obviously, this kind of change may take some time to implement because it may require many changes to application as well as changes to the physical data model.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblHighBG">      <p align="center"><b>H</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">High effort; may require changes to the data model and application code.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk if implemented properly.  But, changes of this magnitude are risky if not designed or tested properly.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/design.htm#i28156">Performance Tuning: Serializing within Indexes</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>wait: enq: TX - contention
 </b></i></p>    <br><p class="detailTblTxt3">This type of TX contention is a kind of "catch all" for TX enqueue waits not related to row locks or ITL waits.</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>TKProf: 
<ul class="detailTblTxt3">
<li>Overall wait event summary for non-recursive and recursive statements shows significant amount of time for <i>enq: TX - contention</i> waits.</li>
</ul>
<br>
<li>AWR or statspack: 
<ul class="detailTblTxt3">
<li><i>enq: TX - contention</i> is among the top timed events</li>
</ul>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Deeper investigation needed for <i>enq: TX - contention</i> waits.</i></b></p>    <br><p class="detailTblTxt3"><i>enq: TX - contention</i> waits may be caused by reasons that may not be well known.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">AWR, Statspack, or TKProf shows a significant amount of time listed (10% or more)  in the "Timed Event" section as <i>enq: TX - contention</i>.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate enq: TX - contention waits</i></b></p>    <br><p class="detailTblTxt3">The <i>enq: TX - contention</i> wait may be caused by uncommon conditions.  Additional research is required.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Finding the root cause for these waits usually involves tracing sessions or setting unusual wait events.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">The risk depends on what changes are needed to reduce contention on the TX enqueue.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below for information on how to find more information about the TX enqueue. <br>
<br>
Typically, you will need to file a service request  for more help if you aren't able to adequately research the latch.</p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id= 34576.1">WAITEVENT: "latch free" Reference Note</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=102925.1">Tracing sessions: waiting on an enqueue </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id= 179582.1">How to Find TX Enqueue Contention in RAC or OPS </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62354.1">TX Transaction locks - Example wait scenarios  
</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>wait: library cache pin<br>
wait: cursor: pin S wait on X
</b></i></p>    <br><p class="detailTblTxt3">Library cache pins are used to manage library cache concurrency. Pinning an object causes the heaps to be loaded into memory (if not already loaded). PINS can be acquired in NULL, SHARE or EXCLUSIVE modes and can be considered like a special form of lock. A wait for a "library cache pin" implies some other session holds that PIN in an incompatible mode.</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>TKProf: 
<ul class="detailTblTxt3">
<li>Overall wait event summary for non-recursive and recursive statements shows significant amount of time for <i>library cache pin</i> waits.</li>
</ul>
<br>
<li>AWR or statspack: 
<ul class="detailTblTxt3">
<li>Significant waits for <i>library cache pin</i></li>
</ul>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Shared SQL being aged out</i></b></p>    <br><p class="detailTblTxt3">The shared pool is too small and is causing many statements that could be shared to age out of the library cache and later reloaded.  Each reload requires a hard parse and impacts the CPU and latches.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><br>
TKProf:
<ul class="detailTblTxt3">
<li>Use the report sorted by elapsed parse time</li>
<li>Look at the top statements and determine if they are being hard parsed; these will have "Misses in the library cache" equal or close to the total number of parses</li>
<li>Examine the statements that are being hard parsed and look for the ABSENCE of literal values, this means these statements could have been shared but weren't (this is not entirely reliable since you could have statements that use binds but will not be executed again).</li>
</ul>
AWR or statspack reports:<br>
<ul class="detailTblTxt3">
<li>Library Cache statistics section shows that <i>reloads</i> are high (usually several thousand per hour) and little or no invalidations are seen </li>
<li>The "% SQL with executions>1" is over 60%, meaning statements are being shared</li>
<u/ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Increase the size of the shared pool</i></b></p>    <br><p class="detailTblTxt3">Increasing the shared pool size will reduce the need to age out statements that could be shared.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; an init.ora / spfile change. </p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; increasing the size of the shared pool is not risky unless:
<ul class="detailTblTxt3">
<li>There are many unshared statements due to literals
<br>
For more details, see: <a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a>
</li>
<li>The machine doesn't have enough physical memory and starts swapping
<br>
<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=17094.1">TECH: Unix Virtual Memory, Paging & Swapping explained</a></li>
</ul>
Verify the above points before changing the size of the shared pool.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14231/create.htm#BABDBIGB">Admin: Using Manual Shared Memory Management, see Specifying the Shared Pool Size</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams196.htm#sthref804">Reference: SHARED_POOL_SIZE Parameter</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams196.htm#CHDGGAIB">Reference: SHARED_POOL_SIZE and Automatic Storage Management</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   10g+: Use the <i>Automatic Shared Memory Manager (ASMM)</i> to adjust the shared pool size</i></b></p>    <br><p class="detailTblTxt3">ASMM will automate memory sizing for the shared pool to ensure an optimal amount is available. You will need to set a reasonable value for SGA_MAX_SIZE and SGA_TARGET to enable ASMM.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; an init.ora / spfile change. </p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; ASMM will ensure sufficient memory is available.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm">Concepts: Memory Architecture</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm#CNCPT810">Concepts: Automatic Shared Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14231/create.htm#BABGCBHI">Admin: Using Automatic Shared Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#i30970">Performance Tuning: Configuring and Using the Shared Pool and Large Pool</a></p>    <br><p class="detailTblTxt3">Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=257643.1">Oracle Database 10g Automated SGA Memory Tuning</a></p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=295626.1">How To Use Automatic Shared Memory Management (ASMM) In Oracle10g</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=270935.1">Shared pool sizing in 10g</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Keep ("pin") frequently used large PL/SQL and cursor objects in the shared pool</i></b></p>    <br><p class="detailTblTxt3">Use the DBMS_SHARED_POOL.KEEP() procedure to mark large, frequently used PL/SQL and SQL objects in the shared pool and avoid them being aged out.  This will reduce reloads and fragmentation since the object doesn't need to keep reentering the shared pool over and over.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; need to identify which objects should be kept and then run a procedure to keep them.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; if you aren't careful in keeping these objects, you may keep too many of them and cause ORA-4031 errors.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm">Concepts: Memory Architecture</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#sthref647">Performance Tuning: Keeping Large Objects to Prevent Aging</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/appdev.102/b14258/d_shpool.htm#sthref7134">PL/SQL DBMS_SHARED_POOL</a></p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=1012047.6">How To Pin Objects in Your Shared Pool</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=101627.1">How to Automate Pinning Objects in Shared Pool at Database Startup</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=305529.1">How To Use SYS.DBMS_SHARED_POOL In a PL/SQL Stored procedure To Pin objects in Oracle's Shared Pool</a></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=61760.1">Using the Oracle DBMS_SHARED_POOL Package</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Library cache object Invalidations</i></b></p>    <br><p class="detailTblTxt3">When objects (like tables or views) are altered via DDL or collecting statistics, the cursors that depend on them are invalidated.  This will cause the cursor to be hard parsed when it is executed again and will impact CPU and latches.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><br>
TKProf:
<ul class="detailTblTxt3">
<li>Use the report sorted by elapsed parse time</li>
<li>Look at the top statements and determine if they are being hard parsed; these will have "Misses in the library cache" equal or close to the total number of parses</li>
<li>Examine the statements that are being hard parsed and look for the ABSENCE of literal values, this means these statements could have been shared but weren't (this is not entirely reliable since you could have statements that use binds but will not be executed again).</li>
</ul>
AWR or statspack reports:<br>
<ul class="detailTblTxt3">
<li>Library Cache statistics section shows that <i>reloads</i> are high (usually several thousand per hour) and invalidations are high</li>
<li>The "% SQL with executions>1" is over 60%, meaning statements are being shared</li>
<li>Check the <i>Dictionary Statistics</i> section of the report and look for non-zero values in the <i>Modification Requests</i> column, meaning that DDL occurred on some objects.</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Do not perform DDL operations during busy periods</i></b></p>    <br><p class="detailTblTxt3">DDL will often cause library cache objects to be invalidated and this could cascade to many different dependent objects like cursors.  Invalidations have a large impact on the library cache, shared pool, row cache, and CPU since they will likely require many hard parses to occur at the same time.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; defer the DDL to a quiet time.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; may involve some downtime.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Not Applicable.  Simply schedule DDL during maintenance or low activity periods.</p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Do not collect optimizer statistics during busy periods</i></b></p>    <br><p class="detailTblTxt3">Collecting statistics (using ANALYZE or DBMS_STATS) will cause library cache objects to be invalidated and this could cascade to many different dependent objects like cursors.  Invalidations have a large impact on the library cache, shared pool, row cache, and CPU since they will likely require many hard parses to occur at the same time.<br>
<br>
For some database versions, the DBMS_STATS procedure allows give you the option of not invalidating objects (see the "no_invalidate" option).
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; defer the gathering of statistics to a quiet time.  In 10g, you have a choice of whether or not to invalidate objects after gathering statistics.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; defer the gathering of statistics to a quiet time.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">The document links below shows how to specify statistics collection without causing invalidations.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/appdev.102/b14258/d_stats.htm#sthref8129">GATHER_TABLE_STATS Procedure, see the "no_invalidate" option</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Do not perform TRUNCATE operations during busy periods</i></b></p>    <br><p class="detailTblTxt3">See the document below:
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; defer the DDL to a quiet time.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; may involve some downtime.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See documents below:</p>    <br><p class="detailTblTxt3">Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=123214.1 ">Truncate - Causes Invalidations in the LIBRARY CACHE</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Objects being compiled across sessions</i></b></p>    <br><p class="detailTblTxt3">One or more sessions are compiling objects (typically PL/SQL) while another session wants to pin the same object prior to executing or compiling it.  One or more sessions will wait on library cache pin in Share mode (if it just wants to execute it) or eXclusive mode (if it want to compile/change the object).
</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">TKProf:
<ul class="detailTblTxt3">
<li><i>library cache pin waits</i> and / or <i>library cache pin waits</i></i>
<li>Statement is compiling or executing PL/SQL</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Avoid compiling objects in different sessions at the same time or during busy times</i></b></p>    <br><p class="detailTblTxt3">Do not compile interdependent objects across concurrent sessions or during peak usage.<BR>The <I>HangAnalyze</I> command can usually help identify the blockers, waiters, and the SQL which is causing the waits (see the "Hang / Locking tab > Issue Identification > Data Collection" for more information).</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; requires some thought on how and when to recompile objects.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Schedule and/or sequence the recompilation to avoid conflicts.</p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Excessive Amount of Child Cursors </i></b></p>    <br><p class="detailTblTxt3">A large number of child cursors are being created for some SQL statements.  This activity is causing contention among various sessions that are creating child cursors concurrently or with other sessions that also need similar resources (latches and mutexes).</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">AWR / Statspack reports; look in the "SQL ordered by Version Count" section.  If there are any SQL statements with more than 500 versions, then this problem is likely to be occurring.  Alternatively, you can query V$SQLAREA to look for any SQL with version_count greater than 500.<br>
<br>
Query V$SQL_SHARED_CURSOR to see the reasons why SQL isn't being shared.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Inappropriate use of parameter CURSOR_SHARING set to SIMILAR</i></b></p>    <br><p class="detailTblTxt3">The difference between SIMILAR and FORCE is that SIMILAR forces similar statements to share the SQL area without deteriorating execution plans. Setting CURSOR_SHARING to FORCE forces similar statements to share the SQL area potentially deteriorating execution plans.<br>
<br>
One of the cursor sharing criteria when literal replacement is enabled with CURSOR_SHARING as SIMILAR is that bind value should match initial bind value if the execution plan is going to change depending on the value of the literal. The reason for this is we might get a sub-optimal plan if we use the same cursor. This would typically happen when, depending on the value of the literal, the optimizer is going to chose a different plan. For example, if we have a predicate with " > ", then each execution with different bind values would result in a new child cursor because that would ensure that the plan didn't change (a range predicate influences cost and plans), if this was an equality predicate, we would always share the same child cursor.  <br>
<br>
Avoiding the use of CURSOR_SHARING set to SIMILAR entails either rewriting the SQL in the application so that it uses bind values and still gets a good plan (hints, profiles, or outlines may be needed), or using CURSOR_SHARING set to FORCE which will avoid generating child cursors but can cause plans to be sub-optimal.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Depends on the change made.  Changing the CURSOR_SHARING initialization parameter to FORCE is easy; changing the application to use binds will take more effort.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Depends on the change made.  Changing the CURSOR_SHARING initialization parameter to FORCE is risky if done at the database instance level, but less risky at the session level.  Changing the application SQL is not as risky since only the single statement is affected.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See documents below:</p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams035.htm#i1125803">CURSOR_SHARING Parameter</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=94036.1">Init.ora Parameter "CURSOR_SHARING" Reference Note</a></p>    <br><p class="detailTblTxt3">Troubleshooting</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=296377.1">Handling and resolving unshared cursors/large version_counts</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate the possible reasons for excessive amounts of child cursors.</i></b></p>    <br><p class="detailTblTxt3">Child cursors are created by Oracle when it is unable to share an existing child cursor.  There are many reasons why a child cursor may not be shared, so the view "V$SQL_SHARED_CURSOR" must be consulted to find the specific reasons affecting a particular cursor.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">The investigation is generally simple as it is just a query.  The ultimate solution may be more difficult.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Just a query or script needs to be run which queries dynamic views.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10821/memory.htm#PFGRF94297">Shared Cursors</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db112/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FE11882_01%2Fserver.112%2Fe10820%2Fdynviews_3055.htm%23REFRN30254">V$SQL_SHARED_CURSOR reference</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=438755.1">Script: Formated V$SQL_SHARED_CURSOR Report by SQLID or Hash Value</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=3461251.8">V$SQL_SHARED_CURSOR shows all N with CURSOR_SHARING</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Contention caused by changing object privileges</i></b></p>    <br><p class="detailTblTxt3">Changing object privilges causes contention in the library cache since the object will need to be invalidated and reparsed with the new privileges.  Any type of privilege change using GRANT or REVOKE on an object may cause dependent objects to become invalidated too thereby amplifying the effect of the change and causing contention if the system is busy.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">This cause is likely if there are:<br>
	<ul>
	<li>waits on the library cache, shared pool latches, mutexes, and/or library cache pins</li>
	<li>High invalidations</li>
	<li>DDL and other causes have been eliminated</li>
	</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Avoid making grants during periods of high activity or concurrency</i></b></p>    <br><p class="detailTblTxt3">Schedule the privilege changes when the system is quiet to avoid impacting users.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Depends on the availability requirements of the system; no extra effort is involved - just rescheduling.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; some contention is possible if the time period was not quiet enough</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">N/A</p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   library cache pin : Deeper investigation needed. 
</i></b></p>    <br><p class="detailTblTxt3">If none of the other causes are likely, then additional diagnostics are needed for this problem.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">There is insufficient information to suggest a cause.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Additional Library Cache Diagnostics Needed</i></b></p>    <br><p class="detailTblTxt3">This solution describes additional diagnostics that can be obtained to help solve problems with the library cache, dictionary cache, or general parsing problems.  Obtaining these diagnostics ahead of time can help expedite your SR with Oracle.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">These diagnostics often involve procedures that may not be well known and require special care.  We recommend they be implemented by experienced DBAs only.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblHighBG">      <p align="center"><b>H</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Some of the procedures and commands in this note have the potential to introduce severe performance degradation into your system.  They should be used with care and only in cases where your system is already experiencing serious performance problems and these diagnostics are required to proceed further.<br>
<br>
<b>Do not proceed with these steps until you are thoroughly familiar with them and have practiced them on a test system.  If you have any concerns, please stop and file an SR with Oracle.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Please collect the trace files that will be produced from the following steps and send them to Oracle once you have an SR number.  Do the following steps:
<pre>
* Open 3 separate terminal sessions

* Log onto the database as SYSDBA if possible; if you aren't able to log on, then use the "PRELIM" option as follows:
	$ sqlplus -prelim "/ as sysdba"

* Use ORADEBUG to allow the trace files to be any size (repeat in all sessions):
	$ oradebug setmypid
	$ oradebug unlimit
	
* In one session, obtain two sets of hanganalyze reports :

	$ oradebug hanganalyze 3
	...wait 1 minute ...
	$ oradebug hanganalyze 3
	$ oradebug tracefile_name  <-- this will print out the name of the trace file
		
	NOTE: There is a problem with this in some versions!

* Examine the hanganalyze trace file and look for the section that says: "Dumping call stack..." 
and "Dumping detailed process information..."; note the ospids of the files dumped and be sure to send them to Oracle

If there is still time to collect more diagnostics, then collect the following:
	
* In another session, obtain two sets of systemstate dumps :
	$ oradebug dump systemstate 266
	...wait 1 minute ...
	$ oradebug dump systemstate 266
	$ oradebug tracefile_name  <-- this will print out the name of the trace file	

	NOTE: level 266 provides a lot of information but may also take a long time (more than 1/2 hour) in some 
environments.  If the dump needs to be completed as quickly as possible, a reasonable amount of data may be 
collected at level 258 (however, sometimes this may not be enough data to determine a root cause).
	
If there is still time to collect more diagnostics, then collect the following:	
	
* In a third session, obtain a rowcache dump
	$ oradebug dump ROW_CACHE 11
	$ oradebug tracefile_name  <-- this will print out the name of the trace file	
	
* In one of the sessions, obtain ASH reports:
	- for period lasting from the time before through the time after the problem ended. If the problem never ended, 
           then please select a 1 hour period.
	- for a 15 minute period just before the problem
	- for a 15 minute period during the problem
	- for a 15 minute period just after the problem
	
	- The ASH reports may be obtained by running $ORACLE_HOME/rdbms/admin/ashrpt.sql
		- choose the HTML output format
		- the output will be found in the current working directory where you started SQLPlus
	
* Look in the user and background dump destinations for the trace files

* Be prepared to upload these to Oracle Support
	- large files should be compressed
	- if the files are very large, you will be instructed by the engineer to upload the files to an FTP site
	- please inform the engineer that you have collected this data
	</pre>
	</p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   SQL is failing to parse/execute due to errors</i></b></p>    <br><p class="detailTblTxt3">SQL contains semantic errors that cause the statement to fail and then require Oracle to purge it from the library cache.  This is a very expensive operation in the library cache. </p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul>
<li>In AWR or Statspack, significant waits for <i>library cache pin</i> or <i>curosr: pin S wait on X</i> </li>
<li>In AWR or Statspack, Time Model section shows significant amount of DBtime spent on <i>Failed parse elapsed time</i> </li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate sessions with high failed parse counts</i></b></p>    <br><p class="detailTblTxt3">Failed parses are usually caused by SQL with semantic errors (referring to objects that don't exist or whose usage isn't possible in the current context; like trying to update a view based on a join using a rowid)</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Before the parse failures can be solved, one needs to capture diagnostics to show how the failure comes about. This typically means we need to trace one or more sessions that are experiencing a high rate of failed parses to see which SQL is involved, what the errors are, and how the SQL is being used.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">There is usually little risk from the trace file or the change to application considering that the SQL is failing anyways.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=115166.1">STATISTIC:  V9 SQL   "parse count (failures)"</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>wait: library cache lock</b></i></p>    <br><p class="detailTblTxt3">The library cache lock controls the concurrency between clients of the library cache by acquiring a lock on the object handle so that either:  <li>one client can prevent other clients from accessing the same object</li> <li>The client can maintain a dependency for a long time (no other client can change the object).</li><br>This lock is also obtained as part of the operation to locate an object in the library cache (a library cache child latch is obtained to scan a list of handles, then the lock is placed on the handle once the object has been found).</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>TKProf: 
<ul class="detailTblTxt3">
<li>Overall wait event summary for non-recursive and recursive statements shows significant amount of time for <i>library cache lock</i> waits.</li>
</ul>
<br>
<li>AWR or statspack: 
<ul class="detailTblTxt3">
<li>Significant waits for <i>library cache lock</i></li>
</ul>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Unshared SQL Due to Literals</i></b></p>    <br><p class="detailTblTxt3">SQL statements are using literal values where a bind value could have been used.  The literal values cause the statement to be unshared and will force a hard parse.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><br>
TKProf :
<ul class="detailTblTxt3">
<li>Use the report sorted by elapsed parse time</li>
<li>Look at the top statements and determine if they are being hard parsed; these will have "Misses in the library cache" equal or close to the total number of parses</li>
<li>Examine the statements that are being hard parsed and look for the presence of literal values.</li></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Rewrite the SQL to use bind values</i></b></p>    <br><p class="detailTblTxt3">Rewriting the SQL to use bind values will allow the statement to be reused when specific values in the statement change but the overall statement is the same.  This is the best way to promote sharing of SQL statements in the library cache.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium or high effort; rewriting statements requires a change to the application but the change is rather trivial.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; the use of bind values could lead to worse execution plans for some statements.  The statements modified to use binds values should be thoroughly tested to avoid regressing the statement's performance.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Troubleshooting</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=296377.1">Handling and resolving unshared cursors/large version_counts</a></p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#sthref551">7.3.1.3 SQL Sharing Criteria</a></p>    <br><p class="detailTblTxt3">Searches</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/ranked?word=bind+variables&partno=b14407">Pro*C/C++ Precompiler Programmer's Guide</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/ranked?word=bind+variables&partno=b14211">Performance Tuning Guide</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Use the CURSOR_SHARING initialization parameter</i></b></p>    <br><p class="detailTblTxt3">The CURSOR_SHARING parameter will substitute literal values with bind values in a statement automatically.  The settings for this parameter are:
<ul class="detailTblTxt3">
<li><i>EXACT</i>: Leave the statement as it was written with literals (default value)</li>
<li><i>FORCE</i>: Substitute all literals with binds (as much as possible)</li>
<li><i>SIMILAR</i>: Substitute literals with binds only if the query's execution plan won't change (i.e., safe literal replacement)</li>
</ul>
In general, most OLTP apps that use equality predicates will see little change to their execution plans, but the effects of these parameters should be tested in your application.<br>
<br>
These parameters can be set at the session level to further contain their effects - this is the preferred way to use them to minimize widespread changes.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; an init.ora / spfile change.  In the worst case it may require a LOGON trigger to set it for a session.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; the use of bind values could lead to worse execution plans for some statements.  Risk can be mitigated by using SIMILAR instead of FORCE but this may not make enough statements shareable.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams035.htm#sthref154">Reference: CURSOR_SHARING Parameter</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=94036.1">Init.ora Parameter "CURSOR_SHARING" Reference Note</a></p>    <br><p class="detailTblTxt3">Troubleshooting</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#i31512">CURSOR_SHARING for Existing Applications</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=296377.1">Handling and resolving unshared cursors/large version_counts</a></p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#sthref551">7.3.1.3 SQL Sharing Criteria</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Shared SQL being aged out</i></b></p>    <br><p class="detailTblTxt3">The shared pool is too small and is causing many statements that could be shared to age out of the library cache and later reloaded.  Each reload requires a hard parse and impacts the CPU and latches.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><br>
TKProf:
<ul class="detailTblTxt3">
<li>Use the report sorted by elapsed parse time</li>
<li>Look at the top statements and determine if they are being hard parsed; these will have "Misses in the library cache" equal or close to the total number of parses</li>
<li>Examine the statements that are being hard parsed and look for the ABSENCE of literal values, this means these statements could have been shared but weren't (this is not entirely reliable since you could have statements that use binds but will not be executed again).</li>
</ul>
AWR or statspack reports:<br>
<ul class="detailTblTxt3">
<li>Library Cache statistics section shows that <i>reloads</i> are high (usually several thousand per hour) and little or no invalidations are seen </li>
<li>The "% SQL with executions>1" is over 60%, meaning statements are being shared</li>
<u/ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Increase the size of the shared pool</i></b></p>    <br><p class="detailTblTxt3">Increasing the shared pool size will reduce the need to age out statements that could be shared.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; an init.ora / spfile change. </p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; increasing the size of the shared pool is not risky unless:
<ul class="detailTblTxt3">
<li>There are many unshared statements due to literals
<br>
For more details, see: <a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a>
</li>
<li>The machine doesn't have enough physical memory and starts swapping
<br>
<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=17094.1">TECH: Unix Virtual Memory, Paging & Swapping explained</a></li>
</ul>
Verify the above points before changing the size of the shared pool.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14231/create.htm#BABDBIGB">Admin: Using Manual Shared Memory Management, see Specifying the Shared Pool Size</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams196.htm#sthref804">Reference: SHARED_POOL_SIZE Parameter</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams196.htm#CHDGGAIB">Reference: SHARED_POOL_SIZE and Automatic Storage Management</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   10g+: Use the <i>Automatic Shared Memory Manager (ASMM)</i> to adjust the shared pool size</i></b></p>    <br><p class="detailTblTxt3">ASMM will automate memory sizing for the shared pool to ensure an optimal amount is available. You will need to set a reasonable value for SGA_MAX_SIZE and SGA_TARGET to enable ASMM.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; an init.ora / spfile change. </p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; ASMM will ensure sufficient memory is available.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm">Concepts: Memory Architecture</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm#CNCPT810">Concepts: Automatic Shared Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14231/create.htm#BABGCBHI">Admin: Using Automatic Shared Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#i30970">Performance Tuning: Configuring and Using the Shared Pool and Large Pool</a></p>    <br><p class="detailTblTxt3">Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=257643.1">Oracle Database 10g Automated SGA Memory Tuning</a></p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=295626.1">How To Use Automatic Shared Memory Management (ASMM) In Oracle10g</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=270935.1">Shared pool sizing in 10g</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Keep ("pin") frequently used large PL/SQL and cursor objects in the shared pool</i></b></p>    <br><p class="detailTblTxt3">Use the DBMS_SHARED_POOL.KEEP() procedure to mark large, frequently used PL/SQL and SQL objects in the shared pool and avoid them being aged out.  This will reduce reloads and fragmentation since the object doesn't need to keep reentering the shared pool over and over.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; need to identify which objects should be kept and then run a procedure to keep them.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; if you aren't careful in keeping these objects, you may keep too many of them and cause ORA-4031 errors.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm">Concepts: Memory Architecture</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#sthref647">Performance Tuning: Keeping Large Objects to Prevent Aging</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/appdev.102/b14258/d_shpool.htm#sthref7134">PL/SQL DBMS_SHARED_POOL</a></p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=1012047.6">How To Pin Objects in Your Shared Pool</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=101627.1">How to Automate Pinning Objects in Shared Pool at Database Startup</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=305529.1">How To Use SYS.DBMS_SHARED_POOL In a PL/SQL Stored procedure To Pin objects in Oracle's Shared Pool</a></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=61760.1">Using the Oracle DBMS_SHARED_POOL Package</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Library cache object Invalidations</i></b></p>    <br><p class="detailTblTxt3">When objects (like tables or views) are altered via DDL or collecting statistics, the cursors that depend on them are invalidated.  This will cause the cursor to be hard parsed when it is executed again and will impact CPU and latches.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><br>
TKProf:
<ul class="detailTblTxt3">
<li>Use the report sorted by elapsed parse time</li>
<li>Look at the top statements and determine if they are being hard parsed; these will have "Misses in the library cache" equal or close to the total number of parses</li>
<li>Examine the statements that are being hard parsed and look for the ABSENCE of literal values, this means these statements could have been shared but weren't (this is not entirely reliable since you could have statements that use binds but will not be executed again).</li>
</ul>
AWR or statspack reports:<br>
<ul class="detailTblTxt3">
<li>Library Cache statistics section shows that <i>reloads</i> are high (usually several thousand per hour) and invalidations are high</li>
<li>The "% SQL with executions>1" is over 60%, meaning statements are being shared</li>
<li>Check the <i>Dictionary Statistics</i> section of the report and look for non-zero values in the <i>Modification Requests</i> column, meaning that DDL occurred on some objects.</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Do not perform DDL operations during busy periods</i></b></p>    <br><p class="detailTblTxt3">DDL will often cause library cache objects to be invalidated and this could cascade to many different dependent objects like cursors.  Invalidations have a large impact on the library cache, shared pool, row cache, and CPU since they will likely require many hard parses to occur at the same time.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; defer the DDL to a quiet time.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; may involve some downtime.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Not Applicable.  Simply schedule DDL during maintenance or low activity periods.</p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Do not collect optimizer statistics during busy periods</i></b></p>    <br><p class="detailTblTxt3">Collecting statistics (using ANALYZE or DBMS_STATS) will cause library cache objects to be invalidated and this could cascade to many different dependent objects like cursors.  Invalidations have a large impact on the library cache, shared pool, row cache, and CPU since they will likely require many hard parses to occur at the same time.<br>
<br>
For some database versions, the DBMS_STATS procedure allows give you the option of not invalidating objects (see the "no_invalidate" option).
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; defer the gathering of statistics to a quiet time.  In 10g, you have a choice of whether or not to invalidate objects after gathering statistics.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; defer the gathering of statistics to a quiet time.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">The document links below shows how to specify statistics collection without causing invalidations.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/appdev.102/b14258/d_stats.htm#sthref8129">GATHER_TABLE_STATS Procedure, see the "no_invalidate" option</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Do not perform TRUNCATE operations during busy periods</i></b></p>    <br><p class="detailTblTxt3">See the document below:
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; defer the DDL to a quiet time.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; may involve some downtime.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See documents below:</p>    <br><p class="detailTblTxt3">Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=123214.1 ">Truncate - Causes Invalidations in the LIBRARY CACHE</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Objects being compiled across sessions</i></b></p>    <br><p class="detailTblTxt3">One or more sessions are compiling objects (typically PL/SQL) while another session wants to pin the same object prior to executing or compiling it.  One or more sessions will wait on library cache pin in Share mode (if it just wants to execute it) or eXclusive mode (if it want to compile/change the object).
</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">TKProf:
<ul class="detailTblTxt3">
<li><i>library cache pin waits</i> and / or <i>library cache pin waits</i></i>
<li>Statement is compiling or executing PL/SQL</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Avoid compiling objects in different sessions at the same time or during busy times</i></b></p>    <br><p class="detailTblTxt3">Do not compile interdependent objects across concurrent sessions or during peak usage.<BR>The <I>HangAnalyze</I> command can usually help identify the blockers, waiters, and the SQL which is causing the waits (see the "Hang / Locking tab > Issue Identification > Data Collection" for more information).</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; requires some thought on how and when to recompile objects.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Schedule and/or sequence the recompilation to avoid conflicts.</p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Auditing is turned on</i></b></p>    <br><p class="detailTblTxt3">Auditing will increase the need to acquire library cache locks and potentially increase contention for them.  This is especially true in a RAC environment where the library cache locks become database-wide (across all instances).</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">AWR / Statspack:
<ul class="detailTblTxt3">
<li><i>library cache lock</i> waits</i>
<li><i>audit_trail</i> parameter is set to something other than "none"</li>
</ul>

</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Evaluate the need to audit </i></b></p>    <br><p class="detailTblTxt3">Consider disabling auditing if it is not absolutely necessary.  </p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; initialization parameter change</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk. </p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/network.102/b14266/cfgaudit.htm#i1010870">Keeping Audited Information Manageable</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Unshared SQL in a RAC environment</i></b></p>    <br><p class="detailTblTxt3">Library cache locks waits may occur in RAC environments when applications are not sharing SQL.  In single-instance environments, library cache and shared pool latch contention is typically the symptom for unshared SQL.  However, in RAC, the main symptom may be <i>library cache lock</i> contention.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">RAC environment<br>
<br>
TKProf:
<ul class="detailTblTxt3">
<li>Many statements are hard parsed</li>
<li><i>library cache lock</i> waits occur as part of a hard parse</i>
</ul>
<br>
AWR / Statspack:
<ul class="detailTblTxt3">
<li><i>library cache lock</i> waits</i>
<li>Low percentage for "% SQL with executions>1" (less than 60%)</li>
<li>soft parse ratio is below 80%</li>
</ul>

</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Rewrite the SQL to use bind values</i></b></p>    <br><p class="detailTblTxt3">Rewriting the SQL to use bind values will allow the statement to be reused when specific values in the statement change but the overall statement is the same.  This is the best way to promote sharing of SQL statements in the library cache.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium or high effort; rewriting statements requires a change to the application but the change is rather trivial.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; the use of bind values could lead to worse execution plans for some statements.  The statements modified to use binds values should be thoroughly tested to avoid regressing the statement's performance.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Troubleshooting</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=296377.1">Handling and resolving unshared cursors/large version_counts</a></p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#sthref551">7.3.1.3 SQL Sharing Criteria</a></p>    <br><p class="detailTblTxt3">Searches</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/ranked?word=bind+variables&partno=b14407">Pro*C/C++ Precompiler Programmer's Guide</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/ranked?word=bind+variables&partno=b14211">Performance Tuning Guide</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Use the CURSOR_SHARING initialization parameter</i></b></p>    <br><p class="detailTblTxt3">The CURSOR_SHARING parameter will substitute literal values with bind values in a statement automatically.  The settings for this parameter are:
<ul class="detailTblTxt3">
<li><i>EXACT</i>: Leave the statement as it was written with literals (default value)</li>
<li><i>FORCE</i>: Substitute all literals with binds (as much as possible)</li>
<li><i>SIMILAR</i>: Substitute literals with binds only if the query's execution plan won't change (i.e., safe literal replacement)</li>
</ul>
In general, most OLTP apps that use equality predicates will see little change to their execution plans, but the effects of these parameters should be tested in your application.<br>
<br>
These parameters can be set at the session level to further contain their effects - this is the preferred way to use them to minimize widespread changes.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; an init.ora / spfile change.  In the worst case it may require a LOGON trigger to set it for a session.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; the use of bind values could lead to worse execution plans for some statements.  Risk can be mitigated by using SIMILAR instead of FORCE but this may not make enough statements shareable.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams035.htm#sthref154">Reference: CURSOR_SHARING Parameter</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=94036.1">Init.ora Parameter "CURSOR_SHARING" Reference Note</a></p>    <br><p class="detailTblTxt3">Troubleshooting</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#i31512">CURSOR_SHARING for Existing Applications</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=296377.1">Handling and resolving unshared cursors/large version_counts</a></p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#sthref551">7.3.1.3 SQL Sharing Criteria</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Extensive use of row level triggers</i></b></p>    <br><p class="detailTblTxt3">When row level triggers are fired frequently, higher than usual library cache activity may occur, because of the need to check if mutating tables are being read.  During trigger execution, it is possible that the application tries to read mutating tables, i.e., tables that are in the process of being modified by the statement that caused the trigger to fire. As this may lead to inconsistencies, it is not allowed, and the application should receive the error ORA-4091. The mechanism to detect this error involves one library cache lock acquisition per table referenced in each select statement executed.<br>
<br>
The extent of the problem depends on how many times the row triggers fire rather than on the number of row triggers have been created (i.e., one trigger that fires 10000 times will cause more problems than 100 triggers that fire once).</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">TKProf:
<ul class="detailTblTxt3">
<li>Many statements are hard parsed</li>
<li><i>library cache lock</i> waits</i>
<li>evidence of a row level trigger firing (maybe some recursive SQL related to a trigger)</li>
</ul>
</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Evaluate the need for the row trigger</i></b></p>    <br><p class="detailTblTxt3">Sometimes row triggers aren't needed to accomplish the functionality.  Consider if there is an alternative.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; may require application and schema changes</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk. If the application and schema changes, there is a possibility that some adverse effect will be introduced.  Thorough testing will be needed.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Requires understanding the application and how row-level triggers are used.  See the documents below for reference information.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/appdev.102/b14251/adfns_triggers.htm#g1043102">App Dev Guide: Coding Triggers</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/appdev.102/b14251/adfns_triggers.htm#g1043102">App Dev Guide: Coding Triggers</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Excessive Amount of Child Cursors </i></b></p>    <br><p class="detailTblTxt3">A large number of child cursors are being created for some SQL statements.  This activity is causing contention among various sessions that are creating child cursors concurrently or with other sessions that also need similar resources (latches and mutexes).</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">AWR / Statspack reports; look in the "SQL ordered by Version Count" section.  If there are any SQL statements with more than 500 versions, then this problem is likely to be occurring.  Alternatively, you can query V$SQLAREA to look for any SQL with version_count greater than 500.<br>
<br>
Query V$SQL_SHARED_CURSOR to see the reasons why SQL isn't being shared.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Inappropriate use of parameter CURSOR_SHARING set to SIMILAR</i></b></p>    <br><p class="detailTblTxt3">The difference between SIMILAR and FORCE is that SIMILAR forces similar statements to share the SQL area without deteriorating execution plans. Setting CURSOR_SHARING to FORCE forces similar statements to share the SQL area potentially deteriorating execution plans.<br>
<br>
One of the cursor sharing criteria when literal replacement is enabled with CURSOR_SHARING as SIMILAR is that bind value should match initial bind value if the execution plan is going to change depending on the value of the literal. The reason for this is we might get a sub-optimal plan if we use the same cursor. This would typically happen when, depending on the value of the literal, the optimizer is going to chose a different plan. For example, if we have a predicate with " > ", then each execution with different bind values would result in a new child cursor because that would ensure that the plan didn't change (a range predicate influences cost and plans), if this was an equality predicate, we would always share the same child cursor.  <br>
<br>
Avoiding the use of CURSOR_SHARING set to SIMILAR entails either rewriting the SQL in the application so that it uses bind values and still gets a good plan (hints, profiles, or outlines may be needed), or using CURSOR_SHARING set to FORCE which will avoid generating child cursors but can cause plans to be sub-optimal.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Depends on the change made.  Changing the CURSOR_SHARING initialization parameter to FORCE is easy; changing the application to use binds will take more effort.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Depends on the change made.  Changing the CURSOR_SHARING initialization parameter to FORCE is risky if done at the database instance level, but less risky at the session level.  Changing the application SQL is not as risky since only the single statement is affected.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See documents below:</p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams035.htm#i1125803">CURSOR_SHARING Parameter</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=94036.1">Init.ora Parameter "CURSOR_SHARING" Reference Note</a></p>    <br><p class="detailTblTxt3">Troubleshooting</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=296377.1">Handling and resolving unshared cursors/large version_counts</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate the possible reasons for excessive amounts of child cursors.</i></b></p>    <br><p class="detailTblTxt3">Child cursors are created by Oracle when it is unable to share an existing child cursor.  There are many reasons why a child cursor may not be shared, so the view "V$SQL_SHARED_CURSOR" must be consulted to find the specific reasons affecting a particular cursor.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">The investigation is generally simple as it is just a query.  The ultimate solution may be more difficult.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Just a query or script needs to be run which queries dynamic views.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10821/memory.htm#PFGRF94297">Shared Cursors</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db112/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FE11882_01%2Fserver.112%2Fe10820%2Fdynviews_3055.htm%23REFRN30254">V$SQL_SHARED_CURSOR reference</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=438755.1">Script: Formated V$SQL_SHARED_CURSOR Report by SQLID or Hash Value</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=3461251.8">V$SQL_SHARED_CURSOR shows all N with CURSOR_SHARING</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Library cache issue; Deeper investigation needed. 
</i></b></p>    <br><p class="detailTblTxt3">If none of the other causes are likely, then additional diagnostics are needed for this problem.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">There is insufficient information to suggest a cause.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Additional Library Cache Diagnostics Needed</i></b></p>    <br><p class="detailTblTxt3">This solution describes additional diagnostics that can be obtained to help solve problems with the library cache, dictionary cache, or general parsing problems.  Obtaining these diagnostics ahead of time can help expedite your SR with Oracle.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">These diagnostics often involve procedures that may not be well known and require special care.  We recommend they be implemented by experienced DBAs only.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblHighBG">      <p align="center"><b>H</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Some of the procedures and commands in this note have the potential to introduce severe performance degradation into your system.  They should be used with care and only in cases where your system is already experiencing serious performance problems and these diagnostics are required to proceed further.<br>
<br>
<b>Do not proceed with these steps until you are thoroughly familiar with them and have practiced them on a test system.  If you have any concerns, please stop and file an SR with Oracle.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Please collect the trace files that will be produced from the following steps and send them to Oracle once you have an SR number.  Do the following steps:
<pre>
* Open 3 separate terminal sessions

* Log onto the database as SYSDBA if possible; if you aren't able to log on, then use the "PRELIM" option as follows:
	$ sqlplus -prelim "/ as sysdba"

* Use ORADEBUG to allow the trace files to be any size (repeat in all sessions):
	$ oradebug setmypid
	$ oradebug unlimit
	
* In one session, obtain two sets of hanganalyze reports :

	$ oradebug hanganalyze 3
	...wait 1 minute ...
	$ oradebug hanganalyze 3
	$ oradebug tracefile_name  <-- this will print out the name of the trace file
		
	NOTE: There is a problem with this in some versions!

* Examine the hanganalyze trace file and look for the section that says: "Dumping call stack..." 
and "Dumping detailed process information..."; note the ospids of the files dumped and be sure to send them to Oracle

If there is still time to collect more diagnostics, then collect the following:
	
* In another session, obtain two sets of systemstate dumps :
	$ oradebug dump systemstate 266
	...wait 1 minute ...
	$ oradebug dump systemstate 266
	$ oradebug tracefile_name  <-- this will print out the name of the trace file	

	NOTE: level 266 provides a lot of information but may also take a long time (more than 1/2 hour) in some 
environments.  If the dump needs to be completed as quickly as possible, a reasonable amount of data may be 
collected at level 258 (however, sometimes this may not be enough data to determine a root cause).
	
If there is still time to collect more diagnostics, then collect the following:	
	
* In a third session, obtain a rowcache dump
	$ oradebug dump ROW_CACHE 11
	$ oradebug tracefile_name  <-- this will print out the name of the trace file	
	
* In one of the sessions, obtain ASH reports:
	- for period lasting from the time before through the time after the problem ended. If the problem never ended, 
           then please select a 1 hour period.
	- for a 15 minute period just before the problem
	- for a 15 minute period during the problem
	- for a 15 minute period just after the problem
	
	- The ASH reports may be obtained by running $ORACLE_HOME/rdbms/admin/ashrpt.sql
		- choose the HTML output format
		- the output will be found in the current working directory where you started SQLPlus
	
* Look in the user and background dump destinations for the trace files

* Be prepared to upload these to Oracle Support
	- large files should be compressed
	- if the files are very large, you will be instructed by the engineer to upload the files to an FTP site
	- please inform the engineer that you have collected this data
	</pre>
	</p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>wait: library cache load lock</b></i></p>    <br><p class="detailTblTxt3">Oracle tries to find the load lock for the database object so that it can load the object. The load lock is always gotten in Exclusive mode, so that no other process can load the same object. If the load lock is busy the session will wait on this event until the lock becomes available.</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3">AWR  shows the wait event, "library cache load lock" in the "Top 5 Timed Events" section and it is more than 10% of total DBTime.</p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Shared SQL being aged out</i></b></p>    <br><p class="detailTblTxt3">The shared pool is too small and is causing many statements that could be shared to age out of the library cache and later reloaded.  Each reload requires a hard parse and impacts the CPU and latches.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><br>
TKProf:
<ul class="detailTblTxt3">
<li>Use the report sorted by elapsed parse time</li>
<li>Look at the top statements and determine if they are being hard parsed; these will have "Misses in the library cache" equal or close to the total number of parses</li>
<li>Examine the statements that are being hard parsed and look for the ABSENCE of literal values, this means these statements could have been shared but weren't (this is not entirely reliable since you could have statements that use binds but will not be executed again).</li>
</ul>
AWR or statspack reports:<br>
<ul class="detailTblTxt3">
<li>Library Cache statistics section shows that <i>reloads</i> are high (usually several thousand per hour) and little or no invalidations are seen </li>
<li>The "% SQL with executions>1" is over 60%, meaning statements are being shared</li>
<u/ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Increase the size of the shared pool</i></b></p>    <br><p class="detailTblTxt3">Increasing the shared pool size will reduce the need to age out statements that could be shared.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; an init.ora / spfile change. </p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; increasing the size of the shared pool is not risky unless:
<ul class="detailTblTxt3">
<li>There are many unshared statements due to literals
<br>
For more details, see: <a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a>
</li>
<li>The machine doesn't have enough physical memory and starts swapping
<br>
<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=17094.1">TECH: Unix Virtual Memory, Paging & Swapping explained</a></li>
</ul>
Verify the above points before changing the size of the shared pool.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14231/create.htm#BABDBIGB">Admin: Using Manual Shared Memory Management, see Specifying the Shared Pool Size</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams196.htm#sthref804">Reference: SHARED_POOL_SIZE Parameter</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams196.htm#CHDGGAIB">Reference: SHARED_POOL_SIZE and Automatic Storage Management</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   10g+: Use the <i>Automatic Shared Memory Manager (ASMM)</i> to adjust the shared pool size</i></b></p>    <br><p class="detailTblTxt3">ASMM will automate memory sizing for the shared pool to ensure an optimal amount is available. You will need to set a reasonable value for SGA_MAX_SIZE and SGA_TARGET to enable ASMM.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; an init.ora / spfile change. </p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; ASMM will ensure sufficient memory is available.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm">Concepts: Memory Architecture</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm#CNCPT810">Concepts: Automatic Shared Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14231/create.htm#BABGCBHI">Admin: Using Automatic Shared Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#i30970">Performance Tuning: Configuring and Using the Shared Pool and Large Pool</a></p>    <br><p class="detailTblTxt3">Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=257643.1">Oracle Database 10g Automated SGA Memory Tuning</a></p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=295626.1">How To Use Automatic Shared Memory Management (ASMM) In Oracle10g</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=270935.1">Shared pool sizing in 10g</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Keep ("pin") frequently used large PL/SQL and cursor objects in the shared pool</i></b></p>    <br><p class="detailTblTxt3">Use the DBMS_SHARED_POOL.KEEP() procedure to mark large, frequently used PL/SQL and SQL objects in the shared pool and avoid them being aged out.  This will reduce reloads and fragmentation since the object doesn't need to keep reentering the shared pool over and over.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; need to identify which objects should be kept and then run a procedure to keep them.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; if you aren't careful in keeping these objects, you may keep too many of them and cause ORA-4031 errors.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm">Concepts: Memory Architecture</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#sthref647">Performance Tuning: Keeping Large Objects to Prevent Aging</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/appdev.102/b14258/d_shpool.htm#sthref7134">PL/SQL DBMS_SHARED_POOL</a></p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=1012047.6">How To Pin Objects in Your Shared Pool</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=101627.1">How to Automate Pinning Objects in Shared Pool at Database Startup</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=305529.1">How To Use SYS.DBMS_SHARED_POOL In a PL/SQL Stored procedure To Pin objects in Oracle's Shared Pool</a></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=61760.1">Using the Oracle DBMS_SHARED_POOL Package</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Library cache object Invalidations</i></b></p>    <br><p class="detailTblTxt3">When objects (like tables or views) are altered via DDL or collecting statistics, the cursors that depend on them are invalidated.  This will cause the cursor to be hard parsed when it is executed again and will impact CPU and latches.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><br>
TKProf:
<ul class="detailTblTxt3">
<li>Use the report sorted by elapsed parse time</li>
<li>Look at the top statements and determine if they are being hard parsed; these will have "Misses in the library cache" equal or close to the total number of parses</li>
<li>Examine the statements that are being hard parsed and look for the ABSENCE of literal values, this means these statements could have been shared but weren't (this is not entirely reliable since you could have statements that use binds but will not be executed again).</li>
</ul>
AWR or statspack reports:<br>
<ul class="detailTblTxt3">
<li>Library Cache statistics section shows that <i>reloads</i> are high (usually several thousand per hour) and invalidations are high</li>
<li>The "% SQL with executions>1" is over 60%, meaning statements are being shared</li>
<li>Check the <i>Dictionary Statistics</i> section of the report and look for non-zero values in the <i>Modification Requests</i> column, meaning that DDL occurred on some objects.</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Do not perform DDL operations during busy periods</i></b></p>    <br><p class="detailTblTxt3">DDL will often cause library cache objects to be invalidated and this could cascade to many different dependent objects like cursors.  Invalidations have a large impact on the library cache, shared pool, row cache, and CPU since they will likely require many hard parses to occur at the same time.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; defer the DDL to a quiet time.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; may involve some downtime.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Not Applicable.  Simply schedule DDL during maintenance or low activity periods.</p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Do not collect optimizer statistics during busy periods</i></b></p>    <br><p class="detailTblTxt3">Collecting statistics (using ANALYZE or DBMS_STATS) will cause library cache objects to be invalidated and this could cascade to many different dependent objects like cursors.  Invalidations have a large impact on the library cache, shared pool, row cache, and CPU since they will likely require many hard parses to occur at the same time.<br>
<br>
For some database versions, the DBMS_STATS procedure allows give you the option of not invalidating objects (see the "no_invalidate" option).
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; defer the gathering of statistics to a quiet time.  In 10g, you have a choice of whether or not to invalidate objects after gathering statistics.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; defer the gathering of statistics to a quiet time.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">The document links below shows how to specify statistics collection without causing invalidations.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/appdev.102/b14258/d_stats.htm#sthref8129">GATHER_TABLE_STATS Procedure, see the "no_invalidate" option</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Do not perform TRUNCATE operations during busy periods</i></b></p>    <br><p class="detailTblTxt3">See the document below:
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; defer the DDL to a quiet time.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; may involve some downtime.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See documents below:</p>    <br><p class="detailTblTxt3">Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=123214.1 ">Truncate - Causes Invalidations in the LIBRARY CACHE</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Library cache issue; Deeper investigation needed. 
</i></b></p>    <br><p class="detailTblTxt3">If none of the other causes are likely, then additional diagnostics are needed for this problem.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">There is insufficient information to suggest a cause.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Additional Library Cache Diagnostics Needed</i></b></p>    <br><p class="detailTblTxt3">This solution describes additional diagnostics that can be obtained to help solve problems with the library cache, dictionary cache, or general parsing problems.  Obtaining these diagnostics ahead of time can help expedite your SR with Oracle.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">These diagnostics often involve procedures that may not be well known and require special care.  We recommend they be implemented by experienced DBAs only.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblHighBG">      <p align="center"><b>H</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Some of the procedures and commands in this note have the potential to introduce severe performance degradation into your system.  They should be used with care and only in cases where your system is already experiencing serious performance problems and these diagnostics are required to proceed further.<br>
<br>
<b>Do not proceed with these steps until you are thoroughly familiar with them and have practiced them on a test system.  If you have any concerns, please stop and file an SR with Oracle.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Please collect the trace files that will be produced from the following steps and send them to Oracle once you have an SR number.  Do the following steps:
<pre>
* Open 3 separate terminal sessions

* Log onto the database as SYSDBA if possible; if you aren't able to log on, then use the "PRELIM" option as follows:
	$ sqlplus -prelim "/ as sysdba"

* Use ORADEBUG to allow the trace files to be any size (repeat in all sessions):
	$ oradebug setmypid
	$ oradebug unlimit
	
* In one session, obtain two sets of hanganalyze reports :

	$ oradebug hanganalyze 3
	...wait 1 minute ...
	$ oradebug hanganalyze 3
	$ oradebug tracefile_name  <-- this will print out the name of the trace file
		
	NOTE: There is a problem with this in some versions!

* Examine the hanganalyze trace file and look for the section that says: "Dumping call stack..." 
and "Dumping detailed process information..."; note the ospids of the files dumped and be sure to send them to Oracle

If there is still time to collect more diagnostics, then collect the following:
	
* In another session, obtain two sets of systemstate dumps :
	$ oradebug dump systemstate 266
	...wait 1 minute ...
	$ oradebug dump systemstate 266
	$ oradebug tracefile_name  <-- this will print out the name of the trace file	

	NOTE: level 266 provides a lot of information but may also take a long time (more than 1/2 hour) in some 
environments.  If the dump needs to be completed as quickly as possible, a reasonable amount of data may be 
collected at level 258 (however, sometimes this may not be enough data to determine a root cause).
	
If there is still time to collect more diagnostics, then collect the following:	
	
* In a third session, obtain a rowcache dump
	$ oradebug dump ROW_CACHE 11
	$ oradebug tracefile_name  <-- this will print out the name of the trace file	
	
* In one of the sessions, obtain ASH reports:
	- for period lasting from the time before through the time after the problem ended. If the problem never ended, 
           then please select a 1 hour period.
	- for a 15 minute period just before the problem
	- for a 15 minute period during the problem
	- for a 15 minute period just after the problem
	
	- The ASH reports may be obtained by running $ORACLE_HOME/rdbms/admin/ashrpt.sql
		- choose the HTML output format
		- the output will be found in the current working directory where you started SQLPlus
	
* Look in the user and background dump destinations for the trace files

* Be prepared to upload these to Oracle Support
	- large files should be compressed
	- if the files are very large, you will be instructed by the engineer to upload the files to an FTP site
	- please inform the engineer that you have collected this data
	</pre>
	</p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   RAC: CPU Saturation Affecting LCK0 Process</i></b></p>    <br><p class="detailTblTxt3">The LCK0 process is unable to perform library cache load functions due to CPU saturation; foregrounds wait much longer for library cache load locks.<br>
<br>
Oracle relies on background processes to complete vital tasks in asynchronously.  As long as the background processes are able to complete their tasks in a timely manner, then foreground sessions don't have to wait for resources to become available and aren't hindered by a background task.  However, if the system's CPUs are very busy and there is insufficient capacity to handle the load, then background processes will be unable to obtain CPU resources and will wait on the run queue.  This may cause cascading effects as certain tasks are not completed and foreground sessions will need to wait.<br>
<br>
A few examples are:<br>
<br>
<ul>
<li>
DBWR is unable to write dirty buffers fast enough (since it waits on the run queue) and foreground sessions wait for free buffers.</li>
<li>Archiver is unsable to complete archivelog writes and foregrounds are blocked from switching to the redolog</li>
<li>LCK0 process is unable to perform library cache load functions and foregrounds wait for library cache load locks</li>
</ul></p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">AWR or Statspack show waits for "library cache load lock" greater than 10% of overall DBTime and there is a CPU saturation problem on a host in the cluster.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate the reasons for CPU saturation</i></b></p>    <br><p class="detailTblTxt3">See this guide's "Issue Identification > Analysis > Verify Oracle OS Resource Usage" section for more details.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Determine which processes are using most of the CPU on the machine.  They could be Oracle processes (including more than one instance) or non-Oracle processes.  If they are Oracle processes, then you should have detected this already in a previous step and investigated the reasons for Oracle's CPU consumption (of course, better late than never).  Otherwise, you will need to find out the reason for the non-Oracle CPU consumption (outside of our scope).
<br>
You can use various OS tools and Oracle EM to investigate this.<br>
<br>
Oracle recommends using the "OS Watcher" utility to capture OS diagnostics because it offers an easy way to capture data and report OS data for several platforms.<br>
<br>
There are also commands available in Unix flavors that can help.  For example, use the <i><b>top</b></i> utility or the <i><b>ps</b></i> command, ps -ef -o pid,pcpu,comm | sort -k 2 (this will give you a sorted list of processes using CPU - look at the 2nd column, "% CPU").<br>
<br>
See the documents below for additional details.</p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id= 224176.1">How to use OS commands to diagnose Database Performance issues?</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=164768.1">Diagnosing High CPU Utilization</a></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=301137.1">OS Watcher User Guide</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://st-doc.us.oracle.com/10/102/em.102/b31949/host_3rdparty_management.htm#sthref1533">Enterprise Manager: Host Performance page</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>wait: PL/SQL lock timer
 </b></i></p>    <br><p class="detailTblTxt3">This wait is occurs when a call to DBMS_LOCK.SLEEP is made.</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>TKProf: 
<ul class="detailTblTxt3">
<li>Overall wait event summary for non-recursive and recursive statements shows significant amount of time for <i>PL/SQL lock timer</i> waits.</li>
</ul>
<br>
<li>AWR or statspack: 
<ul class="detailTblTxt3">
<li><i>PL/SQL lock timer</i> is among the top timed events</li>
</ul>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Identify the PL/SQL code that issues DBMS_LOCK.SLEEP</i></b></p>    <br><p class="detailTblTxt3"><i>PL/SQL lock timer</i> watis occur when the call to DBMS_LOCK.SLEEP is made.  The session is neither on the CPU nor waiting for a resource but merely asleep waiting for the call to finish.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">AWR, Statspack, or TKProf shows a significant amount of time listed (10% or more)  in the "Timed Event" section as <i>PL/SQL lock timer</i>.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate the application's usage of the DBMS_LOCK.SLEEP procedure.</i></b></p>    <br><p class="detailTblTxt3">From the database perspective, this is considered an idle wait.  Although for your user, it may be the reason they are perceiving a slow application.  This event is usually called by user-written code using PL/SQL through the DBMS_LOCK.SLEEP procedure. When the sleep is in progress, the wait event for the session(s) is "PL/SQL lock timer".  To reduce this wait, one needs to understand why the application is sleeping and if the sleep duration can be reduced or eliminated.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Removing or reducing this wait will require application changes and subsequent testing.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">There is some risk with changing the application; regression testing will be required to mitigate risks.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Issue the following SQL to identify the sessions waiting on the <i>PL/SQL lock timer</i> event:<br>
<pre>
SELECT s.sid, s.serial#, p.spid, s.module, sq.sql_text "Current SQL"
FROM v$session s, v$sql sq, v$process p
WHERE s.sql_id = sq.sql_id
AND s.event = 'PL/SQL lock timer'
AND s.paddr = p.addr
</pre></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10820/waitevents003.htm#sthref3844">Wait event reference for PL/SQL lock timer</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/E11882_01/appdev.112/e10577/d_lock.htm#i997212">Reference for DBMS_LOCK.SLEEP</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>wait: row cache lock</b></i></p>    <br><p class="detailTblTxt3">The row cache lock is used primarily to serialize changes to the data dictionary. Waits on this event usually indicate some form of DDL occurring, or possibly recursive operations such as storage management and sequence numbers incrementing frequently.</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3">In Statspack, AWR, or TKProf, significant waits for <i>row cache lock</i> are seen.</p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Sequence Cache Management Causing Contention</i></b></p>    <br><p class="detailTblTxt3">Sequences are being incremented quickly and exhausting their caches; this is leading to contention in the row cache as multiple sessions attempt to acquire the row cache lock when they update the row cache with new values.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">In AWR, ASH, statspack, TRCANLZR, or TKProf, observe:<br>
<ol>
<li>Significant row cache lock contention</li>
<li>row cache lock waits are identified as being due to "dc_sequences".  This may be done by observing in AWR or Statspack in the "Dictionary Cache Stats" section, that "dc_sequences" are responsible for most of the modification requests.  ASH will show you the row cache lock wait's P3 values which correspond to the cache_id and may be correlated to the "parameter column" in V$ROWCACHE to see if most waits are for dc_sequences.  </li>
</ol></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Increase the cache size for sequences incrementing rapidly</i></b></p>    <br><p class="detailTblTxt3">Identify the sequences under contention by obtaining a 10046, level 8 trace of sessions that are experiencing the high row cache lock waits.  Find the statements with the highest row cache lock waits on the <i>dc_sequences</i> cache and then look for the sequences they are using.  Increase the cache size of these sequences by using the "ALTER SEQUENCE <sequence name> CACHE <size>" command so they don't need to be updated as frequently.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">simple command to change cache size.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Larger sized caches will improve performance.  Be aware that if the database is restarted or the sequence is aged out of the shared pool, there will be a gap in the sequences up to CACHE size large.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Use the syntax listed in the SQL reference guide for ALTER SEQUENCE.</p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/B19306_01/server.102/b14200/statements_2011.htm#i2228022">ALTER SEQUENCE syntax</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Deeper Investigation Needed</i></b></p>    <br><p class="detailTblTxt3">No specific cause was found for the high row cache lock waits - deeper investigation techniques are needed.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">High row cache lock waits were found but other causes have been ruled out.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Contact Oracle Support Services for additional help.</i></b></p>    <br><p class="detailTblTxt3">This problem requires assistance from Oracle Support Services.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">N/A</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">N/A</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">N/A</p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3">N/A</p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p><br> </td> </tr> </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="6">Concurrency - Latches and Mutexes</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt">Waits for latches and mutexes that are used to coordinate operations.  Typical events:
<ul>
<li>cursor: pin S wait on X</li>
<li>latch free</i>
<li>latch: cache buffers chains</li>
<li>latch: library cache</li>
<li>latch: library cache lock</li>
<li>latch: library cache pin</li>
<li>latch: row cache objects</li>
<li>latch: shared pool</li>
</ul>
<b>Facts Required for Analysis</b>:<br>
<br>
The key is to determine which latch is causing the performance problem. <br>
<br>
Please read the note, <a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=413942.1">How to Identify Which Latch is Associated with a "latch free" wait</a> for more details.<br>
<br>
Examine the table below for common causes of the wait events you found.	</td>	</tr>	</table><br> <table width="100%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"> <tr><td width="100%" class="detailMainTxt"> <p><b>Note:</b> This list shows some common observations and causes but is not a complete list.  If you do not find a possible cause in this list, you can always open a service request with Oracle to investigate other possible causes.  Please see the section below called, "Open a Service Request with Oracle Support Services". </p> </td></tr> </table> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>Wait: latch: cache buffers chains</b></i></p>    <br><p class="detailTblTxt3">Block headers in the buffer cache are placed on linked lists (cache buffer chains) which are accessed through a hash table. One or more hash chains are protected by one child of this latch. Processes need to get the child latch to scan for a buffer. This prevents the linked list from changing while scanning.<br>
<br>
Wait class: Concurrency, typically foreground</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>TKProf: 
<ul class="detailTblTxt3">
<li>Overall summary for non-recursive and recursive statements shows significant amount of time for <i>latch:</i>  or <i>latch free</i> waits.</li>
<li>The <i>cache buffers chains</i> latch is a significant part of the total waits</li>
</ul>
</li>
<br>
<li>AWR or statspack: 
<ul class="detailTblTxt3">
<li>10g or higher: <i>latch: cache buffers chains</i> waits is among the top timed events</li>
<li>Prior to 10g:  <i>latch free</i> waits is among the top timed events and the <i>cache buffers chains</i> latch is among the more prominent latches (high wait times or sleeps)</li>
</ul></li>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Hot blocks due to inefficient execution plan</i></b></p>    <br><p class="detailTblTxt3">Hot blocks refer to block headers that are accessed very frequently (via logical reads) and this frequent access leads to contention on the cache buffers chains latch.<br>
<br>
Inefficient execution plans may perform many logical reads while they visit many blocks.  If this query is executed by many sessions concurrently (or other similar queries against the same blocks), then there will be contention on these blocks.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><br>
TKProf:
<ul class="detailTblTxt3">
<li>Use the report sorted by elapsed fetch time</li>
<li>Look at the top statements and determine if they are seeing latch contention on the cache buffers chains latch.</li>
</ul>
AWR or statspack reports:<br>
<ul class="detailTblTxt3">
<li>10g: waits on <i>latch: cache buffers chains</i></li>
<li>Pre-10g: waits on <i>latch free</i> and highest latch time or sleeps is on the <i>cache buffers chains</i> latch</li>
<li>Examine the <i>Top SQL</i> sections; look for statements with the highest elapsed time.  You will see some of these statements performing a large number of buffer gets (logical reads) per execution</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   10g+: Tune the query using the SQL Tuning Advisor</i></b></p>    <br><p class="detailTblTxt3">Oracle's SQL Tuning Advisor can help tune specific SQL statements quickly and easily if you are licensed to use the Enterprise Manager Tuning Pack.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; the SQL Tuning Advisor is easy to use and requires little user effort to tune a statement.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">The tuning action will generally be to create a statement profile.  The profile affects only a single statement.  Other recommendations may have wide ranging effects and should be tested thoroughly.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=262687.1 ">How to use the Sql Tuning Advisor</a></p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_tune.htm%23PFGRF028">Automatic SQL Tuning </a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14196%2Fmontune003.htm%23sthref784">Using Advisors to Optimize Database Performance</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_tune.htm%23sthref1144">Using SQL Tuning Advisor with Oracle Enterprise Manager</a></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fappdev.102%2Fb14258%2Fd_sqltun.htm%23sthref7584">SQL Tuning Advisor Subprograms </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/sql_tune.htm#CHDBIGDF">Using SQL Tuning Advisor APIs </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=271196.1">Automatic SQL Tuning - SQL Profiles</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Tune the query using the Performance Diagnostic Guide's Query Tuning Section</i></b></p>    <br><p class="detailTblTxt3">This is a query tuning problem that needs to be addressed in detail using the information in the Performance Diagnostic Guide's Query Tuning section.<br></p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; manual query tuning can be easy or difficult depending on the query and application.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; generally query tuning actions will affect only a single query.  Of course this will depend on the ultimate actions taken and some of them can affect an entire instance.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Click on the Query Tuning tab, then skip to the Determine a Cause > Data Collection step.<br>
<br>
Other helpful documents are listed below:</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_1016.htm%23PFGRF006">SQL Tuning Overview </a></p>    <br><p class="detailTblTxt3"> How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=233112.1">Diagnosing Query Tuning Problems</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=67522.1">Diagnosing Why a Query is Not Using an Index</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Hot blocks due to concurrently accessing a popular block</i></b></p>    <br><p class="detailTblTxt3">Hot blocks refer to block headers that are accessed very frequently (via logical reads) and this frequent access leads to contention on the cache buffers chains latch.<br>
<br>
This particular kind of hot block contention occurs when a query only reads a few blocks but this same query (or other ones that access the same blocks) are executed by many sessions at the same time.  The problem can't be solved by tuning the query because the execution plan is already efficient.  Either the query must be executed less often or the rows need to be spread out among more blocks.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><br>
TKProf:
<ul class="detailTblTxt3">
<li>Use the report sorted by elapsed fetch time</li>
<li>Look at the top statements and determine if they are seeing latch contention on the cache buffers chains latch.</li>
<li>Check if these statements only access a few blocks per execution ([query + current] / executions is low)</li>
</ul>
AWR or statspack reports:<br>
<ul class="detailTblTxt3">
<li>10g: waits on <i>latch: cache buffers chains</i></li>
<li>Pre-10g: waits on <i>latch free</i> and highest latch time or sleeps is on the <i>cache buffers chains</i> latch</li>
<li>Examine the <i>Top SQL</i> sections; look for statements with the highest elapsed time.  You will see some of these statements performing a small number of buffer gets (logical reads) per execution</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Spread out the rows over more blocks</i></b></p>    <br><p class="detailTblTxt3">Alter (or even rebuild) tables listed above to use a higher <i>PCTFREE</i> setting.  This will reduce the number of rows per block and hopefully, spread out contention for the blocks (at the expense of wasting space).
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; will require rebuilding a table.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; some queries may run slower because they will need to access more blocks to obtain the same number of rows.  Review how this table is accessed before implementing this solution.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Rows can be spread out by rebuilding the table using a larger value for PCTFREE.  Another way to spread rows out is to make use of the table option, <i> MINIMIZE RECORDS_PER_BLOCK</i> as follows:
<ol>
<li>Export the table</li>
<li>Truncate the table</li>
<li>Insert the desired number of rows per block.  E.g., if you only want 10 rows per block, insert just 10 rows.
<li>Alter the table to set <i>minimize records_per_block</i> setting. E.g.,
<pre>Alter table stock_prices minimize records_per_block;</pre></li>
<li>Delete the rows you inserted in step 3</i>
<li>Import the table</li>
</ol>
<br>
See the documents below for additional information.<br></p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/logical.htm#sthref348">The PCTFREE Parameter</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14200/statements_3001.htm#sthref5130">SQL Ref: Minimize records_per_block Clause</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Use reverse key indexes</i></b></p>    <br><p class="detailTblTxt3">Index leaf blocks may see contention due to key values that are increasing steadily (using a sequence) and concentrated in a leaf block on the "right-hand side" of the index.  Look at using <i>reverse key indexes</i> (if range scans aren't commonly used against the segment).<br>
<br>
A reverse key index will spread keys around evenly and avoid creating these hot leaf blocks.  However, the reverse key index will not be usable for index range scans, so care must be taken to ensure that access is normally done via equality predicates.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; will require rebuilding an index.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; some queries may run much slower because they will not be able to use an index for range scans and may resort to full table scans.  Determine if range scans are needed before implementing this.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/schema.htm#sthref998">Concepts: Reverse Key Indexes</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14200/statements_5010.htm#i2062403">SQL Reference: Create index syntax:</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/design.htm#sthref152">Performance Tuning Guide: Reverse Key Indexes</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Use hash partitioning to spread values across blocks</i></b></p>    <br><p class="detailTblTxt3">Hash partitioning will distribute rows evenly for a given column in a table.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; requires recreating the table and importing rows into it.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; may involve some downtime.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See documents below:</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/partconc.htm#i462869">Concepts: Overview of Hash Partitioning</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14231/partiti.htm#i1006255">When to Use Hash Partitioning</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14200/statements_7002.htm#i2219018">SQL Ref: Create Table, hash partitioning clause</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14200/statements_7002.htm#i2118202">Creating a Hash-Partitioned Table: Example</a></p>    <br><p class="detailTblTxt3">Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=125314.1">Boosting Performance by Hash and Composite Partitions</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Bug 4742607 - "cache buffer chains" latch contention from concurrent index range scans</i></b></p>    <br><p class="detailTblTxt3">Concurrent index range-scan initializations can lead to contention on the "cache buffers chains" hash latches due to latch upgrades.
</p><br>	<p class="detailTblTxt3">Bug 4742607 - "cache buffer chains" latch contention from concurrent index range scans</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><br>
TKProf:
<ul class="detailTblTxt3">
<li>Use the report sorted by elapsed fetch time</li>
<li>Look at the top statements and determine if they are seeing latch contention on the cache buffers chains latch.</li>
<li>The execution plans for these statements make use of index scans</li>
</ul>
AWR or statspack reports:<br>
<ul class="detailTblTxt3">
<li>10g: waits on <i>latch: cache buffers chains</i></li>
<li>Pre-10g: waits on <i>latch free</i> and highest latch time or sleeps is on the <i>cache buffers chains</i> latch</li>
<li>In the <i>Instance Statistics</i>, you will see high "shared hash latch upgrade" statistic counts</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Bug 4742607</i></b></p>    <br><p class="detailTblTxt3">Bug 4742607
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; requires a patch.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; this patch has been well proven.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Additional bug information:</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=BUG&id=4742607">Bug 4742607</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>Wait: latch: library cache<br>
Wait: latch: shared pool <br>
Wait: latch: row cache objects</b></i></p>    <br><p class="detailTblTxt3"><b>Library Cache Latch</b><br>
The library cache latches serialize access to the objects in the library cache. Every time that a SQL statement, a PL/SQL block or a stored object (Procedures, packages, functions, triggers) is parsed or executed, this latch is acquired to ensure the object doesn't change while it is locked in the library cache.<br>
<br>
<b>Shared Pool Latch</b><br>
Free memory in the shared pool is tracked on a number of freelists. The <i>shared pool latch</i> is typically acquired when a chunk of memory is requested, and lasts while scanning the relevant freelists for a chunk of the required size.  The latch may also be acquired for other operations such as coalescing memory or releasing memory back to a freelist.<br>
<br>
Wait class: Concurrency, typically foreground</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>TKProf: 
<ul class="detailTblTxt3">
<li>Overall summary for non-recursive and recursive statements shows significant amount of time for <i>latch:</i>  or <i>latch free</i> waits.</li>
<li>The <i>library cache</i> or <i>shared pool</i> latch is a significant part of the total waits</li>
</ul>
</li>
<br>
<li>AWR or statspack: 
<ul class="detailTblTxt3">
<li>10g or higher: <i>latch: library cache</i> waits is among the top timed events</li>
<li>Prior to 10g:  <i>latch free</i> waits is among the top timed events and the <i>library cache</i> or <i>shared pool</i> latch is among the more prominent latches (high wait times or sleeps)</li>
</ul></li>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Unshared SQL Due to Literals</i></b></p>    <br><p class="detailTblTxt3">SQL statements are using literal values where a bind value could have been used.  The literal values cause the statement to be unshared and will force a hard parse.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><br>
TKProf :
<ul class="detailTblTxt3">
<li>Use the report sorted by elapsed parse time</li>
<li>Look at the top statements and determine if they are being hard parsed; these will have "Misses in the library cache" equal or close to the total number of parses</li>
<li>Examine the statements that are being hard parsed and look for the presence of literal values.</li></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Rewrite the SQL to use bind values</i></b></p>    <br><p class="detailTblTxt3">Rewriting the SQL to use bind values will allow the statement to be reused when specific values in the statement change but the overall statement is the same.  This is the best way to promote sharing of SQL statements in the library cache.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium or high effort; rewriting statements requires a change to the application but the change is rather trivial.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; the use of bind values could lead to worse execution plans for some statements.  The statements modified to use binds values should be thoroughly tested to avoid regressing the statement's performance.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Troubleshooting</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=296377.1">Handling and resolving unshared cursors/large version_counts</a></p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#sthref551">7.3.1.3 SQL Sharing Criteria</a></p>    <br><p class="detailTblTxt3">Searches</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/ranked?word=bind+variables&partno=b14407">Pro*C/C++ Precompiler Programmer's Guide</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/ranked?word=bind+variables&partno=b14211">Performance Tuning Guide</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Use the CURSOR_SHARING initialization parameter</i></b></p>    <br><p class="detailTblTxt3">The CURSOR_SHARING parameter will substitute literal values with bind values in a statement automatically.  The settings for this parameter are:
<ul class="detailTblTxt3">
<li><i>EXACT</i>: Leave the statement as it was written with literals (default value)</li>
<li><i>FORCE</i>: Substitute all literals with binds (as much as possible)</li>
<li><i>SIMILAR</i>: Substitute literals with binds only if the query's execution plan won't change (i.e., safe literal replacement)</li>
</ul>
In general, most OLTP apps that use equality predicates will see little change to their execution plans, but the effects of these parameters should be tested in your application.<br>
<br>
These parameters can be set at the session level to further contain their effects - this is the preferred way to use them to minimize widespread changes.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; an init.ora / spfile change.  In the worst case it may require a LOGON trigger to set it for a session.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; the use of bind values could lead to worse execution plans for some statements.  Risk can be mitigated by using SIMILAR instead of FORCE but this may not make enough statements shareable.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams035.htm#sthref154">Reference: CURSOR_SHARING Parameter</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=94036.1">Init.ora Parameter "CURSOR_SHARING" Reference Note</a></p>    <br><p class="detailTblTxt3">Troubleshooting</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#i31512">CURSOR_SHARING for Existing Applications</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=296377.1">Handling and resolving unshared cursors/large version_counts</a></p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#sthref551">7.3.1.3 SQL Sharing Criteria</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Shared SQL being aged out</i></b></p>    <br><p class="detailTblTxt3">The shared pool is too small and is causing many statements that could be shared to age out of the library cache and later reloaded.  Each reload requires a hard parse and impacts the CPU and latches.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><br>
TKProf:
<ul class="detailTblTxt3">
<li>Use the report sorted by elapsed parse time</li>
<li>Look at the top statements and determine if they are being hard parsed; these will have "Misses in the library cache" equal or close to the total number of parses</li>
<li>Examine the statements that are being hard parsed and look for the ABSENCE of literal values, this means these statements could have been shared but weren't (this is not entirely reliable since you could have statements that use binds but will not be executed again).</li>
</ul>
AWR or statspack reports:<br>
<ul class="detailTblTxt3">
<li>Library Cache statistics section shows that <i>reloads</i> are high (usually several thousand per hour) and little or no invalidations are seen </li>
<li>The "% SQL with executions>1" is over 60%, meaning statements are being shared</li>
<u/ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Increase the size of the shared pool</i></b></p>    <br><p class="detailTblTxt3">Increasing the shared pool size will reduce the need to age out statements that could be shared.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; an init.ora / spfile change. </p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; increasing the size of the shared pool is not risky unless:
<ul class="detailTblTxt3">
<li>There are many unshared statements due to literals
<br>
For more details, see: <a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a>
</li>
<li>The machine doesn't have enough physical memory and starts swapping
<br>
<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=17094.1">TECH: Unix Virtual Memory, Paging & Swapping explained</a></li>
</ul>
Verify the above points before changing the size of the shared pool.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14231/create.htm#BABDBIGB">Admin: Using Manual Shared Memory Management, see Specifying the Shared Pool Size</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams196.htm#sthref804">Reference: SHARED_POOL_SIZE Parameter</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams196.htm#CHDGGAIB">Reference: SHARED_POOL_SIZE and Automatic Storage Management</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   10g+: Use the <i>Automatic Shared Memory Manager (ASMM)</i> to adjust the shared pool size</i></b></p>    <br><p class="detailTblTxt3">ASMM will automate memory sizing for the shared pool to ensure an optimal amount is available. You will need to set a reasonable value for SGA_MAX_SIZE and SGA_TARGET to enable ASMM.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; an init.ora / spfile change. </p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; ASMM will ensure sufficient memory is available.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm">Concepts: Memory Architecture</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm#CNCPT810">Concepts: Automatic Shared Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14231/create.htm#BABGCBHI">Admin: Using Automatic Shared Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#i30970">Performance Tuning: Configuring and Using the Shared Pool and Large Pool</a></p>    <br><p class="detailTblTxt3">Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=257643.1">Oracle Database 10g Automated SGA Memory Tuning</a></p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=295626.1">How To Use Automatic Shared Memory Management (ASMM) In Oracle10g</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=270935.1">Shared pool sizing in 10g</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Keep ("pin") frequently used large PL/SQL and cursor objects in the shared pool</i></b></p>    <br><p class="detailTblTxt3">Use the DBMS_SHARED_POOL.KEEP() procedure to mark large, frequently used PL/SQL and SQL objects in the shared pool and avoid them being aged out.  This will reduce reloads and fragmentation since the object doesn't need to keep reentering the shared pool over and over.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; need to identify which objects should be kept and then run a procedure to keep them.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; if you aren't careful in keeping these objects, you may keep too many of them and cause ORA-4031 errors.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm">Concepts: Memory Architecture</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#sthref647">Performance Tuning: Keeping Large Objects to Prevent Aging</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/appdev.102/b14258/d_shpool.htm#sthref7134">PL/SQL DBMS_SHARED_POOL</a></p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=1012047.6">How To Pin Objects in Your Shared Pool</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=101627.1">How to Automate Pinning Objects in Shared Pool at Database Startup</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=305529.1">How To Use SYS.DBMS_SHARED_POOL In a PL/SQL Stored procedure To Pin objects in Oracle's Shared Pool</a></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=61760.1">Using the Oracle DBMS_SHARED_POOL Package</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Library cache object Invalidations</i></b></p>    <br><p class="detailTblTxt3">When objects (like tables or views) are altered via DDL or collecting statistics, the cursors that depend on them are invalidated.  This will cause the cursor to be hard parsed when it is executed again and will impact CPU and latches.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><br>
TKProf:
<ul class="detailTblTxt3">
<li>Use the report sorted by elapsed parse time</li>
<li>Look at the top statements and determine if they are being hard parsed; these will have "Misses in the library cache" equal or close to the total number of parses</li>
<li>Examine the statements that are being hard parsed and look for the ABSENCE of literal values, this means these statements could have been shared but weren't (this is not entirely reliable since you could have statements that use binds but will not be executed again).</li>
</ul>
AWR or statspack reports:<br>
<ul class="detailTblTxt3">
<li>Library Cache statistics section shows that <i>reloads</i> are high (usually several thousand per hour) and invalidations are high</li>
<li>The "% SQL with executions>1" is over 60%, meaning statements are being shared</li>
<li>Check the <i>Dictionary Statistics</i> section of the report and look for non-zero values in the <i>Modification Requests</i> column, meaning that DDL occurred on some objects.</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Do not perform DDL operations during busy periods</i></b></p>    <br><p class="detailTblTxt3">DDL will often cause library cache objects to be invalidated and this could cascade to many different dependent objects like cursors.  Invalidations have a large impact on the library cache, shared pool, row cache, and CPU since they will likely require many hard parses to occur at the same time.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; defer the DDL to a quiet time.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; may involve some downtime.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Not Applicable.  Simply schedule DDL during maintenance or low activity periods.</p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Do not collect optimizer statistics during busy periods</i></b></p>    <br><p class="detailTblTxt3">Collecting statistics (using ANALYZE or DBMS_STATS) will cause library cache objects to be invalidated and this could cascade to many different dependent objects like cursors.  Invalidations have a large impact on the library cache, shared pool, row cache, and CPU since they will likely require many hard parses to occur at the same time.<br>
<br>
For some database versions, the DBMS_STATS procedure allows give you the option of not invalidating objects (see the "no_invalidate" option).
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; defer the gathering of statistics to a quiet time.  In 10g, you have a choice of whether or not to invalidate objects after gathering statistics.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; defer the gathering of statistics to a quiet time.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">The document links below shows how to specify statistics collection without causing invalidations.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/appdev.102/b14258/d_stats.htm#sthref8129">GATHER_TABLE_STATS Procedure, see the "no_invalidate" option</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Do not perform TRUNCATE operations during busy periods</i></b></p>    <br><p class="detailTblTxt3">See the document below:
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; defer the DDL to a quiet time.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; may involve some downtime.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See documents below:</p>    <br><p class="detailTblTxt3">Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=123214.1 ">Truncate - Causes Invalidations in the LIBRARY CACHE</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Excessive soft parsing</i></b></p>    <br><p class="detailTblTxt3">Soft parsing occurs when Oracle looks in the library cache for a cursor or object it hopes to share.  If it finds the cursor and it is sharable (same optimizer mode, etc), then it will consider this as a soft parse.<br>
Soft parsing is more efficient than hard parsing but still impacts latches to a degree.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><br>
TKProf:
<ul class="detailTblTxt3">
<li>Use the report sorted by elapsed parse time</li>
<li>Look at the top statements and determine if they are being soft parsed; these will have "Misses in the library cache" close to zero</li>
</ul>
AWR or statspack reports:<br>
<ul class="detailTblTxt3">
<li>The <i>Instance Efficiency Percentages</i> will report high values (usually over 60%) for <i>Soft Parse %</i></li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Avoid unnecessary soft parsing in the application</i></b></p>    <br><p class="detailTblTxt3">Application code will sometimes needlessly force a soft parse when it could have simply used an open cursor handle and re-executed the cursor with new bind values.  Look through the application code and determine whether the soft parse is really needed.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; will require coordination with developers to review and change code.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; the change should be very localized.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Ensure your application doesn't perform unnecessary soft parsing.  Typically this occurs when a parse statement is placed in the middle of a loop that iterates over a set of rows.  Consider this pseudo-pseudo-code:
<pre>
list_of_rows = Retrieve some rows()
FOR each row in list_of_rows LOOP
	cursor_handle = PARSE(sql)  # parse for each loop iteration
	EXECUTE(cursor_handle, bind1, bind2)
	CLOSE(cursor_handle)
END LOOP
</pre>
<br>
To avoid the repeated soft parses:<br>
<pre>
list_of_rows = Retrieve some rows()
cursor_handle = PARSE(sql)  # parse once
FOR each row in list_of_rows LOOP
	EXECUTE(cursor_handle, bind1, bind2)
END LOOP
CLOSE(cursor_handle)
</pre>
It's also a good idea to make sure the application leaves cursors open and doesn't re-open them unnecessarily (see references below for best-practice information on this and compensating this using the SESSION_CACHED_CURSORS parameter).</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#sthref552">Performance Tuning Guide: Using the Shared Pool Effectively</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#i34864">Performance Tuning Guide: Cursor Access and Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/appdev.102/b14354/appc.htm#BABCGGAE">Programmer's Guide to the Oracle Precompilers: Eliminating Unnecessary Parsing</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/appdev.102/b14407/pc_actun.htm#i1650">Pro*C/C++ Programmer's Guide: Eliminating Unnecessary Parsing</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/java.102/b14355/stmtcach.htm">JDBC Developer's Guide and Reference : Statement Caching</a></p>    <br><p class="detailTblTxt3"> Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=32895.1">SQL Parsing Flow Diagram</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=34433.1">How to work out how many of the parse count are hard/soft?</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Ensure <i>session cached cursors</i> are used</i></b></p>    <br><p class="detailTblTxt3">The <i>session cached cursors</i> parameter will allow Oracle to maintain a small cache of handles to cursors in the library cache.  During a parse, the cache will be examined and if a match is found, the soft parse will be avoided.<br>
<br>
Review the value of this parameter and consider increasing it (although it should be increased slowly and not above 200 to avoid locking too many statements in the library cache).</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; a parameter change</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; the change can be localized to a session.  Not risky as long as the values is not increased over 200.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#sthref635">Performance Tuning Guide: Caching Session Cursors</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams188.htm#sthref779">Reference: SESSION_CACHED_CURSORS parameter</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#sthref552">Performance Tuning Guide: Using the Shared Pool Effectively</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#i34864">Performance Tuning Guide: Cursor Access and Management</a></p>    <br><p class="detailTblTxt3">Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool, see SESSION_CACHED_CURSORS parameter</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=30804.1">Reference Note for Init.Ora Parameter "SESSION_CACHED_CURSORS"</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=208918.1">SCRIPT - to Gauge the Impact of the SESSION_CACHED_CURSORS Parameter</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Excessive Amount of Child Cursors </i></b></p>    <br><p class="detailTblTxt3">A large number of child cursors are being created for some SQL statements.  This activity is causing contention among various sessions that are creating child cursors concurrently or with other sessions that also need similar resources (latches and mutexes).</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">AWR / Statspack reports; look in the "SQL ordered by Version Count" section.  If there are any SQL statements with more than 500 versions, then this problem is likely to be occurring.  Alternatively, you can query V$SQLAREA to look for any SQL with version_count greater than 500.<br>
<br>
Query V$SQL_SHARED_CURSOR to see the reasons why SQL isn't being shared.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Inappropriate use of parameter CURSOR_SHARING set to SIMILAR</i></b></p>    <br><p class="detailTblTxt3">The difference between SIMILAR and FORCE is that SIMILAR forces similar statements to share the SQL area without deteriorating execution plans. Setting CURSOR_SHARING to FORCE forces similar statements to share the SQL area potentially deteriorating execution plans.<br>
<br>
One of the cursor sharing criteria when literal replacement is enabled with CURSOR_SHARING as SIMILAR is that bind value should match initial bind value if the execution plan is going to change depending on the value of the literal. The reason for this is we might get a sub-optimal plan if we use the same cursor. This would typically happen when, depending on the value of the literal, the optimizer is going to chose a different plan. For example, if we have a predicate with " > ", then each execution with different bind values would result in a new child cursor because that would ensure that the plan didn't change (a range predicate influences cost and plans), if this was an equality predicate, we would always share the same child cursor.  <br>
<br>
Avoiding the use of CURSOR_SHARING set to SIMILAR entails either rewriting the SQL in the application so that it uses bind values and still gets a good plan (hints, profiles, or outlines may be needed), or using CURSOR_SHARING set to FORCE which will avoid generating child cursors but can cause plans to be sub-optimal.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Depends on the change made.  Changing the CURSOR_SHARING initialization parameter to FORCE is easy; changing the application to use binds will take more effort.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Depends on the change made.  Changing the CURSOR_SHARING initialization parameter to FORCE is risky if done at the database instance level, but less risky at the session level.  Changing the application SQL is not as risky since only the single statement is affected.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See documents below:</p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams035.htm#i1125803">CURSOR_SHARING Parameter</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=94036.1">Init.ora Parameter "CURSOR_SHARING" Reference Note</a></p>    <br><p class="detailTblTxt3">Troubleshooting</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=296377.1">Handling and resolving unshared cursors/large version_counts</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate the possible reasons for excessive amounts of child cursors.</i></b></p>    <br><p class="detailTblTxt3">Child cursors are created by Oracle when it is unable to share an existing child cursor.  There are many reasons why a child cursor may not be shared, so the view "V$SQL_SHARED_CURSOR" must be consulted to find the specific reasons affecting a particular cursor.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">The investigation is generally simple as it is just a query.  The ultimate solution may be more difficult.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Just a query or script needs to be run which queries dynamic views.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10821/memory.htm#PFGRF94297">Shared Cursors</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db112/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FE11882_01%2Fserver.112%2Fe10820%2Fdynviews_3055.htm%23REFRN30254">V$SQL_SHARED_CURSOR reference</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=438755.1">Script: Formated V$SQL_SHARED_CURSOR Report by SQLID or Hash Value</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=3461251.8">V$SQL_SHARED_CURSOR shows all N with CURSOR_SHARING</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Contention caused by changing object privileges</i></b></p>    <br><p class="detailTblTxt3">Changing object privilges causes contention in the library cache since the object will need to be invalidated and reparsed with the new privileges.  Any type of privilege change using GRANT or REVOKE on an object may cause dependent objects to become invalidated too thereby amplifying the effect of the change and causing contention if the system is busy.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">This cause is likely if there are:<br>
	<ul>
	<li>waits on the library cache, shared pool latches, mutexes, and/or library cache pins</li>
	<li>High invalidations</li>
	<li>DDL and other causes have been eliminated</li>
	</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Avoid making grants during periods of high activity or concurrency</i></b></p>    <br><p class="detailTblTxt3">Schedule the privilege changes when the system is quiet to avoid impacting users.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Depends on the availability requirements of the system; no extra effort is involved - just rescheduling.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; some contention is possible if the time period was not quiet enough</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">N/A</p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Library cache issue; Deeper investigation needed. 
</i></b></p>    <br><p class="detailTblTxt3">If none of the other causes are likely, then additional diagnostics are needed for this problem.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">There is insufficient information to suggest a cause.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Additional Library Cache Diagnostics Needed</i></b></p>    <br><p class="detailTblTxt3">This solution describes additional diagnostics that can be obtained to help solve problems with the library cache, dictionary cache, or general parsing problems.  Obtaining these diagnostics ahead of time can help expedite your SR with Oracle.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">These diagnostics often involve procedures that may not be well known and require special care.  We recommend they be implemented by experienced DBAs only.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblHighBG">      <p align="center"><b>H</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Some of the procedures and commands in this note have the potential to introduce severe performance degradation into your system.  They should be used with care and only in cases where your system is already experiencing serious performance problems and these diagnostics are required to proceed further.<br>
<br>
<b>Do not proceed with these steps until you are thoroughly familiar with them and have practiced them on a test system.  If you have any concerns, please stop and file an SR with Oracle.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Please collect the trace files that will be produced from the following steps and send them to Oracle once you have an SR number.  Do the following steps:
<pre>
* Open 3 separate terminal sessions

* Log onto the database as SYSDBA if possible; if you aren't able to log on, then use the "PRELIM" option as follows:
	$ sqlplus -prelim "/ as sysdba"

* Use ORADEBUG to allow the trace files to be any size (repeat in all sessions):
	$ oradebug setmypid
	$ oradebug unlimit
	
* In one session, obtain two sets of hanganalyze reports :

	$ oradebug hanganalyze 3
	...wait 1 minute ...
	$ oradebug hanganalyze 3
	$ oradebug tracefile_name  <-- this will print out the name of the trace file
		
	NOTE: There is a problem with this in some versions!

* Examine the hanganalyze trace file and look for the section that says: "Dumping call stack..." 
and "Dumping detailed process information..."; note the ospids of the files dumped and be sure to send them to Oracle

If there is still time to collect more diagnostics, then collect the following:
	
* In another session, obtain two sets of systemstate dumps :
	$ oradebug dump systemstate 266
	...wait 1 minute ...
	$ oradebug dump systemstate 266
	$ oradebug tracefile_name  <-- this will print out the name of the trace file	

	NOTE: level 266 provides a lot of information but may also take a long time (more than 1/2 hour) in some 
environments.  If the dump needs to be completed as quickly as possible, a reasonable amount of data may be 
collected at level 258 (however, sometimes this may not be enough data to determine a root cause).
	
If there is still time to collect more diagnostics, then collect the following:	
	
* In a third session, obtain a rowcache dump
	$ oradebug dump ROW_CACHE 11
	$ oradebug tracefile_name  <-- this will print out the name of the trace file	
	
* In one of the sessions, obtain ASH reports:
	- for period lasting from the time before through the time after the problem ended. If the problem never ended, 
           then please select a 1 hour period.
	- for a 15 minute period just before the problem
	- for a 15 minute period during the problem
	- for a 15 minute period just after the problem
	
	- The ASH reports may be obtained by running $ORACLE_HOME/rdbms/admin/ashrpt.sql
		- choose the HTML output format
		- the output will be found in the current working directory where you started SQLPlus
	
* Look in the user and background dump destinations for the trace files

* Be prepared to upload these to Oracle Support
	- large files should be compressed
	- if the files are very large, you will be instructed by the engineer to upload the files to an FTP site
	- please inform the engineer that you have collected this data
	</pre>
	</p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>wait: latch free
 </b></i></p>    <br><p class="detailTblTxt3">The <i>latch free</i> wait event is an umbrella event that rolls up all latch wait time that has not otherwise been accounted for separately (like <i>latch: shared pool</i> and other latch wait events).</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3">AWR, Statspack, or TKProf shows a significant amount of time listed (10% or more)  in the "Timed Event" section as <i>latch free</i>.</p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Deeper investigation needed for <i>latch free</i> waits.</i></b></p>    <br><p class="detailTblTxt3"><i>latch free</i> waits may be caused by various latches that may not be well known.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">AWR, Statspack, or TKProf shows a significant amount of time listed (10% or more)  in the "Timed Event" section as <i>latch free</i>.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate Latch Free Waits</i></b></p>    <br><p class="detailTblTxt3">Since the <i>latch free</i> wait event covers various latches, one must find which latch or latches are most responsible for the wait and then find the reason for the wait.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Finding which latch is mostly responsible for the waits is easy, but determining how to address the wait can be difficult.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">The risk depends on which latch is impacted and what changes are needed to reduce contention on the latch.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below for information on <i>latch free</i> waits and how to determine the specific latch involved.  <br>
<br>
Typically, you will need to file a service request  for more help if you aren't able to adequately research the latch.</p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id= 34576.1">WAITEVENT: "latch free" Reference Note</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=413942.1">How to Identify Which Latch is Associated with a "latch free" wait</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>wait: latch: session allocation
 </b></i></p>    <br><p class="detailTblTxt3">This latch protects allocation of state objects related to session creation and deletion.  It is typically busy when many concurrent sessions (especially recursive ones) are being created and destroyed.</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3">AWR  shows the wait event, "latch: session allocation" in the "Top 5 Timed Events" section and it is more than 10% of total DBTime.</p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Additional Diagnostics Needed</i></b></p>    <br><p class="detailTblTxt3">Additional diagnostics and analysis are needed to find a solution.  </p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">There is insufficient information to suggest a specific cause.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Additional Diagnostics Needed</i></b></p>    <br><p class="detailTblTxt3">Additional diagnostics and analysis are needed to find a solution.  Please file a Service Request to obtain assistance.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Diagnostic efforts vary depending on the problem.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Risks involved in collecting diagnostics vary depending on the kind of diagnostics being obtained.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Please file an SR for more details on what should be done next.</p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p><br> </td> </tr> </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="7">Configuration</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt">Waits caused by inadequate configuration of database or instance resources (for example, undersized log file sizes, shared pool size).  Typical events:
<ul>
<li>free buffer waits</li>
<li>log buffer space</li>
<li>log file switch (archiving needed)</li>
<li>log file switch (checkpoint incomplete)</li>
<li>log file switch completion</li>
<li>write complete waits</li>
</ul>
<b>Facts Required for Analysis</b>:
<ul>
<li>TKProf, elapsed times for events (Overall Totals, recursive and non-recursive):
<ul>
<li>Total wait time for the event</li>
<li>Average wait for the event = total wait time / total waits</li>
</ul>
</li>
</ul>	</td>	</tr>	</table><br> <table width="100%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"> <tr><td width="100%" class="detailMainTxt"> <p><b>Note:</b> This list shows some common observations and causes but is not a complete list.  If you do not find a possible cause in this list, you can always open a service request with Oracle to investigate other possible causes.  Please see the section below called, "Open a Service Request with Oracle Support Services". </p> </td></tr> </table> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>wait: free buffer waits</b></i></p>    <br><p class="detailTblTxt3">This wait event indicates that a server process was unable to find a free buffer and has posted the database writer to make free buffers by writing out dirty buffers (buffers w/unwritten changes). Once DBWR finishes writing the dirty buffers to disk, they are free to be reused.</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>TKProf: 
<ul class="detailTblTxt3">
<li>Overall wait event summary for non-recursive and recursive statements shows significant amount of time for <i>free buffer waits</i> waits.</li>
</ul>
<br>
<li>AWR or statspack: 
<ul class="detailTblTxt3">
<li>Significant waits for <i>free buffer waits</i></li>
</ul>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Poor file write performance in some filesystems</i></b></p>    <br><p class="detailTblTxt3">Some filesystems have poor write performance (writes take too long) and is impacting DBwriter's ability to keep enough clean buffers in the buffer cache.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">AWR / Statspack:
<ul class="detailTblTxt3">
<li><i>free buffer waits</i></i>
<li>db file parallel write waits have an average wait time LARGER than several hundred milliseconds (DBwriter writes in batches so the rule of them is higher than 20mSec / write for DBWriter)</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate possible I/O performance problems</i></b></p>    <br><p class="detailTblTxt3">To investigate further you must:
<ul class="detailTblTxt3">
<li>Find out which file numbers are causing the highest average waits and then determine which filesystem contains the file</li>
<li>Determine why the filesystems are performing poorly.  Some common causes are:
<ul class="detailTblTxt3">
<li>"hot filesystems" - too many active files on the same filesystem exhausting the I/O bandwidth</li>
<li>hardware problem</li>
<li>In Parallel Execution (PX) is being used, determine if the I/O subsystem is saturated by having too many slaves in use.</li>
</ul>
</ul>
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; depends on the skill level of the system administrators.  Correcting a problem can involve major effort to move files to a new destination.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; hardware changes and structural database changes carry risk that may require a restore.  Backups should be taken and restoring procedures should be tested before attempting changes.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/iodesign.htm#g37279">I/O Configuration and Design</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/instance_tune.htm#sthref924">Wait Event: db file scattered read</a></p>    <br><p class="detailTblTxt3"> Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=223117.1">Tuning I/O-related waits</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Buffer cache is too small</i></b></p>    <br><p class="detailTblTxt3">If the buffer cache is too small and filled with hot blocks, then sessions will be starved for free buffers (clean, cold blocks) and will need to spend too much time looking for free buffers and/or posting DBWR to write dirty blocks and make them free.  


Increase the parameter DB_BLOCK_BUFFERS(Oracle8+) or DB_CACHE_SIZE (Oracle9+) and monitor the effect of the change.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">AWR / Statspack:
<ul class="detailTblTxt3">
<li><i>free buffer waits</i></i>
<li>DBWriter is not seeing a performance problem in writing the files.  Specifically, <i>db file parallel write</i> waits have an average wait time SMALLER than several hundred milliseconds (DBwriter writes in batches so the rule of them is higher than 20mSec / write for DBWriter</li>
<li>You may see high values (compared to a baseline) for statistics <i>write clones, hot blocks moved to the head of the LRU, </i>and <i>free buffers inspected</i></li>
</ul>

</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Manually Increase the size of the buffer cache using the <i>db cache size</i> parameter</i></b></p>    <br><p class="detailTblTxt3">Increase the size of the buffer cache and monitor the effects of the change.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; change an initialization parameter</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk. However, there must be sufficient memory on the machine to avoid memory shortage problems.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm#CNCPT007">Concepts: Oracle Memory Architecture</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fmemory.htm%23sthref485">Configuring and Using the Buffer Cache</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   10g+: Use automatic shared memory management (ASMM) </i></b></p>    <br><p class="detailTblTxt3">ASMM will seek to optimize the size of the buffer cache without human intervention.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; change an initialization parameter</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk. Be sure to set SGA_TARGET to a reasonable value.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm">Concepts: Memory Architecture</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm#CNCPT810">Concepts: Automatic Shared Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14231/create.htm#BABGCBHI">Admin: Using Automatic Shared Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#i30970">Performance Tuning: Configuring and Using the Shared Pool and Large Pool</a></p>    <br><p class="detailTblTxt3">Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=257643.1">Oracle Database 10g Automated SGA Memory Tuning</a></p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=295626.1">How To Use Automatic Shared Memory Management (ASMM) In Oracle10g</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=270935.1">Shared pool sizing in 10g</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   DBWriter is not using asynchronous I/O</i></b></p>    <br><p class="detailTblTxt3">The DBWriter will achieve optimal throughput when asynchronous I/O is available to it.  DBWriter may not be able to keep up with buffer demands if asynch I/O is not available.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">AWR / Statspack:
<ul class="detailTblTxt3">
<li><i>free buffer waits</i></i>
<li>DBWriter is seeing a performance problem in writing the files.  Specifically, <i>db file parallel write</i> waits have an average wait time LARGER than several hundred milliseconds (DBwriter writes in batches so the rule of them is higher than 20mSec / write for DBWriter</li>
<li>Asynchronous I/O is disabled via the initialization parameter <i>disk_asynch_io</i> or <i>filesystemio_options </i></li>
</ul>

</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Enable asynchronous I/O</i></b></p>    <br><p class="detailTblTxt3">Enable asynchronous I/O If the platform supports it.  This is preferred over adding multiple DBwriters or I/O slaves.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; initialization parameter change</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk. Ensure your platform supports it and is up-to-date on patches</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/instance_tune.htm#sthref1004">Performance Tuning Guide: Choosing Between Multiple DBWR Processes and I/O Slaves </a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/ch23_os.htm#sthref748">Performance Tuning Guide: Asynchronous I/O</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b15658/appa_aix.htm#sthref787 ">AIX: Using Asynchronous I/O</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b15658/appb_hpux.htm#i637036">HPUX: Using Asynchronous I/O</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b15658/appc_linux.htm#BABIIHEJ">Linux: Using Asynchronous I/O</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams061.htm#sthref246">Reference: DISK_ASYNCH_IO Parameter</a></p>    <br><p class="detailTblTxt3"> Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=237299.1">How To Check If Asynchronous I/O Is Working On Linux</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=225751.1">Asynchronous I/O (aio) on RedHat Advanced Server 2.1 and RedHat Enterprise Linux 3</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62172.1">Understanding and Tuning Buffer Cache and DBWR</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=91062.1">Database Writer and Buffer Management</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Use multiple DBwriters </i></b></p>    <br><p class="detailTblTxt3">Enable asynchronous I/O If the platform supports it.  However, if your platform doesn't support it, then adding multiple DBWriters can help divide the workload.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; initialization parameter change</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk. </p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/instance_tune.htm#sthref1004">Performance Tuning Guide: Choosing Between Multiple DBWR Processes and I/O Slaves </a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62172.1">Understanding and Tuning Buffer Cache and DBWR</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=91062.1">Database Writer and Buffer Management</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Additional Diagnostics Needed</i></b></p>    <br><p class="detailTblTxt3">Additional diagnostics and analysis are needed to find a solution.  </p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">There is insufficient information to suggest a specific cause.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Additional Diagnostics Needed</i></b></p>    <br><p class="detailTblTxt3">Additional diagnostics and analysis are needed to find a solution.  Please file a Service Request to obtain assistance.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Diagnostic efforts vary depending on the problem.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Risks involved in collecting diagnostics vary depending on the kind of diagnostics being obtained.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Please file an SR for more details on what should be done next.</p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   CPU Saturation is impacting DB Writer</i></b></p>    <br><p class="detailTblTxt3">DB Writer is unable to obtain sufficient CPU resources to clean buffers fast enough for foreground session demand.<br>
<br>
Oracle relies on background processes to complete vital tasks in asynchronously.  As long as the background processes are able to complete their tasks in a timely manner, then foreground sessions don't have to wait for resources to become available and aren't hindered by a background task.  However, if the system's CPUs are very busy and there is insufficient capacity to handle the load, then background processes will be unable to obtain CPU resources and will wait on the run queue.  This may cause cascading effects as certain tasks are not completed and foreground sessions will need to wait.<br>
<br>
A few examples are:<br>
<br>
<ul>
<li>
DBWR is unable to write dirty buffers fast enough (since it waits on the run queue) and foreground sessions wait for free buffers.</li>
<li>Archiver is unsable to complete archivelog writes and foregrounds are blocked from switching to the redolog</li>
<li>LCK0 process is unable to perform library cache load functions and foregrounds wait for library cache load locks</li>
</ul></p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">AWR or Statspack show waits for "free buffer waits" or "write complete waits" greater than 10% of overall DBTime and there is a CPU saturation problem on the host. </p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate the reasons for CPU saturation</i></b></p>    <br><p class="detailTblTxt3">See this guide's "Issue Identification > Analysis > Verify Oracle OS Resource Usage" section for more details.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Determine which processes are using most of the CPU on the machine.  They could be Oracle processes (including more than one instance) or non-Oracle processes.  If they are Oracle processes, then you should have detected this already in a previous step and investigated the reasons for Oracle's CPU consumption (of course, better late than never).  Otherwise, you will need to find out the reason for the non-Oracle CPU consumption (outside of our scope).
<br>
You can use various OS tools and Oracle EM to investigate this.<br>
<br>
Oracle recommends using the "OS Watcher" utility to capture OS diagnostics because it offers an easy way to capture data and report OS data for several platforms.<br>
<br>
There are also commands available in Unix flavors that can help.  For example, use the <i><b>top</b></i> utility or the <i><b>ps</b></i> command, ps -ef -o pid,pcpu,comm | sort -k 2 (this will give you a sorted list of processes using CPU - look at the 2nd column, "% CPU").<br>
<br>
See the documents below for additional details.</p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id= 224176.1">How to use OS commands to diagnose Database Performance issues?</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=164768.1">Diagnosing High CPU Utilization</a></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=301137.1">OS Watcher User Guide</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://st-doc.us.oracle.com/10/102/em.102/b31949/host_3rdparty_management.htm#sthref1533">Enterprise Manager: Host Performance page</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>wait:  log buffer space</b></i></p>    <br><p class="detailTblTxt3">This event occurs when server processes are writing redo records to the log buffer faster than LGWR can write them out; eventually, the log buffer fills up and the processes wait for free space.  After LGWR writes some buffers out, then those buffers may be reused by other processes.</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>TKProf: 
<ul class="detailTblTxt3">
<li>Overall wait event summary for non-recursive and recursive statements shows significant amount of time for <i>log buffer space</i> waits associated with DML statements.</li>
</ul>
<br>
<li>AWR or statspack: 
<ul class="detailTblTxt3">
<li>Significant waits for <i>log buffer space</i></li>
</ul>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   The log buffer is too small</i></b></p>    <br><p class="detailTblTxt3">If the log buffer is too small, then the demand for redolog buffer space will overtake the supply of buffers and cause these waits.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">AWR / Statspack:
<ul class="detailTblTxt3">
<li><i>log buffer space</i> waits</i>
<li>initialization parameter, <i>log buffer</i> is smaller than:<br>
statistic: redo size per sec * 600 (10 min worth of redo) </li>
<li>The average time for <i>log file parallel write</i> is less than 20mSec</li>
</ul>
</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Increase the size of the log buffer</i></b></p>    <br><p class="detailTblTxt3">Increase the parameter LOG_BUFFER to increase the redo log buffer size. Values of LOG_BUFFER larger than 32 MB (and even around 3 MB) will usually not have any effect (and will just waste memory). </p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; easy to change but requires the database to be restarted.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; larger size log buffers could waste memory but will not adversely affect performance (unless there is a memory shortage on the machine).</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm#sthref1320">Concepts: Redolog Buffer</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/process.htm#i7261">Concepts: Log Writer Process (LGWR)</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14237%2Finitparams108.htm%23REFRN10094">Reference: LOG_BUFFER parameter</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14237/waitevents003.htm#sthref4464">Reference: log buffer space wait event</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#i29756">Performance Tuning Guide: Configuring and Using the Redo Log Buffer</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/instance_tune.htm#sthref1042">Performance Tuning Guide: log buffer space wait event</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Logwriter is writing too slow</i></b></p>    <br><p class="detailTblTxt3">If the size of the log buffer is already large (more than 3 MB), speed up the LGWR background process write operations by ensuring that the I/O devices where the redolog files are stored are not suffering from I/O contention. </p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">AWR / Statspack:
<ul class="detailTblTxt3">
<li><i>log buffer space</i> waits</i>
<li>The average time for <i>log file parallel write</i> is MORE than 20mSec</li>
</ul>
<br>
OS disk performance data on the filesystems where redologs are placed show disk response times greater than 20mSec.</p>	  <br><p class="detailTblTxt3">Additional Information:</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm#sthref1320">Concepts: Redolog Buffer</a></p>	  <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/process.htm#i7261">Concepts: Log Writer Process (LGWR)</a></p>	  <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=34583.1">Wait Event "log file parallel write" Reference Note</a></p>	  <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=223117.1">Tuning I/O-related waits, see 'log file parallel write' wait event section</a></p>	  <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=147468.1">Checkpoint Tuning and Troubleshooting Guide</a></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate possible I/O performance problems</i></b></p>    <br><p class="detailTblTxt3">To investigate further you must:
<ul class="detailTblTxt3">
<li>Find out which file numbers are causing the highest average waits and then determine which filesystem contains the file</li>
<li>Determine why the filesystems are performing poorly.  Some common causes are:
<ul class="detailTblTxt3">
<li>"hot filesystems" - too many active files on the same filesystem exhausting the I/O bandwidth</li>
<li>hardware problem</li>
<li>In Parallel Execution (PX) is being used, determine if the I/O subsystem is saturated by having too many slaves in use.</li>
</ul>
</ul>
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; depends on the skill level of the system administrators.  Correcting a problem can involve major effort to move files to a new destination.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; hardware changes and structural database changes carry risk that may require a restore.  Backups should be taken and restoring procedures should be tested before attempting changes.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/iodesign.htm#g37279">I/O Configuration and Design</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/instance_tune.htm#sthref924">Wait Event: db file scattered read</a></p>    <br><p class="detailTblTxt3"> Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=223117.1">Tuning I/O-related waits</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   log buffer space: Deeper Investigation Needed
 </i></b></p>    <br><p class="detailTblTxt3">If none of the other causes are likely, then additional diagnostics are needed for this problem.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">There is insufficient information to suggest a cause.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate Redo log-related Performance Issues</i></b></p>    <br><p class="detailTblTxt3">Additional diagnostics and analysis are needed to find a solution.  Please review the following articles for more information or file a Service Request to obtain assistance.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Diagnostic efforts vary depending on the problem.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Risks involved in collecting diagnostics vary depending on the kind of diagnostics being obtained.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db112/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FE11882_01%2Fserver.112%2Fe10821%2Finstance_tune.htm%23PFGRF94532">Performance Tuning Guide > Instance Tuning Using Performance Views > Log file switch</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db112/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FE11882_01%2Fserver.112%2Fe10713%2Fphysical.htm%23CNCPT88997">Concepts > Online Redo Log Switches</a></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=147468.1">Checkpoint Tuning and Troubleshooting Guide </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id= 223117.1">Tuning I/O-related waits</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=45042.1">Archiver Best Practices</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=263652.1">Poor throughput while writing to redolog files</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   CPU Saturation is impacting Log Writer</i></b></p>    <br><p class="detailTblTxt3">Log Writer is unable to obtain sufficient CPU resources to write redo blocks fast enough for foreground session demand.<br>
<br>
Oracle relies on background processes to complete vital tasks in asynchronously.  As long as the background processes are able to complete their tasks in a timely manner, then foreground sessions don't have to wait for resources to become available and aren't hindered by a background task.  However, if the system's CPUs are very busy and there is insufficient capacity to handle the load, then background processes will be unable to obtain CPU resources and will wait on the run queue.  This may cause cascading effects as certain tasks are not completed and foreground sessions will need to wait.<br>
<br>
A few examples are:<br>
<br>
<ul>
<li>
DBWR is unable to write dirty buffers fast enough (since it waits on the run queue) and foreground sessions wait for free buffers.</li>
<li>Archiver is unsable to complete archivelog writes and foregrounds are blocked from switching to the redolog</li>
<li>LCK0 process is unable to perform library cache load functions and foregrounds wait for library cache load locks</li>
</ul></p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">AWR or Statspack show waits for "free buffer waits" or "write complete waits" greater than 10% of overall DBTime and there is a CPU saturation problem on the host. </p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate the reasons for CPU saturation</i></b></p>    <br><p class="detailTblTxt3">See this guide's "Issue Identification > Analysis > Verify Oracle OS Resource Usage" section for more details.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Determine which processes are using most of the CPU on the machine.  They could be Oracle processes (including more than one instance) or non-Oracle processes.  If they are Oracle processes, then you should have detected this already in a previous step and investigated the reasons for Oracle's CPU consumption (of course, better late than never).  Otherwise, you will need to find out the reason for the non-Oracle CPU consumption (outside of our scope).
<br>
You can use various OS tools and Oracle EM to investigate this.<br>
<br>
Oracle recommends using the "OS Watcher" utility to capture OS diagnostics because it offers an easy way to capture data and report OS data for several platforms.<br>
<br>
There are also commands available in Unix flavors that can help.  For example, use the <i><b>top</b></i> utility or the <i><b>ps</b></i> command, ps -ef -o pid,pcpu,comm | sort -k 2 (this will give you a sorted list of processes using CPU - look at the 2nd column, "% CPU").<br>
<br>
See the documents below for additional details.</p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id= 224176.1">How to use OS commands to diagnose Database Performance issues?</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=164768.1">Diagnosing High CPU Utilization</a></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=301137.1">OS Watcher User Guide</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://st-doc.us.oracle.com/10/102/em.102/b31949/host_3rdparty_management.htm#sthref1533">Enterprise Manager: Host Performance page</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>wait: read by other session</b></i></p>    <br><p class="detailTblTxt3">A session wants to pin a block that is currently being read from disk into the buffer cache by another session.</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3">TKProf or AWR
<ul class="detailTblTxt3">
<li>Significant waits for the <i>read by other session</i> event</li>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   SQL tuning required; no I/O problems</i></b></p>    <br><p class="detailTblTxt3">If performance time is dominated by this wait event, then SQL tuning may reduce the number of reads and speed up queries.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>Significant amount of the total time in TKProf is due to this wait event</li>
<li>The average time for this event (total time / wait count) should be less than 20 mSec to discount an I/O problem.</li></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   10g+: Tune the query using the SQL Tuning Advisor</i></b></p>    <br><p class="detailTblTxt3">Oracle's SQL Tuning Advisor can help tune specific SQL statements quickly and easily if you are licensed to use the Enterprise Manager Tuning Pack.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; the SQL Tuning Advisor is easy to use and requires little user effort to tune a statement.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">The tuning action will generally be to create a statement profile.  The profile affects only a single statement.  Other recommendations may have wide ranging effects and should be tested thoroughly.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=262687.1 ">How to use the Sql Tuning Advisor</a></p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_tune.htm%23PFGRF028">Automatic SQL Tuning </a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14196%2Fmontune003.htm%23sthref784">Using Advisors to Optimize Database Performance</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_tune.htm%23sthref1144">Using SQL Tuning Advisor with Oracle Enterprise Manager</a></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fappdev.102%2Fb14258%2Fd_sqltun.htm%23sthref7584">SQL Tuning Advisor Subprograms </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/sql_tune.htm#CHDBIGDF">Using SQL Tuning Advisor APIs </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=271196.1">Automatic SQL Tuning - SQL Profiles</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Tune the query using the Performance Diagnostic Guide's Query Tuning Section</i></b></p>    <br><p class="detailTblTxt3">This is a query tuning problem that needs to be addressed in detail using the information in the Performance Diagnostic Guide's Query Tuning section.<br></p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; manual query tuning can be easy or difficult depending on the query and application.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; generally query tuning actions will affect only a single query.  Of course this will depend on the ultimate actions taken and some of them can affect an entire instance.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Click on the Query Tuning tab, then skip to the Determine a Cause > Data Collection step.<br>
<br>
Other helpful documents are listed below:</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_1016.htm%23PFGRF006">SQL Tuning Overview </a></p>    <br><p class="detailTblTxt3"> How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=233112.1">Diagnosing Query Tuning Problems</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=67522.1">Diagnosing Why a Query is Not Using an Index</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   I/O performance problems</i></b></p>    <br><p class="detailTblTxt3">The average time for a an I/O is exceeds typical standards for I/O performance (less than 20 mSec).  </p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>Significant amount of the total time in TKProf is due to this wait event</li>
<li>The average time for this event (total time / wait count) is more than 20 mSec</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate possible I/O performance problems</i></b></p>    <br><p class="detailTblTxt3">To investigate further you must:
<ul class="detailTblTxt3">
<li>Find out which file numbers are causing the highest average waits and then determine which filesystem contains the file</li>
<li>Determine why the filesystems are performing poorly.  Some common causes are:
<ul class="detailTblTxt3">
<li>"hot filesystems" - too many active files on the same filesystem exhausting the I/O bandwidth</li>
<li>hardware problem</li>
<li>In Parallel Execution (PX) is being used, determine if the I/O subsystem is saturated by having too many slaves in use.</li>
</ul>
</ul>
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; depends on the skill level of the system administrators.  Correcting a problem can involve major effort to move files to a new destination.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; hardware changes and structural database changes carry risk that may require a restore.  Backups should be taken and restoring procedures should be tested before attempting changes.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/iodesign.htm#g37279">I/O Configuration and Design</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/instance_tune.htm#sthref924">Wait Event: db file scattered read</a></p>    <br><p class="detailTblTxt3"> Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=223117.1">Tuning I/O-related waits</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Buffer cache is too small</i></b></p>    <br><p class="detailTblTxt3">A small buffer cache will cause more physical reads or, for a RAC database, additional block transfers than would otherwise be required.
</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">TKProf: <br>
<ul class="detailTblTxt3">
<li>Significant waits on <db file sequential read</i> waits , and/or for RAC, <i>global cache CR request</i></li>
<li>SQL statements perform 10 or fewer logical reads (query + current) per row per table per execution, meaning that the statement is reasonably tuned (i.e., if a query joins 2 tables and returns 10 rows, one would expect less than 10*2*3 = 60 logical reads per execution</li>
<li>Full table scans (in a RAC database) are NOT seen in the execution plan for a statement that is waiting on this event</li>
<li>The application is an OLTP type of application and in the overall section of the report,  physical reads ("disk") are equal or close to the number of logical reads (query + current).
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Manually Increase the size of the buffer cache using the <i>db cache size</i> parameter</i></b></p>    <br><p class="detailTblTxt3">Increase the size of the buffer cache and monitor the effects of the change.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; change an initialization parameter</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk. However, there must be sufficient memory on the machine to avoid memory shortage problems.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm#CNCPT007">Concepts: Oracle Memory Architecture</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fmemory.htm%23sthref485">Configuring and Using the Buffer Cache</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   10g+: Use automatic shared memory management (ASMM) </i></b></p>    <br><p class="detailTblTxt3">ASMM will seek to optimize the size of the buffer cache without human intervention.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; change an initialization parameter</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk. Be sure to set SGA_TARGET to a reasonable value.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm">Concepts: Memory Architecture</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm#CNCPT810">Concepts: Automatic Shared Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14231/create.htm#BABGCBHI">Admin: Using Automatic Shared Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#i30970">Performance Tuning: Configuring and Using the Shared Pool and Large Pool</a></p>    <br><p class="detailTblTxt3">Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=257643.1">Oracle Database 10g Automated SGA Memory Tuning</a></p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=295626.1">How To Use Automatic Shared Memory Management (ASMM) In Oracle10g</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=270935.1">Shared pool sizing in 10g</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Additional Diagnostics Needed</i></b></p>    <br><p class="detailTblTxt3">Additional diagnostics and analysis are needed to find a solution.  </p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">There is insufficient information to suggest a specific cause.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Additional Diagnostics Needed</i></b></p>    <br><p class="detailTblTxt3">Additional diagnostics and analysis are needed to find a solution.  Please file a Service Request to obtain assistance.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Diagnostic efforts vary depending on the problem.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Risks involved in collecting diagnostics vary depending on the kind of diagnostics being obtained.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Please file an SR for more details on what should be done next.</p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>wait: log file switch (checkpoint incomplete)
 </b></i></p>    <br><p class="detailTblTxt3">LGWR is unable to switch into the next online redolog because DBWR has not completed its checkpoint for it. When this wait event occurs all commit requests wait for this event to complete.</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3">AWR  shows the wait event, "log file switch (checkpoint incomplete)
 " in the "Top 5 Timed Events" section and it is more than 10% of total DBTime.</p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Redo log files are too small</i></b></p>    <br><p class="detailTblTxt3">LGWR may wait for checkpoints to complete if the redo log files are too small.  This causes log switches to occur frequently and DBWR may not able to keep up with the number of blocks to checkpoint.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul>
<li>AWR or Statspack shows log file switch (checkpoint incomplete) waits</li>
<li>Alert.log shows checkpoints every 15 minutes or less</li>
<li>Redo log files smaller than 100 MB</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Review the redo log configuration </i></b></p>    <br><p class="detailTblTxt3">The cause suggests that either the redo log sizes or number of redo log files is not configured properly.  Further testing with larger redo log sizes or more redo logs is required.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Changing the redo log file configuration is relatively simple.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">There is some risk in changing the redo log configuration - the required change should be well understood and practiced.  Changes should not occur on a busy system.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=147468.1">Checkpoint Tuning and Troubleshooting Guide </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id= 223117.1">Tuning I/O-related waits</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Insuffiient number of redo log groups
 </i></b></p>    <br><p class="detailTblTxt3">An insufficient number of redo log files may lead to checkpoint incomplete waits as the DBWR simply doesn't have enough time to keep up with demand.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul>
<li>AWR or Statspack shows log file switch (checkpoint incomplete) waits</li>
<li>Alert.log shows checkpoints every 15 minutes or less</li>
<li>Redo log files are large; typcially larger than 100 MB</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Review the redo log configuration </i></b></p>    <br><p class="detailTblTxt3">The cause suggests that either the redo log sizes or number of redo log files is not configured properly.  Further testing with larger redo log sizes or more redo logs is required.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Changing the redo log file configuration is relatively simple.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">There is some risk in changing the redo log configuration - the required change should be well understood and practiced.  Changes should not occur on a busy system.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=147468.1">Checkpoint Tuning and Troubleshooting Guide </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id= 223117.1">Tuning I/O-related waits</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   log file switch (checkpoint incomplete): Deeper Investigation Needed
 </i></b></p>    <br><p class="detailTblTxt3">If none of the other causes are likely, then additional diagnostics are needed for this problem.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">There is insufficient information to suggest a cause.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate Redo log-related Performance Issues</i></b></p>    <br><p class="detailTblTxt3">Additional diagnostics and analysis are needed to find a solution.  Please review the following articles for more information or file a Service Request to obtain assistance.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Diagnostic efforts vary depending on the problem.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Risks involved in collecting diagnostics vary depending on the kind of diagnostics being obtained.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db112/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FE11882_01%2Fserver.112%2Fe10821%2Finstance_tune.htm%23PFGRF94532">Performance Tuning Guide > Instance Tuning Using Performance Views > Log file switch</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db112/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FE11882_01%2Fserver.112%2Fe10713%2Fphysical.htm%23CNCPT88997">Concepts > Online Redo Log Switches</a></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=147468.1">Checkpoint Tuning and Troubleshooting Guide </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id= 223117.1">Tuning I/O-related waits</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=45042.1">Archiver Best Practices</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=263652.1">Poor throughput while writing to redolog files</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   CPU Saturation is impacting Log Writer</i></b></p>    <br><p class="detailTblTxt3">Log Writer is unable to obtain sufficient CPU resources to write redo blocks fast enough for foreground session demand.<br>
<br>
Oracle relies on background processes to complete vital tasks in asynchronously.  As long as the background processes are able to complete their tasks in a timely manner, then foreground sessions don't have to wait for resources to become available and aren't hindered by a background task.  However, if the system's CPUs are very busy and there is insufficient capacity to handle the load, then background processes will be unable to obtain CPU resources and will wait on the run queue.  This may cause cascading effects as certain tasks are not completed and foreground sessions will need to wait.<br>
<br>
A few examples are:<br>
<br>
<ul>
<li>
DBWR is unable to write dirty buffers fast enough (since it waits on the run queue) and foreground sessions wait for free buffers.</li>
<li>Archiver is unsable to complete archivelog writes and foregrounds are blocked from switching to the redolog</li>
<li>LCK0 process is unable to perform library cache load functions and foregrounds wait for library cache load locks</li>
</ul></p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">AWR or Statspack show waits for "free buffer waits" or "write complete waits" greater than 10% of overall DBTime and there is a CPU saturation problem on the host. </p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate the reasons for CPU saturation</i></b></p>    <br><p class="detailTblTxt3">See this guide's "Issue Identification > Analysis > Verify Oracle OS Resource Usage" section for more details.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Determine which processes are using most of the CPU on the machine.  They could be Oracle processes (including more than one instance) or non-Oracle processes.  If they are Oracle processes, then you should have detected this already in a previous step and investigated the reasons for Oracle's CPU consumption (of course, better late than never).  Otherwise, you will need to find out the reason for the non-Oracle CPU consumption (outside of our scope).
<br>
You can use various OS tools and Oracle EM to investigate this.<br>
<br>
Oracle recommends using the "OS Watcher" utility to capture OS diagnostics because it offers an easy way to capture data and report OS data for several platforms.<br>
<br>
There are also commands available in Unix flavors that can help.  For example, use the <i><b>top</b></i> utility or the <i><b>ps</b></i> command, ps -ef -o pid,pcpu,comm | sort -k 2 (this will give you a sorted list of processes using CPU - look at the 2nd column, "% CPU").<br>
<br>
See the documents below for additional details.</p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id= 224176.1">How to use OS commands to diagnose Database Performance issues?</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=164768.1">Diagnosing High CPU Utilization</a></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=301137.1">OS Watcher User Guide</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://st-doc.us.oracle.com/10/102/em.102/b31949/host_3rdparty_management.htm#sthref1533">Enterprise Manager: Host Performance page</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>wait: log file switch (archiving needed)
 </b></i></p>    <br><p class="detailTblTxt3">Waiting for a log switch because the log that the LGWR will be switching into has not been archived yet. Indicates a lack of archiver processes (not started), slow archivers, or archive write failure.</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3">AWR  shows the wait event, "log file switch (archiving needed)
 " in the "Top 5 Timed Events" section and it is more than 10% of total DBTime.</p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   log file switch (archiving needed): Deeper Investigation Needed
 </i></b></p>    <br><p class="detailTblTxt3">If none of the other causes are likely, then additional diagnostics are needed for this problem.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">There is insufficient information to suggest a cause.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate Redo log-related Performance Issues</i></b></p>    <br><p class="detailTblTxt3">Additional diagnostics and analysis are needed to find a solution.  Please review the following articles for more information or file a Service Request to obtain assistance.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Diagnostic efforts vary depending on the problem.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Risks involved in collecting diagnostics vary depending on the kind of diagnostics being obtained.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db112/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FE11882_01%2Fserver.112%2Fe10821%2Finstance_tune.htm%23PFGRF94532">Performance Tuning Guide > Instance Tuning Using Performance Views > Log file switch</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db112/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FE11882_01%2Fserver.112%2Fe10713%2Fphysical.htm%23CNCPT88997">Concepts > Online Redo Log Switches</a></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=147468.1">Checkpoint Tuning and Troubleshooting Guide </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id= 223117.1">Tuning I/O-related waits</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=45042.1">Archiver Best Practices</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=263652.1">Poor throughput while writing to redolog files</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   CPU Saturation is impacting Archiver</i></b></p>    <br><p class="detailTblTxt3">Archiver is unable to obtain sufficient CPU resources to archive redo logs fast enough for foreground session demand.<br>
<br>
Oracle relies on background processes to complete vital tasks in asynchronously.  As long as the background processes are able to complete their tasks in a timely manner, then foreground sessions don't have to wait for resources to become available and aren't hindered by a background task.  However, if the system's CPUs are very busy and there is insufficient capacity to handle the load, then background processes will be unable to obtain CPU resources and will wait on the run queue.  This may cause cascading effects as certain tasks are not completed and foreground sessions will need to wait.<br>
<br>
A few examples are:<br>
<br>
<ul>
<li>
DBWR is unable to write dirty buffers fast enough (since it waits on the run queue) and foreground sessions wait for free buffers.</li>
<li>Archiver is unsable to complete archivelog writes and foregrounds are blocked from switching to the redolog</li>
<li>LCK0 process is unable to perform library cache load functions and foregrounds wait for library cache load locks</li>
</ul></p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">AWR or Statspack show waits for "free buffer waits" or "write complete waits" greater than 10% of overall DBTime and there is a CPU saturation problem on the host. </p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate the reasons for CPU saturation</i></b></p>    <br><p class="detailTblTxt3">See this guide's "Issue Identification > Analysis > Verify Oracle OS Resource Usage" section for more details.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Determine which processes are using most of the CPU on the machine.  They could be Oracle processes (including more than one instance) or non-Oracle processes.  If they are Oracle processes, then you should have detected this already in a previous step and investigated the reasons for Oracle's CPU consumption (of course, better late than never).  Otherwise, you will need to find out the reason for the non-Oracle CPU consumption (outside of our scope).
<br>
You can use various OS tools and Oracle EM to investigate this.<br>
<br>
Oracle recommends using the "OS Watcher" utility to capture OS diagnostics because it offers an easy way to capture data and report OS data for several platforms.<br>
<br>
There are also commands available in Unix flavors that can help.  For example, use the <i><b>top</b></i> utility or the <i><b>ps</b></i> command, ps -ef -o pid,pcpu,comm | sort -k 2 (this will give you a sorted list of processes using CPU - look at the 2nd column, "% CPU").<br>
<br>
See the documents below for additional details.</p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id= 224176.1">How to use OS commands to diagnose Database Performance issues?</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=164768.1">Diagnosing High CPU Utilization</a></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=301137.1">OS Watcher User Guide</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://st-doc.us.oracle.com/10/102/em.102/b31949/host_3rdparty_management.htm#sthref1533">Enterprise Manager: Host Performance page</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>time model: connection management call elapsed time
 </b></i></p>    <br><p class="detailTblTxt3">Time spent for managing connections to the database.</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3">AWR or Statspack shows a significant amount of time listed (10% or more)  in the "Time Model Statistics" section as <i>connection management call elapsed time</i>.</p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Frequent logons / logoffs causing contention</i></b></p>    <br><p class="detailTblTxt3">Database logons can be resource intensive operations when dedicated sessions are used.  These dedicated sessions result in a new process being created which requires CPU resources and memory.  Also, various latches are acquired during this process.  When a logoff occurs, the process must be destroyed, again using CPU and latches.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul>
<li>Significant CPU consumption in SYS mode on the host</li>
<li>AWR or Statspack, Time Model section shows significant amount of DBtime spent on <i>Connection management call elapsed time</i> </li>
<li>Frequent logons and logoffs for short lived sessions (see V$SESSION)</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Improve Connection Management</i></b></p>    <br><p class="detailTblTxt3">It is common to see performance problems when an application connects and disconnects for each database interaction using dedicated servers. This problem is common with stateless middleware in application servers. It has over two orders of magnitude impact on performance, and is totally unscalable.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">There are various strategies and technical solutions to improve connection management.  They range from implementing shared servers minimize spawning database processes to configuring connection pooling. The efforts vary with the solution.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblHighBG">      <p align="center"><b>H</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Connection management is fundamental to an application and changes to it introduce risk.  For example, if shared servers will be implemented, then there is a risk that the shared pool or large pool are not sized properly to handle the number of shared server sessions.  This in-turn could lead to ORA-4031 errors (out of shared memory).  Connection management changes require thorough testing using load generators such as Database Replay available with Oracle's Real Application Testing option.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation for Shared Servers</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db112/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FE11882_01%2Fserver.112%2Fe10821%2Fbuild_db.htm%23PFGRF021">Performance Considerations for Shared Servers</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10595/manproc003.htm#i1010000">Configuring Oracle Database for Shared Server</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db112/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FE11882_01%2Fserver.112%2Fe10821%2Fmemory.htm%23PFGRF94329">Determining an Effective Setting for Shared Server UGA Storage</a></p>    <br><p class="detailTblTxt3">Documentation for Connection Pooling</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10595/manproc002.htm#CHDGIJIA">About Database Resident Connection Pooling</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10595/manproc004.htm#CHDGIDBA">Configuring Database Resident Connection Pooling</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/E11882_01/java.112/e12265/intro.htm#BABHFGCA">Java-based Connection Pools</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p><br> </td> </tr> </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="8">Network</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt">Waits caused by network related activity.  Typical events:
<ul>
<li>SQL*Net message from dblink</li>
<li>SQL*Net more data from dblink</li>
<li>SQL*Net more data to client</li>
<li>SQL*Net more data to dblink</li>
</ul>
<b>Facts Required for Analysis</b>:
<ul>
<li>TKProf, elapsed times for events (Overall Totals, recursive and non-recursive):
<ul>
<li>Total wait time for the event</li>
<li>Average wait for the event = total wait time / total waits</li>
</ul>
</li>
</ul>	</td>	</tr>	</table><br> <table width="100%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"> <tr><td width="100%" class="detailMainTxt"> <p><b>Note:</b> This list shows some common observations and causes but is not a complete list.  If you do not find a possible cause in this list, you can always open a service request with Oracle to investigate other possible causes.  Please see the section below called, "Open a Service Request with Oracle Support Services". </p> </td></tr> </table> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>wait: SQL*Net message from dblink</b></i></p>    <br><p class="detailTblTxt3">The Oracle shadow process is waiting for a message over a database link from a remote process. Note that this wait is also used when waiting for data from "extproc" or from a remote gateway process. </p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>TKProf: 
<ul class="detailTblTxt3">
<li>Overall wait event summary for non-recursive and recursive statements shows significant amount of time for <i>SQL*Net message from dblink</i> waits.</li>
</ul>
<br>
<li>AWR or statspack: 
<ul class="detailTblTxt3">
<li>Significant waits for <i>SQL*Net message from dblink</i></li>
</ul>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   A remote database is not executing the query fast enough</i></b></p>    <br><p class="detailTblTxt3">If the local database is waiting for this event on a distributed query, the remote node(s) may be taking too long to execute the query and return results back to the local node.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">TKProf:
<ol>
<li>Focus attention on the remote database</li>
<li>On the "remote" database, find the session corresponding to the "local" database (it will look like a typical database client)</li>
<li>Determine how long it takes to execute the query sent over the dblink (best if you can trace this session with the 10046 event)</li>
<li>If most of the time is spent executing the "remote" query, this issue is justified</li>
</ol>
</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Tune the remote query using the Performance Diagnostic Guide's Query Tuning Section</i></b></p>    <br><p class="detailTblTxt3">This is a query tuning problem that needs to be addressed in detail on the remote site using the information in the Performance Diagnostic Guide's Query Tuning section.<br>
<br>
Click on the Query Tuning tab, then skip to the Determine a Cause > Data Collection step.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium; tracing distributed queries is more challenging than local queries.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Not applicable</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">In addition to using the Performance Diagnostic Guide's Query Tuning section, see the documents below for specific issues with distributed queries.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14231/ds_concepts.htm#g1022384">Concepts: Distributed Database Concepts</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14231/ds_appdev.htm#i1007640">Admin Guide: Tuning Distributed Queries</a></p>    <br><p class="detailTblTxt3"> Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=68809.1">Distributed Queries</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=33838.1">Determining the execution plan for a distributed query</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p><br> </td> </tr> </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="9">Reads / Writes</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt">Waits for I/O (for example 'db file sequential read').  Typical events:
<ul>
<li>db file parallel write</li>
<li>db file sequential read</li>
<li>db file scattered read</li>
<li>direct path read</li>
<li>direct path write</li>
<li>log file parallel write</li>
<li>io done</li>
<li>read by other session</li>
</ul>
<b>Facts Required for Analysis</b>:
<ul>
<li>TKProf, elapsed times for events (Overall Totals, recursive and non-recursive):
<ul>
<li>Total wait time for the event</li>
<li>Average wait for the event = total wait time / total waits</li>
</ul>
</li>
</ul>	</td>	</tr>	</table><br> <table width="100%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"> <tr><td width="100%" class="detailMainTxt"> <p><b>Note:</b> This list shows some common observations and causes but is not a complete list.  If you do not find a possible cause in this list, you can always open a service request with Oracle to investigate other possible causes.  Please see the section below called, "Open a Service Request with Oracle Support Services". </p> </td></tr> </table> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>wait: db file sequential read</b></i></p>    <br><p class="detailTblTxt3">The session waits while a sequential read from the database is performed. This event is also used for rebuilding the control file, dumping datafile headers, and getting the database file headers.<br>
<br>
Wait class: User I/O, typically foreground</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>TKProf: Overall summary for non-recursive and recursive statements shows significant amount of time for <i>db file sequential read</i> waits. </li>
<br>
<li>AWR or statspack: <i>db file sequential read</i> waits is among the top timed events</li>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   SQL tuning required; no I/O problems</i></b></p>    <br><p class="detailTblTxt3">If performance time is dominated by this wait event, then SQL tuning may reduce the number of reads and speed up queries.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>Significant amount of the total time in TKProf is due to this wait event</li>
<li>The average time for this event (total time / wait count) should be less than 20 mSec to discount an I/O problem.</li></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   10g+: Tune the query using the SQL Tuning Advisor</i></b></p>    <br><p class="detailTblTxt3">Oracle's SQL Tuning Advisor can help tune specific SQL statements quickly and easily if you are licensed to use the Enterprise Manager Tuning Pack.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; the SQL Tuning Advisor is easy to use and requires little user effort to tune a statement.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">The tuning action will generally be to create a statement profile.  The profile affects only a single statement.  Other recommendations may have wide ranging effects and should be tested thoroughly.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=262687.1 ">How to use the Sql Tuning Advisor</a></p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_tune.htm%23PFGRF028">Automatic SQL Tuning </a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14196%2Fmontune003.htm%23sthref784">Using Advisors to Optimize Database Performance</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_tune.htm%23sthref1144">Using SQL Tuning Advisor with Oracle Enterprise Manager</a></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fappdev.102%2Fb14258%2Fd_sqltun.htm%23sthref7584">SQL Tuning Advisor Subprograms </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/sql_tune.htm#CHDBIGDF">Using SQL Tuning Advisor APIs </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=271196.1">Automatic SQL Tuning - SQL Profiles</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Tune the query using the Performance Diagnostic Guide's Query Tuning Section</i></b></p>    <br><p class="detailTblTxt3">This is a query tuning problem that needs to be addressed in detail using the information in the Performance Diagnostic Guide's Query Tuning section.<br></p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; manual query tuning can be easy or difficult depending on the query and application.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; generally query tuning actions will affect only a single query.  Of course this will depend on the ultimate actions taken and some of them can affect an entire instance.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Click on the Query Tuning tab, then skip to the Determine a Cause > Data Collection step.<br>
<br>
Other helpful documents are listed below:</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_1016.htm%23PFGRF006">SQL Tuning Overview </a></p>    <br><p class="detailTblTxt3"> How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=233112.1">Diagnosing Query Tuning Problems</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=67522.1">Diagnosing Why a Query is Not Using an Index</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   I/O performance problems</i></b></p>    <br><p class="detailTblTxt3">The average time for a an I/O is exceeds typical standards for I/O performance (less than 20 mSec).  </p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>Significant amount of the total time in TKProf is due to this wait event</li>
<li>The average time for this event (total time / wait count) is more than 20 mSec</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate possible I/O performance problems</i></b></p>    <br><p class="detailTblTxt3">To investigate further you must:
<ul class="detailTblTxt3">
<li>Find out which file numbers are causing the highest average waits and then determine which filesystem contains the file</li>
<li>Determine why the filesystems are performing poorly.  Some common causes are:
<ul class="detailTblTxt3">
<li>"hot filesystems" - too many active files on the same filesystem exhausting the I/O bandwidth</li>
<li>hardware problem</li>
<li>In Parallel Execution (PX) is being used, determine if the I/O subsystem is saturated by having too many slaves in use.</li>
</ul>
</ul>
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; depends on the skill level of the system administrators.  Correcting a problem can involve major effort to move files to a new destination.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; hardware changes and structural database changes carry risk that may require a restore.  Backups should be taken and restoring procedures should be tested before attempting changes.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/iodesign.htm#g37279">I/O Configuration and Design</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/instance_tune.htm#sthref924">Wait Event: db file scattered read</a></p>    <br><p class="detailTblTxt3"> Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=223117.1">Tuning I/O-related waits</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Buffer cache is too small</i></b></p>    <br><p class="detailTblTxt3">A small buffer cache will cause more physical reads or, for a RAC database, additional block transfers than would otherwise be required.
</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">TKProf: <br>
<ul class="detailTblTxt3">
<li>Significant waits on <db file sequential read</i> waits , and/or for RAC, <i>global cache CR request</i></li>
<li>SQL statements perform 10 or fewer logical reads (query + current) per row per table per execution, meaning that the statement is reasonably tuned (i.e., if a query joins 2 tables and returns 10 rows, one would expect less than 10*2*3 = 60 logical reads per execution</li>
<li>Full table scans (in a RAC database) are NOT seen in the execution plan for a statement that is waiting on this event</li>
<li>The application is an OLTP type of application and in the overall section of the report,  physical reads ("disk") are equal or close to the number of logical reads (query + current).
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Manually Increase the size of the buffer cache using the <i>db cache size</i> parameter</i></b></p>    <br><p class="detailTblTxt3">Increase the size of the buffer cache and monitor the effects of the change.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; change an initialization parameter</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk. However, there must be sufficient memory on the machine to avoid memory shortage problems.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm#CNCPT007">Concepts: Oracle Memory Architecture</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fmemory.htm%23sthref485">Configuring and Using the Buffer Cache</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   10g+: Use automatic shared memory management (ASMM) </i></b></p>    <br><p class="detailTblTxt3">ASMM will seek to optimize the size of the buffer cache without human intervention.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; change an initialization parameter</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk. Be sure to set SGA_TARGET to a reasonable value.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm">Concepts: Memory Architecture</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm#CNCPT810">Concepts: Automatic Shared Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14231/create.htm#BABGCBHI">Admin: Using Automatic Shared Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#i30970">Performance Tuning: Configuring and Using the Shared Pool and Large Pool</a></p>    <br><p class="detailTblTxt3">Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=257643.1">Oracle Database 10g Automated SGA Memory Tuning</a></p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=295626.1">How To Use Automatic Shared Memory Management (ASMM) In Oracle10g</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=270935.1">Shared pool sizing in 10g</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Application performing too many reads</i></b></p>    <br><p class="detailTblTxt3">The application's SQL looks well-tuned (reasonable number of logical reads per execution) and I/O performance looks good, but there are simply a large number of physical reads occuring.  It may be possible to change the application design such that it avoids many unnecessary calls to the database.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul>
<li>AWR or Statspack show significant waits on I/O - related waits like <i>db file sequential read</i> or <i>db file scattered read</i></li>
<li>The average wait time for above waits is low (typcially less than 10 mSec)</li>
<li>SQL statements have a reasonable number of logical reads per execution</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate Application Design</i></b></p>    <br><p class="detailTblTxt3">Sometimes applications are developed in such a way as to make many requests to the database that can easily be avoided.  The individual requests (SQL statements) are handled efficiently by the database, but there is simply so many of them that the database is spending considerable amounts of time servicing them.  Performance tuners like to say, "The most efficient I/O is the one that never occurs".  If the SQL is well-tuned, the buffer cache is sized properly, and the I/O subsystem is performing well, but you see a lot of time spent on I/O anyways, you probably need to consider changing the application design, or implement caching at the application side.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblHighBG">      <p align="center"><b>H</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Changes to the application typically involve a lot of effort in the production stage, but much less effort at the design stage.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblHighBG">      <p align="center"><b>H</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Application changes can be risky so regression testing is critical.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Specific changes are impossible to describe since applications vary in their intent and implementation.  However, the following links may be useful for consideration:</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10821/design.htm#i28071">Performance Tuning Guide > Application Design Principles</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db112/to_toc?pathname=timesten.112%2Fe14261%2Ftoc.htm&remark=portal+%28Books%29">Oracle In-Memory Database Cache Introduction</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10713/memory.htm#CNCPT1919">Concept: Server Result Cache</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10821/memory.htm#BGBCABED">Managing the Server and Client Result Caches</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>wait: db file scattered read</b></i></p>    <br><p class="detailTblTxt3">The session waits while a multiblock read from the database is performed. Similar to db file sequential read, except that the session is reading multiple data blocks and <i>scattering</i> them around the buffer cache.<br>
<br>
Wait class: User I/O, typically foreground</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>TKProf: Overall summary for non-recursive and recursive statements shows significant amount of time for <i>db file scattered read</i> waits. </li>
<br>
<li>AWR or statspack: <i>db file scattered read</i> waits is among the top timed events</li>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   SQL tuning required; no I/O problems</i></b></p>    <br><p class="detailTblTxt3">If performance time is dominated by this wait event, then SQL tuning may reduce the number of reads and speed up queries.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>Significant amount of the total time in TKProf is due to this wait event</li>
<li>The average time for this event (total time / wait count) should be less than 20 mSec to discount an I/O problem.</li></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   10g+: Tune the query using the SQL Tuning Advisor</i></b></p>    <br><p class="detailTblTxt3">Oracle's SQL Tuning Advisor can help tune specific SQL statements quickly and easily if you are licensed to use the Enterprise Manager Tuning Pack.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; the SQL Tuning Advisor is easy to use and requires little user effort to tune a statement.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">The tuning action will generally be to create a statement profile.  The profile affects only a single statement.  Other recommendations may have wide ranging effects and should be tested thoroughly.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=262687.1 ">How to use the Sql Tuning Advisor</a></p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_tune.htm%23PFGRF028">Automatic SQL Tuning </a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14196%2Fmontune003.htm%23sthref784">Using Advisors to Optimize Database Performance</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_tune.htm%23sthref1144">Using SQL Tuning Advisor with Oracle Enterprise Manager</a></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fappdev.102%2Fb14258%2Fd_sqltun.htm%23sthref7584">SQL Tuning Advisor Subprograms </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/sql_tune.htm#CHDBIGDF">Using SQL Tuning Advisor APIs </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=271196.1">Automatic SQL Tuning - SQL Profiles</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Tune the query using the Performance Diagnostic Guide's Query Tuning Section</i></b></p>    <br><p class="detailTblTxt3">This is a query tuning problem that needs to be addressed in detail using the information in the Performance Diagnostic Guide's Query Tuning section.<br></p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; manual query tuning can be easy or difficult depending on the query and application.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; generally query tuning actions will affect only a single query.  Of course this will depend on the ultimate actions taken and some of them can affect an entire instance.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Click on the Query Tuning tab, then skip to the Determine a Cause > Data Collection step.<br>
<br>
Other helpful documents are listed below:</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_1016.htm%23PFGRF006">SQL Tuning Overview </a></p>    <br><p class="detailTblTxt3"> How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=233112.1">Diagnosing Query Tuning Problems</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=67522.1">Diagnosing Why a Query is Not Using an Index</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   I/O performance problems</i></b></p>    <br><p class="detailTblTxt3">The average time for a an I/O is exceeds typical standards for I/O performance (less than 20 mSec).  </p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>Significant amount of the total time in TKProf is due to this wait event</li>
<li>The average time for this event (total time / wait count) is more than 20 mSec</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate possible I/O performance problems</i></b></p>    <br><p class="detailTblTxt3">To investigate further you must:
<ul class="detailTblTxt3">
<li>Find out which file numbers are causing the highest average waits and then determine which filesystem contains the file</li>
<li>Determine why the filesystems are performing poorly.  Some common causes are:
<ul class="detailTblTxt3">
<li>"hot filesystems" - too many active files on the same filesystem exhausting the I/O bandwidth</li>
<li>hardware problem</li>
<li>In Parallel Execution (PX) is being used, determine if the I/O subsystem is saturated by having too many slaves in use.</li>
</ul>
</ul>
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; depends on the skill level of the system administrators.  Correcting a problem can involve major effort to move files to a new destination.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; hardware changes and structural database changes carry risk that may require a restore.  Backups should be taken and restoring procedures should be tested before attempting changes.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/iodesign.htm#g37279">I/O Configuration and Design</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/instance_tune.htm#sthref924">Wait Event: db file scattered read</a></p>    <br><p class="detailTblTxt3"> Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=223117.1">Tuning I/O-related waits</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Application performing too many reads</i></b></p>    <br><p class="detailTblTxt3">The application's SQL looks well-tuned (reasonable number of logical reads per execution) and I/O performance looks good, but there are simply a large number of physical reads occuring.  It may be possible to change the application design such that it avoids many unnecessary calls to the database.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul>
<li>AWR or Statspack show significant waits on I/O - related waits like <i>db file sequential read</i> or <i>db file scattered read</i></li>
<li>The average wait time for above waits is low (typcially less than 10 mSec)</li>
<li>SQL statements have a reasonable number of logical reads per execution</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate Application Design</i></b></p>    <br><p class="detailTblTxt3">Sometimes applications are developed in such a way as to make many requests to the database that can easily be avoided.  The individual requests (SQL statements) are handled efficiently by the database, but there is simply so many of them that the database is spending considerable amounts of time servicing them.  Performance tuners like to say, "The most efficient I/O is the one that never occurs".  If the SQL is well-tuned, the buffer cache is sized properly, and the I/O subsystem is performing well, but you see a lot of time spent on I/O anyways, you probably need to consider changing the application design, or implement caching at the application side.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblHighBG">      <p align="center"><b>H</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Changes to the application typically involve a lot of effort in the production stage, but much less effort at the design stage.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblHighBG">      <p align="center"><b>H</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Application changes can be risky so regression testing is critical.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Specific changes are impossible to describe since applications vary in their intent and implementation.  However, the following links may be useful for consideration:</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10821/design.htm#i28071">Performance Tuning Guide > Application Design Principles</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db112/to_toc?pathname=timesten.112%2Fe14261%2Ftoc.htm&remark=portal+%28Books%29">Oracle In-Memory Database Cache Introduction</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10713/memory.htm#CNCPT1919">Concept: Server Result Cache</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10821/memory.htm#BGBCABED">Managing the Server and Client Result Caches</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>wait: direct path read</b></i></p>    <br><p class="detailTblTxt3">Direct Path operations (parallel execution, hash joins, sorts to disk) read data from  datafiles directly into the PGA (opposed to the buffer cache in SGA). When the process attempts to access a block in the PGA that has not yet been read from disk, it then issues a wait call and updates the statistics for this event. </p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>TKProf: 
<ul class="detailTblTxt3">
<li>Overall wait event summary for non-recursive and recursive statements shows significant amount of time for <i>direct path read</i> waits.</li>
</ul>
<br>
<li>AWR or statspack: 
<ul class="detailTblTxt3">
<li>Significant waits for <i>direct path read</i></li>
</ul>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   I/O performance problems</i></b></p>    <br><p class="detailTblTxt3">The average time for a an I/O is exceeds typical standards for I/O performance (less than 20 mSec).  </p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>Significant amount of the total time in TKProf is due to this wait event</li>
<li>The average time for this event (total time / wait count) is more than 20 mSec</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate possible I/O performance problems</i></b></p>    <br><p class="detailTblTxt3">To investigate further you must:
<ul class="detailTblTxt3">
<li>Find out which file numbers are causing the highest average waits and then determine which filesystem contains the file</li>
<li>Determine why the filesystems are performing poorly.  Some common causes are:
<ul class="detailTblTxt3">
<li>"hot filesystems" - too many active files on the same filesystem exhausting the I/O bandwidth</li>
<li>hardware problem</li>
<li>In Parallel Execution (PX) is being used, determine if the I/O subsystem is saturated by having too many slaves in use.</li>
</ul>
</ul>
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; depends on the skill level of the system administrators.  Correcting a problem can involve major effort to move files to a new destination.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; hardware changes and structural database changes carry risk that may require a restore.  Backups should be taken and restoring procedures should be tested before attempting changes.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/iodesign.htm#g37279">I/O Configuration and Design</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/instance_tune.htm#sthref924">Wait Event: db file scattered read</a></p>    <br><p class="detailTblTxt3"> Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=223117.1">Tuning I/O-related waits</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Incorrect manual workarea sizing</i></b></p>    <br><p class="detailTblTxt3">Oracle uses in-memory workareas in the PGA for performing sorts, hash joins, and other operations.  These can be manually controlled by parameters such as <i>sort_area_size</i> and <i>hash_area_size</i>.<br>
<br>
When these parameters are sized below what Oracle needs do an operation in memory, then some of the data will need to be written in temp segments causing <i>direct path write</i> waits.  Eventually, this data will be read back and will cause <i>direct path read</i> waits.
</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">TKProf: <br>
<ul class="detailTblTxt3">
<li>Significant waits on <i>direct path read</i> or <i>direct path writes</i></li>
<li>Execution plan shows sorts or hash join operations</li>
<li>Average wait time is less than 20 mSec</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Use automatic PGA memory management </i></b></p>    <br><p class="detailTblTxt3">When running under the automatic PGA memory management mode, sizing of work areas for all sessions becomes automatic and the *_AREA_SIZE parameters are ignored by all sessions running in that mode. At any given time, the total amount of PGA memory available to active work areas in the instance is automatically derived from the PGA_AGGREGATE_TARGET initialization parameter. <br>
<br>
Under automatic PGA memory management mode, the main goal of Oracle is to honor the PGA_AGGREGATE_TARGET limit set by the DBA, by controlling dynamically the amount of PGA memory allotted to SQL work areas. At the same time, Oracle tries to maximize the performance of all the memory-intensive SQL operations, by maximizing the number of work areas that are using an optimal amount of PGA memory (cache memory). </p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; initialization parameter change.  Some effort has to be made initially to set the proper target size and adjust it to ensure optimal performance.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk. Initially, some effort should be made to ensure the PGA settings are reasonable and don't regress performance.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm#i14490">Concepts: Overview of the Program Global Areas</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#i49320">Performance Tuning Guide: PGA Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams157.htm#sthref664">Reference: Initialization Parameter PGA_AGGREGATE_TARGET</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams226.htm#sthref917">Reference: Initialization Parameter WORKAREA_SIZE_POLICY</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=223730.1">Automatic PGA Memory Management in 9i and 10g</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=153367.1">Init.ora Parameter "PGA_AGGREGATE_TARGET" Reference Note</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=153387.1">Init.ora Parameter "WORKAREA_SIZE_POLICY" Reference Note </a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Parallel execution is occurring but not expected or desired</i></b></p>    <br><p class="detailTblTxt3">Parallel execution is occurring and causing CPU or I/O problems (typically direct path read/write waits) due to the degree of parallelism.  PX is not expected; the CBO will attempt to use parallel operations if the following are set or used:
<ul class="detailTblTxt3">
<li>Parallel hint: <i>parallel(t1, 4)</i>
<li>ALTER SESSION FORCE PARALLEL</li>
<li>Setting a degree of parallel and/or the number of instances on a table or index in a query </li>
</ul>
</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>The process with very high direct path read waits is a parallel execution slave process.</li>
<li>There are many more PX slave processes than expected or desired</li>
<li>The filesystems where the I/O is occurring were never meant to handle the I/O bandwidth required by the number of PX processes</li>
</ul></p>	  <br><p class="detailTblTxt3">Additional Information:</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14223/usingpe.htm#CACCAGCH">Summary of Parallelization Rules</a></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Remove parallel hints</i></b></p>    <br><p class="detailTblTxt3">The statement is executing in parallel due to parallel hints.  Removing these hints may allow the statement to run serially.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; simply remove the hint from the statement.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk, only affects the statement.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Remove one or more hints of the type:<br>
<ul class="detailTblTxt3">
<li>PARALLEL</li>
<li>PARALLEL_INDEX</li>
<li>PQ_DISTRIBUTE </li>
</ul>
<br>
If one of the tables has a degree greater than 1, the query may still run in parallel.</p>    <br><p class="detailTblTxt3">Hint information:</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/B19306_01/server.102/b14211/hintsref.htm#sthref1619">Hints for Parallel Execution </a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Alter a table or index's degree of parallelism</i></b></p>    <br><p class="detailTblTxt3">A table or index in the query has its degree (of parallelism) set higher than 1.  This may be one factor causing the query to execute in parallel.  If the parallel plan is not performing well, a serial plan may be obtained by changing the degree.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; the object may be changed with an ALTER command.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; other queries may be running in parallel due to the degree setting and will revert to a serial plan.  
An impact analysis should be performed to determine the effect of this change on other queries.<br>
<br>The ALTER command will invalidate cursors that depend on the table or index and may cause a spike in library cache contention - the change should be done during a period of low activity.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14200/statements_7002.htm#i2159323">Parallel clause for the CREATE and ALTER TABLE / INDEX statements</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>wait: direct path write</b></i></p>    <br><p class="detailTblTxt3">When a process is writing buffers directly from the PGA (as opposed to the DBWR writing them from the buffer cache), the process waits on this event to ensure that all outstanding write requests are completed. Example of "direct path writes" operations are: sorts that go to disk, parallel DML operations, direct-path INSERTs, parallel create table as select, and some LOB operations. </p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>TKProf: 
<ul class="detailTblTxt3">
<li>Overall wait event summary for non-recursive and recursive statements shows significant amount of time for <i>direct path write</i> waits.</li>
</ul>
<br>
<li>AWR or statspack: 
<ul class="detailTblTxt3">
<li>Significant waits for <i>direct path write</i></li>
</ul>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   I/O performance problems</i></b></p>    <br><p class="detailTblTxt3">The average time for a an I/O is exceeds typical standards for I/O performance (less than 20 mSec).  </p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>Significant amount of the total time in TKProf is due to this wait event</li>
<li>The average time for this event (total time / wait count) is more than 20 mSec</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate possible I/O performance problems</i></b></p>    <br><p class="detailTblTxt3">To investigate further you must:
<ul class="detailTblTxt3">
<li>Find out which file numbers are causing the highest average waits and then determine which filesystem contains the file</li>
<li>Determine why the filesystems are performing poorly.  Some common causes are:
<ul class="detailTblTxt3">
<li>"hot filesystems" - too many active files on the same filesystem exhausting the I/O bandwidth</li>
<li>hardware problem</li>
<li>In Parallel Execution (PX) is being used, determine if the I/O subsystem is saturated by having too many slaves in use.</li>
</ul>
</ul>
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; depends on the skill level of the system administrators.  Correcting a problem can involve major effort to move files to a new destination.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; hardware changes and structural database changes carry risk that may require a restore.  Backups should be taken and restoring procedures should be tested before attempting changes.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/iodesign.htm#g37279">I/O Configuration and Design</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/instance_tune.htm#sthref924">Wait Event: db file scattered read</a></p>    <br><p class="detailTblTxt3"> Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=223117.1">Tuning I/O-related waits</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Incorrect manual workarea sizing</i></b></p>    <br><p class="detailTblTxt3">Oracle uses in-memory workareas in the PGA for performing sorts, hash joins, and other operations.  These can be manually controlled by parameters such as <i>sort_area_size</i> and <i>hash_area_size</i>.<br>
<br>
When these parameters are sized below what Oracle needs do an operation in memory, then some of the data will need to be written in temp segments causing <i>direct path write</i> waits.  Eventually, this data will be read back and will cause <i>direct path read</i> waits.
</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">TKProf: <br>
<ul class="detailTblTxt3">
<li>Significant waits on <i>direct path read</i> or <i>direct path writes</i></li>
<li>Execution plan shows sorts or hash join operations</li>
<li>Average wait time is less than 20 mSec</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Use automatic PGA memory management </i></b></p>    <br><p class="detailTblTxt3">When running under the automatic PGA memory management mode, sizing of work areas for all sessions becomes automatic and the *_AREA_SIZE parameters are ignored by all sessions running in that mode. At any given time, the total amount of PGA memory available to active work areas in the instance is automatically derived from the PGA_AGGREGATE_TARGET initialization parameter. <br>
<br>
Under automatic PGA memory management mode, the main goal of Oracle is to honor the PGA_AGGREGATE_TARGET limit set by the DBA, by controlling dynamically the amount of PGA memory allotted to SQL work areas. At the same time, Oracle tries to maximize the performance of all the memory-intensive SQL operations, by maximizing the number of work areas that are using an optimal amount of PGA memory (cache memory). </p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; initialization parameter change.  Some effort has to be made initially to set the proper target size and adjust it to ensure optimal performance.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk. Initially, some effort should be made to ensure the PGA settings are reasonable and don't regress performance.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm#i14490">Concepts: Overview of the Program Global Areas</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#i49320">Performance Tuning Guide: PGA Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams157.htm#sthref664">Reference: Initialization Parameter PGA_AGGREGATE_TARGET</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams226.htm#sthref917">Reference: Initialization Parameter WORKAREA_SIZE_POLICY</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=223730.1">Automatic PGA Memory Management in 9i and 10g</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=153367.1">Init.ora Parameter "PGA_AGGREGATE_TARGET" Reference Note</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=153387.1">Init.ora Parameter "WORKAREA_SIZE_POLICY" Reference Note </a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>wait: read by other session</b></i></p>    <br><p class="detailTblTxt3">A session wants to pin a block that is currently being read from disk into the buffer cache by another session.</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3">TKProf or AWR
<ul class="detailTblTxt3">
<li>Significant waits for the <i>read by other session</i> event</li>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   SQL tuning required; no I/O problems</i></b></p>    <br><p class="detailTblTxt3">If performance time is dominated by this wait event, then SQL tuning may reduce the number of reads and speed up queries.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>Significant amount of the total time in TKProf is due to this wait event</li>
<li>The average time for this event (total time / wait count) should be less than 20 mSec to discount an I/O problem.</li></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   10g+: Tune the query using the SQL Tuning Advisor</i></b></p>    <br><p class="detailTblTxt3">Oracle's SQL Tuning Advisor can help tune specific SQL statements quickly and easily if you are licensed to use the Enterprise Manager Tuning Pack.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; the SQL Tuning Advisor is easy to use and requires little user effort to tune a statement.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">The tuning action will generally be to create a statement profile.  The profile affects only a single statement.  Other recommendations may have wide ranging effects and should be tested thoroughly.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=262687.1 ">How to use the Sql Tuning Advisor</a></p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_tune.htm%23PFGRF028">Automatic SQL Tuning </a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14196%2Fmontune003.htm%23sthref784">Using Advisors to Optimize Database Performance</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_tune.htm%23sthref1144">Using SQL Tuning Advisor with Oracle Enterprise Manager</a></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fappdev.102%2Fb14258%2Fd_sqltun.htm%23sthref7584">SQL Tuning Advisor Subprograms </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/sql_tune.htm#CHDBIGDF">Using SQL Tuning Advisor APIs </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=271196.1">Automatic SQL Tuning - SQL Profiles</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Tune the query using the Performance Diagnostic Guide's Query Tuning Section</i></b></p>    <br><p class="detailTblTxt3">This is a query tuning problem that needs to be addressed in detail using the information in the Performance Diagnostic Guide's Query Tuning section.<br></p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; manual query tuning can be easy or difficult depending on the query and application.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; generally query tuning actions will affect only a single query.  Of course this will depend on the ultimate actions taken and some of them can affect an entire instance.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Click on the Query Tuning tab, then skip to the Determine a Cause > Data Collection step.<br>
<br>
Other helpful documents are listed below:</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_1016.htm%23PFGRF006">SQL Tuning Overview </a></p>    <br><p class="detailTblTxt3"> How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=233112.1">Diagnosing Query Tuning Problems</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=67522.1">Diagnosing Why a Query is Not Using an Index</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   I/O performance problems</i></b></p>    <br><p class="detailTblTxt3">The average time for a an I/O is exceeds typical standards for I/O performance (less than 20 mSec).  </p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>Significant amount of the total time in TKProf is due to this wait event</li>
<li>The average time for this event (total time / wait count) is more than 20 mSec</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate possible I/O performance problems</i></b></p>    <br><p class="detailTblTxt3">To investigate further you must:
<ul class="detailTblTxt3">
<li>Find out which file numbers are causing the highest average waits and then determine which filesystem contains the file</li>
<li>Determine why the filesystems are performing poorly.  Some common causes are:
<ul class="detailTblTxt3">
<li>"hot filesystems" - too many active files on the same filesystem exhausting the I/O bandwidth</li>
<li>hardware problem</li>
<li>In Parallel Execution (PX) is being used, determine if the I/O subsystem is saturated by having too many slaves in use.</li>
</ul>
</ul>
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; depends on the skill level of the system administrators.  Correcting a problem can involve major effort to move files to a new destination.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; hardware changes and structural database changes carry risk that may require a restore.  Backups should be taken and restoring procedures should be tested before attempting changes.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/iodesign.htm#g37279">I/O Configuration and Design</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/instance_tune.htm#sthref924">Wait Event: db file scattered read</a></p>    <br><p class="detailTblTxt3"> Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=223117.1">Tuning I/O-related waits</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Buffer cache is too small</i></b></p>    <br><p class="detailTblTxt3">A small buffer cache will cause more physical reads or, for a RAC database, additional block transfers than would otherwise be required.
</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">TKProf: <br>
<ul class="detailTblTxt3">
<li>Significant waits on <db file sequential read</i> waits , and/or for RAC, <i>global cache CR request</i></li>
<li>SQL statements perform 10 or fewer logical reads (query + current) per row per table per execution, meaning that the statement is reasonably tuned (i.e., if a query joins 2 tables and returns 10 rows, one would expect less than 10*2*3 = 60 logical reads per execution</li>
<li>Full table scans (in a RAC database) are NOT seen in the execution plan for a statement that is waiting on this event</li>
<li>The application is an OLTP type of application and in the overall section of the report,  physical reads ("disk") are equal or close to the number of logical reads (query + current).
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Manually Increase the size of the buffer cache using the <i>db cache size</i> parameter</i></b></p>    <br><p class="detailTblTxt3">Increase the size of the buffer cache and monitor the effects of the change.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; change an initialization parameter</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk. However, there must be sufficient memory on the machine to avoid memory shortage problems.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm#CNCPT007">Concepts: Oracle Memory Architecture</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fmemory.htm%23sthref485">Configuring and Using the Buffer Cache</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   10g+: Use automatic shared memory management (ASMM) </i></b></p>    <br><p class="detailTblTxt3">ASMM will seek to optimize the size of the buffer cache without human intervention.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; change an initialization parameter</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk. Be sure to set SGA_TARGET to a reasonable value.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm">Concepts: Memory Architecture</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm#CNCPT810">Concepts: Automatic Shared Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14231/create.htm#BABGCBHI">Admin: Using Automatic Shared Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#i30970">Performance Tuning: Configuring and Using the Shared Pool and Large Pool</a></p>    <br><p class="detailTblTxt3">Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=257643.1">Oracle Database 10g Automated SGA Memory Tuning</a></p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=295626.1">How To Use Automatic Shared Memory Management (ASMM) In Oracle10g</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=270935.1">Shared pool sizing in 10g</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Additional Diagnostics Needed</i></b></p>    <br><p class="detailTblTxt3">Additional diagnostics and analysis are needed to find a solution.  </p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">There is insufficient information to suggest a specific cause.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Additional Diagnostics Needed</i></b></p>    <br><p class="detailTblTxt3">Additional diagnostics and analysis are needed to find a solution.  Please file a Service Request to obtain assistance.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Diagnostic efforts vary depending on the problem.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Risks involved in collecting diagnostics vary depending on the kind of diagnostics being obtained.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Please file an SR for more details on what should be done next.</p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p><br> </td> </tr> </table> </td> </tr> <tr> <td width="100%" colspan="3" class="detailEmptyLine">&nbsp;</td> </tr> </table> <table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"> <tr> <td width="3%" class="detailMainTxt">&nbsp;</td> <td width="2%" valign="top" align="left">&nbsp;</td> <td width="95%" class="detailSubHdrTxt">Reduce Client or Session-level Bottlenecks </td> </tr> <tr> <td width="3%" class="detailEmptyLayer">&nbsp;</td> <td width="2%" class="detailEmptyLayer">&nbsp;</td> <td width="95%"><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="100%" class="detailMainTxt">A client bottleneck in the context of a slow database is another way to say that most of the time for sessions is being spent outside of the database.  This could be due to a truly slow client or a slow network (and related components).  A session-level bottleneck is really a problem that is being experienced by one or a few sessions; there is no widespread database performance problem.    </td>  </tr>  <tr>    <td width="100%" class="detailEmptyLine">&nbsp;</td>  </tr>  </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="1">Observations and Causes</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt">Examine the table below for common observations and causes:	</td>	</tr>	</table><br> <table width="100%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"> <tr><td width="100%" class="detailMainTxt"> <p><b>Note:</b> This list shows some common observations and causes but is not a complete list.  If you do not find a possible cause in this list, you can always open a service request with Oracle to investigate other possible causes.  Please see the section below called, "Open a Service Request with Oracle Support Services". </p> </td></tr> </table> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>High Wait Time due to Client Events Before Any Type of Call</b></i></p>    <br><p class="detailTblTxt3">The Oracle shadow process is spending a significant amount of time waiting for messages from clients.  The waits occur between FETCH and PARSE calls or before EXECUTE calls.  There are few FETCH calls for the same cursor.</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3">TKProf: 
<ul class="detailTblTxt3">
<li>Overall wait event summary for non-recursive and recursive statements shows significant amount of time for <i>SQL*Net message from client</i> waits compared to the total elapsed time in the database</li>
<li>Each FETCH call typically returns 5 or more rows (indicating that array fetches are occurring)</li>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Slow client is unable to respond to the database quickly</i></b></p>    <br><p class="detailTblTxt3">The client is running slowly and is taking time to make requests of the database.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">TKProf:
<ol>
<li><i>SQL*Net message from client</i> waits are a large part of the overall time (see the overall summary section)</li>
<li>There are more than 5 rows per execution on average (divide total rows by total execution calls for both recursive and non-recursive calls).  When array operations are used, you'll see 5 to 10 rows per execution.</li>
</ol>
<br>
You may also observe that performance is good when the same queries that the client sends are executed via a different client (on another node).</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate the client </i></b></p>    <br><p class="detailTblTxt3">Its possible that the client or middle-tier is saturated (not enough CPU or memory) and is simply unable to send requests to the database fast enough.  <br>
<br>
You will need to check the client for sufficient resources or application bugs that may be delaying database calls.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; It is easy to check clients or mid-tiers for OS resource saturation.  Bugs in application code are more difficult to find.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">It may help to use a tool like OSWatcher to capture OS performance metrics on the client.  <br>
<br>
To identify a specific client associated with a database session, see the V$SESSION view under the columns, CLIENT_INFO, PROCESS, MACHINE, PROGRAM.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14237/dynviews_2088.htm#sthref3985">Reference: V$SESSION</a></p>    <br><p class="detailTblTxt3">Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=301137.1">The OS Watcher (OSW) User Guide</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=433472.1">The OS Watcher For Windows (OSWFW) User Guide</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Slow network limiting the response time between client and database</i></b></p>    <br><p class="detailTblTxt3">The network is saturated and this is limiting the ability of the client and database to communicate with each other.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">TKProf:
<ol>
<li><i>SQL*Net message from client</i> waits are a large part of the overall time (see the overall summary section)</li>
<li>Array operations are used.  This is seen when there are more than 5 rows per execution on average (divide total rows by total execution calls for both recursive and non-recursive calls)</li>
<li>The average time for a <i>ping</i> is about equal to twice the average time for a <i>SQL*Net message from client</i> wait and this time is more than a few milliseconds.  This indicates that most of the client time is spent in the network.</li>
</ol>
<br>
You may also observe that performance is good when the same queries that the client sends are executed via a different client on a different subnet (especially one very close to the database server).</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate the network</i></b></p>    <br><p class="detailTblTxt3">Check the responsiveness of the network from different subnets and interface cards.  The <i>netstat</i>, <i>ping</i> and <i>traceroute</i> utilities can be used to check network performance.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; Network problems are relatively easy to check but sometimes difficult to solve.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Consult your system documentation for utilities such as <i>ping, netstat, and traceroute</i></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>High Wait Time due to Client Events Between FETCH Calls</b></i></p>    <br><p class="detailTblTxt3">The Oracle shadow process is spending a significant amount of time waiting for messages from clients between FETCH calls for the same cursor.</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3">10046 / TKProf: 
<ul class="detailTblTxt3">
<li>Overall wait event summary for non-recursive and recursive statements shows significant amount of time for <i>SQL*Net message from client</i> waits compared to the total elapsed time in the database</li>
<li>The client waits occur between many fetch calls for the <u>same</u> cursor (as seen in the cursor #).</li>
<li>On average, there are less than 5 (and usually 1)  row returned per execution</li>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Lack of Array Operations Causing Excess Calls to the Database</i></b></p>    <br><p class="detailTblTxt3">The client is not using array operations to process multiple rows in the database.  This means that many more calls are performed against the database.  Each call incurs a wait while the database waits for the next call.  The time accumulates over many calls and will impact performance.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">TKProf:
<ol>
<li><i>SQL*Net message from client</i> waits are a large part of the overall time (see the overall summary section)</li>
<li>There is nearly 1 row per execution on average (divide total rows by total execution calls for both recursive and non-recursive calls).  When array operations are used, you'll see 5 to 10 rows per execution.</li>
<li>In some cases, most of the time is for a few SQL statements; you may need to examine the whole TKProf to find where the client waits were highest and examine those for the use of array operations</li>
</ol>
</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Use array operations to avoid calls</i></b></p>    <br><p class="detailTblTxt3">Array operations will operate on several rows at a time (either fetch, update, or insert).  A single fetch or execute call will do the work of many more.  Usually, the benefits of array operations diminish after an arraysize of 10 to 20, but this depends on what the application is doing and should be determined through benchmarking.<br>
<br>
Since fewer calls are needed, there are savings in waiting for client messages, network traffic, and database work such as logical reads and block pins.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; Depending on the client, it may be easy or difficult to change the application and use array operations.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Very low risk; it is risky when enormous array sizes are used in OLTP operations and many rows are expected.  This is due to waiting for the entire array to be filled until the first row is returned.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">The implementation of array operations will vary by the type of programming language being used.  See the documents below for some common ways to implement array operations.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/appdev.102/b14261/tuning.htm#i48876">PL/SQL User's Guide and  Reference : Reducing Loop Overhead for DML Statements and Queries with Bulk SQL</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/appdev.102/b14354/chapter9.htm">Programmer's Guide to the Oracle Precompilers
: Using Host Arrays</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/java.102/b14355/oraperf.htm#i1056232">JDBC Developer's Guide and Reference: Update Batching</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/java.102/b14355/oraperf.htm#i1043756">JDBC Developer's Guide and Reference: Oracle Row Prefetching</a></p>    <br><p class="detailTblTxt3"> Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=74123.1">Bulk Binding - What it is, Advantages, and How to use it</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=291829.1">How To Fetch Data into a Table of Records using Bulk Collect and FOR All</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>Slow performance for a few sessions</b></i></p>    <br><p class="detailTblTxt3">Only one or a few sessions are experiencing a performance problem; there is no widespread database performance problem.</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3">Only certain users are reporting a performance problems.  Most other users are experiencing normal response times.</p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Session-level performance problem.</i></b></p>    <br><p class="detailTblTxt3">A performance problem is seen by only a few users rather than database-wide.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">Only certain sessions, or certain operations within a session have been impacted.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate Session Level Problem</i></b></p>    <br><p class="detailTblTxt3">Performance problems affecting one or a few number of sessions in the database allow one to obtain additional information to help diagnose the problem.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">The effort required to obtain addtional session-based data varies depending on the way sessions connect to the database and how a session is identified.  The easiest cases are those where a user connects directly to the database with a database username that is plainly visible in V$SESSION.  The most challenging cases involve some kind of connection pooling at the mid-tier where the same database user name is used for all sessions and the application does NOT use the "CLIENT_IDENTIFIER" for each session.  </p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Collecting session-level diagnostics are generally safe and low-risk for the database as a whole but there is some risk of further impacting performance of the session itself due to the overhead in tracing.  Also, tracing a background process is generally dangerous and should only be done at the direction of Oracle Support.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Oracle usually recommends gathering the following data for performance problems affecting a few sessions:

* 10046, level 12 trace
* Time the user's observed response time using the application when the 10046 trace is also collecting data</p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p><br> </td> </tr> </table> </td> </tr> <tr> <td width="100%" colspan="3" class="detailEmptyLine">&nbsp;</td> </tr> </table> <table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"> <tr> <td width="3%" class="detailMainTxt">&nbsp;</td> <td width="2%" valign="top" align="left">&nbsp;</td> <td width="95%" class="detailSubHdrTxt">Reduce Oracle Memory Consumption </td> </tr> <tr> <td width="3%" class="detailEmptyLayer">&nbsp;</td> <td width="2%" class="detailEmptyLayer">&nbsp;</td> <td width="95%"><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="100%" class="detailMainTxt">Oracle uses memory for the SGA and PGAs.  Examine the size of the SGAs and PGAs to determine what is using the system's memory.    </td>  </tr>  <tr>    <td width="100%" class="detailEmptyLine">&nbsp;</td>  </tr>  </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="1">Observations and Causes</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt">Examine the table below for common observations and causes:	</td>	</tr>	</table><br> <table width="100%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"> <tr><td width="100%" class="detailMainTxt"> <p><b>Note:</b> This list shows some common observations and causes but is not a complete list.  If you do not find a possible cause in this list, you can always open a service request with Oracle to investigate other possible causes.  Please see the section below called, "Open a Service Request with Oracle Support Services". </p> </td></tr> </table> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>Oracle Memory Consumption due to large SGA</b></i></p>    <br><p class="detailTblTxt3">One or more SGAs on the machine are leaving very little memory left for PGAs and other use on the machine.</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3">RDA:
<ul class="detailTblTxt3">
<li>A large portion of the memory on the machine is used by one or more SGAs (see the total size of the buffer cache and shared pool), see the following:
<ol>
<li>Overview > System Information > Total Physical Memory</li>
<li>RDBMS > SGA Information, add up all components</li>
<li>Repeat for all other instances on the machine</li>
<li>Compare total size of all SGAs to physical memory</li>
</ol></li>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Oversized buffer cache</i></b></p>    <br><p class="detailTblTxt3">The buffer cache is very large and is using more memory than is needed.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">AWR or Statspack report:
<ul class="detailTblTxt3">
<li>Not using automatic shared memory management (ASMM), i.e., SGA_TARGET=0</li>
<li>Buffer cache hit ratio is around 99%</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   10g+: Use automatic shared memory management (ASMM) </i></b></p>    <br><p class="detailTblTxt3">ASMM will seek to optimize the size of the buffer cache without human intervention.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; change an initialization parameter</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk. Be sure to set SGA_TARGET to a reasonable value.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm">Concepts: Memory Architecture</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm#CNCPT810">Concepts: Automatic Shared Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14231/create.htm#BABGCBHI">Admin: Using Automatic Shared Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#i30970">Performance Tuning: Configuring and Using the Shared Pool and Large Pool</a></p>    <br><p class="detailTblTxt3">Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=257643.1">Oracle Database 10g Automated SGA Memory Tuning</a></p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=295626.1">How To Use Automatic Shared Memory Management (ASMM) In Oracle10g</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=270935.1">Shared pool sizing in 10g</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Oversized shared pool</i></b></p>    <br><p class="detailTblTxt3">The pool  is very large and is using more memory than is needed.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">AWR or Statspack report:
<ul class="detailTblTxt3">
<li>Not using automatic shared memory management (ASMM), i.e., SGA_TARGET=0</li>
<li>shared pool free memory is more than 30%</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   10g+: Use the <i>Automatic Shared Memory Manager (ASMM)</i> to adjust the shared pool size</i></b></p>    <br><p class="detailTblTxt3">ASMM will automate memory sizing for the shared pool to ensure an optimal amount is available. You will need to set a reasonable value for SGA_MAX_SIZE and SGA_TARGET to enable ASMM.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; an init.ora / spfile change. </p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; ASMM will ensure sufficient memory is available.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm">Concepts: Memory Architecture</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm#CNCPT810">Concepts: Automatic Shared Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14231/create.htm#BABGCBHI">Admin: Using Automatic Shared Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#i30970">Performance Tuning: Configuring and Using the Shared Pool and Large Pool</a></p>    <br><p class="detailTblTxt3">Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=257643.1">Oracle Database 10g Automated SGA Memory Tuning</a></p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=295626.1">How To Use Automatic Shared Memory Management (ASMM) In Oracle10g</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=270935.1">Shared pool sizing in 10g</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   The Large, Java and/or Streams Pool are Oversized</i></b></p>    <br><p class="detailTblTxt3">A significant amount of free space is present in the large, java and/or streams pool when there is evidence of memory pressure on the instance and/or host.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">If the large, java or streams pool individual free space is greater than 20%, and there is evidence of memory pressure, then this cause is likely. Memory pressure is generally detected when the system is paging out memory.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Reduce the size of the Large, Java or Streams pool</i></b></p>    <br><p class="detailTblTxt3">Reduce the large, java and streams pool so they typically have 5% of free space during peak memory usage.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Initialization parameter change.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">If the values are set too low, then certain operations may fail; values should be adjusted cautiously, over time if possible.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See documents below:</p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams090.htm#i1128241">LARGE_POOL_SIZE parameter</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams087.htm#i1128097">JAVA_POOL_SIZE parameter</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams212.htm#i1134525">STREAMS_POOL_SIZE parameter</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Unknown SGA Memory Consumption Problem </i></b></p>    <br><p class="detailTblTxt3">SGA memory is being consumed for an unknown reason.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul>
<li>AWR or Statspack show paging activity in the "OS Statisitics" section</li>
<li>Most of the memory on the host is used by this instance</li>
<li>Most the instance's memory usage is due to the SGA</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Additional SGA Memory Diagnostics Needed</i></b></p>    <br><p class="detailTblTxt3">Unfortunately, the most likely reasons for this problem have been ruled out.  Additional diagnostics and analysis are needed to find a solution.  Please collect the diagnostics suggested below and file a Service Request to obtain assistance.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">The diagnostics involve a simple query and are easy to obtain.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk to the system.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Issue the following queries and send the output to Oracle Support Services when you file an SR:<br>
<br>
<pre>
	select * from v$sga;
	select * from v$sgastat order by pool, bytes;
</pre></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   SGA target is too large to fit in available memory.</i></b></p>    <br><p class="detailTblTxt3">The size of the initialization parameter, SGA_TARGET, is larger than the available memory of the host (total installed memory less OS overhead and memory for other reasons) minus the total size of the PGAs.  This leads to memory paging which impacts the host.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul>
<li>Significant paging is occuring on the host</li>
<li>Total installed memory - overhead < (Sum of all PGAs) + SGA_TARGET</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Reduce SGA_TARGET to fit available memory (or add more memory)</i></b></p>    <br><p class="detailTblTxt3">SGA_TARGET should be set to a reasonable size that leaves enough memory available for other uses such as:<br>
<ul>
<li>Other instances on the same machine</li>
<li>PGA memory for all instances</li>
<li>Other applications and utilities running on the machine</li>
<li>OS overhead memory</li>
</ul></p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Changing memory settings involves simple changes to the parameter file; however this will generally require an instance bounce.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">There is risk in changing memory parameters since an undersized SGA can cause excessive I/O due to small buffer cache, high reloads in the shared pool, or even ORA-4031 errors if memory is not sufficient to load objects in the shared pool.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=257643.1">Oracle Database 10g Automated SGA Memory Tuning</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=http://download.oracle.com/docs/cd/E11882_01/server.112/e10821/memory.htm#PFGRF94255">Automatic Shared Memory Management</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/E11882_01/install.112/e10840/pre_install.htm#CHDCEBFF ">Example of Oracle Installation on Linux; Memory Requirements</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>Oracle Memory Consumption due to large PGAs</b></i></p>    <br><p class="detailTblTxt3">One or more Oracle processes are using large amounts of PGA memory on the machine.</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3">
A large portion of the memory on the machine is used by one or more PGAs , see the following:
<ol>
<li>RDA: Overview > System Information > Total Physical Memory</li>
<li>Run this query to see total PGA memory used by the instance:<br>
<pre>
select sn.name, sum(s.value)
from v$sesstat s, v$statname sn
where s.statistic# = sn.statistic#
and sn.name like '%pga%'
group by sn.name
</pre>
</li>
<li>Repeat for all other instances on the machine</li>
<li>Determine which instance uses the most PGA memory and which sessions account for the memory usage.</li>
</ol></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Manually sized private workareas are too large</i></b></p>    <br><p class="detailTblTxt3">Private workareas are too large for the total number of Oracle processes and the amount of memory available.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">AWR or Statspack report:
<ul class="detailTblTxt3">
<li>Not using automatic PGA memory management i.e., PGA_AGGREGATE_TARGET=0 or WORKAREA_SIZE_POLICY = MANUAL</li>
<li>Parameters like <i>sort_area_size</i> and <i>hash_area_size</i> are very large and when multiplied by the number of active sessions will use up most of the system's physical memory</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Use automatic PGA memory management </i></b></p>    <br><p class="detailTblTxt3">When running under the automatic PGA memory management mode, sizing of work areas for all sessions becomes automatic and the *_AREA_SIZE parameters are ignored by all sessions running in that mode. At any given time, the total amount of PGA memory available to active work areas in the instance is automatically derived from the PGA_AGGREGATE_TARGET initialization parameter. <br>
<br>
Under automatic PGA memory management mode, the main goal of Oracle is to honor the PGA_AGGREGATE_TARGET limit set by the DBA, by controlling dynamically the amount of PGA memory allotted to SQL work areas. At the same time, Oracle tries to maximize the performance of all the memory-intensive SQL operations, by maximizing the number of work areas that are using an optimal amount of PGA memory (cache memory). </p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; initialization parameter change.  Some effort has to be made initially to set the proper target size and adjust it to ensure optimal performance.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk. Initially, some effort should be made to ensure the PGA settings are reasonable and don't regress performance.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm#i14490">Concepts: Overview of the Program Global Areas</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#i49320">Performance Tuning Guide: PGA Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams157.htm#sthref664">Reference: Initialization Parameter PGA_AGGREGATE_TARGET</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams226.htm#sthref917">Reference: Initialization Parameter WORKAREA_SIZE_POLICY</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=223730.1">Automatic PGA Memory Management in 9i and 10g</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=153367.1">Init.ora Parameter "PGA_AGGREGATE_TARGET" Reference Note</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=153387.1">Init.ora Parameter "WORKAREA_SIZE_POLICY" Reference Note </a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Automatically sized private workareas are too large</i></b></p>    <br><p class="detailTblTxt3">Private workareas are too large for the total number of Oracle processes and the amount of memory available.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">AWR or Statspack report:
<ul class="detailTblTxt3">
<li>Using automatic PGA memory management i.e., PGA_AGGREGATE_TARGET=some large value and WORKAREA_SIZE_POLICY = AUTO</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Reduce the amount of PGA_AGGREGATE_TARGET memory</i></b></p>    <br><p class="detailTblTxt3">PGA_AGGREGATE_TARGET may be set too large for the memory capacity of the machine.  If memory is constrained, then a balance may be found where some queries run slower but the overall system runs faster since memory is available for critical operations.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; parameter change.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblHighBG">      <p align="center"><b>H</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">High risk.  Some execution plans may change and some queries may perform worse.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below for guidance on the proper use of the automatic PGA memory feature.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm#i14490">Concepts: Overview of the Program Global Areas</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#i49320">Performance Tuning Guide: PGA Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams157.htm#sthref664">Reference: Initialization Parameter PGA_AGGREGATE_TARGET</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams226.htm#sthref917">Reference: Initialization Parameter WORKAREA_SIZE_POLICY</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=223730.1">Automatic PGA Memory Management in 9i and 10g</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=153367.1">Init.ora Parameter "PGA_AGGREGATE_TARGET" Reference Note</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=153387.1">Init.ora Parameter "WORKAREA_SIZE_POLICY" Reference Note </a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Increase the amount of physical memory on the machine</i></b></p>    <br><p class="detailTblTxt3">Adding memory instead of reducing the size of the PGA target will give memory to the processes and reduce the possibility that executions plans will change.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; simple hardware change but downtime involved if non-RAC.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk.  Low chance of execution plans changing.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Not applicable.</p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>Other memory problems
 </b></i></p>    <br><p class="detailTblTxt3">Memory problems not related to Oracle SGA and PGA</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3">Host OS data shows memory shortage (significant paging) but Oracle is not consuming most of the memory.</p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Memory shortage NOT caused by this instance </i></b></p>    <br><p class="detailTblTxt3">Host memory is being consumed outside of this instance (neither the SGA nor PGA of this instance).</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul>
<li>AWR or Statspack show paging activity in the "OS Statisitics" section</li>
<li>Most of the memory on the host is not used by this instance</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate non-Oracle memory consumption</i></b></p>    <br><p class="detailTblTxt3">A memory shortage was detected on the system (usually due to the presence of heavy paging) but this database instance was found to be using a minor percentage of the total memory (both PGA and SGA).  Additional diagnostics should be collected and analyzed; however, Oracle is able to offer limited assistance since the problem may lie outside of the database.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Additional diagnostics are generally easy to collect using OS commands, although Oracle recommends using Enterprise Manager or Support's OS Watcher (OSW) tool to collect data over a period of time (2 days is usually sufficient).  Installation of OSW is simple but some places require a change control process to be followed.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Collecting OS data either manually or with OSW is a low risk activity.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3"><ol>
<li>Install OSW and collect data using default settings</li>
<li>Identify periods when paging was severe using OSWg's charting features</li>
<li>During the period when there were memory problems, examine the collected "TOP" output.</li>
<li>Look for the processes and users with the highest "RES" or "RSS" (resident set size) memory consumption.</li>
</ol>
These processes are generally responsible for the memory consumption problems.  You will need to determine what these processes are and what can be done about them.<br>
<br>
You can do the above analysis also without using OSW and instead using the TOP utility by itself.  Be sure to change the sort option to sort by the RSS or RES column (depending on the platform). Run TOP in batch mode to collect the data to a file; the following will collect 120 samples at 30 second intervals (for a total of 1 hour of data) sorted by "RES" field (the following works in Solaris, please consult the man pages for your OS):
<pre>	 
	 top -b -d5 -s2 -ores > top.txt
</pre>
Send either the OSW or TOP output to Oracle when you file the SR, but please remember that Oracle is able to offer limited assistance if the problem lies outside of the database.</p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=301137.1">OS Watcher User Guide</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=2060096.6">Monitoring Memory Use</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=558237.1">Monitoring Memory Usage in Virtual Memory Systems</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=224176.1">How to use OS commands to diagnose Database Performance issues?</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=190124.1">The Coe Performance Method (good information on OS tools)</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p><br> </td> </tr> </table> </td> </tr> <tr> <td width="100%" colspan="3" class="detailEmptyLine">&nbsp;</td> </tr> </table><p class="detailMainTxt">&nbsp;</p></td> <td width="25%" valign="top">&nbsp;</td></tr></table> <table width="100%" border="0" cellspacing="1" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">   <tr>     <td width="2%" valign="top" align="left">&nbsp;</td>     <td width="98%">     <p class="detailHdrTxt"><a name="Open a Service Request with Oracle Support Services">Open a Service Request with Oracle Support Services</a></p><hr class="detailLine">     </td>   </tr> </table> <table width="100%" border="0" cellspacing="1" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">   <tr>       <td width="75%" valign="top"><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="3%"  class="detailMainTxt">&nbsp;</td>    <td width="97%" class="detailMainTxt">
<p>If you would like to stop at this point and receive assistance from Oracle Support Services, please do the following:</p>
<ul>
<li>Please copy and paste the following into the SR:<br>
<blockquote>
Last Diagnostic Step = Performance_Diagnostic_Guide.SLow_DB.Cause_Determination.Data_Analysis
</blockquote>
<li>Enter the problem statement and how the issue has been verified</li>
<li>Upload into the SR:
<ul>
<li>Any data you have collected up to this point (esp. good and bad statspack / AWR / TKProfs)</li>
<li>Observations, causes, and solutions you have examined and dismissed or don't understand</li>
</ul>
</ul>
<p>The more data you collect ahead of time and upload to Oracle, the fewer round trips will be required for this data and the quicker the problem will be resolved.</p>
<p><a target="detailWindow" href="https://support.oracle.com/epmos/faces/SrCreate">Click here to log your service request</a></p>
    </td>  </tr>  <tr>    <td width="3%" class="detailMainTxt">&nbsp;</td>    <td width="97%" class="detailMainTxt">&nbsp;</td>  </tr>  </table><p class="detailMainTxt">&nbsp;</p></td> <td width="25%" valign="top">&nbsp;</td></tr></table> <table width="100%" border="0" cellspacing="1" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">   <tr>     <td width="2%" valign="top" align="left">&nbsp;</td>     <td width="98%">     <p class="detailHdrTxt"><a name="Give Us Your Feedback">Give Us Your Feedback</a></p><hr class="detailLine">     </td>   </tr> </table> <table width="100%" border="0" cellspacing="1" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">   <tr>       <td width="75%" valign="top"><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="3%"  class="detailMainTxt">&nbsp;</td>    <td width="97%" class="detailMainTxt">Your feedback is very valuable to us - please email your comments to: 
<a href="mailto:Vickie.Carbonneau@oracle.com?subject=Performance%20Diagnostic%20Guide%20Feedback&body=Please%20provide%20a%20rating%20of%201-10.%20%20(1%20being%20the%20lowest,%2010%20being%20the%20highest)%0D%0DRATING:%20%20">
Vickie.Carbonneau@oracle.com</a>    </td>  </tr>  <tr>    <td width="3%" class="detailMainTxt">&nbsp;</td>    <td width="97%" class="detailMainTxt">&nbsp;</td>  </tr>  </table><p class="detailMainTxt">&nbsp;</p></td> <td width="25%" valign="top">&nbsp;</td></tr></table><p class=pagebreak>&nbsp;</p>
<table width="100%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">		<tr>      <td width="100%" colspan="4">      <p class="htmlHdr"><a name="Slow Database &gt; Reference">Slow Database &gt; Reference</a></p>      <p class="htmlHdr">&nbsp;</p>		</td></tr>		</table><br> <table width="100%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">     <tr>     <td width="100%" class="detailMainTxt">This section contains a summary of useful information to help diagnose and solve performance problems. </td>   </tr> </table> <br> <table width="100%" border="0" cellspacing="1" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">   <tr>     <td width="2%" valign="top" align="left">&nbsp;</td>     <td width="98%">     <p class="detailHdrTxt"><a name="Causes and Solutions">Causes and Solutions</a></p><hr class="detailLine">     </td>   </tr> </table> <table width="100%" border="0" cellspacing="1" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">   <tr>       <td width="75%" valign="top"><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="3%"  class="detailMainTxt">&nbsp;</td>    <td width="97%" class="detailMainTxt">This section contains a summary of common causes and solutions to slow database problems.    </td>  </tr>  <tr>    <td width="3%" class="detailMainTxt">&nbsp;</td>    <td width="97%" class="detailMainTxt">&nbsp;</td>  </tr>  </table> <table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"> <tr> <td width="3%" class="detailMainTxt">&nbsp;</td> <td width="2%" valign="top" align="left">&nbsp;</td> <td width="95%" class="detailSubHdrTxt">CPU Bottlenecks </td> </tr> <tr> <td width="3%" class="detailEmptyLayer">&nbsp;</td> <td width="2%" class="detailEmptyLayer">&nbsp;</td> <td width="95%"><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="100%" class="detailMainTxt">CPU consumption in the database can be due to parsing operations or non-parsing operations.  The causes for each type are listed below.    </td>  </tr>  <tr>    <td width="100%" class="detailEmptyLine">&nbsp;</td>  </tr>  </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="1">Parse CPU</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt">Common causes for parse CPU consumption are described in this section.	</td>	</tr>	</table><br> <table width="100%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"> <tr><td width="100%" class="detailMainTxt"> <p><b>Note:</b> This list shows some common observations and causes but is not a complete list.  If you do not find a possible cause in this list, you can always open a service request with Oracle to investigate other possible causes.  Please see the section below called, "Open a Service Request with Oracle Support Services". </p> </td></tr> </table> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>One or a few queries with High CPU usage during HARD parse</b></i></p>    <br><p class="detailTblTxt3">High CPU usage during hard parses are often seen with large statements involving many objects or partitioned objects.</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3"><ol>
<li>Check if the statement was hard parsed</li>
<li>Compare parse cpu time to parse elapsed time to see if  parse cpu time is more than 50%</i>
</ol></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Dynamic sampling is being used for the query and impacting the parse time</i></b></p>    <br><p class="detailTblTxt3">Dynamic sampling is performed by the CBO (naturally at parse time) when it is either requested via hint or parameter, or by default because statistics are missing.  Depending on the level of the dynamic sampling, it may take some time to complete - this time is reflected in the parse time for the statement.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>The parse time is responsible for most of  the query's overall elapsed time</li>
<li>The execution plan output of SQLTXPLAIN, the UTLXPLS script, or a 10053 trace will show if dynamic sampling was used while optimizing the query.</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Alternatives to Dynamic Sampling</i></b></p>    <br><p class="detailTblTxt3">If the parse time is high due to dynamic sampling, alternatives may be needed to obtain the desired plan without using dynamic sampling.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; some alternatives are easy to implement (add a hint), whereas others are more difficult (determine the hint required by comparing plans)</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; in general, the solution will affect only the query.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Some alternatives to dynamic sampling are:<br>
<ol>
<li>In 10g or higher, use the SQL Tuning Advisor (STA)  to generate a profile for the query (in fact, its unlikely you'll even set dynamic sampling on a query that has been tuned by the STA)</li>
<li>Find the hints needed to implement the plan normally generated with dynamic sampling and modify the query with the hints</li>
<li>Use a stored outline to capture the plan generated with dynamic sampling</li>
</ol>
<br>
For very volatile data (in which dynamic sampling was helping obtain a good plan), an approach can be used where an application will choose one of several hinted queries depending on the state of the data (i.e., if data recently deleted use query #1, else query #2).
</p>    <br><p class="detailTblTxt3">Documents for hints:<br></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/hintsref.htm#sthref1602">Using Optimizer Hints</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=221970.1">Forcing a Known Plan Using Hints</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=50607.1">How to Specify an Index Hint</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=29236.1">QREF:  SQL Statement HINTS</a></p>    <br><p class="detailTblTxt3">Documents for stored outlines / plan stability:<br></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/outlines.htm#sthref1787">Using Plan Stability</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=67536.1">Stored Outline Quick Reference</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=122812.1">How to Tune a Query that Cannot be Modified</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=102311.1">How to Move Stored Outlines for One Application from One Database to Another</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Query has many IN LIST parameters / OR statements</i></b></p>    <br><p class="detailTblTxt3">The CBO may take a long time to cost a statement with dozens of IN LIST / OR clauses.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>The parse time is responsible for most of  the query's overall elapsed time</li>
<li>The query has a large set of IN LIST values or OR clauses.</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Implement the NO_EXPAND hint to avoid transforming the query block</i></b></p>    <br><p class="detailTblTxt3">In versions 8.x and higher, this will avoid the transformation to separate query blocks with UNION ALL (and save parse time) while still allowing indexes to be used with the IN-LIST ITERATOR operation.  By avoiding a large number of query blocks, the CBO will save time (and hence the parse time will be shorter) since it doesn't have to optimize each block.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; hint applied to a query.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; hint applied only to the query and will not affect other queries.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the reference documents.</p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62153.1">Optimization of large inlists/multiple OR`s</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/B19306_01/server.102/b14200/sql_elements006.htm#SQLRF50502">NO_EXPAND Hint </a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Partitioned table with many partitions</i></b></p>    <br><p class="detailTblTxt3">The use of partitioned tables with many partitions (more than 1,000) may cause high parse CPU times while the CBO determines an execution plan.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ol>
<li>The parse time is responsible for most of  the query's overall elapsed time</li>
<li>Determine total number of partitions for all tables used in the query.</li>
<li>If the number is over 1,000, this cause is likely</li>
</ol>
</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   9.2.0.x, 10.0.0: Bug 2785102 - Query involving many partitions (>1000) has high CPU/memory use</i></b></p>    <br><p class="detailTblTxt3">A query involving a table with a large number of partitions takes a long time to  parse, causes rowcache  contention, and high CPU consumption. The case of this bug involved a table with greater than 10000 partitions and global statistics ere not gathered.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; application of a patchset.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; patchsets generally are low risk because they have been regression tested.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Apply patchset 9.2.0.4<br>
<br>
Workaround: <br>Set "_improved_row_length_enabled"=false</p>    <br><p class="detailTblTxt3">Additional bug information:</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=BUG&id=2785102">Bug 2785102</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>Many queries being HARD parsed</b></i></p>    <br><p class="detailTblTxt3">Hard parsing is costly for the database since it has to create various memory structures in the library cache and also optimize the SQL statement.  If many queries are being hard parsed, parse CPU will be high.</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3"><ol>
<li>Check if many statements were hard parsed</li>
</ol></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Unshared SQL Due to Literals</i></b></p>    <br><p class="detailTblTxt3">SQL statements are using literal values where a bind value could have been used.  The literal values cause the statement to be unshared and will force a hard parse.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><br>
TKProf :
<ul class="detailTblTxt3">
<li>Use the report sorted by elapsed parse time</li>
<li>Look at the top statements and determine if they are being hard parsed; these will have "Misses in the library cache" equal or close to the total number of parses</li>
<li>Examine the statements that are being hard parsed and look for the presence of literal values.</li></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Rewrite the SQL to use bind values</i></b></p>    <br><p class="detailTblTxt3">Rewriting the SQL to use bind values will allow the statement to be reused when specific values in the statement change but the overall statement is the same.  This is the best way to promote sharing of SQL statements in the library cache.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium or high effort; rewriting statements requires a change to the application but the change is rather trivial.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; the use of bind values could lead to worse execution plans for some statements.  The statements modified to use binds values should be thoroughly tested to avoid regressing the statement's performance.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Troubleshooting</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=296377.1">Handling and resolving unshared cursors/large version_counts</a></p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#sthref551">7.3.1.3 SQL Sharing Criteria</a></p>    <br><p class="detailTblTxt3">Searches</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/ranked?word=bind+variables&partno=b14407">Pro*C/C++ Precompiler Programmer's Guide</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/ranked?word=bind+variables&partno=b14211">Performance Tuning Guide</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Use the CURSOR_SHARING initialization parameter</i></b></p>    <br><p class="detailTblTxt3">The CURSOR_SHARING parameter will substitute literal values with bind values in a statement automatically.  The settings for this parameter are:
<ul class="detailTblTxt3">
<li><i>EXACT</i>: Leave the statement as it was written with literals (default value)</li>
<li><i>FORCE</i>: Substitute all literals with binds (as much as possible)</li>
<li><i>SIMILAR</i>: Substitute literals with binds only if the query's execution plan won't change (i.e., safe literal replacement)</li>
</ul>
In general, most OLTP apps that use equality predicates will see little change to their execution plans, but the effects of these parameters should be tested in your application.<br>
<br>
These parameters can be set at the session level to further contain their effects - this is the preferred way to use them to minimize widespread changes.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; an init.ora / spfile change.  In the worst case it may require a LOGON trigger to set it for a session.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; the use of bind values could lead to worse execution plans for some statements.  Risk can be mitigated by using SIMILAR instead of FORCE but this may not make enough statements shareable.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams035.htm#sthref154">Reference: CURSOR_SHARING Parameter</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=94036.1">Init.ora Parameter "CURSOR_SHARING" Reference Note</a></p>    <br><p class="detailTblTxt3">Troubleshooting</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#i31512">CURSOR_SHARING for Existing Applications</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=296377.1">Handling and resolving unshared cursors/large version_counts</a></p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#sthref551">7.3.1.3 SQL Sharing Criteria</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Shared SQL being aged out</i></b></p>    <br><p class="detailTblTxt3">The shared pool is too small and is causing many statements that could be shared to age out of the library cache and later reloaded.  Each reload requires a hard parse and impacts the CPU and latches.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><br>
TKProf:
<ul class="detailTblTxt3">
<li>Use the report sorted by elapsed parse time</li>
<li>Look at the top statements and determine if they are being hard parsed; these will have "Misses in the library cache" equal or close to the total number of parses</li>
<li>Examine the statements that are being hard parsed and look for the ABSENCE of literal values, this means these statements could have been shared but weren't (this is not entirely reliable since you could have statements that use binds but will not be executed again).</li>
</ul>
AWR or statspack reports:<br>
<ul class="detailTblTxt3">
<li>Library Cache statistics section shows that <i>reloads</i> are high (usually several thousand per hour) and little or no invalidations are seen </li>
<li>The "% SQL with executions>1" is over 60%, meaning statements are being shared</li>
<u/ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Increase the size of the shared pool</i></b></p>    <br><p class="detailTblTxt3">Increasing the shared pool size will reduce the need to age out statements that could be shared.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; an init.ora / spfile change. </p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; increasing the size of the shared pool is not risky unless:
<ul class="detailTblTxt3">
<li>There are many unshared statements due to literals
<br>
For more details, see: <a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a>
</li>
<li>The machine doesn't have enough physical memory and starts swapping
<br>
<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=17094.1">TECH: Unix Virtual Memory, Paging & Swapping explained</a></li>
</ul>
Verify the above points before changing the size of the shared pool.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14231/create.htm#BABDBIGB">Admin: Using Manual Shared Memory Management, see Specifying the Shared Pool Size</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams196.htm#sthref804">Reference: SHARED_POOL_SIZE Parameter</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams196.htm#CHDGGAIB">Reference: SHARED_POOL_SIZE and Automatic Storage Management</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   10g+: Use the <i>Automatic Shared Memory Manager (ASMM)</i> to adjust the shared pool size</i></b></p>    <br><p class="detailTblTxt3">ASMM will automate memory sizing for the shared pool to ensure an optimal amount is available. You will need to set a reasonable value for SGA_MAX_SIZE and SGA_TARGET to enable ASMM.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; an init.ora / spfile change. </p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; ASMM will ensure sufficient memory is available.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm">Concepts: Memory Architecture</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm#CNCPT810">Concepts: Automatic Shared Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14231/create.htm#BABGCBHI">Admin: Using Automatic Shared Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#i30970">Performance Tuning: Configuring and Using the Shared Pool and Large Pool</a></p>    <br><p class="detailTblTxt3">Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=257643.1">Oracle Database 10g Automated SGA Memory Tuning</a></p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=295626.1">How To Use Automatic Shared Memory Management (ASMM) In Oracle10g</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=270935.1">Shared pool sizing in 10g</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Keep ("pin") frequently used large PL/SQL and cursor objects in the shared pool</i></b></p>    <br><p class="detailTblTxt3">Use the DBMS_SHARED_POOL.KEEP() procedure to mark large, frequently used PL/SQL and SQL objects in the shared pool and avoid them being aged out.  This will reduce reloads and fragmentation since the object doesn't need to keep reentering the shared pool over and over.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; need to identify which objects should be kept and then run a procedure to keep them.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; if you aren't careful in keeping these objects, you may keep too many of them and cause ORA-4031 errors.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm">Concepts: Memory Architecture</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#sthref647">Performance Tuning: Keeping Large Objects to Prevent Aging</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/appdev.102/b14258/d_shpool.htm#sthref7134">PL/SQL DBMS_SHARED_POOL</a></p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=1012047.6">How To Pin Objects in Your Shared Pool</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=101627.1">How to Automate Pinning Objects in Shared Pool at Database Startup</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=305529.1">How To Use SYS.DBMS_SHARED_POOL In a PL/SQL Stored procedure To Pin objects in Oracle's Shared Pool</a></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=61760.1">Using the Oracle DBMS_SHARED_POOL Package</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p><br> </td> </tr> </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="2">Non-Parse CPU</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt">Common causes for non-parse CPU consumption are described in this section.	</td>	</tr>	</table><br> <table width="100%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"> <tr><td width="100%" class="detailMainTxt"> <p><b>Note:</b> This list shows some common observations and causes but is not a complete list.  If you do not find a possible cause in this list, you can always open a service request with Oracle to investigate other possible causes.  Please see the section below called, "Open a Service Request with Oracle Support Services". </p> </td></tr> </table> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>One or a few queries use most non-parse CPU</b></i></p>    <br><p class="detailTblTxt3">One or a few queries stand out as the heaviest users of non-parse CPU time.  This signifies that those particular queries need to be tuned.</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>TKProf: Only a few statements consume most of the total CPU usage (top statements when TKProf is sorted by fetch and execute CPU time) </li>
<br>
<li>AWR or statspack: Only a few SQL statements are reported to have the highest CPU usage, and these statements' CPU usage is responsible for most of the database's CPU time (as reported in the <i>Top 5 Timed Events</i> section)</li>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   SQL tuning required</i></b></p>    <br><p class="detailTblTxt3">If one or a few statements use most of the fetch or execute time, then these statements need to be tuned.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">Most of the CPU time either in the entire instance (shown in AWR or statspack) or within a session (shown in TKProf) is consumed by one or a few statements.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   10g+: Tune the query using the SQL Tuning Advisor</i></b></p>    <br><p class="detailTblTxt3">Oracle's SQL Tuning Advisor can help tune specific SQL statements quickly and easily if you are licensed to use the Enterprise Manager Tuning Pack.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; the SQL Tuning Advisor is easy to use and requires little user effort to tune a statement.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">The tuning action will generally be to create a statement profile.  The profile affects only a single statement.  Other recommendations may have wide ranging effects and should be tested thoroughly.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=262687.1 ">How to use the Sql Tuning Advisor</a></p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_tune.htm%23PFGRF028">Automatic SQL Tuning </a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14196%2Fmontune003.htm%23sthref784">Using Advisors to Optimize Database Performance</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_tune.htm%23sthref1144">Using SQL Tuning Advisor with Oracle Enterprise Manager</a></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fappdev.102%2Fb14258%2Fd_sqltun.htm%23sthref7584">SQL Tuning Advisor Subprograms </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/sql_tune.htm#CHDBIGDF">Using SQL Tuning Advisor APIs </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=271196.1">Automatic SQL Tuning - SQL Profiles</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Tune the query using the Performance Diagnostic Guide's Query Tuning Section</i></b></p>    <br><p class="detailTblTxt3">This is a query tuning problem that needs to be addressed in detail using the information in the Performance Diagnostic Guide's Query Tuning section.<br></p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; manual query tuning can be easy or difficult depending on the query and application.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; generally query tuning actions will affect only a single query.  Of course this will depend on the ultimate actions taken and some of them can affect an entire instance.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Click on the Query Tuning tab, then skip to the Determine a Cause > Data Collection step.<br>
<br>
Other helpful documents are listed below:</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_1016.htm%23PFGRF006">SQL Tuning Overview </a></p>    <br><p class="detailTblTxt3"> How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=233112.1">Diagnosing Query Tuning Problems</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=67522.1">Diagnosing Why a Query is Not Using an Index</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p><br> </td> </tr> </table> </td> </tr> <tr> <td width="100%" colspan="3" class="detailEmptyLine">&nbsp;</td> </tr> </table> <table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"> <tr> <td width="3%" class="detailMainTxt">&nbsp;</td> <td width="2%" valign="top" align="left">&nbsp;</td> <td width="95%" class="detailSubHdrTxt">Wait Bottlenecks </td> </tr> <tr> <td width="3%" class="detailEmptyLayer">&nbsp;</td> <td width="2%" class="detailEmptyLayer">&nbsp;</td> <td width="95%"><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="100%" class="detailMainTxt">Common causes for wait events are described in this section.    </td>  </tr>  <tr>    <td width="100%" class="detailEmptyLine">&nbsp;</td>  </tr>  </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="1">Cluster Waits</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt">Waits related to Real Application Cluster resources (for example, global cache resources such as 'gc buffer busy').  	</td>	</tr>	</table><br> <table width="100%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"> <tr><td width="100%" class="detailMainTxt"> <p><b>Note:</b> This list shows some common observations and causes but is not a complete list.  If you do not find a possible cause in this list, you can always open a service request with Oracle to investigate other possible causes.  Please see the section below called, "Open a Service Request with Oracle Support Services". </p> </td></tr> </table> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>wait: global cache CR request</b></i></p>    <br><p class="detailTblTxt3">The event is waited for when a session is looking for a consistent read version of a block but cannot find it in its local cache. It also implies that the current block is not cached locally. The wait ends when either a block or a grant arrives.
Depending on whether the remote instance has the block cached or not, the requesting instance receives
<li>A CR block, resulting in the statistic <i>global cache cr block received</i> to be incremented
<li>A grant, resulting in the statistic <i>global cache gets</i> to be incremented
<li>(9i RAC Only) A current block, resulting in the statistic <i>global cache current blocks received</i> to be incremented.</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>TKProf: 
<ul class="detailTblTxt3">
<li>Overall wait event summary for non-recursive and recursive statements shows significant amount of time for <i>global cache CR request</i> waits.</li>
</ul>
<br>
<li>AWR or statspack: 
<ul class="detailTblTxt3">
<li>Significant waits for <i>global cache CR request</i></li>
</ul>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   CPU saturation</i></b></p>    <br><p class="detailTblTxt3">CPU saturation can induce certain wait events like latch contention, log file sync, or cluster-related events.  <br>
<br>
In some cases, a foreground process depends on a background process for an operation (e.g., a  foreground's commit waits for logwriter to flush redo to disk).  If the background process has to wait for CPU, then any dependent foreground processes will also wait.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">OS Data shows that CPU utilization is at or near 100% and the run queue size per CPU is greater than 4.  This condition should have been caught earlier in the diagnostic process when OS data was being analyzed.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate the reasons for CPU saturation</i></b></p>    <br><p class="detailTblTxt3">See this guide's "Issue Identification > Analysis > Verify Oracle OS Resource Usage" section for more details.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Determine which processes are using most of the CPU on the machine.  They could be Oracle processes (including more than one instance) or non-Oracle processes.  If they are Oracle processes, then you should have detected this already in a previous step and investigated the reasons for Oracle's CPU consumption (of course, better late than never).  Otherwise, you will need to find out the reason for the non-Oracle CPU consumption (outside of our scope).
<br>
You can use various OS tools and Oracle EM to investigate this.<br>
<br>
Oracle recommends using the "OS Watcher" utility to capture OS diagnostics because it offers an easy way to capture data and report OS data for several platforms.<br>
<br>
There are also commands available in Unix flavors that can help.  For example, use the <i><b>top</b></i> utility or the <i><b>ps</b></i> command, ps -ef -o pid,pcpu,comm | sort -k 2 (this will give you a sorted list of processes using CPU - look at the 2nd column, "% CPU").<br>
<br>
See the documents below for additional details.</p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id= 224176.1">How to use OS commands to diagnose Database Performance issues?</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=164768.1">Diagnosing High CPU Utilization</a></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=301137.1">OS Watcher User Guide</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://st-doc.us.oracle.com/10/102/em.102/b31949/host_3rdparty_management.htm#sthref1533">Enterprise Manager: Host Performance page</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Inefficient SQL causing too many block reads across nodes</i></b></p>    <br><p class="detailTblTxt3">A poorly performing SQL statement will require an excessive amount of reads.  In a RAC database those reads may require bringing blocks from other nodes and waiting for those blocks to arrive.
</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">TKProf: <br>
<ul class="detailTblTxt3">
<li>Significant waits on <i>global cache CR request</i></li>
<li>SQL statements perform 100 or more logical reads (query + current) per row per execution</li>
<li>Full table scans (in a RAC database) may be seen in the execution plan for a statement that is waiting on this event</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   10g+: Tune the query using the SQL Tuning Advisor</i></b></p>    <br><p class="detailTblTxt3">Oracle's SQL Tuning Advisor can help tune specific SQL statements quickly and easily if you are licensed to use the Enterprise Manager Tuning Pack.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; the SQL Tuning Advisor is easy to use and requires little user effort to tune a statement.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">The tuning action will generally be to create a statement profile.  The profile affects only a single statement.  Other recommendations may have wide ranging effects and should be tested thoroughly.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=262687.1 ">How to use the Sql Tuning Advisor</a></p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_tune.htm%23PFGRF028">Automatic SQL Tuning </a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14196%2Fmontune003.htm%23sthref784">Using Advisors to Optimize Database Performance</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_tune.htm%23sthref1144">Using SQL Tuning Advisor with Oracle Enterprise Manager</a></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fappdev.102%2Fb14258%2Fd_sqltun.htm%23sthref7584">SQL Tuning Advisor Subprograms </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/sql_tune.htm#CHDBIGDF">Using SQL Tuning Advisor APIs </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=271196.1">Automatic SQL Tuning - SQL Profiles</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Tune the query using the Performance Diagnostic Guide's Query Tuning Section</i></b></p>    <br><p class="detailTblTxt3">This is a query tuning problem that needs to be addressed in detail using the information in the Performance Diagnostic Guide's Query Tuning section.<br></p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; manual query tuning can be easy or difficult depending on the query and application.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; generally query tuning actions will affect only a single query.  Of course this will depend on the ultimate actions taken and some of them can affect an entire instance.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Click on the Query Tuning tab, then skip to the Determine a Cause > Data Collection step.<br>
<br>
Other helpful documents are listed below:</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_1016.htm%23PFGRF006">SQL Tuning Overview </a></p>    <br><p class="detailTblTxt3"> How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=233112.1">Diagnosing Query Tuning Problems</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=67522.1">Diagnosing Why a Query is Not Using an Index</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Buffer cache is too small</i></b></p>    <br><p class="detailTblTxt3">A small buffer cache will cause more physical reads or, for a RAC database, additional block transfers than would otherwise be required.
</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">TKProf: <br>
<ul class="detailTblTxt3">
<li>Significant waits on <db file sequential read</i> waits , and/or for RAC, <i>global cache CR request</i></li>
<li>SQL statements perform 10 or fewer logical reads (query + current) per row per table per execution, meaning that the statement is reasonably tuned (i.e., if a query joins 2 tables and returns 10 rows, one would expect less than 10*2*3 = 60 logical reads per execution</li>
<li>Full table scans (in a RAC database) are NOT seen in the execution plan for a statement that is waiting on this event</li>
<li>The application is an OLTP type of application and in the overall section of the report,  physical reads ("disk") are equal or close to the number of logical reads (query + current).
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Manually Increase the size of the buffer cache using the <i>db cache size</i> parameter</i></b></p>    <br><p class="detailTblTxt3">Increase the size of the buffer cache and monitor the effects of the change.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; change an initialization parameter</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk. However, there must be sufficient memory on the machine to avoid memory shortage problems.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm#CNCPT007">Concepts: Oracle Memory Architecture</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fmemory.htm%23sthref485">Configuring and Using the Buffer Cache</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   10g+: Use automatic shared memory management (ASMM) </i></b></p>    <br><p class="detailTblTxt3">ASMM will seek to optimize the size of the buffer cache without human intervention.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; change an initialization parameter</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk. Be sure to set SGA_TARGET to a reasonable value.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm">Concepts: Memory Architecture</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm#CNCPT810">Concepts: Automatic Shared Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14231/create.htm#BABGCBHI">Admin: Using Automatic Shared Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#i30970">Performance Tuning: Configuring and Using the Shared Pool and Large Pool</a></p>    <br><p class="detailTblTxt3">Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=257643.1">Oracle Database 10g Automated SGA Memory Tuning</a></p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=295626.1">How To Use Automatic Shared Memory Management (ASMM) In Oracle10g</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=270935.1">Shared pool sizing in 10g</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   More lock manager processes are needed</i></b></p>    <br><p class="detailTblTxt3">The database may require more lock manager processes to meet the demands of the database.  When the lock managers are too busy, block transfers will take longer and cause waits for these blocks.
</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">TKProf: <br>
<ul class="detailTblTxt3">
<li>Significant waits on <i>global cache CR request</i></li>
<li>SQL statements perform 100 or fewer logical reads (query + current) per row per execution, meaning that the statement is reasonably tuned</li>
<li>Full table scans (in a RAC database) are not seen in the execution plan for a statement that is waiting on this event</li>
</ul>
OS data:<br>
<ul class="detailTblTxt3">
<li>The LMD process is very busy for the instance, possibly using as much as one CPU on a consistent basis</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Increase the number of lock manager processes </i></b></p>    <br><p class="detailTblTxt3">Increase the number of Lock Manager processes for the instance by altering the value of the init.ora parameter <i> _LM_DLMD_PROCS </i></p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; change an initialization parameter</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk. </p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=120201.1">TBD</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p><br> </td> </tr> </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="2">Commit Waits</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt">This wait class only comprises one wait event - wait for redo log write confirmation after a commit (that is, 'log file sync').  	</td>	</tr>	</table><br> <table width="100%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"> <tr><td width="100%" class="detailMainTxt"> <p><b>Note:</b> This list shows some common observations and causes but is not a complete list.  If you do not find a possible cause in this list, you can always open a service request with Oracle to investigate other possible causes.  Please see the section below called, "Open a Service Request with Oracle Support Services". </p> </td></tr> </table> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>Wait: log file sync</b></i></p>    <br><p class="detailTblTxt3">When a user session commits (or rolls back), the session's redo information must be flushed to the redo logfile by
the LGWR background process. This event shows the time that it takes for  the LGWR to complete the write and then post the requester. The server process performing the COMMIT or ROLLBACK waits under this event for the write to the redo log to complete.<br>
<br>
Wait class: Commit, typically foreground</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>TKProf: Overall summary for non-recursive and recursive statements shows significant amount of time for <i>log file sync</i> waits. </li>
<br>
<li>AWR or statspack: <i>log file sync</i> waits is among the top timed events</li>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Frequent commits by the application</i></b></p>    <br><p class="detailTblTxt3">The application is committing frequently (and possibly unnecessarily</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>Significant amount of the total time in TKProf is due to this wait event</li>
<li>In the AWR or Statspack report, the average wait time for <i>log file sync</i> is much higher than the average wait time for <i>log file parallel write</i> - meaning that most of the wait for log writer is NOT due to waiting for the redo to be written</li>
<br>
<li>In the AWR or Statspack report, the average <i>user commits</i> / <i>user call</i> is less than 30 - meaning that commits are happening frequently</li> 
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Reduce the rate of commits or rollbacks</i></b></p>    <br><p class="detailTblTxt3">Look into the application and determine if more rows can be processed per commit.  Sometimes a developer will allow the underlying language to "auto-commit" by default; this is suboptimal and should be controlled by the developer.<br>
<br>
If the ratio of rollbacks to commits is more than 10 percent, investigate if this is unexpected or can be avoided.  Rollback operations will cause the logwriter to flush redo and induce waits on <i>log file sync</i> waits just as commits would.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; this will require some work and coordination with developers to examine their code.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; however, the business needs must be well understood to commit at the right times.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=34592.1">WAITEVENT: "log file sync" Reference Note</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=34583.1">WAITEVENT: "log file parallel write" Reference Note</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Redolog file write performance problems</i></b></p>    <br><p class="detailTblTxt3">Logwriter is not able to write to the redo log files efficiently; writes are taking too long.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>Significant amount of the total time in TKProf is due to this wait event</li>
<br>
<li>In the AWR or Statspack report, the average wait time for <i>log file sync</i> is very similar to the average wait time for <i>log file parallel write</i> - meaning that most of the wait for log writer is  due to waiting for the redo to be written</li>
<li>The average time for the <i>log file parallel write</i> event is more than 20msec
<br>
<li>In the AWR or Statspack report, the average <i>user commits</i> / <i>user call</i> is more than 30 - meaning that commits are NOT happening frequently</li> 
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate redolog file write performance</i></b></p>    <br><p class="detailTblTxt3">Work with the system administrator to examine the filesystems where the redologs are located.  Look for other processes that may be writing to that same location or a capacity problem.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; this will require some work and coordination with system administrators to examine the filesystems.  The redolog files may need to be moved.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; may involve some downtime.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=34592.1">WAITEVENT: "log file sync" Reference Note</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=34583.1">WAITEVENT: "log file parallel write" Reference Note</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   CPU saturation</i></b></p>    <br><p class="detailTblTxt3">CPU saturation can induce certain wait events like latch contention, log file sync, or cluster-related events.  <br>
<br>
In some cases, a foreground process depends on a background process for an operation (e.g., a  foreground's commit waits for logwriter to flush redo to disk).  If the background process has to wait for CPU, then any dependent foreground processes will also wait.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">OS Data shows that CPU utilization is at or near 100% and the run queue size per CPU is greater than 4.  This condition should have been caught earlier in the diagnostic process when OS data was being analyzed.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate the reasons for CPU saturation</i></b></p>    <br><p class="detailTblTxt3">See this guide's "Issue Identification > Analysis > Verify Oracle OS Resource Usage" section for more details.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Determine which processes are using most of the CPU on the machine.  They could be Oracle processes (including more than one instance) or non-Oracle processes.  If they are Oracle processes, then you should have detected this already in a previous step and investigated the reasons for Oracle's CPU consumption (of course, better late than never).  Otherwise, you will need to find out the reason for the non-Oracle CPU consumption (outside of our scope).
<br>
You can use various OS tools and Oracle EM to investigate this.<br>
<br>
Oracle recommends using the "OS Watcher" utility to capture OS diagnostics because it offers an easy way to capture data and report OS data for several platforms.<br>
<br>
There are also commands available in Unix flavors that can help.  For example, use the <i><b>top</b></i> utility or the <i><b>ps</b></i> command, ps -ef -o pid,pcpu,comm | sort -k 2 (this will give you a sorted list of processes using CPU - look at the 2nd column, "% CPU").<br>
<br>
See the documents below for additional details.</p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id= 224176.1">How to use OS commands to diagnose Database Performance issues?</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=164768.1">Diagnosing High CPU Utilization</a></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=301137.1">OS Watcher User Guide</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://st-doc.us.oracle.com/10/102/em.102/b31949/host_3rdparty_management.htm#sthref1533">Enterprise Manager: Host Performance page</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p><br> </td> </tr> </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="3">Concurrency - Buffer Busy Waits</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt">Waits for miscellaneous internal database resources used to coordinate operations. 	</td>	</tr>	</table><br> <table width="100%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"> <tr><td width="100%" class="detailMainTxt"> <p><b>Note:</b> This list shows some common observations and causes but is not a complete list.  If you do not find a possible cause in this list, you can always open a service request with Oracle to investigate other possible causes.  Please see the section below called, "Open a Service Request with Oracle Support Services". </p> </td></tr> </table> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>Wait: Buffer busy waits</b></i></p>    <br><p class="detailTblTxt3"><i>Buffer busy waits </i> indicate that there are some buffers in the buffer cache that multiple processes are attempting to either access concurrently while its being read from disk or waiting for another session's block change to complete. In this case (<i>buffer busy wait > data block</i>),  the contention is on the actual block where the data is stored, and can be either a table or an index.<br>
<br>
Wait class: Concurrency, typically foreground</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>TKProf: 
<ul class="detailTblTxt3">
<li>Overall wait event summary for non-recursive and recursive statements shows significant amount of time for <i>buffer busy waits</i>.</li>
</ul>
<br>
<li>AWR or statspack: 
<ul class="detailTblTxt3">
<li>Oracle 9.2 or higher: <i>buffer busy waits</i> is among the top timed events</li>
</ul>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Suboptimal Segment Storage Configuration</i></b></p>    <br><p class="detailTblTxt3">Concurrent INSERTs with a suboptimal freelist configuration can lead to <i>buffer busy wait</i> contention as multiple sessions attempt to insert data into the same block (because it appears on the freelist to them).</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><br>
TKProf:
<ul class="detailTblTxt3">
<li>Use the TKProf reports sorted by elapsed execute time</li>
<li>Look at the top statements and determine if they are seeing buffer busy waits and are INSERT statements.</li>
</ul>
AWR or statspack reports:<br>
<ul class="detailTblTxt3">
<li><i>buffer busy wait</i> event is among the top ones</li>
<li>SQL with highest wait time (derive as elapsed time - cpu time) are INSERT statements</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Use ASSM or add additional freelists and/or freelist groups</i></b></p>    <br><p class="detailTblTxt3">Heavy INSERT activity by concurrent sessions can cause multiple sessions to attempt their insert into the same blocks because automatic segment space management (ASSM) is NOT used AND there is only a single freelist, too few process freelists, and/or no freelist groups.<br>
<br>
The best solution is to use ASSM since it is sometimes tricky to arrive at a correct freelist or freelist group setting.<br>
<br>
Adding process freelists will help remove contention as each process will map to separate blocks.  Freelists can be added at any time without rebuilding the table.<br>
<br>
Adding freelist groups will also remove contention by mapping processes to other freelists.  This is of greatest benefit in RAC environments where the freelist group block itself will be associated with an instance, but will still help in single instance environments as well.  The table must be rebuilt to change the freelist group setting.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; may require rebuilding the table.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Changing space attributes tables introduces some risk of performance degredation if not properly tested.  Testing is important.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/logical.htm#i13690">Concepts: Freelists</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/instance_tune.htm#sthref915">Performance Tuning: Buffer Busy Waits, Segment Header Contention</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14231/tspaces.htm#ADMIN10065">Admin Guide: Specifying Segment Space Management in Locally Managed Tablespaces</a></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=34405.1">WAITEVENT: "buffer busy waits" Reference Note</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Preallocate extents</i></b></p>    <br><p class="detailTblTxt3">Tables that undergo concurrent inserts will often suffer contention for the HW enqueue or buffer busy waits if their storage settings are not optimized.  One solution is to avoid the HW contention in the first place by preallocating extents.  This will avoid the need to dynamically allocate extents and hence avoid contention on the HW enqueue</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; involves changes to the tables storage clause.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Changing space attributes tables introduces some risk of performance degredation if not properly tested.  Testing is important.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10592/clauses001.htm#g1053419">Allocate Extent Clause</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10592/statements_3001.htm#i2133144">Allocating Extents: Example </a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Heavy insert activity affecting an index segment</i></b></p>    <br><p class="detailTblTxt3">Concurrent INSERTs or updates may see contention when a related index has a key that is constantly increasing (e.g., a key based on a sequence number)</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><br>
TKProf:
<ul class="detailTblTxt3">
<li>Use the TKProf reports sorted by elapsed execute time</li>
<li>Look at the top statements and determine if they are seeing buffer busy waits and are DML statements.</li>
<li>The raw trace shows the buffer busy wait's file (P1) and block (P2) values resolve to an index segment</li>
</ul>
AWR or statspack reports:<br>
<ul class="detailTblTxt3">
<li><i>buffer busy wait</i> event is among the top ones</li>
<li>SQL with highest wait time (derive as elapsed time - cpu time) are INSERT statements</li>
<li>9.2+ : the segments with the most buffer busy waits are indexes (as shown on the <i>Top Buffer Busy Waits per Segment</i> section</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Use reverse key indexes</i></b></p>    <br><p class="detailTblTxt3">Index leaf blocks may see contention due to key values that are increasing steadily (using a sequence) and concentrated in a leaf block on the "right-hand side" of the index.  Look at using <i>reverse key indexes</i> (if range scans aren't commonly used against the segment).<br>
<br>
A reverse key index will spread keys around evenly and avoid creating these hot leaf blocks.  However, the reverse key index will not be usable for index range scans, so care must be taken to ensure that access is normally done via equality predicates.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; will require rebuilding an index.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; some queries may run much slower because they will not be able to use an index for range scans and may resort to full table scans.  Determine if range scans are needed before implementing this.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/schema.htm#sthref998">Concepts: Reverse Key Indexes</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14200/statements_5010.htm#i2062403">SQL Reference: Create index syntax:</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/design.htm#sthref152">Performance Tuning Guide: Reverse Key Indexes</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Use hash partitioning to spread index values around</i></b></p>    <br><p class="detailTblTxt3">Hash partitions will randomly spread out the data and reduce contention on leaf blocks.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; requires rebuilding the table.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; no risky side effects.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/partconc.htm#i462869">Concepts: Overview of Hash Partitioning</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14231/partiti.htm#i1006255">When to Use Hash Partitioning</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/data_acc.htm#i21879">Performance Tuning Guide: Using Partitioned Indexes for Performance: </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14200/statements_5010.htm#sthref6642">SQL Ref: Create Index, Index Partitioning Clauses, GLOBAL PARTITION BY HASH:</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14200/statements_5010.htm#i2169259">Creating a Hash-Partitioned Global Index: Example</a></p>    <br><p class="detailTblTxt3">Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=125314.1">Boosting Performance by Hash and Composite Partitions</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Use natural keys instead of sequence numbers</i></b></p>    <br><p class="detailTblTxt3">Change the application to use a different key (i.e., a composite natural key) that does not increase monotonically.  Obviously, this kind of change may take some time to implement because it may require many changes to application as well as changes to the physical data model.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblHighBG">      <p align="center"><b>H</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">High effort; may require changes to the data model and application code.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk if implemented properly.  But, changes of this magnitude are risky if not designed or tested properly.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/design.htm#i28156">Performance Tuning: Serializing within Indexes</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Many concurrent SQL statements performing physical reads</i></b></p>    <br><p class="detailTblTxt3">Many concurrent physical reads against the same blocks will result in <i>buffer busy waits</i> as one session gets to do the actual physical read and the others will be blocked by the buffer busy wait event until the read completes.<br>
<br>
This is usually an indication that the SQL statement must be tuned.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><br>
TKProf:
<ul class="detailTblTxt3">
<li>Use the TKProf reports sorted by elapsed execute time</li>
<li>Look at the top statements and determine if they are seeing buffer busy waits and are SELECT statements or DDL with a SELECT subquery.</li>
<li>The SQL statement performs many physical reads (i.e., <i>disk</i> on the TKProf); you see events like <i>db file scattered reads</i> or <i>db file sequential reads</i> taking significant amounts of time</li>
</ul>
AWR or statspack reports:<br>
<ul class="detailTblTxt3">
<li><i>buffer busy wait</i> event is among the top ones</li>
<li>SQL with highest wait time (derive as elapsed time - cpu time) are SELECT statements</li>
<li>Events like <i>db file scattered reads</i> or <i>db file sequential reads</i> are prominent in the top events lists</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   10g+: Tune the query using the SQL Tuning Advisor</i></b></p>    <br><p class="detailTblTxt3">Oracle's SQL Tuning Advisor can help tune specific SQL statements quickly and easily if you are licensed to use the Enterprise Manager Tuning Pack.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; the SQL Tuning Advisor is easy to use and requires little user effort to tune a statement.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">The tuning action will generally be to create a statement profile.  The profile affects only a single statement.  Other recommendations may have wide ranging effects and should be tested thoroughly.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=262687.1 ">How to use the Sql Tuning Advisor</a></p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_tune.htm%23PFGRF028">Automatic SQL Tuning </a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14196%2Fmontune003.htm%23sthref784">Using Advisors to Optimize Database Performance</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_tune.htm%23sthref1144">Using SQL Tuning Advisor with Oracle Enterprise Manager</a></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fappdev.102%2Fb14258%2Fd_sqltun.htm%23sthref7584">SQL Tuning Advisor Subprograms </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/sql_tune.htm#CHDBIGDF">Using SQL Tuning Advisor APIs </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=271196.1">Automatic SQL Tuning - SQL Profiles</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Tune the query using the Performance Diagnostic Guide's Query Tuning Section</i></b></p>    <br><p class="detailTblTxt3">This is a query tuning problem that needs to be addressed in detail using the information in the Performance Diagnostic Guide's Query Tuning section.<br></p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; manual query tuning can be easy or difficult depending on the query and application.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; generally query tuning actions will affect only a single query.  Of course this will depend on the ultimate actions taken and some of them can affect an entire instance.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Click on the Query Tuning tab, then skip to the Determine a Cause > Data Collection step.<br>
<br>
Other helpful documents are listed below:</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_1016.htm%23PFGRF006">SQL Tuning Overview </a></p>    <br><p class="detailTblTxt3"> How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=233112.1">Diagnosing Query Tuning Problems</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=67522.1">Diagnosing Why a Query is Not Using an Index</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Many concurrent SQL statements performing physical reads and I/O performance is poor</i></b></p>    <br><p class="detailTblTxt3">Many concurrent physical reads against the same blocks will result in <i>buffer busy waits</i> as one session gets to do the actual physical read and the others will be blocked by the buffer busy wait event until the read completes.<br>
<br>
This is usually an indication that the SQL statement must be tuned.  The waits can be amplified greatly when physical reads are slow due to poor I/O subsystem performance.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><br>
TKProf:
<ul class="detailTblTxt3">
<li>Use the TKProf reports sorted by elapsed execute time</li>
<li>Look at the top statements and determine if they are seeing buffer busy waits and are SELECT statements or DDL with a SELECT subquery.</li>
<li>The SQL statement performs many physical reads (i.e., <i>disk</i> on the TKProf); you see events like <i>db file scattered read</i> or <i>db file sequential read</i> taking significant amounts of time</li>
<li>The average time for <i>db file scattered read</i> or <i>db file sequential read</i> is around 20 mSec or higher (derive from: total wait time / waits).</li>
</ul>
AWR or statspack reports:<br>
<ul class="detailTblTxt3">
<li><i>buffer busy wait</i> event is among the top ones</li>
<li>SQL with highest wait time (derive as elapsed time - cpu time) are SELECT statements</li>
<li>Events like <i>db file scattered reads</i> or <i>db file sequential reads</i> are prominent in the top events lists</li>
<li>The average time for <i>db file scattered read</i> or <i>db file sequential read</i> is around 20 mSec or higher.</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   10g+: Tune the query using the SQL Tuning Advisor</i></b></p>    <br><p class="detailTblTxt3">Oracle's SQL Tuning Advisor can help tune specific SQL statements quickly and easily if you are licensed to use the Enterprise Manager Tuning Pack.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; the SQL Tuning Advisor is easy to use and requires little user effort to tune a statement.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">The tuning action will generally be to create a statement profile.  The profile affects only a single statement.  Other recommendations may have wide ranging effects and should be tested thoroughly.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=262687.1 ">How to use the Sql Tuning Advisor</a></p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_tune.htm%23PFGRF028">Automatic SQL Tuning </a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14196%2Fmontune003.htm%23sthref784">Using Advisors to Optimize Database Performance</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_tune.htm%23sthref1144">Using SQL Tuning Advisor with Oracle Enterprise Manager</a></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fappdev.102%2Fb14258%2Fd_sqltun.htm%23sthref7584">SQL Tuning Advisor Subprograms </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/sql_tune.htm#CHDBIGDF">Using SQL Tuning Advisor APIs </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=271196.1">Automatic SQL Tuning - SQL Profiles</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Tune the query using the Performance Diagnostic Guide's Query Tuning Section</i></b></p>    <br><p class="detailTblTxt3">This is a query tuning problem that needs to be addressed in detail using the information in the Performance Diagnostic Guide's Query Tuning section.<br></p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; manual query tuning can be easy or difficult depending on the query and application.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; generally query tuning actions will affect only a single query.  Of course this will depend on the ultimate actions taken and some of them can affect an entire instance.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Click on the Query Tuning tab, then skip to the Determine a Cause > Data Collection step.<br>
<br>
Other helpful documents are listed below:</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_1016.htm%23PFGRF006">SQL Tuning Overview </a></p>    <br><p class="detailTblTxt3"> How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=233112.1">Diagnosing Query Tuning Problems</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=67522.1">Diagnosing Why a Query is Not Using an Index</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate possible I/O performance problems</i></b></p>    <br><p class="detailTblTxt3">To investigate further you must:
<ul class="detailTblTxt3">
<li>Find out which file numbers are causing the highest average waits and then determine which filesystem contains the file</li>
<li>Determine why the filesystems are performing poorly.  Some common causes are:
<ul class="detailTblTxt3">
<li>"hot filesystems" - too many active files on the same filesystem exhausting the I/O bandwidth</li>
<li>hardware problem</li>
<li>In Parallel Execution (PX) is being used, determine if the I/O subsystem is saturated by having too many slaves in use.</li>
</ul>
</ul>
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; depends on the skill level of the system administrators.  Correcting a problem can involve major effort to move files to a new destination.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; hardware changes and structural database changes carry risk that may require a restore.  Backups should be taken and restoring procedures should be tested before attempting changes.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/iodesign.htm#g37279">I/O Configuration and Design</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/instance_tune.htm#sthref924">Wait Event: db file scattered read</a></p>    <br><p class="detailTblTxt3"> Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=223117.1">Tuning I/O-related waits</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Additional Diagnostics Needed</i></b></p>    <br><p class="detailTblTxt3">Additional diagnostics and analysis are needed to find a solution.  </p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">There is insufficient information to suggest a specific cause.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Additional Diagnostics Needed</i></b></p>    <br><p class="detailTblTxt3">Additional diagnostics and analysis are needed to find a solution.  Please file a Service Request to obtain assistance.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Diagnostic efforts vary depending on the problem.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Risks involved in collecting diagnostics vary depending on the kind of diagnostics being obtained.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Please file an SR for more details on what should be done next.</p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>wait: read by other session</b></i></p>    <br><p class="detailTblTxt3">A session wants to pin a block that is currently being read from disk into the buffer cache by another session.</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3">TKProf or AWR
<ul class="detailTblTxt3">
<li>Significant waits for the <i>read by other session</i> event</li>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   SQL tuning required; no I/O problems</i></b></p>    <br><p class="detailTblTxt3">If performance time is dominated by this wait event, then SQL tuning may reduce the number of reads and speed up queries.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>Significant amount of the total time in TKProf is due to this wait event</li>
<li>The average time for this event (total time / wait count) should be less than 20 mSec to discount an I/O problem.</li></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   10g+: Tune the query using the SQL Tuning Advisor</i></b></p>    <br><p class="detailTblTxt3">Oracle's SQL Tuning Advisor can help tune specific SQL statements quickly and easily if you are licensed to use the Enterprise Manager Tuning Pack.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; the SQL Tuning Advisor is easy to use and requires little user effort to tune a statement.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">The tuning action will generally be to create a statement profile.  The profile affects only a single statement.  Other recommendations may have wide ranging effects and should be tested thoroughly.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=262687.1 ">How to use the Sql Tuning Advisor</a></p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_tune.htm%23PFGRF028">Automatic SQL Tuning </a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14196%2Fmontune003.htm%23sthref784">Using Advisors to Optimize Database Performance</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_tune.htm%23sthref1144">Using SQL Tuning Advisor with Oracle Enterprise Manager</a></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fappdev.102%2Fb14258%2Fd_sqltun.htm%23sthref7584">SQL Tuning Advisor Subprograms </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/sql_tune.htm#CHDBIGDF">Using SQL Tuning Advisor APIs </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=271196.1">Automatic SQL Tuning - SQL Profiles</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Tune the query using the Performance Diagnostic Guide's Query Tuning Section</i></b></p>    <br><p class="detailTblTxt3">This is a query tuning problem that needs to be addressed in detail using the information in the Performance Diagnostic Guide's Query Tuning section.<br></p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; manual query tuning can be easy or difficult depending on the query and application.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; generally query tuning actions will affect only a single query.  Of course this will depend on the ultimate actions taken and some of them can affect an entire instance.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Click on the Query Tuning tab, then skip to the Determine a Cause > Data Collection step.<br>
<br>
Other helpful documents are listed below:</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_1016.htm%23PFGRF006">SQL Tuning Overview </a></p>    <br><p class="detailTblTxt3"> How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=233112.1">Diagnosing Query Tuning Problems</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=67522.1">Diagnosing Why a Query is Not Using an Index</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   I/O performance problems</i></b></p>    <br><p class="detailTblTxt3">The average time for a an I/O is exceeds typical standards for I/O performance (less than 20 mSec).  </p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>Significant amount of the total time in TKProf is due to this wait event</li>
<li>The average time for this event (total time / wait count) is more than 20 mSec</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate possible I/O performance problems</i></b></p>    <br><p class="detailTblTxt3">To investigate further you must:
<ul class="detailTblTxt3">
<li>Find out which file numbers are causing the highest average waits and then determine which filesystem contains the file</li>
<li>Determine why the filesystems are performing poorly.  Some common causes are:
<ul class="detailTblTxt3">
<li>"hot filesystems" - too many active files on the same filesystem exhausting the I/O bandwidth</li>
<li>hardware problem</li>
<li>In Parallel Execution (PX) is being used, determine if the I/O subsystem is saturated by having too many slaves in use.</li>
</ul>
</ul>
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; depends on the skill level of the system administrators.  Correcting a problem can involve major effort to move files to a new destination.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; hardware changes and structural database changes carry risk that may require a restore.  Backups should be taken and restoring procedures should be tested before attempting changes.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/iodesign.htm#g37279">I/O Configuration and Design</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/instance_tune.htm#sthref924">Wait Event: db file scattered read</a></p>    <br><p class="detailTblTxt3"> Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=223117.1">Tuning I/O-related waits</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Buffer cache is too small</i></b></p>    <br><p class="detailTblTxt3">A small buffer cache will cause more physical reads or, for a RAC database, additional block transfers than would otherwise be required.
</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">TKProf: <br>
<ul class="detailTblTxt3">
<li>Significant waits on <db file sequential read</i> waits , and/or for RAC, <i>global cache CR request</i></li>
<li>SQL statements perform 10 or fewer logical reads (query + current) per row per table per execution, meaning that the statement is reasonably tuned (i.e., if a query joins 2 tables and returns 10 rows, one would expect less than 10*2*3 = 60 logical reads per execution</li>
<li>Full table scans (in a RAC database) are NOT seen in the execution plan for a statement that is waiting on this event</li>
<li>The application is an OLTP type of application and in the overall section of the report,  physical reads ("disk") are equal or close to the number of logical reads (query + current).
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Manually Increase the size of the buffer cache using the <i>db cache size</i> parameter</i></b></p>    <br><p class="detailTblTxt3">Increase the size of the buffer cache and monitor the effects of the change.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; change an initialization parameter</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk. However, there must be sufficient memory on the machine to avoid memory shortage problems.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm#CNCPT007">Concepts: Oracle Memory Architecture</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fmemory.htm%23sthref485">Configuring and Using the Buffer Cache</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   10g+: Use automatic shared memory management (ASMM) </i></b></p>    <br><p class="detailTblTxt3">ASMM will seek to optimize the size of the buffer cache without human intervention.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; change an initialization parameter</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk. Be sure to set SGA_TARGET to a reasonable value.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm">Concepts: Memory Architecture</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm#CNCPT810">Concepts: Automatic Shared Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14231/create.htm#BABGCBHI">Admin: Using Automatic Shared Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#i30970">Performance Tuning: Configuring and Using the Shared Pool and Large Pool</a></p>    <br><p class="detailTblTxt3">Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=257643.1">Oracle Database 10g Automated SGA Memory Tuning</a></p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=295626.1">How To Use Automatic Shared Memory Management (ASMM) In Oracle10g</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=270935.1">Shared pool sizing in 10g</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Additional Diagnostics Needed</i></b></p>    <br><p class="detailTblTxt3">Additional diagnostics and analysis are needed to find a solution.  </p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">There is insufficient information to suggest a specific cause.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Additional Diagnostics Needed</i></b></p>    <br><p class="detailTblTxt3">Additional diagnostics and analysis are needed to find a solution.  Please file a Service Request to obtain assistance.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Diagnostic efforts vary depending on the problem.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Risks involved in collecting diagnostics vary depending on the kind of diagnostics being obtained.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Please file an SR for more details on what should be done next.</p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p><br> </td> </tr> </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="4">Concurrency - Enqueues / Locks / Pins</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt">Waits related to enqueues or locks; these usually result from user application code (for example, lock waits caused by row level locking or explicit lock commands).	</td>	</tr>	</table><br> <table width="100%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"> <tr><td width="100%" class="detailMainTxt"> <p><b>Note:</b> This list shows some common observations and causes but is not a complete list.  If you do not find a possible cause in this list, you can always open a service request with Oracle to investigate other possible causes.  Please see the section below called, "Open a Service Request with Oracle Support Services". </p> </td></tr> </table> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b> 9.2 or prior: wait: enqueue, type HW <br>
10g+: wait: enq: HW - contention
 </b></i></p>    <br><p class="detailTblTxt3">The HW enqueue is used to serialise the allocation of space above the highwater mark in an object.  This lock is acquired when a segment's high water mark is moved, which typically is the case during heavy inserts.</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3">Statspack shows significant waits (more than 10%) for "enqueue" and the "Enqueue Activities" section show most of the enqueue wait time is for the "HW" enqueue.<br>
<br>
AWR  shows the wait event, "enq: HW - Contention" in the "Top 5 Timed Events" section and it is more than 10% of total DBTime.</p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Suboptimal Segment Storage Configuration</i></b></p>    <br><p class="detailTblTxt3">Concurrent INSERTs with a suboptimal freelist configuration can lead to <i>buffer busy wait</i> contention as multiple sessions attempt to insert data into the same block (because it appears on the freelist to them).</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><br>
TKProf:
<ul class="detailTblTxt3">
<li>Use the TKProf reports sorted by elapsed execute time</li>
<li>Look at the top statements and determine if they are seeing buffer busy waits and are INSERT statements.</li>
</ul>
AWR or statspack reports:<br>
<ul class="detailTblTxt3">
<li><i>buffer busy wait</i> event is among the top ones</li>
<li>SQL with highest wait time (derive as elapsed time - cpu time) are INSERT statements</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Use ASSM or add additional freelists and/or freelist groups</i></b></p>    <br><p class="detailTblTxt3">Heavy INSERT activity by concurrent sessions can cause multiple sessions to attempt their insert into the same blocks because automatic segment space management (ASSM) is NOT used AND there is only a single freelist, too few process freelists, and/or no freelist groups.<br>
<br>
The best solution is to use ASSM since it is sometimes tricky to arrive at a correct freelist or freelist group setting.<br>
<br>
Adding process freelists will help remove contention as each process will map to separate blocks.  Freelists can be added at any time without rebuilding the table.<br>
<br>
Adding freelist groups will also remove contention by mapping processes to other freelists.  This is of greatest benefit in RAC environments where the freelist group block itself will be associated with an instance, but will still help in single instance environments as well.  The table must be rebuilt to change the freelist group setting.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; may require rebuilding the table.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Changing space attributes tables introduces some risk of performance degredation if not properly tested.  Testing is important.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/logical.htm#i13690">Concepts: Freelists</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/instance_tune.htm#sthref915">Performance Tuning: Buffer Busy Waits, Segment Header Contention</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14231/tspaces.htm#ADMIN10065">Admin Guide: Specifying Segment Space Management in Locally Managed Tablespaces</a></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=34405.1">WAITEVENT: "buffer busy waits" Reference Note</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Preallocate extents</i></b></p>    <br><p class="detailTblTxt3">Tables that undergo concurrent inserts will often suffer contention for the HW enqueue or buffer busy waits if their storage settings are not optimized.  One solution is to avoid the HW contention in the first place by preallocating extents.  This will avoid the need to dynamically allocate extents and hence avoid contention on the HW enqueue</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; involves changes to the tables storage clause.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Changing space attributes tables introduces some risk of performance degredation if not properly tested.  Testing is important.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10592/clauses001.htm#g1053419">Allocate Extent Clause</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10592/statements_3001.htm#i2133144">Allocating Extents: Example </a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   enq: HW - contention: Deeper investigation needed.</i></b></p>    <br><p class="detailTblTxt3">If none of the other causes are likely, then additional diagnostics are needed for this problem.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">There is insufficient information to suggest a cause.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Additional HW Enqueue Diagnostics Needed</i></b></p>    <br><p class="detailTblTxt3">Additional diagnostics and analysis are needed to find a solution.  Please review the following articles for more information or file a Service Request to obtain assistance.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Diagnostic efforts vary depending on the problem.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Risks involved in collecting diagnostics vary depending on the kind of diagnostics being obtained.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=419348.1">How To Analyze the Wait Statistic: 'enq: HW - contention'</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=740075.1">'enq HW - contention' For Busy LOB Segment'</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=846562.1">Troubleshooting Guide (TSG) - Large Objects (LOBs)'</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>10g+: wait: enq: RO - fast object reuse
 </b></i></p>    <br><p class="detailTblTxt3">The RO (Reuse Object) enqueue is used to manage the process of checkpointing dirty blocks belonging to an object that is being dropped.  This is needed to guarantee proper recovery.</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3">AWR  shows the wait event, "enq: RO - fast object reuse" in the "Top 5 Timed Events" section and it is more than 10% of total DBTime.</p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   enq: RO- fast object reuse: Deeper investigation needed.</i></b></p>    <br><p class="detailTblTxt3">If none of the other causes are likely, then additional diagnostics are needed for this problem.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">There is insufficient information to suggest a cause.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Additional RO Enqueue Diagnostics Needed</i></b></p>    <br><p class="detailTblTxt3">Additional diagnostics and analysis are needed to find a solution.  Please review the following articles for more information or file a Service Request to obtain assistance.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Diagnostic efforts vary depending on the problem.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Risks involved in collecting diagnostics vary depending on the kind of diagnostics being obtained.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=6776107.8">TRUNCATE of highly partitioned table can be slow</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=785232.1">CKPT causes another process to wait too long for 'enq: RO - fast object reuse'</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=762085.1">'enq: RO - fast object reuse' contention when gathering schema/table statistics in </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=787672.1">Apply Servers Waiting on RO Enqueue</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=5566439.8">Bug 5566439 - Dropping a partitioned table is slow ('enq: RO - fast object reuse' </a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>9.2 or prior:  wait:  enqueue, type TM <br>
10g+: wait: enq: TM - contention</b></i></p>    <br><p class="detailTblTxt3">This could be for various reasons and is identified in pre-10g versions as waits for <i>enqueue</i> for the TM enqueue.<br>
In 10g, the wait is <i>enq: TM - contention</i>
<br>
Wait class: Concurrency, typically foreground</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>TKProf: 
<ul class="detailTblTxt3">
<li>Overall wait event summary for non-recursive and recursive statements shows significant amount of time for <i>enqueue</i> waits for TM enqueue or <i>enq:TM - contention</i> waits.</li>
<li>In the raw 10046 trace file, most wait's P1 field decodes to TM</li>
</ul>
<br>
<li>AWR or statspack: 
<ul class="detailTblTxt3">
<li>pre-10g: <i>enqueue</i> waits; <i>Enqueue Activities</i> show most waits for TM enqueue</li>
<li>10g: <i>enq:TM - contention</i> is among the top timed events</li>
</ul>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Foreign key columns missing an index</i></b></p>    <br><p class="detailTblTxt3">Foreign key columns should be indexed to avoid locking issues with the parent or child tables.  The exact behavior varies by version but in all versions, Oracle will use indexes to avoid locks or use a more permissive lock mode.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">TKProf: <br>
<ul class="detailTblTxt3">
<li>Lock wait is for TM enqueue, generally in mode 3 or 4</li>
<li>Statement involves an update to a parent or child table that has an FK constraint on a column being changed</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Create indexes on the child table's foreign key columns</i></b></p>    <br><p class="detailTblTxt3">An index on a foreign key column will permit Oracle to either avoid or minimize lock waits when rows in the parent or child table are changed.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; requires creation of an index.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/data_int.htm#sthref3104">Concepts (10gR2): No Index on the Foreign Key</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B10501_01/server.920/a96524/c22integ.htm#8581">Concepts (9iR2): No Index on the Foreign Key</a></p>    <br><p class="detailTblTxt3">Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=33453.1">Referential Integrity and Locking</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   ANALYZE INDEX is blocking DML statements</i></b></p>    <br><p class="detailTblTxt3">An index is being analyzed using the ANALYZE INDEX <index name> VALIDATE STRUCTURE command while a DML operation on the underlying table is being attempted (requiring a TM lock to be placed).</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">The ANALYZE INDEX command acquires a TM enqueue in share mode on the underlying table; this will block other sessions when they attempt to place a TM lock that is incompatible with a share-mode lock.<br>
<br>
The following query shows the command type for the session currently blocking another session with the TM enqueue:<br>
<pre>
select s.command 
from v$lock l, v$session s 
where l.sid = s.sid  
and l.block = 1 
and l.type='TM'
</pre>
If the command type is 63 (versions 9.2 - 11.x), then an analyze index command is responsible for the blocking.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Run the ANALYZE INDEX command during a maintenance window or quiet time</i></b></p>    <br><p class="detailTblTxt3">There is no workaround such as an "ONLINE" option for the ANALYZE INDEX VALIDATE STRUCTURE command.  You will simply need to avoid the contention by scheduling the command when there is no contention likely.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Depends on the availability requirements of the system; no extra effort is involved - just rescheduling.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; the analyze index command may be interrupted if necessary. The index statistics that it populates do not directly affect execution plans.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Not Applicable - solution is trivial.</p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Parallel DML Being Used While Other DML Performed on Same Objects</i></b></p>    <br><p class="detailTblTxt3">Parallel DML will acquire TM enqueues on the partitions involved (share mode) as well as the entire table (row exclusive).  No other DML against affected partitions will be allowed until the PDML transaction completes.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">This cause is likely if there are:<br>
	<ul>
	<li>waits on the TM enqueue</li>
	<li>sessions waiting are either attempting to perform PDML or are waiting for another session performing PDML</li>
	</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Schedule the PDML to occur during a quiet time</i></b></p>    <br><p class="detailTblTxt3">Schedule the PDML activity when the system is quiet to avoid impacting users.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Depends on the availability requirements of the system; no extra effort is involved - just rescheduling.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; some contention is possible if the time period was not quiet enough</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">N/A</p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Use a custom parallel DML script</i></b></p>    <br><p class="detailTblTxt3">Sometimes its possible to avoid contention by controlling which partitions are going to concurrently receive DML through individual sessions rather than a single PDML command.  This involves splitting the workload in some way and performing the DML across several sessions.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblHighBG">      <p align="center"><b>H</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">It could take some time to split the workload properly and script the job to run across sessions.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Contention can be stopped by stopping the jobs.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">N/A</p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>9.2 or prior: Wait: "enqueue"; TX Contention, Mode 4</b></i></p>    <br><p class="detailTblTxt3"><i>TX enqueue contention in mode 4</i> (share mode) may be due to a variety of causes.  They are not due to specific row locks but for operations related to transaction management like: <br>
<ul class="detailTblTxt3">
<li>Lack of ITLs in a block</li>
<li>Foreign key constraints without an index on a child table's key column</li>
<li>Index block splits</li>
</ul>
<br>
Wait class: Concurrency, typically foreground</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>TKProf: 
<ul class="detailTblTxt3">
<li>Overall wait event summary for non-recursive and recursive statements shows significant amount of time for the <i>enqueue</i> event</li>
<li>In the raw 10046 trace file, most wait's P1 field decodes to type TX, mode 4</li>
</ul>
<br>
<li>AWR or statspack: 
<ul class="detailTblTxt3">
<li>Oracle 9.2 or prior: <i>enqueue</i> is among the top timed events</li>
<li><i>Enqueue Activities</i> section shows that TX enqueues account for a significant amount of the enqueue times</li>
<li>Its not possible to know the modes requested without looking at the raw 10046 trace file or by looking at V$SESSION_WAIT, V$LOCK, or similar during the wait.</li>
</ul>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Insufficient ITLs in a block</i></b></p>    <br><p class="detailTblTxt3">Waits for the TX enqueue in mode 4 can occur if the session is waiting for an ITL (interested transaction list) slot in a block. This happens when the session wants to lock a row in the block but one or more other sessions have rows locked in the same block, and there is no free ITL slot in the block. Usually, Oracle dynamically adds another ITL slot. This may not be possible if there is insufficient free space in the block to add an ITL. If so, the session waits for a slot with a TX enqueue in mode 4.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><b>Prior to 9.2.x:</b> <br>
In versions prior to 9.2.x, it is difficult to pinpoint an ITL wait exactly.  Consider this justified if you have examined other causes for TX, mode 4 waits and none are justifiable.<br>
<br>
<b>9.2.x</b>:<br>
Using statspack snapshots taken at level 7, look in the segment statistics section to see which segments have the highest ITL waits (e.g., <i>Segments by ITL Waits</i>).  If these are a significant portion of the TX enqueue waits (see the <i>Enqueue Activities</i> section), then this cause is justified.<br>
<br>
In 10g, the wait event itself tells you this is an ITL wait, so it is justified from the wait event.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Increase the table's <i>INITRANS</I> setting </i></b></p>    <br><p class="detailTblTxt3">Increase the table's <i>INITRANS</I> setting to account for the number of concurrent sessions changing an individual  block.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; may require rebuilding the table.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; no risky side effects except if INITRANS is set too large and the block size is small (this will waste a lot of block space).</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14200/clauses007.htm#g1058547">SQL Ref: INITRANS </a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Index contention due to block splits</i></b></p>    <br><p class="detailTblTxt3">This wait can occur when a transaction is inserting a row in an index and has to wait for the end of an index block split being done by another transaction.  In this case the session is waiting for the TX enqueue in mode 4 (share).</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">To identify which segment is involved:
<ul class="detailTblTxt3"><li>Look in the TKProf of one or more sessions that experience the most of this kind of wait. </li>
<li>Find the statement that waited the longest amount of time on the event with long TX, mode 4 waits.  This is generally an insert statement. </li>
<li>Examine the statement to find the indexes involved. </li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Use reverse key indexes</i></b></p>    <br><p class="detailTblTxt3">Index leaf blocks may see contention due to key values that are increasing steadily (using a sequence) and concentrated in a leaf block on the "right-hand side" of the index.  Look at using <i>reverse key indexes</i> (if range scans aren't commonly used against the segment).<br>
<br>
A reverse key index will spread keys around evenly and avoid creating these hot leaf blocks.  However, the reverse key index will not be usable for index range scans, so care must be taken to ensure that access is normally done via equality predicates.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; will require rebuilding an index.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; some queries may run much slower because they will not be able to use an index for range scans and may resort to full table scans.  Determine if range scans are needed before implementing this.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/schema.htm#sthref998">Concepts: Reverse Key Indexes</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14200/statements_5010.htm#i2062403">SQL Reference: Create index syntax:</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/design.htm#sthref152">Performance Tuning Guide: Reverse Key Indexes</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Use hash partitioning to spread index values around</i></b></p>    <br><p class="detailTblTxt3">Hash partitions will randomly spread out the data and reduce contention on leaf blocks.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; requires rebuilding the table.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; no risky side effects.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/partconc.htm#i462869">Concepts: Overview of Hash Partitioning</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14231/partiti.htm#i1006255">When to Use Hash Partitioning</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/data_acc.htm#i21879">Performance Tuning Guide: Using Partitioned Indexes for Performance: </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14200/statements_5010.htm#sthref6642">SQL Ref: Create Index, Index Partitioning Clauses, GLOBAL PARTITION BY HASH:</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14200/statements_5010.htm#i2169259">Creating a Hash-Partitioned Global Index: Example</a></p>    <br><p class="detailTblTxt3">Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=125314.1">Boosting Performance by Hash and Composite Partitions</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Use natural keys instead of sequence numbers</i></b></p>    <br><p class="detailTblTxt3">Change the application to use a different key (i.e., a composite natural key) that does not increase monotonically.  Obviously, this kind of change may take some time to implement because it may require many changes to application as well as changes to the physical data model.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblHighBG">      <p align="center"><b>H</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">High effort; may require changes to the data model and application code.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk if implemented properly.  But, changes of this magnitude are risky if not designed or tested properly.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/design.htm#i28156">Performance Tuning: Serializing within Indexes</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>9.2 or prior: Wait: "enqueue"; TX Contention, Mode 6</b></i></p>    <br><p class="detailTblTxt3"><i>TX enqueue contention in mode 6</i> (exclusive mode) usually occurs when one session is updating or deleting a row, while another session wishes to update or delete the same row. <br>
<br>
Wait class: Concurrency, typically foreground</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>TKProf: 
<ul class="detailTblTxt3">
<li>Overall wait event summary for non-recursive and recursive statements shows significant amount of time for <i>enqueue</i> waits.</li>
<li>In the raw 10046 trace file, most wait's P1 field decodes to TX in mode 6</li>
</ul>
<br>
<li>AWR or statspack: 
<ul class="detailTblTxt3">
<li>Oracle 9.2 or prior: <i>enqueue</i> is among the top timed events</li>
<li><i>Enqueue Activities</i> section shows that TX enqueues account for a significant amount of the enqueue times</li>
<li>Its not possible to know the modes requested</li>
</ul>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Waiting for a row level lock due to faulty application design</i></b></p>    <br><p class="detailTblTxt3">Flaws in application design are often the reason for locks being held for a long time.  A couple of scenarios to illustrate this are:<br>
<br>
<b>1)</b> A user navigates to a certain row on a page and makes a change without committing it.  The user then leaves the page for a time while the row is locked.  If another user wants to update the same row, he or she will have to wait.  This type of situation can be detected by identifying the blocking session (either through V$LOCK or V$SESSION.BLOCKING_SESSION in 10g) and finding out how long it has been idle using the column V$SESSION.LAST_CALL_ET.<br>
<br>
<b> 2)</b> The application starts a transaction and locks or updates rows then executes one or more long running queries before it commits the changes.  This has the effect of holding the row locks a long time; the solution is to tune the SQL in between the row lock and the final commit.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>Use the utllockt.sql script to identify locking problems. Focus on locks where the lock type is TX and LMode is 6 (Exclusive) and check if locks are being held for a long time.</li>
<li>Trace the lock HOLDER shown in the output of the utllockt.sql script using the 10046 event to see what its doing</li>
<li>Look for long running queries that cause row locks to be held a long time or other problems in the application</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   SELECT FOR UPDATE locks too many rows</i></b></p>    <br><p class="detailTblTxt3">Sometimes a "pessimistic" locking strategy is implemented with SELECT FOR UPDATE statements that are missing predicates and are too "greedy" with their locking.  Examine these statements to see if they are locking more rows than they actually need to lock.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; requires access and examination of application code.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk if implemented properly.  But, changes of this magnitude are risky if not designed or tested properly.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">If the locking situation is in progress (not at some point in the past), the following steps may help identify the reason for it:

<ol>
<li>Identify the session holding the TX enqueue that is being waited on.  You can use <i>utllockt.sql</i> (see Note ID 166534.1).</li>
<li>Look for recent cursors that the session has executed and are still open by querying V$OPEN_CURSOR for the session identified in step 1.  For example:<br>
<pre>
SELECT sql_text FROM v$open_cursor WHERE sid = 1234</pre></li>
<li>See if any cursors involve FOR UPDATE, UPDATE, or DELETE</li>
<li>Examine these cursors to see if they are selecting too many rows</li>
<li>Change the application to lock fewer rows at time.  Sometimes this may require splitting up the work into a SELECT statement that finds candidate rows to lock and then a SELECT FOR UPDATE to lock an individual row.  There are many ways to implement this kind of change - it all depends on the application.</li>
</ol>

Sometimes, the cursor that locked the rows is no longer open and other cursors have executed since then.  In these cases it is difficult to find the exact cause of the blocking without looking at the application in depth.  One clue that may help is knowing the SQL for the <i>waiting</i> session and then examining the application code for other places and situations where the tables in the SQL statement may be locked.  You can find the SQL and exact ROWID being waited on by issuing the following query:<br>
<pre>
select s.sid, s.serial#, s.username, s.module, s.ROW_WAIT_OBJ# object_id,
 dbms_rowid.rowid_create(1, s.row_wait_obj#, s.row_wait_file#, 
 s.row_wait_block#, s.row_wait_row#) my_rowid
 s.sql_hash_value, s.sql_address, sq.SQL_TEXT,
 from v$session_wait sw, v$session s, v$sql sq, v$lock l
 where sw.event = 'enqueue'
 and sw.sid = s.sid
 and l.type = 'TX' and l.request = 6
 and l.sid = s.sid
 and s.sql_hash_value = sq.hash_value and s.sql_address = sq.address
</pre>
Note: "object_id" can be used to query DBA_OBJECTS.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/consist.htm">Concepts: Data Concurrency and Consistency</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/consist.htm#i5704">How Oracle Locks Data</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/consist.htm#sthref2071">Concepts: Row Locks (TX)</a></p>    <br><p class="detailTblTxt3"> Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=102925.1">Tracing sessions: waiting on an enqueue</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62354.1">TX Transaction locks - Example wait scenarios</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=197057.1">TX Lock "Transaction Enqueue"</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Long running statement while locks are held</i></b></p>    <br><p class="detailTblTxt3">A long running statement may delay the time between a transaction starts (via some DML) and commits.  This statement may need to be tuned.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; requires access and examination of application code.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk if implemented properly.  But, changes of this magnitude are risky if not designed or tested properly.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">If the locking situation is in progress (not at some point in the past), the following steps may help identify the reason for it:

<ol>
<li>Identify the session holding the TX enqueue that is being waited on.  You can use <i>utllockt.sql</i> (see Note ID 166534.1).</li>
<li>For the session identified in step 1 (lock holder), check if it is currently executing SQL.  For example, assuming the session ID is 12:<br>
<pre>
SELECT s.sid, s.status, sq.sql_text
FROM v$session s, v$sql sq
WHERE s.sid = 12
and s.status = 'ACTIVE'
and s.sql_hash_value = sq.hash_value
and s.sql_address = sq.address
</pre></li>
<li>Investigate the performance of this cursor.  At this point, the problem becomes a query tuning problem.  You can use this guide for help or the SQL Tuning Advisor (10g or higher with EM Tuning Pack license).</li>
<li>Tune the query and evaluate whether the locking problem has been resolved.  If it hasn't been resolved, examine the application in more detail to see if the application should be changed.</li>
</ol><br>
See the documents below for more information.</p>    <br><p class="detailTblTxt3">10g+: SQL Tuning Advisor</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=262687.1 ">How to use the Sql Tuning Advisor</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_tune.htm%23PFGRF028">Automatic SQL Tuning </a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14196%2Fmontune003.htm%23sthref784">Using Advisors to Optimize Database Performance</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_tune.htm%23sthref1144">Using SQL Tuning Advisor with Oracle Enterprise Manager</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fappdev.102%2Fb14258%2Fd_sqltun.htm%23sthref7584">SQL Tuning Advisor Subprograms </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/sql_tune.htm#CHDBIGDF">Using SQL Tuning Advisor APIs </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=271196.1">Automatic SQL Tuning - SQL Profiles</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=120201.1">TBD</a></p>    <br><p class="detailTblTxt3">Manual Tuning</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_1016.htm%23PFGRF006">SQL Tuning Overview </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=233112.1">Diagnosing Query Tuning Problems</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=67522.1">Diagnosing Why a Query is Not Using an Index</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>10g+: Wait: enq - TX row lock contention</b></i></p>    <br><p class="detailTblTxt3">In 10g, <i>enq: TX -  row lock contention </i> in mode 6 (exclusive mode) usually occurs when one session is updating or deleting a row, while another session wishes to update or delete the same row. <br>
<br>
Wait class: Concurrency, typically foreground</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>TKProf: 
<ul class="detailTblTxt3">
<li>Overall wait event summary for non-recursive and recursive statements shows significant amount of time for <i>enq: TX row lock contention</i> waits.</li>
<li>optional: In the raw 10046 trace file, most wait's P1 field decodes to TX in mode 6</li>
</ul>
<br>
<li>AWR or statspack: 
<ul class="detailTblTxt3">
<li><i>enq: TX - row lock contention</i> is among the top timed events</li>
</ul>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Waiting for a row level lock due to faulty application design</i></b></p>    <br><p class="detailTblTxt3">Flaws in application design are often the reason for locks being held for a long time.  A couple of scenarios to illustrate this are:<br>
<br>
<b>1)</b> A user navigates to a certain row on a page and makes a change without committing it.  The user then leaves the page for a time while the row is locked.  If another user wants to update the same row, he or she will have to wait.  This type of situation can be detected by identifying the blocking session (either through V$LOCK or V$SESSION.BLOCKING_SESSION in 10g) and finding out how long it has been idle using the column V$SESSION.LAST_CALL_ET.<br>
<br>
<b> 2)</b> The application starts a transaction and locks or updates rows then executes one or more long running queries before it commits the changes.  This has the effect of holding the row locks a long time; the solution is to tune the SQL in between the row lock and the final commit.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>Use the utllockt.sql script to identify locking problems. Focus on locks where the lock type is TX and LMode is 6 (Exclusive) and check if locks are being held for a long time.</li>
<li>Trace the lock HOLDER shown in the output of the utllockt.sql script using the 10046 event to see what its doing</li>
<li>Look for long running queries that cause row locks to be held a long time or other problems in the application</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   SELECT FOR UPDATE locks too many rows</i></b></p>    <br><p class="detailTblTxt3">Sometimes a "pessimistic" locking strategy is implemented with SELECT FOR UPDATE statements that are missing predicates and are too "greedy" with their locking.  Examine these statements to see if they are locking more rows than they actually need to lock.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; requires access and examination of application code.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk if implemented properly.  But, changes of this magnitude are risky if not designed or tested properly.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">If the locking situation is in progress (not at some point in the past), the following steps may help identify the reason for it:

<ol>
<li>Identify the session holding the TX enqueue that is being waited on.  You can use <i>utllockt.sql</i> (see Note ID 166534.1).</li>
<li>Look for recent cursors that the session has executed and are still open by querying V$OPEN_CURSOR for the session identified in step 1.  For example:<br>
<pre>
SELECT sql_text FROM v$open_cursor WHERE sid = 1234</pre></li>
<li>See if any cursors involve FOR UPDATE, UPDATE, or DELETE</li>
<li>Examine these cursors to see if they are selecting too many rows</li>
<li>Change the application to lock fewer rows at time.  Sometimes this may require splitting up the work into a SELECT statement that finds candidate rows to lock and then a SELECT FOR UPDATE to lock an individual row.  There are many ways to implement this kind of change - it all depends on the application.</li>
</ol>

Sometimes, the cursor that locked the rows is no longer open and other cursors have executed since then.  In these cases it is difficult to find the exact cause of the blocking without looking at the application in depth.  One clue that may help is knowing the SQL for the <i>waiting</i> session and then examining the application code for other places and situations where the tables in the SQL statement may be locked.  You can find the SQL and exact ROWID being waited on by issuing the following query:<br>
<pre>
select s.sid, s.serial#, s.username, s.module, s.ROW_WAIT_OBJ# object_id,
 dbms_rowid.rowid_create(1, s.row_wait_obj#, s.row_wait_file#, 
 s.row_wait_block#, s.row_wait_row#) my_rowid
 s.sql_hash_value, s.sql_address, sq.SQL_TEXT,
 from v$session_wait sw, v$session s, v$sql sq, v$lock l
 where sw.event = 'enqueue'
 and sw.sid = s.sid
 and l.type = 'TX' and l.request = 6
 and l.sid = s.sid
 and s.sql_hash_value = sq.hash_value and s.sql_address = sq.address
</pre>
Note: "object_id" can be used to query DBA_OBJECTS.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/consist.htm">Concepts: Data Concurrency and Consistency</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/consist.htm#i5704">How Oracle Locks Data</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/consist.htm#sthref2071">Concepts: Row Locks (TX)</a></p>    <br><p class="detailTblTxt3"> Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=102925.1">Tracing sessions: waiting on an enqueue</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62354.1">TX Transaction locks - Example wait scenarios</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=197057.1">TX Lock "Transaction Enqueue"</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Long running statement while locks are held</i></b></p>    <br><p class="detailTblTxt3">A long running statement may delay the time between a transaction starts (via some DML) and commits.  This statement may need to be tuned.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; requires access and examination of application code.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk if implemented properly.  But, changes of this magnitude are risky if not designed or tested properly.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">If the locking situation is in progress (not at some point in the past), the following steps may help identify the reason for it:

<ol>
<li>Identify the session holding the TX enqueue that is being waited on.  You can use <i>utllockt.sql</i> (see Note ID 166534.1).</li>
<li>For the session identified in step 1 (lock holder), check if it is currently executing SQL.  For example, assuming the session ID is 12:<br>
<pre>
SELECT s.sid, s.status, sq.sql_text
FROM v$session s, v$sql sq
WHERE s.sid = 12
and s.status = 'ACTIVE'
and s.sql_hash_value = sq.hash_value
and s.sql_address = sq.address
</pre></li>
<li>Investigate the performance of this cursor.  At this point, the problem becomes a query tuning problem.  You can use this guide for help or the SQL Tuning Advisor (10g or higher with EM Tuning Pack license).</li>
<li>Tune the query and evaluate whether the locking problem has been resolved.  If it hasn't been resolved, examine the application in more detail to see if the application should be changed.</li>
</ol><br>
See the documents below for more information.</p>    <br><p class="detailTblTxt3">10g+: SQL Tuning Advisor</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=262687.1 ">How to use the Sql Tuning Advisor</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_tune.htm%23PFGRF028">Automatic SQL Tuning </a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14196%2Fmontune003.htm%23sthref784">Using Advisors to Optimize Database Performance</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_tune.htm%23sthref1144">Using SQL Tuning Advisor with Oracle Enterprise Manager</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fappdev.102%2Fb14258%2Fd_sqltun.htm%23sthref7584">SQL Tuning Advisor Subprograms </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/sql_tune.htm#CHDBIGDF">Using SQL Tuning Advisor APIs </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=271196.1">Automatic SQL Tuning - SQL Profiles</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=120201.1">TBD</a></p>    <br><p class="detailTblTxt3">Manual Tuning</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_1016.htm%23PFGRF006">SQL Tuning Overview </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=233112.1">Diagnosing Query Tuning Problems</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=67522.1">Diagnosing Why a Query is Not Using an Index</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>10g+: Wait: enq - TX allocate ITL entry</b></i></p>    <br><p class="detailTblTxt3">Waits for <i>enq:TX allocate ITL entry (in mode 4) can occur if the session is waiting for an ITL (interested transaction list) slot in a block. This happens when the session wants to lock a row in the block but one or more other sessions have rows locked in the same block, and there is no free ITL slot in the block. Usually, Oracle dynamically adds another ITL slot. This may not be possible if there is insufficient free space in the block to add an ITL. If so, the session waits for a slot with a TX enqueue in mode 4.
<br>
Wait class: Concurrency, typically foreground</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>TKProf: 
<ul class="detailTblTxt3">
<li>Overall wait event summary for non-recursive and recursive statements shows significant amount of time for <i>enq:TX - allocate ITL entry</i> waits.</li>
<li>optional: In the raw 10046 trace file, most wait's P1 field decodes to TX in mode 4</li>
</ul>
<br>
<li>AWR or statspack: 
<ul class="detailTblTxt3">
<li><i>enq:TX - allocate ITL entry</i> is among the top timed events</li>
</ul>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Insufficient ITLs in a block</i></b></p>    <br><p class="detailTblTxt3">Waits for the TX enqueue in mode 4 can occur if the session is waiting for an ITL (interested transaction list) slot in a block. This happens when the session wants to lock a row in the block but one or more other sessions have rows locked in the same block, and there is no free ITL slot in the block. Usually, Oracle dynamically adds another ITL slot. This may not be possible if there is insufficient free space in the block to add an ITL. If so, the session waits for a slot with a TX enqueue in mode 4.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><b>Prior to 9.2.x:</b> <br>
In versions prior to 9.2.x, it is difficult to pinpoint an ITL wait exactly.  Consider this justified if you have examined other causes for TX, mode 4 waits and none are justifiable.<br>
<br>
<b>9.2.x</b>:<br>
Using statspack snapshots taken at level 7, look in the segment statistics section to see which segments have the highest ITL waits (e.g., <i>Segments by ITL Waits</i>).  If these are a significant portion of the TX enqueue waits (see the <i>Enqueue Activities</i> section), then this cause is justified.<br>
<br>
In 10g, the wait event itself tells you this is an ITL wait, so it is justified from the wait event.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Increase the table's <i>INITRANS</I> setting </i></b></p>    <br><p class="detailTblTxt3">Increase the table's <i>INITRANS</I> setting to account for the number of concurrent sessions changing an individual  block.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; may require rebuilding the table.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; no risky side effects except if INITRANS is set too large and the block size is small (this will waste a lot of block space).</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14200/clauses007.htm#g1058547">SQL Ref: INITRANS </a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>10g+: Wait: enq - TX index contention</b></i></p>    <br><p class="detailTblTxt3">This wait can occur when a transaction is inserting a row in an index and has to wait for the end of an index block split being done by another transaction.  In this case the session is waiting for the TX enqueue in mode 4 (share).
<br>
Wait class: Concurrency, typically foreground</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>TKProf: 
<ul class="detailTblTxt3">
<li>Overall wait event summary for non-recursive and recursive statements shows significant amount of time for <i>enq:TX - allocate ITL entry</i> waits.</li>
<li>optional: In the raw 10046 trace file, most wait's P1 field decodes to TX in mode 4</li>
</ul>
<br>
<li>AWR or statspack: 
<ul class="detailTblTxt3">
<li><i>enq:TX - allocate ITL entry</i> is among the top timed events</li>
</ul>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Index contention due to block splits</i></b></p>    <br><p class="detailTblTxt3">This wait can occur when a transaction is inserting a row in an index and has to wait for the end of an index block split being done by another transaction.  In this case the session is waiting for the TX enqueue in mode 4 (share).</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">To identify which segment is involved:
<ul class="detailTblTxt3"><li>Look in the TKProf of one or more sessions that experience the most of this kind of wait. </li>
<li>Find the statement that waited the longest amount of time on the event with long TX, mode 4 waits.  This is generally an insert statement. </li>
<li>Examine the statement to find the indexes involved. </li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Use reverse key indexes</i></b></p>    <br><p class="detailTblTxt3">Index leaf blocks may see contention due to key values that are increasing steadily (using a sequence) and concentrated in a leaf block on the "right-hand side" of the index.  Look at using <i>reverse key indexes</i> (if range scans aren't commonly used against the segment).<br>
<br>
A reverse key index will spread keys around evenly and avoid creating these hot leaf blocks.  However, the reverse key index will not be usable for index range scans, so care must be taken to ensure that access is normally done via equality predicates.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; will require rebuilding an index.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; some queries may run much slower because they will not be able to use an index for range scans and may resort to full table scans.  Determine if range scans are needed before implementing this.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/schema.htm#sthref998">Concepts: Reverse Key Indexes</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14200/statements_5010.htm#i2062403">SQL Reference: Create index syntax:</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/design.htm#sthref152">Performance Tuning Guide: Reverse Key Indexes</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Use hash partitioning to spread index values around</i></b></p>    <br><p class="detailTblTxt3">Hash partitions will randomly spread out the data and reduce contention on leaf blocks.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; requires rebuilding the table.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; no risky side effects.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/partconc.htm#i462869">Concepts: Overview of Hash Partitioning</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14231/partiti.htm#i1006255">When to Use Hash Partitioning</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/data_acc.htm#i21879">Performance Tuning Guide: Using Partitioned Indexes for Performance: </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14200/statements_5010.htm#sthref6642">SQL Ref: Create Index, Index Partitioning Clauses, GLOBAL PARTITION BY HASH:</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14200/statements_5010.htm#i2169259">Creating a Hash-Partitioned Global Index: Example</a></p>    <br><p class="detailTblTxt3">Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=125314.1">Boosting Performance by Hash and Composite Partitions</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Use natural keys instead of sequence numbers</i></b></p>    <br><p class="detailTblTxt3">Change the application to use a different key (i.e., a composite natural key) that does not increase monotonically.  Obviously, this kind of change may take some time to implement because it may require many changes to application as well as changes to the physical data model.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblHighBG">      <p align="center"><b>H</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">High effort; may require changes to the data model and application code.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk if implemented properly.  But, changes of this magnitude are risky if not designed or tested properly.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/design.htm#i28156">Performance Tuning: Serializing within Indexes</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>wait: enq: TX - contention
 </b></i></p>    <br><p class="detailTblTxt3">This type of TX contention is a kind of "catch all" for TX enqueue waits not related to row locks or ITL waits.</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>TKProf: 
<ul class="detailTblTxt3">
<li>Overall wait event summary for non-recursive and recursive statements shows significant amount of time for <i>enq: TX - contention</i> waits.</li>
</ul>
<br>
<li>AWR or statspack: 
<ul class="detailTblTxt3">
<li><i>enq: TX - contention</i> is among the top timed events</li>
</ul>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Deeper investigation needed for <i>enq: TX - contention</i> waits.</i></b></p>    <br><p class="detailTblTxt3"><i>enq: TX - contention</i> waits may be caused by reasons that may not be well known.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">AWR, Statspack, or TKProf shows a significant amount of time listed (10% or more)  in the "Timed Event" section as <i>enq: TX - contention</i>.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate enq: TX - contention waits</i></b></p>    <br><p class="detailTblTxt3">The <i>enq: TX - contention</i> wait may be caused by uncommon conditions.  Additional research is required.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Finding the root cause for these waits usually involves tracing sessions or setting unusual wait events.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">The risk depends on what changes are needed to reduce contention on the TX enqueue.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below for information on how to find more information about the TX enqueue. <br>
<br>
Typically, you will need to file a service request  for more help if you aren't able to adequately research the latch.</p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id= 34576.1">WAITEVENT: "latch free" Reference Note</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=102925.1">Tracing sessions: waiting on an enqueue </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id= 179582.1">How to Find TX Enqueue Contention in RAC or OPS </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62354.1">TX Transaction locks - Example wait scenarios  
</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>wait: library cache pin<br>
wait: cursor: pin S wait on X
</b></i></p>    <br><p class="detailTblTxt3">Library cache pins are used to manage library cache concurrency. Pinning an object causes the heaps to be loaded into memory (if not already loaded). PINS can be acquired in NULL, SHARE or EXCLUSIVE modes and can be considered like a special form of lock. A wait for a "library cache pin" implies some other session holds that PIN in an incompatible mode.</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>TKProf: 
<ul class="detailTblTxt3">
<li>Overall wait event summary for non-recursive and recursive statements shows significant amount of time for <i>library cache pin</i> waits.</li>
</ul>
<br>
<li>AWR or statspack: 
<ul class="detailTblTxt3">
<li>Significant waits for <i>library cache pin</i></li>
</ul>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Shared SQL being aged out</i></b></p>    <br><p class="detailTblTxt3">The shared pool is too small and is causing many statements that could be shared to age out of the library cache and later reloaded.  Each reload requires a hard parse and impacts the CPU and latches.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><br>
TKProf:
<ul class="detailTblTxt3">
<li>Use the report sorted by elapsed parse time</li>
<li>Look at the top statements and determine if they are being hard parsed; these will have "Misses in the library cache" equal or close to the total number of parses</li>
<li>Examine the statements that are being hard parsed and look for the ABSENCE of literal values, this means these statements could have been shared but weren't (this is not entirely reliable since you could have statements that use binds but will not be executed again).</li>
</ul>
AWR or statspack reports:<br>
<ul class="detailTblTxt3">
<li>Library Cache statistics section shows that <i>reloads</i> are high (usually several thousand per hour) and little or no invalidations are seen </li>
<li>The "% SQL with executions>1" is over 60%, meaning statements are being shared</li>
<u/ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Increase the size of the shared pool</i></b></p>    <br><p class="detailTblTxt3">Increasing the shared pool size will reduce the need to age out statements that could be shared.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; an init.ora / spfile change. </p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; increasing the size of the shared pool is not risky unless:
<ul class="detailTblTxt3">
<li>There are many unshared statements due to literals
<br>
For more details, see: <a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a>
</li>
<li>The machine doesn't have enough physical memory and starts swapping
<br>
<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=17094.1">TECH: Unix Virtual Memory, Paging & Swapping explained</a></li>
</ul>
Verify the above points before changing the size of the shared pool.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14231/create.htm#BABDBIGB">Admin: Using Manual Shared Memory Management, see Specifying the Shared Pool Size</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams196.htm#sthref804">Reference: SHARED_POOL_SIZE Parameter</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams196.htm#CHDGGAIB">Reference: SHARED_POOL_SIZE and Automatic Storage Management</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   10g+: Use the <i>Automatic Shared Memory Manager (ASMM)</i> to adjust the shared pool size</i></b></p>    <br><p class="detailTblTxt3">ASMM will automate memory sizing for the shared pool to ensure an optimal amount is available. You will need to set a reasonable value for SGA_MAX_SIZE and SGA_TARGET to enable ASMM.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; an init.ora / spfile change. </p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; ASMM will ensure sufficient memory is available.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm">Concepts: Memory Architecture</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm#CNCPT810">Concepts: Automatic Shared Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14231/create.htm#BABGCBHI">Admin: Using Automatic Shared Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#i30970">Performance Tuning: Configuring and Using the Shared Pool and Large Pool</a></p>    <br><p class="detailTblTxt3">Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=257643.1">Oracle Database 10g Automated SGA Memory Tuning</a></p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=295626.1">How To Use Automatic Shared Memory Management (ASMM) In Oracle10g</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=270935.1">Shared pool sizing in 10g</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Keep ("pin") frequently used large PL/SQL and cursor objects in the shared pool</i></b></p>    <br><p class="detailTblTxt3">Use the DBMS_SHARED_POOL.KEEP() procedure to mark large, frequently used PL/SQL and SQL objects in the shared pool and avoid them being aged out.  This will reduce reloads and fragmentation since the object doesn't need to keep reentering the shared pool over and over.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; need to identify which objects should be kept and then run a procedure to keep them.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; if you aren't careful in keeping these objects, you may keep too many of them and cause ORA-4031 errors.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm">Concepts: Memory Architecture</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#sthref647">Performance Tuning: Keeping Large Objects to Prevent Aging</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/appdev.102/b14258/d_shpool.htm#sthref7134">PL/SQL DBMS_SHARED_POOL</a></p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=1012047.6">How To Pin Objects in Your Shared Pool</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=101627.1">How to Automate Pinning Objects in Shared Pool at Database Startup</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=305529.1">How To Use SYS.DBMS_SHARED_POOL In a PL/SQL Stored procedure To Pin objects in Oracle's Shared Pool</a></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=61760.1">Using the Oracle DBMS_SHARED_POOL Package</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Library cache object Invalidations</i></b></p>    <br><p class="detailTblTxt3">When objects (like tables or views) are altered via DDL or collecting statistics, the cursors that depend on them are invalidated.  This will cause the cursor to be hard parsed when it is executed again and will impact CPU and latches.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><br>
TKProf:
<ul class="detailTblTxt3">
<li>Use the report sorted by elapsed parse time</li>
<li>Look at the top statements and determine if they are being hard parsed; these will have "Misses in the library cache" equal or close to the total number of parses</li>
<li>Examine the statements that are being hard parsed and look for the ABSENCE of literal values, this means these statements could have been shared but weren't (this is not entirely reliable since you could have statements that use binds but will not be executed again).</li>
</ul>
AWR or statspack reports:<br>
<ul class="detailTblTxt3">
<li>Library Cache statistics section shows that <i>reloads</i> are high (usually several thousand per hour) and invalidations are high</li>
<li>The "% SQL with executions>1" is over 60%, meaning statements are being shared</li>
<li>Check the <i>Dictionary Statistics</i> section of the report and look for non-zero values in the <i>Modification Requests</i> column, meaning that DDL occurred on some objects.</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Do not perform DDL operations during busy periods</i></b></p>    <br><p class="detailTblTxt3">DDL will often cause library cache objects to be invalidated and this could cascade to many different dependent objects like cursors.  Invalidations have a large impact on the library cache, shared pool, row cache, and CPU since they will likely require many hard parses to occur at the same time.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; defer the DDL to a quiet time.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; may involve some downtime.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Not Applicable.  Simply schedule DDL during maintenance or low activity periods.</p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Do not collect optimizer statistics during busy periods</i></b></p>    <br><p class="detailTblTxt3">Collecting statistics (using ANALYZE or DBMS_STATS) will cause library cache objects to be invalidated and this could cascade to many different dependent objects like cursors.  Invalidations have a large impact on the library cache, shared pool, row cache, and CPU since they will likely require many hard parses to occur at the same time.<br>
<br>
For some database versions, the DBMS_STATS procedure allows give you the option of not invalidating objects (see the "no_invalidate" option).
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; defer the gathering of statistics to a quiet time.  In 10g, you have a choice of whether or not to invalidate objects after gathering statistics.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; defer the gathering of statistics to a quiet time.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">The document links below shows how to specify statistics collection without causing invalidations.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/appdev.102/b14258/d_stats.htm#sthref8129">GATHER_TABLE_STATS Procedure, see the "no_invalidate" option</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Do not perform TRUNCATE operations during busy periods</i></b></p>    <br><p class="detailTblTxt3">See the document below:
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; defer the DDL to a quiet time.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; may involve some downtime.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See documents below:</p>    <br><p class="detailTblTxt3">Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=123214.1 ">Truncate - Causes Invalidations in the LIBRARY CACHE</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Objects being compiled across sessions</i></b></p>    <br><p class="detailTblTxt3">One or more sessions are compiling objects (typically PL/SQL) while another session wants to pin the same object prior to executing or compiling it.  One or more sessions will wait on library cache pin in Share mode (if it just wants to execute it) or eXclusive mode (if it want to compile/change the object).
</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">TKProf:
<ul class="detailTblTxt3">
<li><i>library cache pin waits</i> and / or <i>library cache pin waits</i></i>
<li>Statement is compiling or executing PL/SQL</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Avoid compiling objects in different sessions at the same time or during busy times</i></b></p>    <br><p class="detailTblTxt3">Do not compile interdependent objects across concurrent sessions or during peak usage.<BR>The <I>HangAnalyze</I> command can usually help identify the blockers, waiters, and the SQL which is causing the waits (see the "Hang / Locking tab > Issue Identification > Data Collection" for more information).</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; requires some thought on how and when to recompile objects.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Schedule and/or sequence the recompilation to avoid conflicts.</p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Excessive Amount of Child Cursors </i></b></p>    <br><p class="detailTblTxt3">A large number of child cursors are being created for some SQL statements.  This activity is causing contention among various sessions that are creating child cursors concurrently or with other sessions that also need similar resources (latches and mutexes).</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">AWR / Statspack reports; look in the "SQL ordered by Version Count" section.  If there are any SQL statements with more than 500 versions, then this problem is likely to be occurring.  Alternatively, you can query V$SQLAREA to look for any SQL with version_count greater than 500.<br>
<br>
Query V$SQL_SHARED_CURSOR to see the reasons why SQL isn't being shared.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Inappropriate use of parameter CURSOR_SHARING set to SIMILAR</i></b></p>    <br><p class="detailTblTxt3">The difference between SIMILAR and FORCE is that SIMILAR forces similar statements to share the SQL area without deteriorating execution plans. Setting CURSOR_SHARING to FORCE forces similar statements to share the SQL area potentially deteriorating execution plans.<br>
<br>
One of the cursor sharing criteria when literal replacement is enabled with CURSOR_SHARING as SIMILAR is that bind value should match initial bind value if the execution plan is going to change depending on the value of the literal. The reason for this is we might get a sub-optimal plan if we use the same cursor. This would typically happen when, depending on the value of the literal, the optimizer is going to chose a different plan. For example, if we have a predicate with " > ", then each execution with different bind values would result in a new child cursor because that would ensure that the plan didn't change (a range predicate influences cost and plans), if this was an equality predicate, we would always share the same child cursor.  <br>
<br>
Avoiding the use of CURSOR_SHARING set to SIMILAR entails either rewriting the SQL in the application so that it uses bind values and still gets a good plan (hints, profiles, or outlines may be needed), or using CURSOR_SHARING set to FORCE which will avoid generating child cursors but can cause plans to be sub-optimal.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Depends on the change made.  Changing the CURSOR_SHARING initialization parameter to FORCE is easy; changing the application to use binds will take more effort.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Depends on the change made.  Changing the CURSOR_SHARING initialization parameter to FORCE is risky if done at the database instance level, but less risky at the session level.  Changing the application SQL is not as risky since only the single statement is affected.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See documents below:</p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams035.htm#i1125803">CURSOR_SHARING Parameter</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=94036.1">Init.ora Parameter "CURSOR_SHARING" Reference Note</a></p>    <br><p class="detailTblTxt3">Troubleshooting</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=296377.1">Handling and resolving unshared cursors/large version_counts</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate the possible reasons for excessive amounts of child cursors.</i></b></p>    <br><p class="detailTblTxt3">Child cursors are created by Oracle when it is unable to share an existing child cursor.  There are many reasons why a child cursor may not be shared, so the view "V$SQL_SHARED_CURSOR" must be consulted to find the specific reasons affecting a particular cursor.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">The investigation is generally simple as it is just a query.  The ultimate solution may be more difficult.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Just a query or script needs to be run which queries dynamic views.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10821/memory.htm#PFGRF94297">Shared Cursors</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db112/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FE11882_01%2Fserver.112%2Fe10820%2Fdynviews_3055.htm%23REFRN30254">V$SQL_SHARED_CURSOR reference</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=438755.1">Script: Formated V$SQL_SHARED_CURSOR Report by SQLID or Hash Value</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=3461251.8">V$SQL_SHARED_CURSOR shows all N with CURSOR_SHARING</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Contention caused by changing object privileges</i></b></p>    <br><p class="detailTblTxt3">Changing object privilges causes contention in the library cache since the object will need to be invalidated and reparsed with the new privileges.  Any type of privilege change using GRANT or REVOKE on an object may cause dependent objects to become invalidated too thereby amplifying the effect of the change and causing contention if the system is busy.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">This cause is likely if there are:<br>
	<ul>
	<li>waits on the library cache, shared pool latches, mutexes, and/or library cache pins</li>
	<li>High invalidations</li>
	<li>DDL and other causes have been eliminated</li>
	</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Avoid making grants during periods of high activity or concurrency</i></b></p>    <br><p class="detailTblTxt3">Schedule the privilege changes when the system is quiet to avoid impacting users.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Depends on the availability requirements of the system; no extra effort is involved - just rescheduling.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; some contention is possible if the time period was not quiet enough</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">N/A</p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   library cache pin : Deeper investigation needed. 
</i></b></p>    <br><p class="detailTblTxt3">If none of the other causes are likely, then additional diagnostics are needed for this problem.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">There is insufficient information to suggest a cause.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Additional Library Cache Diagnostics Needed</i></b></p>    <br><p class="detailTblTxt3">This solution describes additional diagnostics that can be obtained to help solve problems with the library cache, dictionary cache, or general parsing problems.  Obtaining these diagnostics ahead of time can help expedite your SR with Oracle.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">These diagnostics often involve procedures that may not be well known and require special care.  We recommend they be implemented by experienced DBAs only.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblHighBG">      <p align="center"><b>H</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Some of the procedures and commands in this note have the potential to introduce severe performance degradation into your system.  They should be used with care and only in cases where your system is already experiencing serious performance problems and these diagnostics are required to proceed further.<br>
<br>
<b>Do not proceed with these steps until you are thoroughly familiar with them and have practiced them on a test system.  If you have any concerns, please stop and file an SR with Oracle.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Please collect the trace files that will be produced from the following steps and send them to Oracle once you have an SR number.  Do the following steps:
<pre>
* Open 3 separate terminal sessions

* Log onto the database as SYSDBA if possible; if you aren't able to log on, then use the "PRELIM" option as follows:
	$ sqlplus -prelim "/ as sysdba"

* Use ORADEBUG to allow the trace files to be any size (repeat in all sessions):
	$ oradebug setmypid
	$ oradebug unlimit
	
* In one session, obtain two sets of hanganalyze reports :

	$ oradebug hanganalyze 3
	...wait 1 minute ...
	$ oradebug hanganalyze 3
	$ oradebug tracefile_name  <-- this will print out the name of the trace file
		
	NOTE: There is a problem with this in some versions!

* Examine the hanganalyze trace file and look for the section that says: "Dumping call stack..." 
and "Dumping detailed process information..."; note the ospids of the files dumped and be sure to send them to Oracle

If there is still time to collect more diagnostics, then collect the following:
	
* In another session, obtain two sets of systemstate dumps :
	$ oradebug dump systemstate 266
	...wait 1 minute ...
	$ oradebug dump systemstate 266
	$ oradebug tracefile_name  <-- this will print out the name of the trace file	

	NOTE: level 266 provides a lot of information but may also take a long time (more than 1/2 hour) in some 
environments.  If the dump needs to be completed as quickly as possible, a reasonable amount of data may be 
collected at level 258 (however, sometimes this may not be enough data to determine a root cause).
	
If there is still time to collect more diagnostics, then collect the following:	
	
* In a third session, obtain a rowcache dump
	$ oradebug dump ROW_CACHE 11
	$ oradebug tracefile_name  <-- this will print out the name of the trace file	
	
* In one of the sessions, obtain ASH reports:
	- for period lasting from the time before through the time after the problem ended. If the problem never ended, 
           then please select a 1 hour period.
	- for a 15 minute period just before the problem
	- for a 15 minute period during the problem
	- for a 15 minute period just after the problem
	
	- The ASH reports may be obtained by running $ORACLE_HOME/rdbms/admin/ashrpt.sql
		- choose the HTML output format
		- the output will be found in the current working directory where you started SQLPlus
	
* Look in the user and background dump destinations for the trace files

* Be prepared to upload these to Oracle Support
	- large files should be compressed
	- if the files are very large, you will be instructed by the engineer to upload the files to an FTP site
	- please inform the engineer that you have collected this data
	</pre>
	</p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   SQL is failing to parse/execute due to errors</i></b></p>    <br><p class="detailTblTxt3">SQL contains semantic errors that cause the statement to fail and then require Oracle to purge it from the library cache.  This is a very expensive operation in the library cache. </p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul>
<li>In AWR or Statspack, significant waits for <i>library cache pin</i> or <i>curosr: pin S wait on X</i> </li>
<li>In AWR or Statspack, Time Model section shows significant amount of DBtime spent on <i>Failed parse elapsed time</i> </li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate sessions with high failed parse counts</i></b></p>    <br><p class="detailTblTxt3">Failed parses are usually caused by SQL with semantic errors (referring to objects that don't exist or whose usage isn't possible in the current context; like trying to update a view based on a join using a rowid)</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Before the parse failures can be solved, one needs to capture diagnostics to show how the failure comes about. This typically means we need to trace one or more sessions that are experiencing a high rate of failed parses to see which SQL is involved, what the errors are, and how the SQL is being used.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">There is usually little risk from the trace file or the change to application considering that the SQL is failing anyways.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=115166.1">STATISTIC:  V9 SQL   "parse count (failures)"</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>wait: library cache lock</b></i></p>    <br><p class="detailTblTxt3">The library cache lock controls the concurrency between clients of the library cache by acquiring a lock on the object handle so that either:  <li>one client can prevent other clients from accessing the same object</li> <li>The client can maintain a dependency for a long time (no other client can change the object).</li><br>This lock is also obtained as part of the operation to locate an object in the library cache (a library cache child latch is obtained to scan a list of handles, then the lock is placed on the handle once the object has been found).</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>TKProf: 
<ul class="detailTblTxt3">
<li>Overall wait event summary for non-recursive and recursive statements shows significant amount of time for <i>library cache lock</i> waits.</li>
</ul>
<br>
<li>AWR or statspack: 
<ul class="detailTblTxt3">
<li>Significant waits for <i>library cache lock</i></li>
</ul>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Unshared SQL Due to Literals</i></b></p>    <br><p class="detailTblTxt3">SQL statements are using literal values where a bind value could have been used.  The literal values cause the statement to be unshared and will force a hard parse.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><br>
TKProf :
<ul class="detailTblTxt3">
<li>Use the report sorted by elapsed parse time</li>
<li>Look at the top statements and determine if they are being hard parsed; these will have "Misses in the library cache" equal or close to the total number of parses</li>
<li>Examine the statements that are being hard parsed and look for the presence of literal values.</li></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Rewrite the SQL to use bind values</i></b></p>    <br><p class="detailTblTxt3">Rewriting the SQL to use bind values will allow the statement to be reused when specific values in the statement change but the overall statement is the same.  This is the best way to promote sharing of SQL statements in the library cache.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium or high effort; rewriting statements requires a change to the application but the change is rather trivial.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; the use of bind values could lead to worse execution plans for some statements.  The statements modified to use binds values should be thoroughly tested to avoid regressing the statement's performance.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Troubleshooting</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=296377.1">Handling and resolving unshared cursors/large version_counts</a></p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#sthref551">7.3.1.3 SQL Sharing Criteria</a></p>    <br><p class="detailTblTxt3">Searches</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/ranked?word=bind+variables&partno=b14407">Pro*C/C++ Precompiler Programmer's Guide</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/ranked?word=bind+variables&partno=b14211">Performance Tuning Guide</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Use the CURSOR_SHARING initialization parameter</i></b></p>    <br><p class="detailTblTxt3">The CURSOR_SHARING parameter will substitute literal values with bind values in a statement automatically.  The settings for this parameter are:
<ul class="detailTblTxt3">
<li><i>EXACT</i>: Leave the statement as it was written with literals (default value)</li>
<li><i>FORCE</i>: Substitute all literals with binds (as much as possible)</li>
<li><i>SIMILAR</i>: Substitute literals with binds only if the query's execution plan won't change (i.e., safe literal replacement)</li>
</ul>
In general, most OLTP apps that use equality predicates will see little change to their execution plans, but the effects of these parameters should be tested in your application.<br>
<br>
These parameters can be set at the session level to further contain their effects - this is the preferred way to use them to minimize widespread changes.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; an init.ora / spfile change.  In the worst case it may require a LOGON trigger to set it for a session.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; the use of bind values could lead to worse execution plans for some statements.  Risk can be mitigated by using SIMILAR instead of FORCE but this may not make enough statements shareable.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams035.htm#sthref154">Reference: CURSOR_SHARING Parameter</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=94036.1">Init.ora Parameter "CURSOR_SHARING" Reference Note</a></p>    <br><p class="detailTblTxt3">Troubleshooting</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#i31512">CURSOR_SHARING for Existing Applications</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=296377.1">Handling and resolving unshared cursors/large version_counts</a></p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#sthref551">7.3.1.3 SQL Sharing Criteria</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Shared SQL being aged out</i></b></p>    <br><p class="detailTblTxt3">The shared pool is too small and is causing many statements that could be shared to age out of the library cache and later reloaded.  Each reload requires a hard parse and impacts the CPU and latches.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><br>
TKProf:
<ul class="detailTblTxt3">
<li>Use the report sorted by elapsed parse time</li>
<li>Look at the top statements and determine if they are being hard parsed; these will have "Misses in the library cache" equal or close to the total number of parses</li>
<li>Examine the statements that are being hard parsed and look for the ABSENCE of literal values, this means these statements could have been shared but weren't (this is not entirely reliable since you could have statements that use binds but will not be executed again).</li>
</ul>
AWR or statspack reports:<br>
<ul class="detailTblTxt3">
<li>Library Cache statistics section shows that <i>reloads</i> are high (usually several thousand per hour) and little or no invalidations are seen </li>
<li>The "% SQL with executions>1" is over 60%, meaning statements are being shared</li>
<u/ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Increase the size of the shared pool</i></b></p>    <br><p class="detailTblTxt3">Increasing the shared pool size will reduce the need to age out statements that could be shared.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; an init.ora / spfile change. </p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; increasing the size of the shared pool is not risky unless:
<ul class="detailTblTxt3">
<li>There are many unshared statements due to literals
<br>
For more details, see: <a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a>
</li>
<li>The machine doesn't have enough physical memory and starts swapping
<br>
<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=17094.1">TECH: Unix Virtual Memory, Paging & Swapping explained</a></li>
</ul>
Verify the above points before changing the size of the shared pool.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14231/create.htm#BABDBIGB">Admin: Using Manual Shared Memory Management, see Specifying the Shared Pool Size</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams196.htm#sthref804">Reference: SHARED_POOL_SIZE Parameter</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams196.htm#CHDGGAIB">Reference: SHARED_POOL_SIZE and Automatic Storage Management</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   10g+: Use the <i>Automatic Shared Memory Manager (ASMM)</i> to adjust the shared pool size</i></b></p>    <br><p class="detailTblTxt3">ASMM will automate memory sizing for the shared pool to ensure an optimal amount is available. You will need to set a reasonable value for SGA_MAX_SIZE and SGA_TARGET to enable ASMM.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; an init.ora / spfile change. </p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; ASMM will ensure sufficient memory is available.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm">Concepts: Memory Architecture</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm#CNCPT810">Concepts: Automatic Shared Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14231/create.htm#BABGCBHI">Admin: Using Automatic Shared Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#i30970">Performance Tuning: Configuring and Using the Shared Pool and Large Pool</a></p>    <br><p class="detailTblTxt3">Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=257643.1">Oracle Database 10g Automated SGA Memory Tuning</a></p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=295626.1">How To Use Automatic Shared Memory Management (ASMM) In Oracle10g</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=270935.1">Shared pool sizing in 10g</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Keep ("pin") frequently used large PL/SQL and cursor objects in the shared pool</i></b></p>    <br><p class="detailTblTxt3">Use the DBMS_SHARED_POOL.KEEP() procedure to mark large, frequently used PL/SQL and SQL objects in the shared pool and avoid them being aged out.  This will reduce reloads and fragmentation since the object doesn't need to keep reentering the shared pool over and over.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; need to identify which objects should be kept and then run a procedure to keep them.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; if you aren't careful in keeping these objects, you may keep too many of them and cause ORA-4031 errors.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm">Concepts: Memory Architecture</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#sthref647">Performance Tuning: Keeping Large Objects to Prevent Aging</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/appdev.102/b14258/d_shpool.htm#sthref7134">PL/SQL DBMS_SHARED_POOL</a></p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=1012047.6">How To Pin Objects in Your Shared Pool</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=101627.1">How to Automate Pinning Objects in Shared Pool at Database Startup</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=305529.1">How To Use SYS.DBMS_SHARED_POOL In a PL/SQL Stored procedure To Pin objects in Oracle's Shared Pool</a></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=61760.1">Using the Oracle DBMS_SHARED_POOL Package</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Library cache object Invalidations</i></b></p>    <br><p class="detailTblTxt3">When objects (like tables or views) are altered via DDL or collecting statistics, the cursors that depend on them are invalidated.  This will cause the cursor to be hard parsed when it is executed again and will impact CPU and latches.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><br>
TKProf:
<ul class="detailTblTxt3">
<li>Use the report sorted by elapsed parse time</li>
<li>Look at the top statements and determine if they are being hard parsed; these will have "Misses in the library cache" equal or close to the total number of parses</li>
<li>Examine the statements that are being hard parsed and look for the ABSENCE of literal values, this means these statements could have been shared but weren't (this is not entirely reliable since you could have statements that use binds but will not be executed again).</li>
</ul>
AWR or statspack reports:<br>
<ul class="detailTblTxt3">
<li>Library Cache statistics section shows that <i>reloads</i> are high (usually several thousand per hour) and invalidations are high</li>
<li>The "% SQL with executions>1" is over 60%, meaning statements are being shared</li>
<li>Check the <i>Dictionary Statistics</i> section of the report and look for non-zero values in the <i>Modification Requests</i> column, meaning that DDL occurred on some objects.</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Do not perform DDL operations during busy periods</i></b></p>    <br><p class="detailTblTxt3">DDL will often cause library cache objects to be invalidated and this could cascade to many different dependent objects like cursors.  Invalidations have a large impact on the library cache, shared pool, row cache, and CPU since they will likely require many hard parses to occur at the same time.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; defer the DDL to a quiet time.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; may involve some downtime.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Not Applicable.  Simply schedule DDL during maintenance or low activity periods.</p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Do not collect optimizer statistics during busy periods</i></b></p>    <br><p class="detailTblTxt3">Collecting statistics (using ANALYZE or DBMS_STATS) will cause library cache objects to be invalidated and this could cascade to many different dependent objects like cursors.  Invalidations have a large impact on the library cache, shared pool, row cache, and CPU since they will likely require many hard parses to occur at the same time.<br>
<br>
For some database versions, the DBMS_STATS procedure allows give you the option of not invalidating objects (see the "no_invalidate" option).
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; defer the gathering of statistics to a quiet time.  In 10g, you have a choice of whether or not to invalidate objects after gathering statistics.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; defer the gathering of statistics to a quiet time.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">The document links below shows how to specify statistics collection without causing invalidations.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/appdev.102/b14258/d_stats.htm#sthref8129">GATHER_TABLE_STATS Procedure, see the "no_invalidate" option</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Do not perform TRUNCATE operations during busy periods</i></b></p>    <br><p class="detailTblTxt3">See the document below:
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; defer the DDL to a quiet time.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; may involve some downtime.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See documents below:</p>    <br><p class="detailTblTxt3">Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=123214.1 ">Truncate - Causes Invalidations in the LIBRARY CACHE</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Objects being compiled across sessions</i></b></p>    <br><p class="detailTblTxt3">One or more sessions are compiling objects (typically PL/SQL) while another session wants to pin the same object prior to executing or compiling it.  One or more sessions will wait on library cache pin in Share mode (if it just wants to execute it) or eXclusive mode (if it want to compile/change the object).
</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">TKProf:
<ul class="detailTblTxt3">
<li><i>library cache pin waits</i> and / or <i>library cache pin waits</i></i>
<li>Statement is compiling or executing PL/SQL</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Avoid compiling objects in different sessions at the same time or during busy times</i></b></p>    <br><p class="detailTblTxt3">Do not compile interdependent objects across concurrent sessions or during peak usage.<BR>The <I>HangAnalyze</I> command can usually help identify the blockers, waiters, and the SQL which is causing the waits (see the "Hang / Locking tab > Issue Identification > Data Collection" for more information).</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; requires some thought on how and when to recompile objects.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Schedule and/or sequence the recompilation to avoid conflicts.</p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Auditing is turned on</i></b></p>    <br><p class="detailTblTxt3">Auditing will increase the need to acquire library cache locks and potentially increase contention for them.  This is especially true in a RAC environment where the library cache locks become database-wide (across all instances).</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">AWR / Statspack:
<ul class="detailTblTxt3">
<li><i>library cache lock</i> waits</i>
<li><i>audit_trail</i> parameter is set to something other than "none"</li>
</ul>

</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Evaluate the need to audit </i></b></p>    <br><p class="detailTblTxt3">Consider disabling auditing if it is not absolutely necessary.  </p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; initialization parameter change</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk. </p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/network.102/b14266/cfgaudit.htm#i1010870">Keeping Audited Information Manageable</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Unshared SQL in a RAC environment</i></b></p>    <br><p class="detailTblTxt3">Library cache locks waits may occur in RAC environments when applications are not sharing SQL.  In single-instance environments, library cache and shared pool latch contention is typically the symptom for unshared SQL.  However, in RAC, the main symptom may be <i>library cache lock</i> contention.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">RAC environment<br>
<br>
TKProf:
<ul class="detailTblTxt3">
<li>Many statements are hard parsed</li>
<li><i>library cache lock</i> waits occur as part of a hard parse</i>
</ul>
<br>
AWR / Statspack:
<ul class="detailTblTxt3">
<li><i>library cache lock</i> waits</i>
<li>Low percentage for "% SQL with executions>1" (less than 60%)</li>
<li>soft parse ratio is below 80%</li>
</ul>

</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Rewrite the SQL to use bind values</i></b></p>    <br><p class="detailTblTxt3">Rewriting the SQL to use bind values will allow the statement to be reused when specific values in the statement change but the overall statement is the same.  This is the best way to promote sharing of SQL statements in the library cache.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium or high effort; rewriting statements requires a change to the application but the change is rather trivial.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; the use of bind values could lead to worse execution plans for some statements.  The statements modified to use binds values should be thoroughly tested to avoid regressing the statement's performance.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Troubleshooting</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=296377.1">Handling and resolving unshared cursors/large version_counts</a></p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#sthref551">7.3.1.3 SQL Sharing Criteria</a></p>    <br><p class="detailTblTxt3">Searches</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/ranked?word=bind+variables&partno=b14407">Pro*C/C++ Precompiler Programmer's Guide</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/ranked?word=bind+variables&partno=b14211">Performance Tuning Guide</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Use the CURSOR_SHARING initialization parameter</i></b></p>    <br><p class="detailTblTxt3">The CURSOR_SHARING parameter will substitute literal values with bind values in a statement automatically.  The settings for this parameter are:
<ul class="detailTblTxt3">
<li><i>EXACT</i>: Leave the statement as it was written with literals (default value)</li>
<li><i>FORCE</i>: Substitute all literals with binds (as much as possible)</li>
<li><i>SIMILAR</i>: Substitute literals with binds only if the query's execution plan won't change (i.e., safe literal replacement)</li>
</ul>
In general, most OLTP apps that use equality predicates will see little change to their execution plans, but the effects of these parameters should be tested in your application.<br>
<br>
These parameters can be set at the session level to further contain their effects - this is the preferred way to use them to minimize widespread changes.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; an init.ora / spfile change.  In the worst case it may require a LOGON trigger to set it for a session.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; the use of bind values could lead to worse execution plans for some statements.  Risk can be mitigated by using SIMILAR instead of FORCE but this may not make enough statements shareable.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams035.htm#sthref154">Reference: CURSOR_SHARING Parameter</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=94036.1">Init.ora Parameter "CURSOR_SHARING" Reference Note</a></p>    <br><p class="detailTblTxt3">Troubleshooting</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#i31512">CURSOR_SHARING for Existing Applications</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=296377.1">Handling and resolving unshared cursors/large version_counts</a></p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#sthref551">7.3.1.3 SQL Sharing Criteria</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Extensive use of row level triggers</i></b></p>    <br><p class="detailTblTxt3">When row level triggers are fired frequently, higher than usual library cache activity may occur, because of the need to check if mutating tables are being read.  During trigger execution, it is possible that the application tries to read mutating tables, i.e., tables that are in the process of being modified by the statement that caused the trigger to fire. As this may lead to inconsistencies, it is not allowed, and the application should receive the error ORA-4091. The mechanism to detect this error involves one library cache lock acquisition per table referenced in each select statement executed.<br>
<br>
The extent of the problem depends on how many times the row triggers fire rather than on the number of row triggers have been created (i.e., one trigger that fires 10000 times will cause more problems than 100 triggers that fire once).</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">TKProf:
<ul class="detailTblTxt3">
<li>Many statements are hard parsed</li>
<li><i>library cache lock</i> waits</i>
<li>evidence of a row level trigger firing (maybe some recursive SQL related to a trigger)</li>
</ul>
</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Evaluate the need for the row trigger</i></b></p>    <br><p class="detailTblTxt3">Sometimes row triggers aren't needed to accomplish the functionality.  Consider if there is an alternative.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; may require application and schema changes</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk. If the application and schema changes, there is a possibility that some adverse effect will be introduced.  Thorough testing will be needed.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Requires understanding the application and how row-level triggers are used.  See the documents below for reference information.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/appdev.102/b14251/adfns_triggers.htm#g1043102">App Dev Guide: Coding Triggers</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/appdev.102/b14251/adfns_triggers.htm#g1043102">App Dev Guide: Coding Triggers</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Excessive Amount of Child Cursors </i></b></p>    <br><p class="detailTblTxt3">A large number of child cursors are being created for some SQL statements.  This activity is causing contention among various sessions that are creating child cursors concurrently or with other sessions that also need similar resources (latches and mutexes).</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">AWR / Statspack reports; look in the "SQL ordered by Version Count" section.  If there are any SQL statements with more than 500 versions, then this problem is likely to be occurring.  Alternatively, you can query V$SQLAREA to look for any SQL with version_count greater than 500.<br>
<br>
Query V$SQL_SHARED_CURSOR to see the reasons why SQL isn't being shared.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Inappropriate use of parameter CURSOR_SHARING set to SIMILAR</i></b></p>    <br><p class="detailTblTxt3">The difference between SIMILAR and FORCE is that SIMILAR forces similar statements to share the SQL area without deteriorating execution plans. Setting CURSOR_SHARING to FORCE forces similar statements to share the SQL area potentially deteriorating execution plans.<br>
<br>
One of the cursor sharing criteria when literal replacement is enabled with CURSOR_SHARING as SIMILAR is that bind value should match initial bind value if the execution plan is going to change depending on the value of the literal. The reason for this is we might get a sub-optimal plan if we use the same cursor. This would typically happen when, depending on the value of the literal, the optimizer is going to chose a different plan. For example, if we have a predicate with " > ", then each execution with different bind values would result in a new child cursor because that would ensure that the plan didn't change (a range predicate influences cost and plans), if this was an equality predicate, we would always share the same child cursor.  <br>
<br>
Avoiding the use of CURSOR_SHARING set to SIMILAR entails either rewriting the SQL in the application so that it uses bind values and still gets a good plan (hints, profiles, or outlines may be needed), or using CURSOR_SHARING set to FORCE which will avoid generating child cursors but can cause plans to be sub-optimal.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Depends on the change made.  Changing the CURSOR_SHARING initialization parameter to FORCE is easy; changing the application to use binds will take more effort.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Depends on the change made.  Changing the CURSOR_SHARING initialization parameter to FORCE is risky if done at the database instance level, but less risky at the session level.  Changing the application SQL is not as risky since only the single statement is affected.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See documents below:</p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams035.htm#i1125803">CURSOR_SHARING Parameter</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=94036.1">Init.ora Parameter "CURSOR_SHARING" Reference Note</a></p>    <br><p class="detailTblTxt3">Troubleshooting</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=296377.1">Handling and resolving unshared cursors/large version_counts</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate the possible reasons for excessive amounts of child cursors.</i></b></p>    <br><p class="detailTblTxt3">Child cursors are created by Oracle when it is unable to share an existing child cursor.  There are many reasons why a child cursor may not be shared, so the view "V$SQL_SHARED_CURSOR" must be consulted to find the specific reasons affecting a particular cursor.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">The investigation is generally simple as it is just a query.  The ultimate solution may be more difficult.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Just a query or script needs to be run which queries dynamic views.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10821/memory.htm#PFGRF94297">Shared Cursors</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db112/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FE11882_01%2Fserver.112%2Fe10820%2Fdynviews_3055.htm%23REFRN30254">V$SQL_SHARED_CURSOR reference</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=438755.1">Script: Formated V$SQL_SHARED_CURSOR Report by SQLID or Hash Value</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=3461251.8">V$SQL_SHARED_CURSOR shows all N with CURSOR_SHARING</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Library cache issue; Deeper investigation needed. 
</i></b></p>    <br><p class="detailTblTxt3">If none of the other causes are likely, then additional diagnostics are needed for this problem.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">There is insufficient information to suggest a cause.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Additional Library Cache Diagnostics Needed</i></b></p>    <br><p class="detailTblTxt3">This solution describes additional diagnostics that can be obtained to help solve problems with the library cache, dictionary cache, or general parsing problems.  Obtaining these diagnostics ahead of time can help expedite your SR with Oracle.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">These diagnostics often involve procedures that may not be well known and require special care.  We recommend they be implemented by experienced DBAs only.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblHighBG">      <p align="center"><b>H</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Some of the procedures and commands in this note have the potential to introduce severe performance degradation into your system.  They should be used with care and only in cases where your system is already experiencing serious performance problems and these diagnostics are required to proceed further.<br>
<br>
<b>Do not proceed with these steps until you are thoroughly familiar with them and have practiced them on a test system.  If you have any concerns, please stop and file an SR with Oracle.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Please collect the trace files that will be produced from the following steps and send them to Oracle once you have an SR number.  Do the following steps:
<pre>
* Open 3 separate terminal sessions

* Log onto the database as SYSDBA if possible; if you aren't able to log on, then use the "PRELIM" option as follows:
	$ sqlplus -prelim "/ as sysdba"

* Use ORADEBUG to allow the trace files to be any size (repeat in all sessions):
	$ oradebug setmypid
	$ oradebug unlimit
	
* In one session, obtain two sets of hanganalyze reports :

	$ oradebug hanganalyze 3
	...wait 1 minute ...
	$ oradebug hanganalyze 3
	$ oradebug tracefile_name  <-- this will print out the name of the trace file
		
	NOTE: There is a problem with this in some versions!

* Examine the hanganalyze trace file and look for the section that says: "Dumping call stack..." 
and "Dumping detailed process information..."; note the ospids of the files dumped and be sure to send them to Oracle

If there is still time to collect more diagnostics, then collect the following:
	
* In another session, obtain two sets of systemstate dumps :
	$ oradebug dump systemstate 266
	...wait 1 minute ...
	$ oradebug dump systemstate 266
	$ oradebug tracefile_name  <-- this will print out the name of the trace file	

	NOTE: level 266 provides a lot of information but may also take a long time (more than 1/2 hour) in some 
environments.  If the dump needs to be completed as quickly as possible, a reasonable amount of data may be 
collected at level 258 (however, sometimes this may not be enough data to determine a root cause).
	
If there is still time to collect more diagnostics, then collect the following:	
	
* In a third session, obtain a rowcache dump
	$ oradebug dump ROW_CACHE 11
	$ oradebug tracefile_name  <-- this will print out the name of the trace file	
	
* In one of the sessions, obtain ASH reports:
	- for period lasting from the time before through the time after the problem ended. If the problem never ended, 
           then please select a 1 hour period.
	- for a 15 minute period just before the problem
	- for a 15 minute period during the problem
	- for a 15 minute period just after the problem
	
	- The ASH reports may be obtained by running $ORACLE_HOME/rdbms/admin/ashrpt.sql
		- choose the HTML output format
		- the output will be found in the current working directory where you started SQLPlus
	
* Look in the user and background dump destinations for the trace files

* Be prepared to upload these to Oracle Support
	- large files should be compressed
	- if the files are very large, you will be instructed by the engineer to upload the files to an FTP site
	- please inform the engineer that you have collected this data
	</pre>
	</p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>wait: library cache load lock</b></i></p>    <br><p class="detailTblTxt3">Oracle tries to find the load lock for the database object so that it can load the object. The load lock is always gotten in Exclusive mode, so that no other process can load the same object. If the load lock is busy the session will wait on this event until the lock becomes available.</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3">AWR  shows the wait event, "library cache load lock" in the "Top 5 Timed Events" section and it is more than 10% of total DBTime.</p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Shared SQL being aged out</i></b></p>    <br><p class="detailTblTxt3">The shared pool is too small and is causing many statements that could be shared to age out of the library cache and later reloaded.  Each reload requires a hard parse and impacts the CPU and latches.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><br>
TKProf:
<ul class="detailTblTxt3">
<li>Use the report sorted by elapsed parse time</li>
<li>Look at the top statements and determine if they are being hard parsed; these will have "Misses in the library cache" equal or close to the total number of parses</li>
<li>Examine the statements that are being hard parsed and look for the ABSENCE of literal values, this means these statements could have been shared but weren't (this is not entirely reliable since you could have statements that use binds but will not be executed again).</li>
</ul>
AWR or statspack reports:<br>
<ul class="detailTblTxt3">
<li>Library Cache statistics section shows that <i>reloads</i> are high (usually several thousand per hour) and little or no invalidations are seen </li>
<li>The "% SQL with executions>1" is over 60%, meaning statements are being shared</li>
<u/ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Increase the size of the shared pool</i></b></p>    <br><p class="detailTblTxt3">Increasing the shared pool size will reduce the need to age out statements that could be shared.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; an init.ora / spfile change. </p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; increasing the size of the shared pool is not risky unless:
<ul class="detailTblTxt3">
<li>There are many unshared statements due to literals
<br>
For more details, see: <a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a>
</li>
<li>The machine doesn't have enough physical memory and starts swapping
<br>
<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=17094.1">TECH: Unix Virtual Memory, Paging & Swapping explained</a></li>
</ul>
Verify the above points before changing the size of the shared pool.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14231/create.htm#BABDBIGB">Admin: Using Manual Shared Memory Management, see Specifying the Shared Pool Size</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams196.htm#sthref804">Reference: SHARED_POOL_SIZE Parameter</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams196.htm#CHDGGAIB">Reference: SHARED_POOL_SIZE and Automatic Storage Management</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   10g+: Use the <i>Automatic Shared Memory Manager (ASMM)</i> to adjust the shared pool size</i></b></p>    <br><p class="detailTblTxt3">ASMM will automate memory sizing for the shared pool to ensure an optimal amount is available. You will need to set a reasonable value for SGA_MAX_SIZE and SGA_TARGET to enable ASMM.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; an init.ora / spfile change. </p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; ASMM will ensure sufficient memory is available.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm">Concepts: Memory Architecture</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm#CNCPT810">Concepts: Automatic Shared Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14231/create.htm#BABGCBHI">Admin: Using Automatic Shared Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#i30970">Performance Tuning: Configuring and Using the Shared Pool and Large Pool</a></p>    <br><p class="detailTblTxt3">Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=257643.1">Oracle Database 10g Automated SGA Memory Tuning</a></p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=295626.1">How To Use Automatic Shared Memory Management (ASMM) In Oracle10g</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=270935.1">Shared pool sizing in 10g</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Keep ("pin") frequently used large PL/SQL and cursor objects in the shared pool</i></b></p>    <br><p class="detailTblTxt3">Use the DBMS_SHARED_POOL.KEEP() procedure to mark large, frequently used PL/SQL and SQL objects in the shared pool and avoid them being aged out.  This will reduce reloads and fragmentation since the object doesn't need to keep reentering the shared pool over and over.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; need to identify which objects should be kept and then run a procedure to keep them.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; if you aren't careful in keeping these objects, you may keep too many of them and cause ORA-4031 errors.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm">Concepts: Memory Architecture</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#sthref647">Performance Tuning: Keeping Large Objects to Prevent Aging</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/appdev.102/b14258/d_shpool.htm#sthref7134">PL/SQL DBMS_SHARED_POOL</a></p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=1012047.6">How To Pin Objects in Your Shared Pool</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=101627.1">How to Automate Pinning Objects in Shared Pool at Database Startup</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=305529.1">How To Use SYS.DBMS_SHARED_POOL In a PL/SQL Stored procedure To Pin objects in Oracle's Shared Pool</a></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=61760.1">Using the Oracle DBMS_SHARED_POOL Package</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Library cache object Invalidations</i></b></p>    <br><p class="detailTblTxt3">When objects (like tables or views) are altered via DDL or collecting statistics, the cursors that depend on them are invalidated.  This will cause the cursor to be hard parsed when it is executed again and will impact CPU and latches.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><br>
TKProf:
<ul class="detailTblTxt3">
<li>Use the report sorted by elapsed parse time</li>
<li>Look at the top statements and determine if they are being hard parsed; these will have "Misses in the library cache" equal or close to the total number of parses</li>
<li>Examine the statements that are being hard parsed and look for the ABSENCE of literal values, this means these statements could have been shared but weren't (this is not entirely reliable since you could have statements that use binds but will not be executed again).</li>
</ul>
AWR or statspack reports:<br>
<ul class="detailTblTxt3">
<li>Library Cache statistics section shows that <i>reloads</i> are high (usually several thousand per hour) and invalidations are high</li>
<li>The "% SQL with executions>1" is over 60%, meaning statements are being shared</li>
<li>Check the <i>Dictionary Statistics</i> section of the report and look for non-zero values in the <i>Modification Requests</i> column, meaning that DDL occurred on some objects.</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Do not perform DDL operations during busy periods</i></b></p>    <br><p class="detailTblTxt3">DDL will often cause library cache objects to be invalidated and this could cascade to many different dependent objects like cursors.  Invalidations have a large impact on the library cache, shared pool, row cache, and CPU since they will likely require many hard parses to occur at the same time.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; defer the DDL to a quiet time.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; may involve some downtime.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Not Applicable.  Simply schedule DDL during maintenance or low activity periods.</p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Do not collect optimizer statistics during busy periods</i></b></p>    <br><p class="detailTblTxt3">Collecting statistics (using ANALYZE or DBMS_STATS) will cause library cache objects to be invalidated and this could cascade to many different dependent objects like cursors.  Invalidations have a large impact on the library cache, shared pool, row cache, and CPU since they will likely require many hard parses to occur at the same time.<br>
<br>
For some database versions, the DBMS_STATS procedure allows give you the option of not invalidating objects (see the "no_invalidate" option).
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; defer the gathering of statistics to a quiet time.  In 10g, you have a choice of whether or not to invalidate objects after gathering statistics.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; defer the gathering of statistics to a quiet time.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">The document links below shows how to specify statistics collection without causing invalidations.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/appdev.102/b14258/d_stats.htm#sthref8129">GATHER_TABLE_STATS Procedure, see the "no_invalidate" option</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Do not perform TRUNCATE operations during busy periods</i></b></p>    <br><p class="detailTblTxt3">See the document below:
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; defer the DDL to a quiet time.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; may involve some downtime.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See documents below:</p>    <br><p class="detailTblTxt3">Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=123214.1 ">Truncate - Causes Invalidations in the LIBRARY CACHE</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Library cache issue; Deeper investigation needed. 
</i></b></p>    <br><p class="detailTblTxt3">If none of the other causes are likely, then additional diagnostics are needed for this problem.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">There is insufficient information to suggest a cause.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Additional Library Cache Diagnostics Needed</i></b></p>    <br><p class="detailTblTxt3">This solution describes additional diagnostics that can be obtained to help solve problems with the library cache, dictionary cache, or general parsing problems.  Obtaining these diagnostics ahead of time can help expedite your SR with Oracle.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">These diagnostics often involve procedures that may not be well known and require special care.  We recommend they be implemented by experienced DBAs only.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblHighBG">      <p align="center"><b>H</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Some of the procedures and commands in this note have the potential to introduce severe performance degradation into your system.  They should be used with care and only in cases where your system is already experiencing serious performance problems and these diagnostics are required to proceed further.<br>
<br>
<b>Do not proceed with these steps until you are thoroughly familiar with them and have practiced them on a test system.  If you have any concerns, please stop and file an SR with Oracle.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Please collect the trace files that will be produced from the following steps and send them to Oracle once you have an SR number.  Do the following steps:
<pre>
* Open 3 separate terminal sessions

* Log onto the database as SYSDBA if possible; if you aren't able to log on, then use the "PRELIM" option as follows:
	$ sqlplus -prelim "/ as sysdba"

* Use ORADEBUG to allow the trace files to be any size (repeat in all sessions):
	$ oradebug setmypid
	$ oradebug unlimit
	
* In one session, obtain two sets of hanganalyze reports :

	$ oradebug hanganalyze 3
	...wait 1 minute ...
	$ oradebug hanganalyze 3
	$ oradebug tracefile_name  <-- this will print out the name of the trace file
		
	NOTE: There is a problem with this in some versions!

* Examine the hanganalyze trace file and look for the section that says: "Dumping call stack..." 
and "Dumping detailed process information..."; note the ospids of the files dumped and be sure to send them to Oracle

If there is still time to collect more diagnostics, then collect the following:
	
* In another session, obtain two sets of systemstate dumps :
	$ oradebug dump systemstate 266
	...wait 1 minute ...
	$ oradebug dump systemstate 266
	$ oradebug tracefile_name  <-- this will print out the name of the trace file	

	NOTE: level 266 provides a lot of information but may also take a long time (more than 1/2 hour) in some 
environments.  If the dump needs to be completed as quickly as possible, a reasonable amount of data may be 
collected at level 258 (however, sometimes this may not be enough data to determine a root cause).
	
If there is still time to collect more diagnostics, then collect the following:	
	
* In a third session, obtain a rowcache dump
	$ oradebug dump ROW_CACHE 11
	$ oradebug tracefile_name  <-- this will print out the name of the trace file	
	
* In one of the sessions, obtain ASH reports:
	- for period lasting from the time before through the time after the problem ended. If the problem never ended, 
           then please select a 1 hour period.
	- for a 15 minute period just before the problem
	- for a 15 minute period during the problem
	- for a 15 minute period just after the problem
	
	- The ASH reports may be obtained by running $ORACLE_HOME/rdbms/admin/ashrpt.sql
		- choose the HTML output format
		- the output will be found in the current working directory where you started SQLPlus
	
* Look in the user and background dump destinations for the trace files

* Be prepared to upload these to Oracle Support
	- large files should be compressed
	- if the files are very large, you will be instructed by the engineer to upload the files to an FTP site
	- please inform the engineer that you have collected this data
	</pre>
	</p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   RAC: CPU Saturation Affecting LCK0 Process</i></b></p>    <br><p class="detailTblTxt3">The LCK0 process is unable to perform library cache load functions due to CPU saturation; foregrounds wait much longer for library cache load locks.<br>
<br>
Oracle relies on background processes to complete vital tasks in asynchronously.  As long as the background processes are able to complete their tasks in a timely manner, then foreground sessions don't have to wait for resources to become available and aren't hindered by a background task.  However, if the system's CPUs are very busy and there is insufficient capacity to handle the load, then background processes will be unable to obtain CPU resources and will wait on the run queue.  This may cause cascading effects as certain tasks are not completed and foreground sessions will need to wait.<br>
<br>
A few examples are:<br>
<br>
<ul>
<li>
DBWR is unable to write dirty buffers fast enough (since it waits on the run queue) and foreground sessions wait for free buffers.</li>
<li>Archiver is unsable to complete archivelog writes and foregrounds are blocked from switching to the redolog</li>
<li>LCK0 process is unable to perform library cache load functions and foregrounds wait for library cache load locks</li>
</ul></p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">AWR or Statspack show waits for "library cache load lock" greater than 10% of overall DBTime and there is a CPU saturation problem on a host in the cluster.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate the reasons for CPU saturation</i></b></p>    <br><p class="detailTblTxt3">See this guide's "Issue Identification > Analysis > Verify Oracle OS Resource Usage" section for more details.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Determine which processes are using most of the CPU on the machine.  They could be Oracle processes (including more than one instance) or non-Oracle processes.  If they are Oracle processes, then you should have detected this already in a previous step and investigated the reasons for Oracle's CPU consumption (of course, better late than never).  Otherwise, you will need to find out the reason for the non-Oracle CPU consumption (outside of our scope).
<br>
You can use various OS tools and Oracle EM to investigate this.<br>
<br>
Oracle recommends using the "OS Watcher" utility to capture OS diagnostics because it offers an easy way to capture data and report OS data for several platforms.<br>
<br>
There are also commands available in Unix flavors that can help.  For example, use the <i><b>top</b></i> utility or the <i><b>ps</b></i> command, ps -ef -o pid,pcpu,comm | sort -k 2 (this will give you a sorted list of processes using CPU - look at the 2nd column, "% CPU").<br>
<br>
See the documents below for additional details.</p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id= 224176.1">How to use OS commands to diagnose Database Performance issues?</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=164768.1">Diagnosing High CPU Utilization</a></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=301137.1">OS Watcher User Guide</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://st-doc.us.oracle.com/10/102/em.102/b31949/host_3rdparty_management.htm#sthref1533">Enterprise Manager: Host Performance page</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>wait: PL/SQL lock timer
 </b></i></p>    <br><p class="detailTblTxt3">This wait is occurs when a call to DBMS_LOCK.SLEEP is made.</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>TKProf: 
<ul class="detailTblTxt3">
<li>Overall wait event summary for non-recursive and recursive statements shows significant amount of time for <i>PL/SQL lock timer</i> waits.</li>
</ul>
<br>
<li>AWR or statspack: 
<ul class="detailTblTxt3">
<li><i>PL/SQL lock timer</i> is among the top timed events</li>
</ul>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Identify the PL/SQL code that issues DBMS_LOCK.SLEEP</i></b></p>    <br><p class="detailTblTxt3"><i>PL/SQL lock timer</i> watis occur when the call to DBMS_LOCK.SLEEP is made.  The session is neither on the CPU nor waiting for a resource but merely asleep waiting for the call to finish.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">AWR, Statspack, or TKProf shows a significant amount of time listed (10% or more)  in the "Timed Event" section as <i>PL/SQL lock timer</i>.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate the application's usage of the DBMS_LOCK.SLEEP procedure.</i></b></p>    <br><p class="detailTblTxt3">From the database perspective, this is considered an idle wait.  Although for your user, it may be the reason they are perceiving a slow application.  This event is usually called by user-written code using PL/SQL through the DBMS_LOCK.SLEEP procedure. When the sleep is in progress, the wait event for the session(s) is "PL/SQL lock timer".  To reduce this wait, one needs to understand why the application is sleeping and if the sleep duration can be reduced or eliminated.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Removing or reducing this wait will require application changes and subsequent testing.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">There is some risk with changing the application; regression testing will be required to mitigate risks.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Issue the following SQL to identify the sessions waiting on the <i>PL/SQL lock timer</i> event:<br>
<pre>
SELECT s.sid, s.serial#, p.spid, s.module, sq.sql_text "Current SQL"
FROM v$session s, v$sql sq, v$process p
WHERE s.sql_id = sq.sql_id
AND s.event = 'PL/SQL lock timer'
AND s.paddr = p.addr
</pre></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10820/waitevents003.htm#sthref3844">Wait event reference for PL/SQL lock timer</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/E11882_01/appdev.112/e10577/d_lock.htm#i997212">Reference for DBMS_LOCK.SLEEP</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>wait: row cache lock</b></i></p>    <br><p class="detailTblTxt3">The row cache lock is used primarily to serialize changes to the data dictionary. Waits on this event usually indicate some form of DDL occurring, or possibly recursive operations such as storage management and sequence numbers incrementing frequently.</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3">In Statspack, AWR, or TKProf, significant waits for <i>row cache lock</i> are seen.</p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Sequence Cache Management Causing Contention</i></b></p>    <br><p class="detailTblTxt3">Sequences are being incremented quickly and exhausting their caches; this is leading to contention in the row cache as multiple sessions attempt to acquire the row cache lock when they update the row cache with new values.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">In AWR, ASH, statspack, TRCANLZR, or TKProf, observe:<br>
<ol>
<li>Significant row cache lock contention</li>
<li>row cache lock waits are identified as being due to "dc_sequences".  This may be done by observing in AWR or Statspack in the "Dictionary Cache Stats" section, that "dc_sequences" are responsible for most of the modification requests.  ASH will show you the row cache lock wait's P3 values which correspond to the cache_id and may be correlated to the "parameter column" in V$ROWCACHE to see if most waits are for dc_sequences.  </li>
</ol></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Increase the cache size for sequences incrementing rapidly</i></b></p>    <br><p class="detailTblTxt3">Identify the sequences under contention by obtaining a 10046, level 8 trace of sessions that are experiencing the high row cache lock waits.  Find the statements with the highest row cache lock waits on the <i>dc_sequences</i> cache and then look for the sequences they are using.  Increase the cache size of these sequences by using the "ALTER SEQUENCE <sequence name> CACHE <size>" command so they don't need to be updated as frequently.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">simple command to change cache size.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Larger sized caches will improve performance.  Be aware that if the database is restarted or the sequence is aged out of the shared pool, there will be a gap in the sequences up to CACHE size large.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Use the syntax listed in the SQL reference guide for ALTER SEQUENCE.</p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/B19306_01/server.102/b14200/statements_2011.htm#i2228022">ALTER SEQUENCE syntax</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Deeper Investigation Needed</i></b></p>    <br><p class="detailTblTxt3">No specific cause was found for the high row cache lock waits - deeper investigation techniques are needed.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">High row cache lock waits were found but other causes have been ruled out.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Contact Oracle Support Services for additional help.</i></b></p>    <br><p class="detailTblTxt3">This problem requires assistance from Oracle Support Services.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">N/A</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">N/A</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">N/A</p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3">N/A</p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p><br> </td> </tr> </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="5">Concurrency - Latches and Mutexes</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt">Waits for latches and mutexes that are used to coordinate operations. 	</td>	</tr>	</table><br> <table width="100%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"> <tr><td width="100%" class="detailMainTxt"> <p><b>Note:</b> This list shows some common observations and causes but is not a complete list.  If you do not find a possible cause in this list, you can always open a service request with Oracle to investigate other possible causes.  Please see the section below called, "Open a Service Request with Oracle Support Services". </p> </td></tr> </table> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>Wait: latch: cache buffers chains</b></i></p>    <br><p class="detailTblTxt3">Block headers in the buffer cache are placed on linked lists (cache buffer chains) which are accessed through a hash table. One or more hash chains are protected by one child of this latch. Processes need to get the child latch to scan for a buffer. This prevents the linked list from changing while scanning.<br>
<br>
Wait class: Concurrency, typically foreground</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>TKProf: 
<ul class="detailTblTxt3">
<li>Overall summary for non-recursive and recursive statements shows significant amount of time for <i>latch:</i>  or <i>latch free</i> waits.</li>
<li>The <i>cache buffers chains</i> latch is a significant part of the total waits</li>
</ul>
</li>
<br>
<li>AWR or statspack: 
<ul class="detailTblTxt3">
<li>10g or higher: <i>latch: cache buffers chains</i> waits is among the top timed events</li>
<li>Prior to 10g:  <i>latch free</i> waits is among the top timed events and the <i>cache buffers chains</i> latch is among the more prominent latches (high wait times or sleeps)</li>
</ul></li>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Hot blocks due to inefficient execution plan</i></b></p>    <br><p class="detailTblTxt3">Hot blocks refer to block headers that are accessed very frequently (via logical reads) and this frequent access leads to contention on the cache buffers chains latch.<br>
<br>
Inefficient execution plans may perform many logical reads while they visit many blocks.  If this query is executed by many sessions concurrently (or other similar queries against the same blocks), then there will be contention on these blocks.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><br>
TKProf:
<ul class="detailTblTxt3">
<li>Use the report sorted by elapsed fetch time</li>
<li>Look at the top statements and determine if they are seeing latch contention on the cache buffers chains latch.</li>
</ul>
AWR or statspack reports:<br>
<ul class="detailTblTxt3">
<li>10g: waits on <i>latch: cache buffers chains</i></li>
<li>Pre-10g: waits on <i>latch free</i> and highest latch time or sleeps is on the <i>cache buffers chains</i> latch</li>
<li>Examine the <i>Top SQL</i> sections; look for statements with the highest elapsed time.  You will see some of these statements performing a large number of buffer gets (logical reads) per execution</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   10g+: Tune the query using the SQL Tuning Advisor</i></b></p>    <br><p class="detailTblTxt3">Oracle's SQL Tuning Advisor can help tune specific SQL statements quickly and easily if you are licensed to use the Enterprise Manager Tuning Pack.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; the SQL Tuning Advisor is easy to use and requires little user effort to tune a statement.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">The tuning action will generally be to create a statement profile.  The profile affects only a single statement.  Other recommendations may have wide ranging effects and should be tested thoroughly.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=262687.1 ">How to use the Sql Tuning Advisor</a></p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_tune.htm%23PFGRF028">Automatic SQL Tuning </a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14196%2Fmontune003.htm%23sthref784">Using Advisors to Optimize Database Performance</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_tune.htm%23sthref1144">Using SQL Tuning Advisor with Oracle Enterprise Manager</a></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fappdev.102%2Fb14258%2Fd_sqltun.htm%23sthref7584">SQL Tuning Advisor Subprograms </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/sql_tune.htm#CHDBIGDF">Using SQL Tuning Advisor APIs </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=271196.1">Automatic SQL Tuning - SQL Profiles</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Tune the query using the Performance Diagnostic Guide's Query Tuning Section</i></b></p>    <br><p class="detailTblTxt3">This is a query tuning problem that needs to be addressed in detail using the information in the Performance Diagnostic Guide's Query Tuning section.<br></p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; manual query tuning can be easy or difficult depending on the query and application.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; generally query tuning actions will affect only a single query.  Of course this will depend on the ultimate actions taken and some of them can affect an entire instance.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Click on the Query Tuning tab, then skip to the Determine a Cause > Data Collection step.<br>
<br>
Other helpful documents are listed below:</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_1016.htm%23PFGRF006">SQL Tuning Overview </a></p>    <br><p class="detailTblTxt3"> How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=233112.1">Diagnosing Query Tuning Problems</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=67522.1">Diagnosing Why a Query is Not Using an Index</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Hot blocks due to concurrently accessing a popular block</i></b></p>    <br><p class="detailTblTxt3">Hot blocks refer to block headers that are accessed very frequently (via logical reads) and this frequent access leads to contention on the cache buffers chains latch.<br>
<br>
This particular kind of hot block contention occurs when a query only reads a few blocks but this same query (or other ones that access the same blocks) are executed by many sessions at the same time.  The problem can't be solved by tuning the query because the execution plan is already efficient.  Either the query must be executed less often or the rows need to be spread out among more blocks.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><br>
TKProf:
<ul class="detailTblTxt3">
<li>Use the report sorted by elapsed fetch time</li>
<li>Look at the top statements and determine if they are seeing latch contention on the cache buffers chains latch.</li>
<li>Check if these statements only access a few blocks per execution ([query + current] / executions is low)</li>
</ul>
AWR or statspack reports:<br>
<ul class="detailTblTxt3">
<li>10g: waits on <i>latch: cache buffers chains</i></li>
<li>Pre-10g: waits on <i>latch free</i> and highest latch time or sleeps is on the <i>cache buffers chains</i> latch</li>
<li>Examine the <i>Top SQL</i> sections; look for statements with the highest elapsed time.  You will see some of these statements performing a small number of buffer gets (logical reads) per execution</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Spread out the rows over more blocks</i></b></p>    <br><p class="detailTblTxt3">Alter (or even rebuild) tables listed above to use a higher <i>PCTFREE</i> setting.  This will reduce the number of rows per block and hopefully, spread out contention for the blocks (at the expense of wasting space).
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; will require rebuilding a table.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; some queries may run slower because they will need to access more blocks to obtain the same number of rows.  Review how this table is accessed before implementing this solution.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Rows can be spread out by rebuilding the table using a larger value for PCTFREE.  Another way to spread rows out is to make use of the table option, <i> MINIMIZE RECORDS_PER_BLOCK</i> as follows:
<ol>
<li>Export the table</li>
<li>Truncate the table</li>
<li>Insert the desired number of rows per block.  E.g., if you only want 10 rows per block, insert just 10 rows.
<li>Alter the table to set <i>minimize records_per_block</i> setting. E.g.,
<pre>Alter table stock_prices minimize records_per_block;</pre></li>
<li>Delete the rows you inserted in step 3</i>
<li>Import the table</li>
</ol>
<br>
See the documents below for additional information.<br></p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/logical.htm#sthref348">The PCTFREE Parameter</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14200/statements_3001.htm#sthref5130">SQL Ref: Minimize records_per_block Clause</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Use reverse key indexes</i></b></p>    <br><p class="detailTblTxt3">Index leaf blocks may see contention due to key values that are increasing steadily (using a sequence) and concentrated in a leaf block on the "right-hand side" of the index.  Look at using <i>reverse key indexes</i> (if range scans aren't commonly used against the segment).<br>
<br>
A reverse key index will spread keys around evenly and avoid creating these hot leaf blocks.  However, the reverse key index will not be usable for index range scans, so care must be taken to ensure that access is normally done via equality predicates.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; will require rebuilding an index.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; some queries may run much slower because they will not be able to use an index for range scans and may resort to full table scans.  Determine if range scans are needed before implementing this.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/schema.htm#sthref998">Concepts: Reverse Key Indexes</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14200/statements_5010.htm#i2062403">SQL Reference: Create index syntax:</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/design.htm#sthref152">Performance Tuning Guide: Reverse Key Indexes</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Use hash partitioning to spread values across blocks</i></b></p>    <br><p class="detailTblTxt3">Hash partitioning will distribute rows evenly for a given column in a table.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; requires recreating the table and importing rows into it.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; may involve some downtime.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See documents below:</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/partconc.htm#i462869">Concepts: Overview of Hash Partitioning</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14231/partiti.htm#i1006255">When to Use Hash Partitioning</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14200/statements_7002.htm#i2219018">SQL Ref: Create Table, hash partitioning clause</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14200/statements_7002.htm#i2118202">Creating a Hash-Partitioned Table: Example</a></p>    <br><p class="detailTblTxt3">Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=125314.1">Boosting Performance by Hash and Composite Partitions</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Bug 4742607 - "cache buffer chains" latch contention from concurrent index range scans</i></b></p>    <br><p class="detailTblTxt3">Concurrent index range-scan initializations can lead to contention on the "cache buffers chains" hash latches due to latch upgrades.
</p><br>	<p class="detailTblTxt3">Bug 4742607 - "cache buffer chains" latch contention from concurrent index range scans</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><br>
TKProf:
<ul class="detailTblTxt3">
<li>Use the report sorted by elapsed fetch time</li>
<li>Look at the top statements and determine if they are seeing latch contention on the cache buffers chains latch.</li>
<li>The execution plans for these statements make use of index scans</li>
</ul>
AWR or statspack reports:<br>
<ul class="detailTblTxt3">
<li>10g: waits on <i>latch: cache buffers chains</i></li>
<li>Pre-10g: waits on <i>latch free</i> and highest latch time or sleeps is on the <i>cache buffers chains</i> latch</li>
<li>In the <i>Instance Statistics</i>, you will see high "shared hash latch upgrade" statistic counts</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Bug 4742607</i></b></p>    <br><p class="detailTblTxt3">Bug 4742607
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; requires a patch.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; this patch has been well proven.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Additional bug information:</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=BUG&id=4742607">Bug 4742607</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>Wait: latch: library cache<br>
Wait: latch: shared pool <br>
Wait: latch: row cache objects</b></i></p>    <br><p class="detailTblTxt3"><b>Library Cache Latch</b><br>
The library cache latches serialize access to the objects in the library cache. Every time that a SQL statement, a PL/SQL block or a stored object (Procedures, packages, functions, triggers) is parsed or executed, this latch is acquired to ensure the object doesn't change while it is locked in the library cache.<br>
<br>
<b>Shared Pool Latch</b><br>
Free memory in the shared pool is tracked on a number of freelists. The <i>shared pool latch</i> is typically acquired when a chunk of memory is requested, and lasts while scanning the relevant freelists for a chunk of the required size.  The latch may also be acquired for other operations such as coalescing memory or releasing memory back to a freelist.<br>
<br>
Wait class: Concurrency, typically foreground</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>TKProf: 
<ul class="detailTblTxt3">
<li>Overall summary for non-recursive and recursive statements shows significant amount of time for <i>latch:</i>  or <i>latch free</i> waits.</li>
<li>The <i>library cache</i> or <i>shared pool</i> latch is a significant part of the total waits</li>
</ul>
</li>
<br>
<li>AWR or statspack: 
<ul class="detailTblTxt3">
<li>10g or higher: <i>latch: library cache</i> waits is among the top timed events</li>
<li>Prior to 10g:  <i>latch free</i> waits is among the top timed events and the <i>library cache</i> or <i>shared pool</i> latch is among the more prominent latches (high wait times or sleeps)</li>
</ul></li>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Unshared SQL Due to Literals</i></b></p>    <br><p class="detailTblTxt3">SQL statements are using literal values where a bind value could have been used.  The literal values cause the statement to be unshared and will force a hard parse.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><br>
TKProf :
<ul class="detailTblTxt3">
<li>Use the report sorted by elapsed parse time</li>
<li>Look at the top statements and determine if they are being hard parsed; these will have "Misses in the library cache" equal or close to the total number of parses</li>
<li>Examine the statements that are being hard parsed and look for the presence of literal values.</li></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Rewrite the SQL to use bind values</i></b></p>    <br><p class="detailTblTxt3">Rewriting the SQL to use bind values will allow the statement to be reused when specific values in the statement change but the overall statement is the same.  This is the best way to promote sharing of SQL statements in the library cache.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium or high effort; rewriting statements requires a change to the application but the change is rather trivial.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; the use of bind values could lead to worse execution plans for some statements.  The statements modified to use binds values should be thoroughly tested to avoid regressing the statement's performance.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Troubleshooting</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=296377.1">Handling and resolving unshared cursors/large version_counts</a></p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#sthref551">7.3.1.3 SQL Sharing Criteria</a></p>    <br><p class="detailTblTxt3">Searches</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/ranked?word=bind+variables&partno=b14407">Pro*C/C++ Precompiler Programmer's Guide</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/ranked?word=bind+variables&partno=b14211">Performance Tuning Guide</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Use the CURSOR_SHARING initialization parameter</i></b></p>    <br><p class="detailTblTxt3">The CURSOR_SHARING parameter will substitute literal values with bind values in a statement automatically.  The settings for this parameter are:
<ul class="detailTblTxt3">
<li><i>EXACT</i>: Leave the statement as it was written with literals (default value)</li>
<li><i>FORCE</i>: Substitute all literals with binds (as much as possible)</li>
<li><i>SIMILAR</i>: Substitute literals with binds only if the query's execution plan won't change (i.e., safe literal replacement)</li>
</ul>
In general, most OLTP apps that use equality predicates will see little change to their execution plans, but the effects of these parameters should be tested in your application.<br>
<br>
These parameters can be set at the session level to further contain their effects - this is the preferred way to use them to minimize widespread changes.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; an init.ora / spfile change.  In the worst case it may require a LOGON trigger to set it for a session.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; the use of bind values could lead to worse execution plans for some statements.  Risk can be mitigated by using SIMILAR instead of FORCE but this may not make enough statements shareable.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams035.htm#sthref154">Reference: CURSOR_SHARING Parameter</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=94036.1">Init.ora Parameter "CURSOR_SHARING" Reference Note</a></p>    <br><p class="detailTblTxt3">Troubleshooting</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#i31512">CURSOR_SHARING for Existing Applications</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=296377.1">Handling and resolving unshared cursors/large version_counts</a></p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#sthref551">7.3.1.3 SQL Sharing Criteria</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Shared SQL being aged out</i></b></p>    <br><p class="detailTblTxt3">The shared pool is too small and is causing many statements that could be shared to age out of the library cache and later reloaded.  Each reload requires a hard parse and impacts the CPU and latches.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><br>
TKProf:
<ul class="detailTblTxt3">
<li>Use the report sorted by elapsed parse time</li>
<li>Look at the top statements and determine if they are being hard parsed; these will have "Misses in the library cache" equal or close to the total number of parses</li>
<li>Examine the statements that are being hard parsed and look for the ABSENCE of literal values, this means these statements could have been shared but weren't (this is not entirely reliable since you could have statements that use binds but will not be executed again).</li>
</ul>
AWR or statspack reports:<br>
<ul class="detailTblTxt3">
<li>Library Cache statistics section shows that <i>reloads</i> are high (usually several thousand per hour) and little or no invalidations are seen </li>
<li>The "% SQL with executions>1" is over 60%, meaning statements are being shared</li>
<u/ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Increase the size of the shared pool</i></b></p>    <br><p class="detailTblTxt3">Increasing the shared pool size will reduce the need to age out statements that could be shared.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; an init.ora / spfile change. </p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; increasing the size of the shared pool is not risky unless:
<ul class="detailTblTxt3">
<li>There are many unshared statements due to literals
<br>
For more details, see: <a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a>
</li>
<li>The machine doesn't have enough physical memory and starts swapping
<br>
<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=17094.1">TECH: Unix Virtual Memory, Paging & Swapping explained</a></li>
</ul>
Verify the above points before changing the size of the shared pool.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14231/create.htm#BABDBIGB">Admin: Using Manual Shared Memory Management, see Specifying the Shared Pool Size</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams196.htm#sthref804">Reference: SHARED_POOL_SIZE Parameter</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams196.htm#CHDGGAIB">Reference: SHARED_POOL_SIZE and Automatic Storage Management</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   10g+: Use the <i>Automatic Shared Memory Manager (ASMM)</i> to adjust the shared pool size</i></b></p>    <br><p class="detailTblTxt3">ASMM will automate memory sizing for the shared pool to ensure an optimal amount is available. You will need to set a reasonable value for SGA_MAX_SIZE and SGA_TARGET to enable ASMM.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; an init.ora / spfile change. </p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; ASMM will ensure sufficient memory is available.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm">Concepts: Memory Architecture</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm#CNCPT810">Concepts: Automatic Shared Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14231/create.htm#BABGCBHI">Admin: Using Automatic Shared Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#i30970">Performance Tuning: Configuring and Using the Shared Pool and Large Pool</a></p>    <br><p class="detailTblTxt3">Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=257643.1">Oracle Database 10g Automated SGA Memory Tuning</a></p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=295626.1">How To Use Automatic Shared Memory Management (ASMM) In Oracle10g</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=270935.1">Shared pool sizing in 10g</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Keep ("pin") frequently used large PL/SQL and cursor objects in the shared pool</i></b></p>    <br><p class="detailTblTxt3">Use the DBMS_SHARED_POOL.KEEP() procedure to mark large, frequently used PL/SQL and SQL objects in the shared pool and avoid them being aged out.  This will reduce reloads and fragmentation since the object doesn't need to keep reentering the shared pool over and over.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; need to identify which objects should be kept and then run a procedure to keep them.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; if you aren't careful in keeping these objects, you may keep too many of them and cause ORA-4031 errors.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm">Concepts: Memory Architecture</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#sthref647">Performance Tuning: Keeping Large Objects to Prevent Aging</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/appdev.102/b14258/d_shpool.htm#sthref7134">PL/SQL DBMS_SHARED_POOL</a></p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=1012047.6">How To Pin Objects in Your Shared Pool</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=101627.1">How to Automate Pinning Objects in Shared Pool at Database Startup</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=305529.1">How To Use SYS.DBMS_SHARED_POOL In a PL/SQL Stored procedure To Pin objects in Oracle's Shared Pool</a></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=61760.1">Using the Oracle DBMS_SHARED_POOL Package</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Library cache object Invalidations</i></b></p>    <br><p class="detailTblTxt3">When objects (like tables or views) are altered via DDL or collecting statistics, the cursors that depend on them are invalidated.  This will cause the cursor to be hard parsed when it is executed again and will impact CPU and latches.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><br>
TKProf:
<ul class="detailTblTxt3">
<li>Use the report sorted by elapsed parse time</li>
<li>Look at the top statements and determine if they are being hard parsed; these will have "Misses in the library cache" equal or close to the total number of parses</li>
<li>Examine the statements that are being hard parsed and look for the ABSENCE of literal values, this means these statements could have been shared but weren't (this is not entirely reliable since you could have statements that use binds but will not be executed again).</li>
</ul>
AWR or statspack reports:<br>
<ul class="detailTblTxt3">
<li>Library Cache statistics section shows that <i>reloads</i> are high (usually several thousand per hour) and invalidations are high</li>
<li>The "% SQL with executions>1" is over 60%, meaning statements are being shared</li>
<li>Check the <i>Dictionary Statistics</i> section of the report and look for non-zero values in the <i>Modification Requests</i> column, meaning that DDL occurred on some objects.</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Do not perform DDL operations during busy periods</i></b></p>    <br><p class="detailTblTxt3">DDL will often cause library cache objects to be invalidated and this could cascade to many different dependent objects like cursors.  Invalidations have a large impact on the library cache, shared pool, row cache, and CPU since they will likely require many hard parses to occur at the same time.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; defer the DDL to a quiet time.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; may involve some downtime.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Not Applicable.  Simply schedule DDL during maintenance or low activity periods.</p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Do not collect optimizer statistics during busy periods</i></b></p>    <br><p class="detailTblTxt3">Collecting statistics (using ANALYZE or DBMS_STATS) will cause library cache objects to be invalidated and this could cascade to many different dependent objects like cursors.  Invalidations have a large impact on the library cache, shared pool, row cache, and CPU since they will likely require many hard parses to occur at the same time.<br>
<br>
For some database versions, the DBMS_STATS procedure allows give you the option of not invalidating objects (see the "no_invalidate" option).
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; defer the gathering of statistics to a quiet time.  In 10g, you have a choice of whether or not to invalidate objects after gathering statistics.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; defer the gathering of statistics to a quiet time.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">The document links below shows how to specify statistics collection without causing invalidations.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/appdev.102/b14258/d_stats.htm#sthref8129">GATHER_TABLE_STATS Procedure, see the "no_invalidate" option</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Do not perform TRUNCATE operations during busy periods</i></b></p>    <br><p class="detailTblTxt3">See the document below:
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; defer the DDL to a quiet time.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; may involve some downtime.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See documents below:</p>    <br><p class="detailTblTxt3">Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=123214.1 ">Truncate - Causes Invalidations in the LIBRARY CACHE</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Excessive soft parsing</i></b></p>    <br><p class="detailTblTxt3">Soft parsing occurs when Oracle looks in the library cache for a cursor or object it hopes to share.  If it finds the cursor and it is sharable (same optimizer mode, etc), then it will consider this as a soft parse.<br>
Soft parsing is more efficient than hard parsing but still impacts latches to a degree.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><br>
TKProf:
<ul class="detailTblTxt3">
<li>Use the report sorted by elapsed parse time</li>
<li>Look at the top statements and determine if they are being soft parsed; these will have "Misses in the library cache" close to zero</li>
</ul>
AWR or statspack reports:<br>
<ul class="detailTblTxt3">
<li>The <i>Instance Efficiency Percentages</i> will report high values (usually over 60%) for <i>Soft Parse %</i></li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Avoid unnecessary soft parsing in the application</i></b></p>    <br><p class="detailTblTxt3">Application code will sometimes needlessly force a soft parse when it could have simply used an open cursor handle and re-executed the cursor with new bind values.  Look through the application code and determine whether the soft parse is really needed.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; will require coordination with developers to review and change code.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; the change should be very localized.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Ensure your application doesn't perform unnecessary soft parsing.  Typically this occurs when a parse statement is placed in the middle of a loop that iterates over a set of rows.  Consider this pseudo-pseudo-code:
<pre>
list_of_rows = Retrieve some rows()
FOR each row in list_of_rows LOOP
	cursor_handle = PARSE(sql)  # parse for each loop iteration
	EXECUTE(cursor_handle, bind1, bind2)
	CLOSE(cursor_handle)
END LOOP
</pre>
<br>
To avoid the repeated soft parses:<br>
<pre>
list_of_rows = Retrieve some rows()
cursor_handle = PARSE(sql)  # parse once
FOR each row in list_of_rows LOOP
	EXECUTE(cursor_handle, bind1, bind2)
END LOOP
CLOSE(cursor_handle)
</pre>
It's also a good idea to make sure the application leaves cursors open and doesn't re-open them unnecessarily (see references below for best-practice information on this and compensating this using the SESSION_CACHED_CURSORS parameter).</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#sthref552">Performance Tuning Guide: Using the Shared Pool Effectively</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#i34864">Performance Tuning Guide: Cursor Access and Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/appdev.102/b14354/appc.htm#BABCGGAE">Programmer's Guide to the Oracle Precompilers: Eliminating Unnecessary Parsing</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/appdev.102/b14407/pc_actun.htm#i1650">Pro*C/C++ Programmer's Guide: Eliminating Unnecessary Parsing</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/java.102/b14355/stmtcach.htm">JDBC Developer's Guide and Reference : Statement Caching</a></p>    <br><p class="detailTblTxt3"> Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=32895.1">SQL Parsing Flow Diagram</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=34433.1">How to work out how many of the parse count are hard/soft?</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Ensure <i>session cached cursors</i> are used</i></b></p>    <br><p class="detailTblTxt3">The <i>session cached cursors</i> parameter will allow Oracle to maintain a small cache of handles to cursors in the library cache.  During a parse, the cache will be examined and if a match is found, the soft parse will be avoided.<br>
<br>
Review the value of this parameter and consider increasing it (although it should be increased slowly and not above 200 to avoid locking too many statements in the library cache).</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; a parameter change</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; the change can be localized to a session.  Not risky as long as the values is not increased over 200.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#sthref635">Performance Tuning Guide: Caching Session Cursors</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams188.htm#sthref779">Reference: SESSION_CACHED_CURSORS parameter</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#sthref552">Performance Tuning Guide: Using the Shared Pool Effectively</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#i34864">Performance Tuning Guide: Cursor Access and Management</a></p>    <br><p class="detailTblTxt3">Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool, see SESSION_CACHED_CURSORS parameter</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=30804.1">Reference Note for Init.Ora Parameter "SESSION_CACHED_CURSORS"</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=208918.1">SCRIPT - to Gauge the Impact of the SESSION_CACHED_CURSORS Parameter</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Excessive Amount of Child Cursors </i></b></p>    <br><p class="detailTblTxt3">A large number of child cursors are being created for some SQL statements.  This activity is causing contention among various sessions that are creating child cursors concurrently or with other sessions that also need similar resources (latches and mutexes).</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">AWR / Statspack reports; look in the "SQL ordered by Version Count" section.  If there are any SQL statements with more than 500 versions, then this problem is likely to be occurring.  Alternatively, you can query V$SQLAREA to look for any SQL with version_count greater than 500.<br>
<br>
Query V$SQL_SHARED_CURSOR to see the reasons why SQL isn't being shared.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Inappropriate use of parameter CURSOR_SHARING set to SIMILAR</i></b></p>    <br><p class="detailTblTxt3">The difference between SIMILAR and FORCE is that SIMILAR forces similar statements to share the SQL area without deteriorating execution plans. Setting CURSOR_SHARING to FORCE forces similar statements to share the SQL area potentially deteriorating execution plans.<br>
<br>
One of the cursor sharing criteria when literal replacement is enabled with CURSOR_SHARING as SIMILAR is that bind value should match initial bind value if the execution plan is going to change depending on the value of the literal. The reason for this is we might get a sub-optimal plan if we use the same cursor. This would typically happen when, depending on the value of the literal, the optimizer is going to chose a different plan. For example, if we have a predicate with " > ", then each execution with different bind values would result in a new child cursor because that would ensure that the plan didn't change (a range predicate influences cost and plans), if this was an equality predicate, we would always share the same child cursor.  <br>
<br>
Avoiding the use of CURSOR_SHARING set to SIMILAR entails either rewriting the SQL in the application so that it uses bind values and still gets a good plan (hints, profiles, or outlines may be needed), or using CURSOR_SHARING set to FORCE which will avoid generating child cursors but can cause plans to be sub-optimal.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Depends on the change made.  Changing the CURSOR_SHARING initialization parameter to FORCE is easy; changing the application to use binds will take more effort.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Depends on the change made.  Changing the CURSOR_SHARING initialization parameter to FORCE is risky if done at the database instance level, but less risky at the session level.  Changing the application SQL is not as risky since only the single statement is affected.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See documents below:</p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams035.htm#i1125803">CURSOR_SHARING Parameter</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=94036.1">Init.ora Parameter "CURSOR_SHARING" Reference Note</a></p>    <br><p class="detailTblTxt3">Troubleshooting</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=296377.1">Handling and resolving unshared cursors/large version_counts</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate the possible reasons for excessive amounts of child cursors.</i></b></p>    <br><p class="detailTblTxt3">Child cursors are created by Oracle when it is unable to share an existing child cursor.  There are many reasons why a child cursor may not be shared, so the view "V$SQL_SHARED_CURSOR" must be consulted to find the specific reasons affecting a particular cursor.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">The investigation is generally simple as it is just a query.  The ultimate solution may be more difficult.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Just a query or script needs to be run which queries dynamic views.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10821/memory.htm#PFGRF94297">Shared Cursors</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db112/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FE11882_01%2Fserver.112%2Fe10820%2Fdynviews_3055.htm%23REFRN30254">V$SQL_SHARED_CURSOR reference</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=438755.1">Script: Formated V$SQL_SHARED_CURSOR Report by SQLID or Hash Value</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=3461251.8">V$SQL_SHARED_CURSOR shows all N with CURSOR_SHARING</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Contention caused by changing object privileges</i></b></p>    <br><p class="detailTblTxt3">Changing object privilges causes contention in the library cache since the object will need to be invalidated and reparsed with the new privileges.  Any type of privilege change using GRANT or REVOKE on an object may cause dependent objects to become invalidated too thereby amplifying the effect of the change and causing contention if the system is busy.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">This cause is likely if there are:<br>
	<ul>
	<li>waits on the library cache, shared pool latches, mutexes, and/or library cache pins</li>
	<li>High invalidations</li>
	<li>DDL and other causes have been eliminated</li>
	</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Avoid making grants during periods of high activity or concurrency</i></b></p>    <br><p class="detailTblTxt3">Schedule the privilege changes when the system is quiet to avoid impacting users.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Depends on the availability requirements of the system; no extra effort is involved - just rescheduling.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; some contention is possible if the time period was not quiet enough</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">N/A</p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Library cache issue; Deeper investigation needed. 
</i></b></p>    <br><p class="detailTblTxt3">If none of the other causes are likely, then additional diagnostics are needed for this problem.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">There is insufficient information to suggest a cause.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Additional Library Cache Diagnostics Needed</i></b></p>    <br><p class="detailTblTxt3">This solution describes additional diagnostics that can be obtained to help solve problems with the library cache, dictionary cache, or general parsing problems.  Obtaining these diagnostics ahead of time can help expedite your SR with Oracle.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">These diagnostics often involve procedures that may not be well known and require special care.  We recommend they be implemented by experienced DBAs only.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblHighBG">      <p align="center"><b>H</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Some of the procedures and commands in this note have the potential to introduce severe performance degradation into your system.  They should be used with care and only in cases where your system is already experiencing serious performance problems and these diagnostics are required to proceed further.<br>
<br>
<b>Do not proceed with these steps until you are thoroughly familiar with them and have practiced them on a test system.  If you have any concerns, please stop and file an SR with Oracle.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Please collect the trace files that will be produced from the following steps and send them to Oracle once you have an SR number.  Do the following steps:
<pre>
* Open 3 separate terminal sessions

* Log onto the database as SYSDBA if possible; if you aren't able to log on, then use the "PRELIM" option as follows:
	$ sqlplus -prelim "/ as sysdba"

* Use ORADEBUG to allow the trace files to be any size (repeat in all sessions):
	$ oradebug setmypid
	$ oradebug unlimit
	
* In one session, obtain two sets of hanganalyze reports :

	$ oradebug hanganalyze 3
	...wait 1 minute ...
	$ oradebug hanganalyze 3
	$ oradebug tracefile_name  <-- this will print out the name of the trace file
		
	NOTE: There is a problem with this in some versions!

* Examine the hanganalyze trace file and look for the section that says: "Dumping call stack..." 
and "Dumping detailed process information..."; note the ospids of the files dumped and be sure to send them to Oracle

If there is still time to collect more diagnostics, then collect the following:
	
* In another session, obtain two sets of systemstate dumps :
	$ oradebug dump systemstate 266
	...wait 1 minute ...
	$ oradebug dump systemstate 266
	$ oradebug tracefile_name  <-- this will print out the name of the trace file	

	NOTE: level 266 provides a lot of information but may also take a long time (more than 1/2 hour) in some 
environments.  If the dump needs to be completed as quickly as possible, a reasonable amount of data may be 
collected at level 258 (however, sometimes this may not be enough data to determine a root cause).
	
If there is still time to collect more diagnostics, then collect the following:	
	
* In a third session, obtain a rowcache dump
	$ oradebug dump ROW_CACHE 11
	$ oradebug tracefile_name  <-- this will print out the name of the trace file	
	
* In one of the sessions, obtain ASH reports:
	- for period lasting from the time before through the time after the problem ended. If the problem never ended, 
           then please select a 1 hour period.
	- for a 15 minute period just before the problem
	- for a 15 minute period during the problem
	- for a 15 minute period just after the problem
	
	- The ASH reports may be obtained by running $ORACLE_HOME/rdbms/admin/ashrpt.sql
		- choose the HTML output format
		- the output will be found in the current working directory where you started SQLPlus
	
* Look in the user and background dump destinations for the trace files

* Be prepared to upload these to Oracle Support
	- large files should be compressed
	- if the files are very large, you will be instructed by the engineer to upload the files to an FTP site
	- please inform the engineer that you have collected this data
	</pre>
	</p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>wait: latch: session allocation
 </b></i></p>    <br><p class="detailTblTxt3">This latch protects allocation of state objects related to session creation and deletion.  It is typically busy when many concurrent sessions (especially recursive ones) are being created and destroyed.</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3">AWR  shows the wait event, "latch: session allocation" in the "Top 5 Timed Events" section and it is more than 10% of total DBTime.</p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Additional Diagnostics Needed</i></b></p>    <br><p class="detailTblTxt3">Additional diagnostics and analysis are needed to find a solution.  </p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">There is insufficient information to suggest a specific cause.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Additional Diagnostics Needed</i></b></p>    <br><p class="detailTblTxt3">Additional diagnostics and analysis are needed to find a solution.  Please file a Service Request to obtain assistance.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Diagnostic efforts vary depending on the problem.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Risks involved in collecting diagnostics vary depending on the kind of diagnostics being obtained.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Please file an SR for more details on what should be done next.</p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>wait: latch free
 </b></i></p>    <br><p class="detailTblTxt3">The <i>latch free</i> wait event is an umbrella event that rolls up all latch wait time that has not otherwise been accounted for separately (like <i>latch: shared pool</i> and other latch wait events).</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3">AWR, Statspack, or TKProf shows a significant amount of time listed (10% or more)  in the "Timed Event" section as <i>latch free</i>.</p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Deeper investigation needed for <i>latch free</i> waits.</i></b></p>    <br><p class="detailTblTxt3"><i>latch free</i> waits may be caused by various latches that may not be well known.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">AWR, Statspack, or TKProf shows a significant amount of time listed (10% or more)  in the "Timed Event" section as <i>latch free</i>.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate Latch Free Waits</i></b></p>    <br><p class="detailTblTxt3">Since the <i>latch free</i> wait event covers various latches, one must find which latch or latches are most responsible for the wait and then find the reason for the wait.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Finding which latch is mostly responsible for the waits is easy, but determining how to address the wait can be difficult.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">The risk depends on which latch is impacted and what changes are needed to reduce contention on the latch.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below for information on <i>latch free</i> waits and how to determine the specific latch involved.  <br>
<br>
Typically, you will need to file a service request  for more help if you aren't able to adequately research the latch.</p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id= 34576.1">WAITEVENT: "latch free" Reference Note</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=413942.1">How to Identify Which Latch is Associated with a "latch free" wait</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p><br> </td> </tr> </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="6">Configuration</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt">Waits caused by inadequate configuration of database or instance resources (for example, undersized log file sizes, shared pool size). 	</td>	</tr>	</table><br> <table width="100%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"> <tr><td width="100%" class="detailMainTxt"> <p><b>Note:</b> This list shows some common observations and causes but is not a complete list.  If you do not find a possible cause in this list, you can always open a service request with Oracle to investigate other possible causes.  Please see the section below called, "Open a Service Request with Oracle Support Services". </p> </td></tr> </table> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>wait: free buffer waits</b></i></p>    <br><p class="detailTblTxt3">This wait event indicates that a server process was unable to find a free buffer and has posted the database writer to make free buffers by writing out dirty buffers (buffers w/unwritten changes). Once DBWR finishes writing the dirty buffers to disk, they are free to be reused.</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>TKProf: 
<ul class="detailTblTxt3">
<li>Overall wait event summary for non-recursive and recursive statements shows significant amount of time for <i>free buffer waits</i> waits.</li>
</ul>
<br>
<li>AWR or statspack: 
<ul class="detailTblTxt3">
<li>Significant waits for <i>free buffer waits</i></li>
</ul>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Poor file write performance in some filesystems</i></b></p>    <br><p class="detailTblTxt3">Some filesystems have poor write performance (writes take too long) and is impacting DBwriter's ability to keep enough clean buffers in the buffer cache.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">AWR / Statspack:
<ul class="detailTblTxt3">
<li><i>free buffer waits</i></i>
<li>db file parallel write waits have an average wait time LARGER than several hundred milliseconds (DBwriter writes in batches so the rule of them is higher than 20mSec / write for DBWriter)</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate possible I/O performance problems</i></b></p>    <br><p class="detailTblTxt3">To investigate further you must:
<ul class="detailTblTxt3">
<li>Find out which file numbers are causing the highest average waits and then determine which filesystem contains the file</li>
<li>Determine why the filesystems are performing poorly.  Some common causes are:
<ul class="detailTblTxt3">
<li>"hot filesystems" - too many active files on the same filesystem exhausting the I/O bandwidth</li>
<li>hardware problem</li>
<li>In Parallel Execution (PX) is being used, determine if the I/O subsystem is saturated by having too many slaves in use.</li>
</ul>
</ul>
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; depends on the skill level of the system administrators.  Correcting a problem can involve major effort to move files to a new destination.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; hardware changes and structural database changes carry risk that may require a restore.  Backups should be taken and restoring procedures should be tested before attempting changes.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/iodesign.htm#g37279">I/O Configuration and Design</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/instance_tune.htm#sthref924">Wait Event: db file scattered read</a></p>    <br><p class="detailTblTxt3"> Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=223117.1">Tuning I/O-related waits</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Buffer cache is too small</i></b></p>    <br><p class="detailTblTxt3">If the buffer cache is too small and filled with hot blocks, then sessions will be starved for free buffers (clean, cold blocks) and will need to spend too much time looking for free buffers and/or posting DBWR to write dirty blocks and make them free.  


Increase the parameter DB_BLOCK_BUFFERS(Oracle8+) or DB_CACHE_SIZE (Oracle9+) and monitor the effect of the change.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">AWR / Statspack:
<ul class="detailTblTxt3">
<li><i>free buffer waits</i></i>
<li>DBWriter is not seeing a performance problem in writing the files.  Specifically, <i>db file parallel write</i> waits have an average wait time SMALLER than several hundred milliseconds (DBwriter writes in batches so the rule of them is higher than 20mSec / write for DBWriter</li>
<li>You may see high values (compared to a baseline) for statistics <i>write clones, hot blocks moved to the head of the LRU, </i>and <i>free buffers inspected</i></li>
</ul>

</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Manually Increase the size of the buffer cache using the <i>db cache size</i> parameter</i></b></p>    <br><p class="detailTblTxt3">Increase the size of the buffer cache and monitor the effects of the change.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; change an initialization parameter</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk. However, there must be sufficient memory on the machine to avoid memory shortage problems.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm#CNCPT007">Concepts: Oracle Memory Architecture</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fmemory.htm%23sthref485">Configuring and Using the Buffer Cache</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   10g+: Use automatic shared memory management (ASMM) </i></b></p>    <br><p class="detailTblTxt3">ASMM will seek to optimize the size of the buffer cache without human intervention.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; change an initialization parameter</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk. Be sure to set SGA_TARGET to a reasonable value.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm">Concepts: Memory Architecture</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm#CNCPT810">Concepts: Automatic Shared Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14231/create.htm#BABGCBHI">Admin: Using Automatic Shared Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#i30970">Performance Tuning: Configuring and Using the Shared Pool and Large Pool</a></p>    <br><p class="detailTblTxt3">Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=257643.1">Oracle Database 10g Automated SGA Memory Tuning</a></p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=295626.1">How To Use Automatic Shared Memory Management (ASMM) In Oracle10g</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=270935.1">Shared pool sizing in 10g</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   DBWriter is not using asynchronous I/O</i></b></p>    <br><p class="detailTblTxt3">The DBWriter will achieve optimal throughput when asynchronous I/O is available to it.  DBWriter may not be able to keep up with buffer demands if asynch I/O is not available.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">AWR / Statspack:
<ul class="detailTblTxt3">
<li><i>free buffer waits</i></i>
<li>DBWriter is seeing a performance problem in writing the files.  Specifically, <i>db file parallel write</i> waits have an average wait time LARGER than several hundred milliseconds (DBwriter writes in batches so the rule of them is higher than 20mSec / write for DBWriter</li>
<li>Asynchronous I/O is disabled via the initialization parameter <i>disk_asynch_io</i> or <i>filesystemio_options </i></li>
</ul>

</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Enable asynchronous I/O</i></b></p>    <br><p class="detailTblTxt3">Enable asynchronous I/O If the platform supports it.  This is preferred over adding multiple DBwriters or I/O slaves.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; initialization parameter change</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk. Ensure your platform supports it and is up-to-date on patches</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/instance_tune.htm#sthref1004">Performance Tuning Guide: Choosing Between Multiple DBWR Processes and I/O Slaves </a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/ch23_os.htm#sthref748">Performance Tuning Guide: Asynchronous I/O</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b15658/appa_aix.htm#sthref787 ">AIX: Using Asynchronous I/O</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b15658/appb_hpux.htm#i637036">HPUX: Using Asynchronous I/O</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b15658/appc_linux.htm#BABIIHEJ">Linux: Using Asynchronous I/O</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams061.htm#sthref246">Reference: DISK_ASYNCH_IO Parameter</a></p>    <br><p class="detailTblTxt3"> Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=237299.1">How To Check If Asynchronous I/O Is Working On Linux</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=225751.1">Asynchronous I/O (aio) on RedHat Advanced Server 2.1 and RedHat Enterprise Linux 3</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62172.1">Understanding and Tuning Buffer Cache and DBWR</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=91062.1">Database Writer and Buffer Management</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Use multiple DBwriters </i></b></p>    <br><p class="detailTblTxt3">Enable asynchronous I/O If the platform supports it.  However, if your platform doesn't support it, then adding multiple DBWriters can help divide the workload.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; initialization parameter change</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk. </p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/instance_tune.htm#sthref1004">Performance Tuning Guide: Choosing Between Multiple DBWR Processes and I/O Slaves </a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62172.1">Understanding and Tuning Buffer Cache and DBWR</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=91062.1">Database Writer and Buffer Management</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Additional Diagnostics Needed</i></b></p>    <br><p class="detailTblTxt3">Additional diagnostics and analysis are needed to find a solution.  </p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">There is insufficient information to suggest a specific cause.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Additional Diagnostics Needed</i></b></p>    <br><p class="detailTblTxt3">Additional diagnostics and analysis are needed to find a solution.  Please file a Service Request to obtain assistance.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Diagnostic efforts vary depending on the problem.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Risks involved in collecting diagnostics vary depending on the kind of diagnostics being obtained.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Please file an SR for more details on what should be done next.</p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   CPU Saturation is impacting DB Writer</i></b></p>    <br><p class="detailTblTxt3">DB Writer is unable to obtain sufficient CPU resources to clean buffers fast enough for foreground session demand.<br>
<br>
Oracle relies on background processes to complete vital tasks in asynchronously.  As long as the background processes are able to complete their tasks in a timely manner, then foreground sessions don't have to wait for resources to become available and aren't hindered by a background task.  However, if the system's CPUs are very busy and there is insufficient capacity to handle the load, then background processes will be unable to obtain CPU resources and will wait on the run queue.  This may cause cascading effects as certain tasks are not completed and foreground sessions will need to wait.<br>
<br>
A few examples are:<br>
<br>
<ul>
<li>
DBWR is unable to write dirty buffers fast enough (since it waits on the run queue) and foreground sessions wait for free buffers.</li>
<li>Archiver is unsable to complete archivelog writes and foregrounds are blocked from switching to the redolog</li>
<li>LCK0 process is unable to perform library cache load functions and foregrounds wait for library cache load locks</li>
</ul></p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">AWR or Statspack show waits for "free buffer waits" or "write complete waits" greater than 10% of overall DBTime and there is a CPU saturation problem on the host. </p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate the reasons for CPU saturation</i></b></p>    <br><p class="detailTblTxt3">See this guide's "Issue Identification > Analysis > Verify Oracle OS Resource Usage" section for more details.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Determine which processes are using most of the CPU on the machine.  They could be Oracle processes (including more than one instance) or non-Oracle processes.  If they are Oracle processes, then you should have detected this already in a previous step and investigated the reasons for Oracle's CPU consumption (of course, better late than never).  Otherwise, you will need to find out the reason for the non-Oracle CPU consumption (outside of our scope).
<br>
You can use various OS tools and Oracle EM to investigate this.<br>
<br>
Oracle recommends using the "OS Watcher" utility to capture OS diagnostics because it offers an easy way to capture data and report OS data for several platforms.<br>
<br>
There are also commands available in Unix flavors that can help.  For example, use the <i><b>top</b></i> utility or the <i><b>ps</b></i> command, ps -ef -o pid,pcpu,comm | sort -k 2 (this will give you a sorted list of processes using CPU - look at the 2nd column, "% CPU").<br>
<br>
See the documents below for additional details.</p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id= 224176.1">How to use OS commands to diagnose Database Performance issues?</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=164768.1">Diagnosing High CPU Utilization</a></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=301137.1">OS Watcher User Guide</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://st-doc.us.oracle.com/10/102/em.102/b31949/host_3rdparty_management.htm#sthref1533">Enterprise Manager: Host Performance page</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>wait: read by other session</b></i></p>    <br><p class="detailTblTxt3">A session wants to pin a block that is currently being read from disk into the buffer cache by another session.</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3">TKProf or AWR
<ul class="detailTblTxt3">
<li>Significant waits for the <i>read by other session</i> event</li>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   SQL tuning required; no I/O problems</i></b></p>    <br><p class="detailTblTxt3">If performance time is dominated by this wait event, then SQL tuning may reduce the number of reads and speed up queries.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>Significant amount of the total time in TKProf is due to this wait event</li>
<li>The average time for this event (total time / wait count) should be less than 20 mSec to discount an I/O problem.</li></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   10g+: Tune the query using the SQL Tuning Advisor</i></b></p>    <br><p class="detailTblTxt3">Oracle's SQL Tuning Advisor can help tune specific SQL statements quickly and easily if you are licensed to use the Enterprise Manager Tuning Pack.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; the SQL Tuning Advisor is easy to use and requires little user effort to tune a statement.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">The tuning action will generally be to create a statement profile.  The profile affects only a single statement.  Other recommendations may have wide ranging effects and should be tested thoroughly.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=262687.1 ">How to use the Sql Tuning Advisor</a></p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_tune.htm%23PFGRF028">Automatic SQL Tuning </a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14196%2Fmontune003.htm%23sthref784">Using Advisors to Optimize Database Performance</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_tune.htm%23sthref1144">Using SQL Tuning Advisor with Oracle Enterprise Manager</a></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fappdev.102%2Fb14258%2Fd_sqltun.htm%23sthref7584">SQL Tuning Advisor Subprograms </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/sql_tune.htm#CHDBIGDF">Using SQL Tuning Advisor APIs </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=271196.1">Automatic SQL Tuning - SQL Profiles</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Tune the query using the Performance Diagnostic Guide's Query Tuning Section</i></b></p>    <br><p class="detailTblTxt3">This is a query tuning problem that needs to be addressed in detail using the information in the Performance Diagnostic Guide's Query Tuning section.<br></p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; manual query tuning can be easy or difficult depending on the query and application.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; generally query tuning actions will affect only a single query.  Of course this will depend on the ultimate actions taken and some of them can affect an entire instance.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Click on the Query Tuning tab, then skip to the Determine a Cause > Data Collection step.<br>
<br>
Other helpful documents are listed below:</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_1016.htm%23PFGRF006">SQL Tuning Overview </a></p>    <br><p class="detailTblTxt3"> How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=233112.1">Diagnosing Query Tuning Problems</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=67522.1">Diagnosing Why a Query is Not Using an Index</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   I/O performance problems</i></b></p>    <br><p class="detailTblTxt3">The average time for a an I/O is exceeds typical standards for I/O performance (less than 20 mSec).  </p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>Significant amount of the total time in TKProf is due to this wait event</li>
<li>The average time for this event (total time / wait count) is more than 20 mSec</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate possible I/O performance problems</i></b></p>    <br><p class="detailTblTxt3">To investigate further you must:
<ul class="detailTblTxt3">
<li>Find out which file numbers are causing the highest average waits and then determine which filesystem contains the file</li>
<li>Determine why the filesystems are performing poorly.  Some common causes are:
<ul class="detailTblTxt3">
<li>"hot filesystems" - too many active files on the same filesystem exhausting the I/O bandwidth</li>
<li>hardware problem</li>
<li>In Parallel Execution (PX) is being used, determine if the I/O subsystem is saturated by having too many slaves in use.</li>
</ul>
</ul>
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; depends on the skill level of the system administrators.  Correcting a problem can involve major effort to move files to a new destination.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; hardware changes and structural database changes carry risk that may require a restore.  Backups should be taken and restoring procedures should be tested before attempting changes.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/iodesign.htm#g37279">I/O Configuration and Design</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/instance_tune.htm#sthref924">Wait Event: db file scattered read</a></p>    <br><p class="detailTblTxt3"> Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=223117.1">Tuning I/O-related waits</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Buffer cache is too small</i></b></p>    <br><p class="detailTblTxt3">A small buffer cache will cause more physical reads or, for a RAC database, additional block transfers than would otherwise be required.
</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">TKProf: <br>
<ul class="detailTblTxt3">
<li>Significant waits on <db file sequential read</i> waits , and/or for RAC, <i>global cache CR request</i></li>
<li>SQL statements perform 10 or fewer logical reads (query + current) per row per table per execution, meaning that the statement is reasonably tuned (i.e., if a query joins 2 tables and returns 10 rows, one would expect less than 10*2*3 = 60 logical reads per execution</li>
<li>Full table scans (in a RAC database) are NOT seen in the execution plan for a statement that is waiting on this event</li>
<li>The application is an OLTP type of application and in the overall section of the report,  physical reads ("disk") are equal or close to the number of logical reads (query + current).
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Manually Increase the size of the buffer cache using the <i>db cache size</i> parameter</i></b></p>    <br><p class="detailTblTxt3">Increase the size of the buffer cache and monitor the effects of the change.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; change an initialization parameter</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk. However, there must be sufficient memory on the machine to avoid memory shortage problems.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm#CNCPT007">Concepts: Oracle Memory Architecture</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fmemory.htm%23sthref485">Configuring and Using the Buffer Cache</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   10g+: Use automatic shared memory management (ASMM) </i></b></p>    <br><p class="detailTblTxt3">ASMM will seek to optimize the size of the buffer cache without human intervention.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; change an initialization parameter</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk. Be sure to set SGA_TARGET to a reasonable value.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm">Concepts: Memory Architecture</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm#CNCPT810">Concepts: Automatic Shared Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14231/create.htm#BABGCBHI">Admin: Using Automatic Shared Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#i30970">Performance Tuning: Configuring and Using the Shared Pool and Large Pool</a></p>    <br><p class="detailTblTxt3">Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=257643.1">Oracle Database 10g Automated SGA Memory Tuning</a></p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=295626.1">How To Use Automatic Shared Memory Management (ASMM) In Oracle10g</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=270935.1">Shared pool sizing in 10g</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Additional Diagnostics Needed</i></b></p>    <br><p class="detailTblTxt3">Additional diagnostics and analysis are needed to find a solution.  </p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">There is insufficient information to suggest a specific cause.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Additional Diagnostics Needed</i></b></p>    <br><p class="detailTblTxt3">Additional diagnostics and analysis are needed to find a solution.  Please file a Service Request to obtain assistance.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Diagnostic efforts vary depending on the problem.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Risks involved in collecting diagnostics vary depending on the kind of diagnostics being obtained.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Please file an SR for more details on what should be done next.</p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>wait:  log buffer space</b></i></p>    <br><p class="detailTblTxt3">This event occurs when server processes are writing redo records to the log buffer faster than LGWR can write them out; eventually, the log buffer fills up and the processes wait for free space.  After LGWR writes some buffers out, then those buffers may be reused by other processes.</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>TKProf: 
<ul class="detailTblTxt3">
<li>Overall wait event summary for non-recursive and recursive statements shows significant amount of time for <i>log buffer space</i> waits associated with DML statements.</li>
</ul>
<br>
<li>AWR or statspack: 
<ul class="detailTblTxt3">
<li>Significant waits for <i>log buffer space</i></li>
</ul>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   The log buffer is too small</i></b></p>    <br><p class="detailTblTxt3">If the log buffer is too small, then the demand for redolog buffer space will overtake the supply of buffers and cause these waits.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">AWR / Statspack:
<ul class="detailTblTxt3">
<li><i>log buffer space</i> waits</i>
<li>initialization parameter, <i>log buffer</i> is smaller than:<br>
statistic: redo size per sec * 600 (10 min worth of redo) </li>
<li>The average time for <i>log file parallel write</i> is less than 20mSec</li>
</ul>
</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Increase the size of the log buffer</i></b></p>    <br><p class="detailTblTxt3">Increase the parameter LOG_BUFFER to increase the redo log buffer size. Values of LOG_BUFFER larger than 32 MB (and even around 3 MB) will usually not have any effect (and will just waste memory). </p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; easy to change but requires the database to be restarted.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; larger size log buffers could waste memory but will not adversely affect performance (unless there is a memory shortage on the machine).</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm#sthref1320">Concepts: Redolog Buffer</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/process.htm#i7261">Concepts: Log Writer Process (LGWR)</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14237%2Finitparams108.htm%23REFRN10094">Reference: LOG_BUFFER parameter</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14237/waitevents003.htm#sthref4464">Reference: log buffer space wait event</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#i29756">Performance Tuning Guide: Configuring and Using the Redo Log Buffer</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/instance_tune.htm#sthref1042">Performance Tuning Guide: log buffer space wait event</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Logwriter is writing too slow</i></b></p>    <br><p class="detailTblTxt3">If the size of the log buffer is already large (more than 3 MB), speed up the LGWR background process write operations by ensuring that the I/O devices where the redolog files are stored are not suffering from I/O contention. </p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">AWR / Statspack:
<ul class="detailTblTxt3">
<li><i>log buffer space</i> waits</i>
<li>The average time for <i>log file parallel write</i> is MORE than 20mSec</li>
</ul>
<br>
OS disk performance data on the filesystems where redologs are placed show disk response times greater than 20mSec.</p>	  <br><p class="detailTblTxt3">Additional Information:</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm#sthref1320">Concepts: Redolog Buffer</a></p>	  <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/process.htm#i7261">Concepts: Log Writer Process (LGWR)</a></p>	  <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=34583.1">Wait Event "log file parallel write" Reference Note</a></p>	  <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=223117.1">Tuning I/O-related waits, see 'log file parallel write' wait event section</a></p>	  <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=147468.1">Checkpoint Tuning and Troubleshooting Guide</a></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate possible I/O performance problems</i></b></p>    <br><p class="detailTblTxt3">To investigate further you must:
<ul class="detailTblTxt3">
<li>Find out which file numbers are causing the highest average waits and then determine which filesystem contains the file</li>
<li>Determine why the filesystems are performing poorly.  Some common causes are:
<ul class="detailTblTxt3">
<li>"hot filesystems" - too many active files on the same filesystem exhausting the I/O bandwidth</li>
<li>hardware problem</li>
<li>In Parallel Execution (PX) is being used, determine if the I/O subsystem is saturated by having too many slaves in use.</li>
</ul>
</ul>
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; depends on the skill level of the system administrators.  Correcting a problem can involve major effort to move files to a new destination.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; hardware changes and structural database changes carry risk that may require a restore.  Backups should be taken and restoring procedures should be tested before attempting changes.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/iodesign.htm#g37279">I/O Configuration and Design</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/instance_tune.htm#sthref924">Wait Event: db file scattered read</a></p>    <br><p class="detailTblTxt3"> Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=223117.1">Tuning I/O-related waits</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   log buffer space: Deeper Investigation Needed
 </i></b></p>    <br><p class="detailTblTxt3">If none of the other causes are likely, then additional diagnostics are needed for this problem.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">There is insufficient information to suggest a cause.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate Redo log-related Performance Issues</i></b></p>    <br><p class="detailTblTxt3">Additional diagnostics and analysis are needed to find a solution.  Please review the following articles for more information or file a Service Request to obtain assistance.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Diagnostic efforts vary depending on the problem.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Risks involved in collecting diagnostics vary depending on the kind of diagnostics being obtained.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db112/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FE11882_01%2Fserver.112%2Fe10821%2Finstance_tune.htm%23PFGRF94532">Performance Tuning Guide > Instance Tuning Using Performance Views > Log file switch</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db112/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FE11882_01%2Fserver.112%2Fe10713%2Fphysical.htm%23CNCPT88997">Concepts > Online Redo Log Switches</a></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=147468.1">Checkpoint Tuning and Troubleshooting Guide </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id= 223117.1">Tuning I/O-related waits</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=45042.1">Archiver Best Practices</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=263652.1">Poor throughput while writing to redolog files</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   CPU Saturation is impacting Log Writer</i></b></p>    <br><p class="detailTblTxt3">Log Writer is unable to obtain sufficient CPU resources to write redo blocks fast enough for foreground session demand.<br>
<br>
Oracle relies on background processes to complete vital tasks in asynchronously.  As long as the background processes are able to complete their tasks in a timely manner, then foreground sessions don't have to wait for resources to become available and aren't hindered by a background task.  However, if the system's CPUs are very busy and there is insufficient capacity to handle the load, then background processes will be unable to obtain CPU resources and will wait on the run queue.  This may cause cascading effects as certain tasks are not completed and foreground sessions will need to wait.<br>
<br>
A few examples are:<br>
<br>
<ul>
<li>
DBWR is unable to write dirty buffers fast enough (since it waits on the run queue) and foreground sessions wait for free buffers.</li>
<li>Archiver is unsable to complete archivelog writes and foregrounds are blocked from switching to the redolog</li>
<li>LCK0 process is unable to perform library cache load functions and foregrounds wait for library cache load locks</li>
</ul></p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">AWR or Statspack show waits for "free buffer waits" or "write complete waits" greater than 10% of overall DBTime and there is a CPU saturation problem on the host. </p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate the reasons for CPU saturation</i></b></p>    <br><p class="detailTblTxt3">See this guide's "Issue Identification > Analysis > Verify Oracle OS Resource Usage" section for more details.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Determine which processes are using most of the CPU on the machine.  They could be Oracle processes (including more than one instance) or non-Oracle processes.  If they are Oracle processes, then you should have detected this already in a previous step and investigated the reasons for Oracle's CPU consumption (of course, better late than never).  Otherwise, you will need to find out the reason for the non-Oracle CPU consumption (outside of our scope).
<br>
You can use various OS tools and Oracle EM to investigate this.<br>
<br>
Oracle recommends using the "OS Watcher" utility to capture OS diagnostics because it offers an easy way to capture data and report OS data for several platforms.<br>
<br>
There are also commands available in Unix flavors that can help.  For example, use the <i><b>top</b></i> utility or the <i><b>ps</b></i> command, ps -ef -o pid,pcpu,comm | sort -k 2 (this will give you a sorted list of processes using CPU - look at the 2nd column, "% CPU").<br>
<br>
See the documents below for additional details.</p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id= 224176.1">How to use OS commands to diagnose Database Performance issues?</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=164768.1">Diagnosing High CPU Utilization</a></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=301137.1">OS Watcher User Guide</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://st-doc.us.oracle.com/10/102/em.102/b31949/host_3rdparty_management.htm#sthref1533">Enterprise Manager: Host Performance page</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>wait: log file switch (checkpoint incomplete)
 </b></i></p>    <br><p class="detailTblTxt3">LGWR is unable to switch into the next online redolog because DBWR has not completed its checkpoint for it. When this wait event occurs all commit requests wait for this event to complete.</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3">AWR  shows the wait event, "log file switch (checkpoint incomplete)
 " in the "Top 5 Timed Events" section and it is more than 10% of total DBTime.</p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Redo log files are too small</i></b></p>    <br><p class="detailTblTxt3">LGWR may wait for checkpoints to complete if the redo log files are too small.  This causes log switches to occur frequently and DBWR may not able to keep up with the number of blocks to checkpoint.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul>
<li>AWR or Statspack shows log file switch (checkpoint incomplete) waits</li>
<li>Alert.log shows checkpoints every 15 minutes or less</li>
<li>Redo log files smaller than 100 MB</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Review the redo log configuration </i></b></p>    <br><p class="detailTblTxt3">The cause suggests that either the redo log sizes or number of redo log files is not configured properly.  Further testing with larger redo log sizes or more redo logs is required.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Changing the redo log file configuration is relatively simple.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">There is some risk in changing the redo log configuration - the required change should be well understood and practiced.  Changes should not occur on a busy system.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=147468.1">Checkpoint Tuning and Troubleshooting Guide </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id= 223117.1">Tuning I/O-related waits</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Insuffiient number of redo log groups
 </i></b></p>    <br><p class="detailTblTxt3">An insufficient number of redo log files may lead to checkpoint incomplete waits as the DBWR simply doesn't have enough time to keep up with demand.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul>
<li>AWR or Statspack shows log file switch (checkpoint incomplete) waits</li>
<li>Alert.log shows checkpoints every 15 minutes or less</li>
<li>Redo log files are large; typcially larger than 100 MB</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Review the redo log configuration </i></b></p>    <br><p class="detailTblTxt3">The cause suggests that either the redo log sizes or number of redo log files is not configured properly.  Further testing with larger redo log sizes or more redo logs is required.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Changing the redo log file configuration is relatively simple.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">There is some risk in changing the redo log configuration - the required change should be well understood and practiced.  Changes should not occur on a busy system.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=147468.1">Checkpoint Tuning and Troubleshooting Guide </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id= 223117.1">Tuning I/O-related waits</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   log file switch (checkpoint incomplete): Deeper Investigation Needed
 </i></b></p>    <br><p class="detailTblTxt3">If none of the other causes are likely, then additional diagnostics are needed for this problem.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">There is insufficient information to suggest a cause.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate Redo log-related Performance Issues</i></b></p>    <br><p class="detailTblTxt3">Additional diagnostics and analysis are needed to find a solution.  Please review the following articles for more information or file a Service Request to obtain assistance.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Diagnostic efforts vary depending on the problem.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Risks involved in collecting diagnostics vary depending on the kind of diagnostics being obtained.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db112/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FE11882_01%2Fserver.112%2Fe10821%2Finstance_tune.htm%23PFGRF94532">Performance Tuning Guide > Instance Tuning Using Performance Views > Log file switch</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db112/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FE11882_01%2Fserver.112%2Fe10713%2Fphysical.htm%23CNCPT88997">Concepts > Online Redo Log Switches</a></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=147468.1">Checkpoint Tuning and Troubleshooting Guide </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id= 223117.1">Tuning I/O-related waits</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=45042.1">Archiver Best Practices</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=263652.1">Poor throughput while writing to redolog files</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   CPU Saturation is impacting Log Writer</i></b></p>    <br><p class="detailTblTxt3">Log Writer is unable to obtain sufficient CPU resources to write redo blocks fast enough for foreground session demand.<br>
<br>
Oracle relies on background processes to complete vital tasks in asynchronously.  As long as the background processes are able to complete their tasks in a timely manner, then foreground sessions don't have to wait for resources to become available and aren't hindered by a background task.  However, if the system's CPUs are very busy and there is insufficient capacity to handle the load, then background processes will be unable to obtain CPU resources and will wait on the run queue.  This may cause cascading effects as certain tasks are not completed and foreground sessions will need to wait.<br>
<br>
A few examples are:<br>
<br>
<ul>
<li>
DBWR is unable to write dirty buffers fast enough (since it waits on the run queue) and foreground sessions wait for free buffers.</li>
<li>Archiver is unsable to complete archivelog writes and foregrounds are blocked from switching to the redolog</li>
<li>LCK0 process is unable to perform library cache load functions and foregrounds wait for library cache load locks</li>
</ul></p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">AWR or Statspack show waits for "free buffer waits" or "write complete waits" greater than 10% of overall DBTime and there is a CPU saturation problem on the host. </p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate the reasons for CPU saturation</i></b></p>    <br><p class="detailTblTxt3">See this guide's "Issue Identification > Analysis > Verify Oracle OS Resource Usage" section for more details.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Determine which processes are using most of the CPU on the machine.  They could be Oracle processes (including more than one instance) or non-Oracle processes.  If they are Oracle processes, then you should have detected this already in a previous step and investigated the reasons for Oracle's CPU consumption (of course, better late than never).  Otherwise, you will need to find out the reason for the non-Oracle CPU consumption (outside of our scope).
<br>
You can use various OS tools and Oracle EM to investigate this.<br>
<br>
Oracle recommends using the "OS Watcher" utility to capture OS diagnostics because it offers an easy way to capture data and report OS data for several platforms.<br>
<br>
There are also commands available in Unix flavors that can help.  For example, use the <i><b>top</b></i> utility or the <i><b>ps</b></i> command, ps -ef -o pid,pcpu,comm | sort -k 2 (this will give you a sorted list of processes using CPU - look at the 2nd column, "% CPU").<br>
<br>
See the documents below for additional details.</p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id= 224176.1">How to use OS commands to diagnose Database Performance issues?</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=164768.1">Diagnosing High CPU Utilization</a></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=301137.1">OS Watcher User Guide</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://st-doc.us.oracle.com/10/102/em.102/b31949/host_3rdparty_management.htm#sthref1533">Enterprise Manager: Host Performance page</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>wait: log file switch (archiving needed)
 </b></i></p>    <br><p class="detailTblTxt3">Waiting for a log switch because the log that the LGWR will be switching into has not been archived yet. Indicates a lack of archiver processes (not started), slow archivers, or archive write failure.</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3">AWR  shows the wait event, "log file switch (archiving needed)
 " in the "Top 5 Timed Events" section and it is more than 10% of total DBTime.</p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   log file switch (archiving needed): Deeper Investigation Needed
 </i></b></p>    <br><p class="detailTblTxt3">If none of the other causes are likely, then additional diagnostics are needed for this problem.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">There is insufficient information to suggest a cause.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate Redo log-related Performance Issues</i></b></p>    <br><p class="detailTblTxt3">Additional diagnostics and analysis are needed to find a solution.  Please review the following articles for more information or file a Service Request to obtain assistance.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Diagnostic efforts vary depending on the problem.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Risks involved in collecting diagnostics vary depending on the kind of diagnostics being obtained.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db112/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FE11882_01%2Fserver.112%2Fe10821%2Finstance_tune.htm%23PFGRF94532">Performance Tuning Guide > Instance Tuning Using Performance Views > Log file switch</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db112/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FE11882_01%2Fserver.112%2Fe10713%2Fphysical.htm%23CNCPT88997">Concepts > Online Redo Log Switches</a></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=147468.1">Checkpoint Tuning and Troubleshooting Guide </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id= 223117.1">Tuning I/O-related waits</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=45042.1">Archiver Best Practices</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=263652.1">Poor throughput while writing to redolog files</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   CPU Saturation is impacting Archiver</i></b></p>    <br><p class="detailTblTxt3">Archiver is unable to obtain sufficient CPU resources to archive redo logs fast enough for foreground session demand.<br>
<br>
Oracle relies on background processes to complete vital tasks in asynchronously.  As long as the background processes are able to complete their tasks in a timely manner, then foreground sessions don't have to wait for resources to become available and aren't hindered by a background task.  However, if the system's CPUs are very busy and there is insufficient capacity to handle the load, then background processes will be unable to obtain CPU resources and will wait on the run queue.  This may cause cascading effects as certain tasks are not completed and foreground sessions will need to wait.<br>
<br>
A few examples are:<br>
<br>
<ul>
<li>
DBWR is unable to write dirty buffers fast enough (since it waits on the run queue) and foreground sessions wait for free buffers.</li>
<li>Archiver is unsable to complete archivelog writes and foregrounds are blocked from switching to the redolog</li>
<li>LCK0 process is unable to perform library cache load functions and foregrounds wait for library cache load locks</li>
</ul></p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">AWR or Statspack show waits for "free buffer waits" or "write complete waits" greater than 10% of overall DBTime and there is a CPU saturation problem on the host. </p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate the reasons for CPU saturation</i></b></p>    <br><p class="detailTblTxt3">See this guide's "Issue Identification > Analysis > Verify Oracle OS Resource Usage" section for more details.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Determine which processes are using most of the CPU on the machine.  They could be Oracle processes (including more than one instance) or non-Oracle processes.  If they are Oracle processes, then you should have detected this already in a previous step and investigated the reasons for Oracle's CPU consumption (of course, better late than never).  Otherwise, you will need to find out the reason for the non-Oracle CPU consumption (outside of our scope).
<br>
You can use various OS tools and Oracle EM to investigate this.<br>
<br>
Oracle recommends using the "OS Watcher" utility to capture OS diagnostics because it offers an easy way to capture data and report OS data for several platforms.<br>
<br>
There are also commands available in Unix flavors that can help.  For example, use the <i><b>top</b></i> utility or the <i><b>ps</b></i> command, ps -ef -o pid,pcpu,comm | sort -k 2 (this will give you a sorted list of processes using CPU - look at the 2nd column, "% CPU").<br>
<br>
See the documents below for additional details.</p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id= 224176.1">How to use OS commands to diagnose Database Performance issues?</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=164768.1">Diagnosing High CPU Utilization</a></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=301137.1">OS Watcher User Guide</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://st-doc.us.oracle.com/10/102/em.102/b31949/host_3rdparty_management.htm#sthref1533">Enterprise Manager: Host Performance page</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>time model: connection management call elapsed time
 </b></i></p>    <br><p class="detailTblTxt3">Time spent for managing connections to the database.</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3">AWR or Statspack shows a significant amount of time listed (10% or more)  in the "Time Model Statistics" section as <i>connection management call elapsed time</i>.</p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Frequent logons / logoffs causing contention</i></b></p>    <br><p class="detailTblTxt3">Database logons can be resource intensive operations when dedicated sessions are used.  These dedicated sessions result in a new process being created which requires CPU resources and memory.  Also, various latches are acquired during this process.  When a logoff occurs, the process must be destroyed, again using CPU and latches.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul>
<li>Significant CPU consumption in SYS mode on the host</li>
<li>AWR or Statspack, Time Model section shows significant amount of DBtime spent on <i>Connection management call elapsed time</i> </li>
<li>Frequent logons and logoffs for short lived sessions (see V$SESSION)</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Improve Connection Management</i></b></p>    <br><p class="detailTblTxt3">It is common to see performance problems when an application connects and disconnects for each database interaction using dedicated servers. This problem is common with stateless middleware in application servers. It has over two orders of magnitude impact on performance, and is totally unscalable.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">There are various strategies and technical solutions to improve connection management.  They range from implementing shared servers minimize spawning database processes to configuring connection pooling. The efforts vary with the solution.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblHighBG">      <p align="center"><b>H</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Connection management is fundamental to an application and changes to it introduce risk.  For example, if shared servers will be implemented, then there is a risk that the shared pool or large pool are not sized properly to handle the number of shared server sessions.  This in-turn could lead to ORA-4031 errors (out of shared memory).  Connection management changes require thorough testing using load generators such as Database Replay available with Oracle's Real Application Testing option.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation for Shared Servers</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db112/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FE11882_01%2Fserver.112%2Fe10821%2Fbuild_db.htm%23PFGRF021">Performance Considerations for Shared Servers</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10595/manproc003.htm#i1010000">Configuring Oracle Database for Shared Server</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db112/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FE11882_01%2Fserver.112%2Fe10821%2Fmemory.htm%23PFGRF94329">Determining an Effective Setting for Shared Server UGA Storage</a></p>    <br><p class="detailTblTxt3">Documentation for Connection Pooling</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10595/manproc002.htm#CHDGIJIA">About Database Resident Connection Pooling</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10595/manproc004.htm#CHDGIDBA">Configuring Database Resident Connection Pooling</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/E11882_01/java.112/e12265/intro.htm#BABHFGCA">Java-based Connection Pools</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p><br> </td> </tr> </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="7">Network</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt">Waits caused by network related activity.	</td>	</tr>	</table><br> <table width="100%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"> <tr><td width="100%" class="detailMainTxt"> <p><b>Note:</b> This list shows some common observations and causes but is not a complete list.  If you do not find a possible cause in this list, you can always open a service request with Oracle to investigate other possible causes.  Please see the section below called, "Open a Service Request with Oracle Support Services". </p> </td></tr> </table> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>wait: SQL*Net message from dblink</b></i></p>    <br><p class="detailTblTxt3">The Oracle shadow process is waiting for a message over a database link from a remote process. Note that this wait is also used when waiting for data from "extproc" or from a remote gateway process. </p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>TKProf: 
<ul class="detailTblTxt3">
<li>Overall wait event summary for non-recursive and recursive statements shows significant amount of time for <i>SQL*Net message from dblink</i> waits.</li>
</ul>
<br>
<li>AWR or statspack: 
<ul class="detailTblTxt3">
<li>Significant waits for <i>SQL*Net message from dblink</i></li>
</ul>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   A remote database is not executing the query fast enough</i></b></p>    <br><p class="detailTblTxt3">If the local database is waiting for this event on a distributed query, the remote node(s) may be taking too long to execute the query and return results back to the local node.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">TKProf:
<ol>
<li>Focus attention on the remote database</li>
<li>On the "remote" database, find the session corresponding to the "local" database (it will look like a typical database client)</li>
<li>Determine how long it takes to execute the query sent over the dblink (best if you can trace this session with the 10046 event)</li>
<li>If most of the time is spent executing the "remote" query, this issue is justified</li>
</ol>
</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Tune the remote query using the Performance Diagnostic Guide's Query Tuning Section</i></b></p>    <br><p class="detailTblTxt3">This is a query tuning problem that needs to be addressed in detail on the remote site using the information in the Performance Diagnostic Guide's Query Tuning section.<br>
<br>
Click on the Query Tuning tab, then skip to the Determine a Cause > Data Collection step.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium; tracing distributed queries is more challenging than local queries.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Not applicable</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">In addition to using the Performance Diagnostic Guide's Query Tuning section, see the documents below for specific issues with distributed queries.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14231/ds_concepts.htm#g1022384">Concepts: Distributed Database Concepts</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14231/ds_appdev.htm#i1007640">Admin Guide: Tuning Distributed Queries</a></p>    <br><p class="detailTblTxt3"> Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=68809.1">Distributed Queries</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=33838.1">Determining the execution plan for a distributed query</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p><br> </td> </tr> </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="8">Reads / Writes</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt">Waits for I/O (for example 'db file sequential read'). 	</td>	</tr>	</table><br> <table width="100%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"> <tr><td width="100%" class="detailMainTxt"> <p><b>Note:</b> This list shows some common observations and causes but is not a complete list.  If you do not find a possible cause in this list, you can always open a service request with Oracle to investigate other possible causes.  Please see the section below called, "Open a Service Request with Oracle Support Services". </p> </td></tr> </table> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>wait: db file sequential read</b></i></p>    <br><p class="detailTblTxt3">The session waits while a sequential read from the database is performed. This event is also used for rebuilding the control file, dumping datafile headers, and getting the database file headers.<br>
<br>
Wait class: User I/O, typically foreground</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>TKProf: Overall summary for non-recursive and recursive statements shows significant amount of time for <i>db file sequential read</i> waits. </li>
<br>
<li>AWR or statspack: <i>db file sequential read</i> waits is among the top timed events</li>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   SQL tuning required; no I/O problems</i></b></p>    <br><p class="detailTblTxt3">If performance time is dominated by this wait event, then SQL tuning may reduce the number of reads and speed up queries.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>Significant amount of the total time in TKProf is due to this wait event</li>
<li>The average time for this event (total time / wait count) should be less than 20 mSec to discount an I/O problem.</li></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   10g+: Tune the query using the SQL Tuning Advisor</i></b></p>    <br><p class="detailTblTxt3">Oracle's SQL Tuning Advisor can help tune specific SQL statements quickly and easily if you are licensed to use the Enterprise Manager Tuning Pack.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; the SQL Tuning Advisor is easy to use and requires little user effort to tune a statement.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">The tuning action will generally be to create a statement profile.  The profile affects only a single statement.  Other recommendations may have wide ranging effects and should be tested thoroughly.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=262687.1 ">How to use the Sql Tuning Advisor</a></p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_tune.htm%23PFGRF028">Automatic SQL Tuning </a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14196%2Fmontune003.htm%23sthref784">Using Advisors to Optimize Database Performance</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_tune.htm%23sthref1144">Using SQL Tuning Advisor with Oracle Enterprise Manager</a></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fappdev.102%2Fb14258%2Fd_sqltun.htm%23sthref7584">SQL Tuning Advisor Subprograms </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/sql_tune.htm#CHDBIGDF">Using SQL Tuning Advisor APIs </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=271196.1">Automatic SQL Tuning - SQL Profiles</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Tune the query using the Performance Diagnostic Guide's Query Tuning Section</i></b></p>    <br><p class="detailTblTxt3">This is a query tuning problem that needs to be addressed in detail using the information in the Performance Diagnostic Guide's Query Tuning section.<br></p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; manual query tuning can be easy or difficult depending on the query and application.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; generally query tuning actions will affect only a single query.  Of course this will depend on the ultimate actions taken and some of them can affect an entire instance.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Click on the Query Tuning tab, then skip to the Determine a Cause > Data Collection step.<br>
<br>
Other helpful documents are listed below:</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_1016.htm%23PFGRF006">SQL Tuning Overview </a></p>    <br><p class="detailTblTxt3"> How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=233112.1">Diagnosing Query Tuning Problems</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=67522.1">Diagnosing Why a Query is Not Using an Index</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   I/O performance problems</i></b></p>    <br><p class="detailTblTxt3">The average time for a an I/O is exceeds typical standards for I/O performance (less than 20 mSec).  </p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>Significant amount of the total time in TKProf is due to this wait event</li>
<li>The average time for this event (total time / wait count) is more than 20 mSec</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate possible I/O performance problems</i></b></p>    <br><p class="detailTblTxt3">To investigate further you must:
<ul class="detailTblTxt3">
<li>Find out which file numbers are causing the highest average waits and then determine which filesystem contains the file</li>
<li>Determine why the filesystems are performing poorly.  Some common causes are:
<ul class="detailTblTxt3">
<li>"hot filesystems" - too many active files on the same filesystem exhausting the I/O bandwidth</li>
<li>hardware problem</li>
<li>In Parallel Execution (PX) is being used, determine if the I/O subsystem is saturated by having too many slaves in use.</li>
</ul>
</ul>
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; depends on the skill level of the system administrators.  Correcting a problem can involve major effort to move files to a new destination.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; hardware changes and structural database changes carry risk that may require a restore.  Backups should be taken and restoring procedures should be tested before attempting changes.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/iodesign.htm#g37279">I/O Configuration and Design</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/instance_tune.htm#sthref924">Wait Event: db file scattered read</a></p>    <br><p class="detailTblTxt3"> Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=223117.1">Tuning I/O-related waits</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Buffer cache is too small</i></b></p>    <br><p class="detailTblTxt3">A small buffer cache will cause more physical reads or, for a RAC database, additional block transfers than would otherwise be required.
</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">TKProf: <br>
<ul class="detailTblTxt3">
<li>Significant waits on <db file sequential read</i> waits , and/or for RAC, <i>global cache CR request</i></li>
<li>SQL statements perform 10 or fewer logical reads (query + current) per row per table per execution, meaning that the statement is reasonably tuned (i.e., if a query joins 2 tables and returns 10 rows, one would expect less than 10*2*3 = 60 logical reads per execution</li>
<li>Full table scans (in a RAC database) are NOT seen in the execution plan for a statement that is waiting on this event</li>
<li>The application is an OLTP type of application and in the overall section of the report,  physical reads ("disk") are equal or close to the number of logical reads (query + current).
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Manually Increase the size of the buffer cache using the <i>db cache size</i> parameter</i></b></p>    <br><p class="detailTblTxt3">Increase the size of the buffer cache and monitor the effects of the change.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; change an initialization parameter</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk. However, there must be sufficient memory on the machine to avoid memory shortage problems.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm#CNCPT007">Concepts: Oracle Memory Architecture</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fmemory.htm%23sthref485">Configuring and Using the Buffer Cache</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   10g+: Use automatic shared memory management (ASMM) </i></b></p>    <br><p class="detailTblTxt3">ASMM will seek to optimize the size of the buffer cache without human intervention.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; change an initialization parameter</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk. Be sure to set SGA_TARGET to a reasonable value.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm">Concepts: Memory Architecture</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm#CNCPT810">Concepts: Automatic Shared Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14231/create.htm#BABGCBHI">Admin: Using Automatic Shared Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#i30970">Performance Tuning: Configuring and Using the Shared Pool and Large Pool</a></p>    <br><p class="detailTblTxt3">Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=257643.1">Oracle Database 10g Automated SGA Memory Tuning</a></p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=295626.1">How To Use Automatic Shared Memory Management (ASMM) In Oracle10g</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=270935.1">Shared pool sizing in 10g</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Application performing too many reads</i></b></p>    <br><p class="detailTblTxt3">The application's SQL looks well-tuned (reasonable number of logical reads per execution) and I/O performance looks good, but there are simply a large number of physical reads occuring.  It may be possible to change the application design such that it avoids many unnecessary calls to the database.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul>
<li>AWR or Statspack show significant waits on I/O - related waits like <i>db file sequential read</i> or <i>db file scattered read</i></li>
<li>The average wait time for above waits is low (typcially less than 10 mSec)</li>
<li>SQL statements have a reasonable number of logical reads per execution</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate Application Design</i></b></p>    <br><p class="detailTblTxt3">Sometimes applications are developed in such a way as to make many requests to the database that can easily be avoided.  The individual requests (SQL statements) are handled efficiently by the database, but there is simply so many of them that the database is spending considerable amounts of time servicing them.  Performance tuners like to say, "The most efficient I/O is the one that never occurs".  If the SQL is well-tuned, the buffer cache is sized properly, and the I/O subsystem is performing well, but you see a lot of time spent on I/O anyways, you probably need to consider changing the application design, or implement caching at the application side.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblHighBG">      <p align="center"><b>H</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Changes to the application typically involve a lot of effort in the production stage, but much less effort at the design stage.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblHighBG">      <p align="center"><b>H</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Application changes can be risky so regression testing is critical.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Specific changes are impossible to describe since applications vary in their intent and implementation.  However, the following links may be useful for consideration:</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10821/design.htm#i28071">Performance Tuning Guide > Application Design Principles</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db112/to_toc?pathname=timesten.112%2Fe14261%2Ftoc.htm&remark=portal+%28Books%29">Oracle In-Memory Database Cache Introduction</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10713/memory.htm#CNCPT1919">Concept: Server Result Cache</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10821/memory.htm#BGBCABED">Managing the Server and Client Result Caches</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>wait: db file scattered read</b></i></p>    <br><p class="detailTblTxt3">The session waits while a multiblock read from the database is performed. Similar to db file sequential read, except that the session is reading multiple data blocks and <i>scattering</i> them around the buffer cache.<br>
<br>
Wait class: User I/O, typically foreground</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>TKProf: Overall summary for non-recursive and recursive statements shows significant amount of time for <i>db file scattered read</i> waits. </li>
<br>
<li>AWR or statspack: <i>db file scattered read</i> waits is among the top timed events</li>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   SQL tuning required; no I/O problems</i></b></p>    <br><p class="detailTblTxt3">If performance time is dominated by this wait event, then SQL tuning may reduce the number of reads and speed up queries.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>Significant amount of the total time in TKProf is due to this wait event</li>
<li>The average time for this event (total time / wait count) should be less than 20 mSec to discount an I/O problem.</li></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   10g+: Tune the query using the SQL Tuning Advisor</i></b></p>    <br><p class="detailTblTxt3">Oracle's SQL Tuning Advisor can help tune specific SQL statements quickly and easily if you are licensed to use the Enterprise Manager Tuning Pack.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; the SQL Tuning Advisor is easy to use and requires little user effort to tune a statement.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">The tuning action will generally be to create a statement profile.  The profile affects only a single statement.  Other recommendations may have wide ranging effects and should be tested thoroughly.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=262687.1 ">How to use the Sql Tuning Advisor</a></p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_tune.htm%23PFGRF028">Automatic SQL Tuning </a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14196%2Fmontune003.htm%23sthref784">Using Advisors to Optimize Database Performance</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_tune.htm%23sthref1144">Using SQL Tuning Advisor with Oracle Enterprise Manager</a></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fappdev.102%2Fb14258%2Fd_sqltun.htm%23sthref7584">SQL Tuning Advisor Subprograms </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/sql_tune.htm#CHDBIGDF">Using SQL Tuning Advisor APIs </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=271196.1">Automatic SQL Tuning - SQL Profiles</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Tune the query using the Performance Diagnostic Guide's Query Tuning Section</i></b></p>    <br><p class="detailTblTxt3">This is a query tuning problem that needs to be addressed in detail using the information in the Performance Diagnostic Guide's Query Tuning section.<br></p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; manual query tuning can be easy or difficult depending on the query and application.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; generally query tuning actions will affect only a single query.  Of course this will depend on the ultimate actions taken and some of them can affect an entire instance.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Click on the Query Tuning tab, then skip to the Determine a Cause > Data Collection step.<br>
<br>
Other helpful documents are listed below:</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_1016.htm%23PFGRF006">SQL Tuning Overview </a></p>    <br><p class="detailTblTxt3"> How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=233112.1">Diagnosing Query Tuning Problems</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=67522.1">Diagnosing Why a Query is Not Using an Index</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   I/O performance problems</i></b></p>    <br><p class="detailTblTxt3">The average time for a an I/O is exceeds typical standards for I/O performance (less than 20 mSec).  </p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>Significant amount of the total time in TKProf is due to this wait event</li>
<li>The average time for this event (total time / wait count) is more than 20 mSec</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate possible I/O performance problems</i></b></p>    <br><p class="detailTblTxt3">To investigate further you must:
<ul class="detailTblTxt3">
<li>Find out which file numbers are causing the highest average waits and then determine which filesystem contains the file</li>
<li>Determine why the filesystems are performing poorly.  Some common causes are:
<ul class="detailTblTxt3">
<li>"hot filesystems" - too many active files on the same filesystem exhausting the I/O bandwidth</li>
<li>hardware problem</li>
<li>In Parallel Execution (PX) is being used, determine if the I/O subsystem is saturated by having too many slaves in use.</li>
</ul>
</ul>
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; depends on the skill level of the system administrators.  Correcting a problem can involve major effort to move files to a new destination.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; hardware changes and structural database changes carry risk that may require a restore.  Backups should be taken and restoring procedures should be tested before attempting changes.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/iodesign.htm#g37279">I/O Configuration and Design</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/instance_tune.htm#sthref924">Wait Event: db file scattered read</a></p>    <br><p class="detailTblTxt3"> Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=223117.1">Tuning I/O-related waits</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Application performing too many reads</i></b></p>    <br><p class="detailTblTxt3">The application's SQL looks well-tuned (reasonable number of logical reads per execution) and I/O performance looks good, but there are simply a large number of physical reads occuring.  It may be possible to change the application design such that it avoids many unnecessary calls to the database.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul>
<li>AWR or Statspack show significant waits on I/O - related waits like <i>db file sequential read</i> or <i>db file scattered read</i></li>
<li>The average wait time for above waits is low (typcially less than 10 mSec)</li>
<li>SQL statements have a reasonable number of logical reads per execution</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate Application Design</i></b></p>    <br><p class="detailTblTxt3">Sometimes applications are developed in such a way as to make many requests to the database that can easily be avoided.  The individual requests (SQL statements) are handled efficiently by the database, but there is simply so many of them that the database is spending considerable amounts of time servicing them.  Performance tuners like to say, "The most efficient I/O is the one that never occurs".  If the SQL is well-tuned, the buffer cache is sized properly, and the I/O subsystem is performing well, but you see a lot of time spent on I/O anyways, you probably need to consider changing the application design, or implement caching at the application side.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblHighBG">      <p align="center"><b>H</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Changes to the application typically involve a lot of effort in the production stage, but much less effort at the design stage.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblHighBG">      <p align="center"><b>H</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Application changes can be risky so regression testing is critical.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Specific changes are impossible to describe since applications vary in their intent and implementation.  However, the following links may be useful for consideration:</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10821/design.htm#i28071">Performance Tuning Guide > Application Design Principles</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db112/to_toc?pathname=timesten.112%2Fe14261%2Ftoc.htm&remark=portal+%28Books%29">Oracle In-Memory Database Cache Introduction</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10713/memory.htm#CNCPT1919">Concept: Server Result Cache</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10821/memory.htm#BGBCABED">Managing the Server and Client Result Caches</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>wait: direct path read</b></i></p>    <br><p class="detailTblTxt3">Direct Path operations (parallel execution, hash joins, sorts to disk) read data from  datafiles directly into the PGA (opposed to the buffer cache in SGA). When the process attempts to access a block in the PGA that has not yet been read from disk, it then issues a wait call and updates the statistics for this event. </p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>TKProf: 
<ul class="detailTblTxt3">
<li>Overall wait event summary for non-recursive and recursive statements shows significant amount of time for <i>direct path read</i> waits.</li>
</ul>
<br>
<li>AWR or statspack: 
<ul class="detailTblTxt3">
<li>Significant waits for <i>direct path read</i></li>
</ul>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   I/O performance problems</i></b></p>    <br><p class="detailTblTxt3">The average time for a an I/O is exceeds typical standards for I/O performance (less than 20 mSec).  </p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>Significant amount of the total time in TKProf is due to this wait event</li>
<li>The average time for this event (total time / wait count) is more than 20 mSec</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate possible I/O performance problems</i></b></p>    <br><p class="detailTblTxt3">To investigate further you must:
<ul class="detailTblTxt3">
<li>Find out which file numbers are causing the highest average waits and then determine which filesystem contains the file</li>
<li>Determine why the filesystems are performing poorly.  Some common causes are:
<ul class="detailTblTxt3">
<li>"hot filesystems" - too many active files on the same filesystem exhausting the I/O bandwidth</li>
<li>hardware problem</li>
<li>In Parallel Execution (PX) is being used, determine if the I/O subsystem is saturated by having too many slaves in use.</li>
</ul>
</ul>
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; depends on the skill level of the system administrators.  Correcting a problem can involve major effort to move files to a new destination.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; hardware changes and structural database changes carry risk that may require a restore.  Backups should be taken and restoring procedures should be tested before attempting changes.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/iodesign.htm#g37279">I/O Configuration and Design</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/instance_tune.htm#sthref924">Wait Event: db file scattered read</a></p>    <br><p class="detailTblTxt3"> Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=223117.1">Tuning I/O-related waits</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Incorrect manual workarea sizing</i></b></p>    <br><p class="detailTblTxt3">Oracle uses in-memory workareas in the PGA for performing sorts, hash joins, and other operations.  These can be manually controlled by parameters such as <i>sort_area_size</i> and <i>hash_area_size</i>.<br>
<br>
When these parameters are sized below what Oracle needs do an operation in memory, then some of the data will need to be written in temp segments causing <i>direct path write</i> waits.  Eventually, this data will be read back and will cause <i>direct path read</i> waits.
</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">TKProf: <br>
<ul class="detailTblTxt3">
<li>Significant waits on <i>direct path read</i> or <i>direct path writes</i></li>
<li>Execution plan shows sorts or hash join operations</li>
<li>Average wait time is less than 20 mSec</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Use automatic PGA memory management </i></b></p>    <br><p class="detailTblTxt3">When running under the automatic PGA memory management mode, sizing of work areas for all sessions becomes automatic and the *_AREA_SIZE parameters are ignored by all sessions running in that mode. At any given time, the total amount of PGA memory available to active work areas in the instance is automatically derived from the PGA_AGGREGATE_TARGET initialization parameter. <br>
<br>
Under automatic PGA memory management mode, the main goal of Oracle is to honor the PGA_AGGREGATE_TARGET limit set by the DBA, by controlling dynamically the amount of PGA memory allotted to SQL work areas. At the same time, Oracle tries to maximize the performance of all the memory-intensive SQL operations, by maximizing the number of work areas that are using an optimal amount of PGA memory (cache memory). </p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; initialization parameter change.  Some effort has to be made initially to set the proper target size and adjust it to ensure optimal performance.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk. Initially, some effort should be made to ensure the PGA settings are reasonable and don't regress performance.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm#i14490">Concepts: Overview of the Program Global Areas</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#i49320">Performance Tuning Guide: PGA Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams157.htm#sthref664">Reference: Initialization Parameter PGA_AGGREGATE_TARGET</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams226.htm#sthref917">Reference: Initialization Parameter WORKAREA_SIZE_POLICY</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=223730.1">Automatic PGA Memory Management in 9i and 10g</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=153367.1">Init.ora Parameter "PGA_AGGREGATE_TARGET" Reference Note</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=153387.1">Init.ora Parameter "WORKAREA_SIZE_POLICY" Reference Note </a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Parallel execution is occurring but not expected or desired</i></b></p>    <br><p class="detailTblTxt3">Parallel execution is occurring and causing CPU or I/O problems (typically direct path read/write waits) due to the degree of parallelism.  PX is not expected; the CBO will attempt to use parallel operations if the following are set or used:
<ul class="detailTblTxt3">
<li>Parallel hint: <i>parallel(t1, 4)</i>
<li>ALTER SESSION FORCE PARALLEL</li>
<li>Setting a degree of parallel and/or the number of instances on a table or index in a query </li>
</ul>
</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>The process with very high direct path read waits is a parallel execution slave process.</li>
<li>There are many more PX slave processes than expected or desired</li>
<li>The filesystems where the I/O is occurring were never meant to handle the I/O bandwidth required by the number of PX processes</li>
</ul></p>	  <br><p class="detailTblTxt3">Additional Information:</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14223/usingpe.htm#CACCAGCH">Summary of Parallelization Rules</a></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Remove parallel hints</i></b></p>    <br><p class="detailTblTxt3">The statement is executing in parallel due to parallel hints.  Removing these hints may allow the statement to run serially.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; simply remove the hint from the statement.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk, only affects the statement.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Remove one or more hints of the type:<br>
<ul class="detailTblTxt3">
<li>PARALLEL</li>
<li>PARALLEL_INDEX</li>
<li>PQ_DISTRIBUTE </li>
</ul>
<br>
If one of the tables has a degree greater than 1, the query may still run in parallel.</p>    <br><p class="detailTblTxt3">Hint information:</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/B19306_01/server.102/b14211/hintsref.htm#sthref1619">Hints for Parallel Execution </a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Alter a table or index's degree of parallelism</i></b></p>    <br><p class="detailTblTxt3">A table or index in the query has its degree (of parallelism) set higher than 1.  This may be one factor causing the query to execute in parallel.  If the parallel plan is not performing well, a serial plan may be obtained by changing the degree.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; the object may be changed with an ALTER command.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; other queries may be running in parallel due to the degree setting and will revert to a serial plan.  
An impact analysis should be performed to determine the effect of this change on other queries.<br>
<br>The ALTER command will invalidate cursors that depend on the table or index and may cause a spike in library cache contention - the change should be done during a period of low activity.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14200/statements_7002.htm#i2159323">Parallel clause for the CREATE and ALTER TABLE / INDEX statements</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>wait: direct path write</b></i></p>    <br><p class="detailTblTxt3">When a process is writing buffers directly from the PGA (as opposed to the DBWR writing them from the buffer cache), the process waits on this event to ensure that all outstanding write requests are completed. Example of "direct path writes" operations are: sorts that go to disk, parallel DML operations, direct-path INSERTs, parallel create table as select, and some LOB operations. </p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>TKProf: 
<ul class="detailTblTxt3">
<li>Overall wait event summary for non-recursive and recursive statements shows significant amount of time for <i>direct path write</i> waits.</li>
</ul>
<br>
<li>AWR or statspack: 
<ul class="detailTblTxt3">
<li>Significant waits for <i>direct path write</i></li>
</ul>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   I/O performance problems</i></b></p>    <br><p class="detailTblTxt3">The average time for a an I/O is exceeds typical standards for I/O performance (less than 20 mSec).  </p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>Significant amount of the total time in TKProf is due to this wait event</li>
<li>The average time for this event (total time / wait count) is more than 20 mSec</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate possible I/O performance problems</i></b></p>    <br><p class="detailTblTxt3">To investigate further you must:
<ul class="detailTblTxt3">
<li>Find out which file numbers are causing the highest average waits and then determine which filesystem contains the file</li>
<li>Determine why the filesystems are performing poorly.  Some common causes are:
<ul class="detailTblTxt3">
<li>"hot filesystems" - too many active files on the same filesystem exhausting the I/O bandwidth</li>
<li>hardware problem</li>
<li>In Parallel Execution (PX) is being used, determine if the I/O subsystem is saturated by having too many slaves in use.</li>
</ul>
</ul>
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; depends on the skill level of the system administrators.  Correcting a problem can involve major effort to move files to a new destination.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; hardware changes and structural database changes carry risk that may require a restore.  Backups should be taken and restoring procedures should be tested before attempting changes.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/iodesign.htm#g37279">I/O Configuration and Design</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/instance_tune.htm#sthref924">Wait Event: db file scattered read</a></p>    <br><p class="detailTblTxt3"> Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=223117.1">Tuning I/O-related waits</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Incorrect manual workarea sizing</i></b></p>    <br><p class="detailTblTxt3">Oracle uses in-memory workareas in the PGA for performing sorts, hash joins, and other operations.  These can be manually controlled by parameters such as <i>sort_area_size</i> and <i>hash_area_size</i>.<br>
<br>
When these parameters are sized below what Oracle needs do an operation in memory, then some of the data will need to be written in temp segments causing <i>direct path write</i> waits.  Eventually, this data will be read back and will cause <i>direct path read</i> waits.
</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">TKProf: <br>
<ul class="detailTblTxt3">
<li>Significant waits on <i>direct path read</i> or <i>direct path writes</i></li>
<li>Execution plan shows sorts or hash join operations</li>
<li>Average wait time is less than 20 mSec</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Use automatic PGA memory management </i></b></p>    <br><p class="detailTblTxt3">When running under the automatic PGA memory management mode, sizing of work areas for all sessions becomes automatic and the *_AREA_SIZE parameters are ignored by all sessions running in that mode. At any given time, the total amount of PGA memory available to active work areas in the instance is automatically derived from the PGA_AGGREGATE_TARGET initialization parameter. <br>
<br>
Under automatic PGA memory management mode, the main goal of Oracle is to honor the PGA_AGGREGATE_TARGET limit set by the DBA, by controlling dynamically the amount of PGA memory allotted to SQL work areas. At the same time, Oracle tries to maximize the performance of all the memory-intensive SQL operations, by maximizing the number of work areas that are using an optimal amount of PGA memory (cache memory). </p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; initialization parameter change.  Some effort has to be made initially to set the proper target size and adjust it to ensure optimal performance.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk. Initially, some effort should be made to ensure the PGA settings are reasonable and don't regress performance.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm#i14490">Concepts: Overview of the Program Global Areas</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#i49320">Performance Tuning Guide: PGA Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams157.htm#sthref664">Reference: Initialization Parameter PGA_AGGREGATE_TARGET</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams226.htm#sthref917">Reference: Initialization Parameter WORKAREA_SIZE_POLICY</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=223730.1">Automatic PGA Memory Management in 9i and 10g</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=153367.1">Init.ora Parameter "PGA_AGGREGATE_TARGET" Reference Note</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=153387.1">Init.ora Parameter "WORKAREA_SIZE_POLICY" Reference Note </a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>wait: read by other session</b></i></p>    <br><p class="detailTblTxt3">A session wants to pin a block that is currently being read from disk into the buffer cache by another session.</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3">TKProf or AWR
<ul class="detailTblTxt3">
<li>Significant waits for the <i>read by other session</i> event</li>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   SQL tuning required; no I/O problems</i></b></p>    <br><p class="detailTblTxt3">If performance time is dominated by this wait event, then SQL tuning may reduce the number of reads and speed up queries.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>Significant amount of the total time in TKProf is due to this wait event</li>
<li>The average time for this event (total time / wait count) should be less than 20 mSec to discount an I/O problem.</li></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   10g+: Tune the query using the SQL Tuning Advisor</i></b></p>    <br><p class="detailTblTxt3">Oracle's SQL Tuning Advisor can help tune specific SQL statements quickly and easily if you are licensed to use the Enterprise Manager Tuning Pack.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; the SQL Tuning Advisor is easy to use and requires little user effort to tune a statement.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">The tuning action will generally be to create a statement profile.  The profile affects only a single statement.  Other recommendations may have wide ranging effects and should be tested thoroughly.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=262687.1 ">How to use the Sql Tuning Advisor</a></p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_tune.htm%23PFGRF028">Automatic SQL Tuning </a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14196%2Fmontune003.htm%23sthref784">Using Advisors to Optimize Database Performance</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_tune.htm%23sthref1144">Using SQL Tuning Advisor with Oracle Enterprise Manager</a></p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fappdev.102%2Fb14258%2Fd_sqltun.htm%23sthref7584">SQL Tuning Advisor Subprograms </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/sql_tune.htm#CHDBIGDF">Using SQL Tuning Advisor APIs </a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=271196.1">Automatic SQL Tuning - SQL Profiles</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Tune the query using the Performance Diagnostic Guide's Query Tuning Section</i></b></p>    <br><p class="detailTblTxt3">This is a query tuning problem that needs to be addressed in detail using the information in the Performance Diagnostic Guide's Query Tuning section.<br></p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; manual query tuning can be easy or difficult depending on the query and application.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; generally query tuning actions will affect only a single query.  Of course this will depend on the ultimate actions taken and some of them can affect an entire instance.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Click on the Query Tuning tab, then skip to the Determine a Cause > Data Collection step.<br>
<br>
Other helpful documents are listed below:</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fsql_1016.htm%23PFGRF006">SQL Tuning Overview </a></p>    <br><p class="detailTblTxt3"> How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=233112.1">Diagnosing Query Tuning Problems</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=67522.1">Diagnosing Why a Query is Not Using an Index</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   I/O performance problems</i></b></p>    <br><p class="detailTblTxt3">The average time for a an I/O is exceeds typical standards for I/O performance (less than 20 mSec).  </p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul class="detailTblTxt3">
<li>Significant amount of the total time in TKProf is due to this wait event</li>
<li>The average time for this event (total time / wait count) is more than 20 mSec</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate possible I/O performance problems</i></b></p>    <br><p class="detailTblTxt3">To investigate further you must:
<ul class="detailTblTxt3">
<li>Find out which file numbers are causing the highest average waits and then determine which filesystem contains the file</li>
<li>Determine why the filesystems are performing poorly.  Some common causes are:
<ul class="detailTblTxt3">
<li>"hot filesystems" - too many active files on the same filesystem exhausting the I/O bandwidth</li>
<li>hardware problem</li>
<li>In Parallel Execution (PX) is being used, determine if the I/O subsystem is saturated by having too many slaves in use.</li>
</ul>
</ul>
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; depends on the skill level of the system administrators.  Correcting a problem can involve major effort to move files to a new destination.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium risk; hardware changes and structural database changes carry risk that may require a restore.  Backups should be taken and restoring procedures should be tested before attempting changes.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/iodesign.htm#g37279">I/O Configuration and Design</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/instance_tune.htm#sthref924">Wait Event: db file scattered read</a></p>    <br><p class="detailTblTxt3"> Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=223117.1">Tuning I/O-related waits</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Buffer cache is too small</i></b></p>    <br><p class="detailTblTxt3">A small buffer cache will cause more physical reads or, for a RAC database, additional block transfers than would otherwise be required.
</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">TKProf: <br>
<ul class="detailTblTxt3">
<li>Significant waits on <db file sequential read</i> waits , and/or for RAC, <i>global cache CR request</i></li>
<li>SQL statements perform 10 or fewer logical reads (query + current) per row per table per execution, meaning that the statement is reasonably tuned (i.e., if a query joins 2 tables and returns 10 rows, one would expect less than 10*2*3 = 60 logical reads per execution</li>
<li>Full table scans (in a RAC database) are NOT seen in the execution plan for a statement that is waiting on this event</li>
<li>The application is an OLTP type of application and in the overall section of the report,  physical reads ("disk") are equal or close to the number of logical reads (query + current).
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Manually Increase the size of the buffer cache using the <i>db cache size</i> parameter</i></b></p>    <br><p class="detailTblTxt3">Increase the size of the buffer cache and monitor the effects of the change.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; change an initialization parameter</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk. However, there must be sufficient memory on the machine to avoid memory shortage problems.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm#CNCPT007">Concepts: Oracle Memory Architecture</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://www.oracle.com/pls/db102/to_URL?remark=ranked&urlname=http:%2F%2Fdownload.oracle.com%2Fdocs%2Fcd%2FB19306_01%2Fserver.102%2Fb14211%2Fmemory.htm%23sthref485">Configuring and Using the Buffer Cache</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   10g+: Use automatic shared memory management (ASMM) </i></b></p>    <br><p class="detailTblTxt3">ASMM will seek to optimize the size of the buffer cache without human intervention.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; change an initialization parameter</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk. Be sure to set SGA_TARGET to a reasonable value.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm">Concepts: Memory Architecture</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm#CNCPT810">Concepts: Automatic Shared Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14231/create.htm#BABGCBHI">Admin: Using Automatic Shared Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#i30970">Performance Tuning: Configuring and Using the Shared Pool and Large Pool</a></p>    <br><p class="detailTblTxt3">Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=257643.1">Oracle Database 10g Automated SGA Memory Tuning</a></p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=295626.1">How To Use Automatic Shared Memory Management (ASMM) In Oracle10g</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=270935.1">Shared pool sizing in 10g</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Additional Diagnostics Needed</i></b></p>    <br><p class="detailTblTxt3">Additional diagnostics and analysis are needed to find a solution.  </p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">There is insufficient information to suggest a specific cause.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Additional Diagnostics Needed</i></b></p>    <br><p class="detailTblTxt3">Additional diagnostics and analysis are needed to find a solution.  Please file a Service Request to obtain assistance.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Diagnostic efforts vary depending on the problem.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Risks involved in collecting diagnostics vary depending on the kind of diagnostics being obtained.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Please file an SR for more details on what should be done next.</p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p><br> </td> </tr> </table> </td> </tr> <tr> <td width="100%" colspan="3" class="detailEmptyLine">&nbsp;</td> </tr> </table> <table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"> <tr> <td width="3%" class="detailMainTxt">&nbsp;</td> <td width="2%" valign="top" align="left">&nbsp;</td> <td width="95%" class="detailSubHdrTxt">Client or Session-level Bottlenecks </td> </tr> <tr> <td width="3%" class="detailEmptyLayer">&nbsp;</td> <td width="2%" class="detailEmptyLayer">&nbsp;</td> <td width="95%"><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="100%" class="detailMainTxt">A client bottleneck in the context of a slow database is another way to say that most of the time for sessions is being spent outside of the database.  This could be due to a truly slow client or a slow network (and related components).    </td>  </tr>  <tr>    <td width="100%" class="detailEmptyLine">&nbsp;</td>  </tr>  </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="1">Observations and Causes</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt">Observations and causes are listed below:	</td>	</tr>	</table><br> <table width="100%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"> <tr><td width="100%" class="detailMainTxt"> <p><b>Note:</b> This list shows some common observations and causes but is not a complete list.  If you do not find a possible cause in this list, you can always open a service request with Oracle to investigate other possible causes.  Please see the section below called, "Open a Service Request with Oracle Support Services". </p> </td></tr> </table> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>High Wait Time due to Client Events Before Any Type of Call</b></i></p>    <br><p class="detailTblTxt3">The Oracle shadow process is spending a significant amount of time waiting for messages from clients.  The waits occur between FETCH and PARSE calls or before EXECUTE calls.  There are few FETCH calls for the same cursor.</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3">TKProf: 
<ul class="detailTblTxt3">
<li>Overall wait event summary for non-recursive and recursive statements shows significant amount of time for <i>SQL*Net message from client</i> waits compared to the total elapsed time in the database</li>
<li>Each FETCH call typically returns 5 or more rows (indicating that array fetches are occurring)</li>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Slow client is unable to respond to the database quickly</i></b></p>    <br><p class="detailTblTxt3">The client is running slowly and is taking time to make requests of the database.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">TKProf:
<ol>
<li><i>SQL*Net message from client</i> waits are a large part of the overall time (see the overall summary section)</li>
<li>There are more than 5 rows per execution on average (divide total rows by total execution calls for both recursive and non-recursive calls).  When array operations are used, you'll see 5 to 10 rows per execution.</li>
</ol>
<br>
You may also observe that performance is good when the same queries that the client sends are executed via a different client (on another node).</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate the client </i></b></p>    <br><p class="detailTblTxt3">Its possible that the client or middle-tier is saturated (not enough CPU or memory) and is simply unable to send requests to the database fast enough.  <br>
<br>
You will need to check the client for sufficient resources or application bugs that may be delaying database calls.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; It is easy to check clients or mid-tiers for OS resource saturation.  Bugs in application code are more difficult to find.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">It may help to use a tool like OSWatcher to capture OS performance metrics on the client.  <br>
<br>
To identify a specific client associated with a database session, see the V$SESSION view under the columns, CLIENT_INFO, PROCESS, MACHINE, PROGRAM.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14237/dynviews_2088.htm#sthref3985">Reference: V$SESSION</a></p>    <br><p class="detailTblTxt3">Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=301137.1">The OS Watcher (OSW) User Guide</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=433472.1">The OS Watcher For Windows (OSWFW) User Guide</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Slow network limiting the response time between client and database</i></b></p>    <br><p class="detailTblTxt3">The network is saturated and this is limiting the ability of the client and database to communicate with each other.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">TKProf:
<ol>
<li><i>SQL*Net message from client</i> waits are a large part of the overall time (see the overall summary section)</li>
<li>Array operations are used.  This is seen when there are more than 5 rows per execution on average (divide total rows by total execution calls for both recursive and non-recursive calls)</li>
<li>The average time for a <i>ping</i> is about equal to twice the average time for a <i>SQL*Net message from client</i> wait and this time is more than a few milliseconds.  This indicates that most of the client time is spent in the network.</li>
</ol>
<br>
You may also observe that performance is good when the same queries that the client sends are executed via a different client on a different subnet (especially one very close to the database server).</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate the network</i></b></p>    <br><p class="detailTblTxt3">Check the responsiveness of the network from different subnets and interface cards.  The <i>netstat</i>, <i>ping</i> and <i>traceroute</i> utilities can be used to check network performance.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; Network problems are relatively easy to check but sometimes difficult to solve.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Consult your system documentation for utilities such as <i>ping, netstat, and traceroute</i></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>High Wait Time due to Client Events Between FETCH Calls</b></i></p>    <br><p class="detailTblTxt3">The Oracle shadow process is spending a significant amount of time waiting for messages from clients between FETCH calls for the same cursor.</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3">10046 / TKProf: 
<ul class="detailTblTxt3">
<li>Overall wait event summary for non-recursive and recursive statements shows significant amount of time for <i>SQL*Net message from client</i> waits compared to the total elapsed time in the database</li>
<li>The client waits occur between many fetch calls for the <u>same</u> cursor (as seen in the cursor #).</li>
<li>On average, there are less than 5 (and usually 1)  row returned per execution</li>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Lack of Array Operations Causing Excess Calls to the Database</i></b></p>    <br><p class="detailTblTxt3">The client is not using array operations to process multiple rows in the database.  This means that many more calls are performed against the database.  Each call incurs a wait while the database waits for the next call.  The time accumulates over many calls and will impact performance.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">TKProf:
<ol>
<li><i>SQL*Net message from client</i> waits are a large part of the overall time (see the overall summary section)</li>
<li>There is nearly 1 row per execution on average (divide total rows by total execution calls for both recursive and non-recursive calls).  When array operations are used, you'll see 5 to 10 rows per execution.</li>
<li>In some cases, most of the time is for a few SQL statements; you may need to examine the whole TKProf to find where the client waits were highest and examine those for the use of array operations</li>
</ol>
</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Use array operations to avoid calls</i></b></p>    <br><p class="detailTblTxt3">Array operations will operate on several rows at a time (either fetch, update, or insert).  A single fetch or execute call will do the work of many more.  Usually, the benefits of array operations diminish after an arraysize of 10 to 20, but this depends on what the application is doing and should be determined through benchmarking.<br>
<br>
Since fewer calls are needed, there are savings in waiting for client messages, network traffic, and database work such as logical reads and block pins.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; Depending on the client, it may be easy or difficult to change the application and use array operations.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Very low risk; it is risky when enormous array sizes are used in OLTP operations and many rows are expected.  This is due to waiting for the entire array to be filled until the first row is returned.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">The implementation of array operations will vary by the type of programming language being used.  See the documents below for some common ways to implement array operations.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/appdev.102/b14261/tuning.htm#i48876">PL/SQL User's Guide and  Reference : Reducing Loop Overhead for DML Statements and Queries with Bulk SQL</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/appdev.102/b14354/chapter9.htm">Programmer's Guide to the Oracle Precompilers
: Using Host Arrays</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/java.102/b14355/oraperf.htm#i1056232">JDBC Developer's Guide and Reference: Update Batching</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/java.102/b14355/oraperf.htm#i1043756">JDBC Developer's Guide and Reference: Oracle Row Prefetching</a></p>    <br><p class="detailTblTxt3"> Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=74123.1">Bulk Binding - What it is, Advantages, and How to use it</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=291829.1">How To Fetch Data into a Table of Records using Bulk Collect and FOR All</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>Slow performance for a few sessions</b></i></p>    <br><p class="detailTblTxt3">Only one or a few sessions are experiencing a performance problem; there is no widespread database performance problem.</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3">Only certain users are reporting a performance problems.  Most other users are experiencing normal response times.</p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Session-level performance problem.</i></b></p>    <br><p class="detailTblTxt3">A performance problem is seen by only a few users rather than database-wide.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">Only certain sessions, or certain operations within a session have been impacted.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate Session Level Problem</i></b></p>    <br><p class="detailTblTxt3">Performance problems affecting one or a few number of sessions in the database allow one to obtain additional information to help diagnose the problem.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">The effort required to obtain addtional session-based data varies depending on the way sessions connect to the database and how a session is identified.  The easiest cases are those where a user connects directly to the database with a database username that is plainly visible in V$SESSION.  The most challenging cases involve some kind of connection pooling at the mid-tier where the same database user name is used for all sessions and the application does NOT use the "CLIENT_IDENTIFIER" for each session.  </p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Collecting session-level diagnostics are generally safe and low-risk for the database as a whole but there is some risk of further impacting performance of the session itself due to the overhead in tracing.  Also, tracing a background process is generally dangerous and should only be done at the direction of Oracle Support.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Oracle usually recommends gathering the following data for performance problems affecting a few sessions:

* 10046, level 12 trace
* Time the user's observed response time using the application when the 10046 trace is also collecting data</p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p><br> </td> </tr> </table> </td> </tr> <tr> <td width="100%" colspan="3" class="detailEmptyLine">&nbsp;</td> </tr> </table> <table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"> <tr> <td width="3%" class="detailMainTxt">&nbsp;</td> <td width="2%" valign="top" align="left">&nbsp;</td> <td width="95%" class="detailSubHdrTxt">Memory Consumption </td> </tr> <tr> <td width="3%" class="detailEmptyLayer">&nbsp;</td> <td width="2%" class="detailEmptyLayer">&nbsp;</td> <td width="95%"><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="100%" class="detailMainTxt">Oracle uses memory for the SGA and PGAs.  Examine the size of the SGAs and PGAs to determine what is using the system's memory.    </td>  </tr>  <tr>    <td width="100%" class="detailEmptyLine">&nbsp;</td>  </tr>  </table><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"><tr> <td width="3%" valign="top" align="right">&nbsp;</td> <td width="97%" class="detailLevel1"> <ol class="detailLevel1"><li value="1">Observations and Causes</li></ol> <br>	<table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">	<tr>	<td width="100%" class="detailMainTxt">Examine the table below for common observations and causes:	</td>	</tr>	</table><br> <table width="100%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"> <tr><td width="100%" class="detailMainTxt"> <p><b>Note:</b> This list shows some common observations and causes but is not a complete list.  If you do not find a possible cause in this list, you can always open a service request with Oracle to investigate other possible causes.  Please see the section below called, "Open a Service Request with Oracle Support Services". </p> </td></tr> </table> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>Oracle Memory Consumption due to large SGA</b></i></p>    <br><p class="detailTblTxt3">One or more SGAs on the machine are leaving very little memory left for PGAs and other use on the machine.</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3">RDA:
<ul class="detailTblTxt3">
<li>A large portion of the memory on the machine is used by one or more SGAs (see the total size of the buffer cache and shared pool), see the following:
<ol>
<li>Overview > System Information > Total Physical Memory</li>
<li>RDBMS > SGA Information, add up all components</li>
<li>Repeat for all other instances on the machine</li>
<li>Compare total size of all SGAs to physical memory</li>
</ol></li>
</ul></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Oversized buffer cache</i></b></p>    <br><p class="detailTblTxt3">The buffer cache is very large and is using more memory than is needed.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">AWR or Statspack report:
<ul class="detailTblTxt3">
<li>Not using automatic shared memory management (ASMM), i.e., SGA_TARGET=0</li>
<li>Buffer cache hit ratio is around 99%</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   10g+: Use automatic shared memory management (ASMM) </i></b></p>    <br><p class="detailTblTxt3">ASMM will seek to optimize the size of the buffer cache without human intervention.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; change an initialization parameter</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk. Be sure to set SGA_TARGET to a reasonable value.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm">Concepts: Memory Architecture</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm#CNCPT810">Concepts: Automatic Shared Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14231/create.htm#BABGCBHI">Admin: Using Automatic Shared Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#i30970">Performance Tuning: Configuring and Using the Shared Pool and Large Pool</a></p>    <br><p class="detailTblTxt3">Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=257643.1">Oracle Database 10g Automated SGA Memory Tuning</a></p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=295626.1">How To Use Automatic Shared Memory Management (ASMM) In Oracle10g</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=270935.1">Shared pool sizing in 10g</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Oversized shared pool</i></b></p>    <br><p class="detailTblTxt3">The pool  is very large and is using more memory than is needed.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">AWR or Statspack report:
<ul class="detailTblTxt3">
<li>Not using automatic shared memory management (ASMM), i.e., SGA_TARGET=0</li>
<li>shared pool free memory is more than 30%</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   10g+: Use the <i>Automatic Shared Memory Manager (ASMM)</i> to adjust the shared pool size</i></b></p>    <br><p class="detailTblTxt3">ASMM will automate memory sizing for the shared pool to ensure an optimal amount is available. You will need to set a reasonable value for SGA_MAX_SIZE and SGA_TARGET to enable ASMM.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; an init.ora / spfile change. </p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk; ASMM will ensure sufficient memory is available.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm">Concepts: Memory Architecture</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm#CNCPT810">Concepts: Automatic Shared Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14231/create.htm#BABGCBHI">Admin: Using Automatic Shared Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#i30970">Performance Tuning: Configuring and Using the Shared Pool and Large Pool</a></p>    <br><p class="detailTblTxt3">Notes</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=62143.1">Understanding and Tuning the Shared Pool</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=257643.1">Oracle Database 10g Automated SGA Memory Tuning</a></p>    <br><p class="detailTblTxt3">How-To</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=295626.1">How To Use Automatic Shared Memory Management (ASMM) In Oracle10g</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=270935.1">Shared pool sizing in 10g</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   The Large, Java and/or Streams Pool are Oversized</i></b></p>    <br><p class="detailTblTxt3">A significant amount of free space is present in the large, java and/or streams pool when there is evidence of memory pressure on the instance and/or host.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">If the large, java or streams pool individual free space is greater than 20%, and there is evidence of memory pressure, then this cause is likely. Memory pressure is generally detected when the system is paging out memory.</p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Reduce the size of the Large, Java or Streams pool</i></b></p>    <br><p class="detailTblTxt3">Reduce the large, java and streams pool so they typically have 5% of free space during peak memory usage.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Initialization parameter change.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">If the values are set too low, then certain operations may fail; values should be adjusted cautiously, over time if possible.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See documents below:</p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams090.htm#i1128241">LARGE_POOL_SIZE parameter</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams087.htm#i1128097">JAVA_POOL_SIZE parameter</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams212.htm#i1134525">STREAMS_POOL_SIZE parameter</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Unknown SGA Memory Consumption Problem </i></b></p>    <br><p class="detailTblTxt3">SGA memory is being consumed for an unknown reason.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul>
<li>AWR or Statspack show paging activity in the "OS Statisitics" section</li>
<li>Most of the memory on the host is used by this instance</li>
<li>Most the instance's memory usage is due to the SGA</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Additional SGA Memory Diagnostics Needed</i></b></p>    <br><p class="detailTblTxt3">Unfortunately, the most likely reasons for this problem have been ruled out.  Additional diagnostics and analysis are needed to find a solution.  Please collect the diagnostics suggested below and file a Service Request to obtain assistance.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">The diagnostics involve a simple query and are easy to obtain.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk to the system.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Issue the following queries and send the output to Oracle Support Services when you file an SR:<br>
<br>
<pre>
	select * from v$sga;
	select * from v$sgastat order by pool, bytes;
</pre></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   SGA target is too large to fit in available memory.</i></b></p>    <br><p class="detailTblTxt3">The size of the initialization parameter, SGA_TARGET, is larger than the available memory of the host (total installed memory less OS overhead and memory for other reasons) minus the total size of the PGAs.  This leads to memory paging which impacts the host.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul>
<li>Significant paging is occuring on the host</li>
<li>Total installed memory - overhead < (Sum of all PGAs) + SGA_TARGET</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Reduce SGA_TARGET to fit available memory (or add more memory)</i></b></p>    <br><p class="detailTblTxt3">SGA_TARGET should be set to a reasonable size that leaves enough memory available for other uses such as:<br>
<ul>
<li>Other instances on the same machine</li>
<li>PGA memory for all instances</li>
<li>Other applications and utilities running on the machine</li>
<li>OS overhead memory</li>
</ul></p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Changing memory settings involves simple changes to the parameter file; however this will generally require an instance bounce.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">There is risk in changing memory parameters since an undersized SGA can cause excessive I/O due to small buffer cache, high reloads in the shared pool, or even ORA-4031 errors if memory is not sufficient to load objects in the shared pool.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3">Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=257643.1">Oracle Database 10g Automated SGA Memory Tuning</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=http://download.oracle.com/docs/cd/E11882_01/server.112/e10821/memory.htm#PFGRF94255">Automatic Shared Memory Management</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download.oracle.com/docs/cd/E11882_01/install.112/e10840/pre_install.htm#CHDCEBFF ">Example of Oracle Installation on Linux; Memory Requirements</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>Oracle Memory Consumption due to large PGAs</b></i></p>    <br><p class="detailTblTxt3">One or more Oracle processes are using large amounts of PGA memory on the machine.</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3">
A large portion of the memory on the machine is used by one or more PGAs , see the following:
<ol>
<li>RDA: Overview > System Information > Total Physical Memory</li>
<li>Run this query to see total PGA memory used by the instance:<br>
<pre>
select sn.name, sum(s.value)
from v$sesstat s, v$statname sn
where s.statistic# = sn.statistic#
and sn.name like '%pga%'
group by sn.name
</pre>
</li>
<li>Repeat for all other instances on the machine</li>
<li>Determine which instance uses the most PGA memory and which sessions account for the memory usage.</li>
</ol></p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Manually sized private workareas are too large</i></b></p>    <br><p class="detailTblTxt3">Private workareas are too large for the total number of Oracle processes and the amount of memory available.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">AWR or Statspack report:
<ul class="detailTblTxt3">
<li>Not using automatic PGA memory management i.e., PGA_AGGREGATE_TARGET=0 or WORKAREA_SIZE_POLICY = MANUAL</li>
<li>Parameters like <i>sort_area_size</i> and <i>hash_area_size</i> are very large and when multiplied by the number of active sessions will use up most of the system's physical memory</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Use automatic PGA memory management </i></b></p>    <br><p class="detailTblTxt3">When running under the automatic PGA memory management mode, sizing of work areas for all sessions becomes automatic and the *_AREA_SIZE parameters are ignored by all sessions running in that mode. At any given time, the total amount of PGA memory available to active work areas in the instance is automatically derived from the PGA_AGGREGATE_TARGET initialization parameter. <br>
<br>
Under automatic PGA memory management mode, the main goal of Oracle is to honor the PGA_AGGREGATE_TARGET limit set by the DBA, by controlling dynamically the amount of PGA memory allotted to SQL work areas. At the same time, Oracle tries to maximize the performance of all the memory-intensive SQL operations, by maximizing the number of work areas that are using an optimal amount of PGA memory (cache memory). </p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; initialization parameter change.  Some effort has to be made initially to set the proper target size and adjust it to ensure optimal performance.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk. Initially, some effort should be made to ensure the PGA settings are reasonable and don't regress performance.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm#i14490">Concepts: Overview of the Program Global Areas</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#i49320">Performance Tuning Guide: PGA Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams157.htm#sthref664">Reference: Initialization Parameter PGA_AGGREGATE_TARGET</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams226.htm#sthref917">Reference: Initialization Parameter WORKAREA_SIZE_POLICY</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=223730.1">Automatic PGA Memory Management in 9i and 10g</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=153367.1">Init.ora Parameter "PGA_AGGREGATE_TARGET" Reference Note</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=153387.1">Init.ora Parameter "WORKAREA_SIZE_POLICY" Reference Note </a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Automatically sized private workareas are too large</i></b></p>    <br><p class="detailTblTxt3">Private workareas are too large for the total number of Oracle processes and the amount of memory available.</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3">AWR or Statspack report:
<ul class="detailTblTxt3">
<li>Using automatic PGA memory management i.e., PGA_AGGREGATE_TARGET=some large value and WORKAREA_SIZE_POLICY = AUTO</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Reduce the amount of PGA_AGGREGATE_TARGET memory</i></b></p>    <br><p class="detailTblTxt3">PGA_AGGREGATE_TARGET may be set too large for the memory capacity of the machine.  If memory is constrained, then a balance may be found where some queries run slower but the overall system runs faster since memory is available for critical operations.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low effort; parameter change.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblHighBG">      <p align="center"><b>H</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">High risk.  Some execution plans may change and some queries may perform worse.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">See the documents below for guidance on the proper use of the automatic PGA memory feature.</p>    <br><p class="detailTblTxt3"> Documentation</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14220/memory.htm#i14490">Concepts: Overview of the Program Global Areas</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/memory.htm#i49320">Performance Tuning Guide: PGA Memory Management</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams157.htm#sthref664">Reference: Initialization Parameter PGA_AGGREGATE_TARGET</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14237/initparams226.htm#sthref917">Reference: Initialization Parameter WORKAREA_SIZE_POLICY</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=223730.1">Automatic PGA Memory Management in 9i and 10g</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=153367.1">Init.ora Parameter "PGA_AGGREGATE_TARGET" Reference Note</a></p>    <br><p class="detailTblTxt3"> </p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=153387.1">Init.ora Parameter "WORKAREA_SIZE_POLICY" Reference Note </a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Increase the amount of physical memory on the machine</i></b></p>    <br><p class="detailTblTxt3">Adding memory instead of reducing the size of the PGA target will give memory to the processes and reduce the possibility that executions plans will change.
</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Medium effort; simple hardware change but downtime involved if non-RAC.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Low risk.  Low chance of execution plans changing.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3">Not applicable.</p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p>    <table width="100%" border="1" cellpadding="0" cellspacing="0" style="border-style:double; border-width:6; border-collapse: collapse" bgcolor="#DDDBC5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"> <p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><i><b>Other memory problems
 </b></i></p>    <br><p class="detailTblTxt3">Memory problems not related to Oracle SGA and PGA</p>    <br><p class="detailTblTxt3"><b><i>What to look for</i></b></p>    <br><p class="detailTblTxt3">Host OS data shows memory shortage (significant paging) but Oracle is not consuming most of the memory.</p><br> <p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> <p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="98%" border="1" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bgcolor="#FFFFDF" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Cause Identified:   Memory shortage NOT caused by this instance </i></b></p>    <br><p class="detailTblTxt3">Host memory is being consumed outside of this instance (neither the SGA nor PGA of this instance).</p>    <br><p class="detailTblTxt3"><b><i>Cause Justification</i></b></p>	  <p class="detailTblTxt3"><ul>
<li>AWR or Statspack show paging activity in the "OS Statisitics" section</li>
<li>Most of the memory on the host is not used by this instance</li>
</ul></p><p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div><p class="detailTblEmptyLine">&nbsp;</p> <div align="right">    <table width="96%" border="1" cellpadding="0" cellspacing="0"  style="border-style:dashed; border-width:1; border-collapse: collapse" bgcolor="#DBEAD5" bordercolor="#A6B3C8">		 <tr>	  	 <td width="100%" class="detailTblTxt3" valign="top" align="left"><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt2"><b><i>Solution Identified:   Investigate non-Oracle memory consumption</i></b></p>    <br><p class="detailTblTxt3">A memory shortage was detected on the system (usually due to the presence of heavy paging) but this database instance was found to be using a minor percentage of the total memory (both PGA and SGA).  Additional diagnostics should be collected and analyzed; however, Oracle is able to offer limited assistance since the problem may lie outside of the database.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblMedBG">      <p align="center"><b>M</b></td>      <td width="2%">&nbsp;</td>      <td width="93%" class="detailTblTxt3"><b><i>Effort Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Additional diagnostics are generally easy to collect using OS commands, although Oracle recommends using Enterprise Manager or Support's OS Watcher (OSW) tool to collect data over a period of time (2 days is usually sufficient).  Installation of OSW is simple but some places require a change control process to be followed.</p>  <br><table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" id="AutoNumber2">    <tr>      <td width="5%" class="detailTblLowBG">      <p align="center"><b>L</b></td>      <td width="2%">&nbsp;</td>      <td width="93%"  class="detailTblTxt3"><b><i>Risk Details</i></b></td>    </tr>  </table>    <br><p class="detailTblTxt3">Collecting OS data either manually or with OSW is a low risk activity.</p><p class="detailTblEmptyLine">&nbsp;</p>    <p class="detailTblTxt3"><b><i>Solution Implementation</i></b></p>    <br><p class="detailTblTxt3"><ol>
<li>Install OSW and collect data using default settings</li>
<li>Identify periods when paging was severe using OSWg's charting features</li>
<li>During the period when there were memory problems, examine the collected "TOP" output.</li>
<li>Look for the processes and users with the highest "RES" or "RSS" (resident set size) memory consumption.</li>
</ol>
These processes are generally responsible for the memory consumption problems.  You will need to determine what these processes are and what can be done about them.<br>
<br>
You can do the above analysis also without using OSW and instead using the TOP utility by itself.  Be sure to change the sort option to sort by the RSS or RES column (depending on the platform). Run TOP in batch mode to collect the data to a file; the following will collect 120 samples at 30 second intervals (for a total of 1 hour of data) sorted by "RES" field (the following works in Solaris, please consult the man pages for your OS):
<pre>	 
	 top -b -d5 -s2 -ores > top.txt
</pre>
Send either the OSW or TOP output to Oracle when you file the SR, but please remember that Oracle is able to offer limited assistance if the problem lies outside of the database.</p>    <br><p class="detailTblTxt3">Reference</p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=301137.1">OS Watcher User Guide</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=2060096.6">Monitoring Memory Use</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=558237.1">Monitoring Memory Usage in Virtual Memory Systems</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=224176.1">How to use OS commands to diagnose Database Performance issues?</a></p>    <br><p class="detailTblTxt3"></p>	<p class="detailTblTxt3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=190124.1">The Coe Performance Method (good information on OS tools)</a></p>    <br><p class="detailTblTxt3"><b><i>Implementation Verification</i></b></p>    <br><p class="detailTblTxt3"></p><br>
<p class="detailTblTxt3">Implement the solution and determine if the performance improves. If performance does not improve, examine the following: </p>
<ul>
<li><p class="detailTblTxt3">Review other possible reasons</li>
<li><p class="detailTblTxt3">Verify that the data collection was done properly</li>
<li><p class="detailTblTxt3">Verify the problem statement</li>
</ul>
<p class="detailTblTxt3">If you would like to log a service request, a test case 
would be helpful at this stage.</p>
<p class="detailTblTxt3">&nbsp;</p>
<p class="detailTblEmptyLine">&nbsp;</p>		</td>      </tr>     </table> </div> <p class="detailTblEmptyLine">&nbsp;</p><br> </td> </tr> </table> </td> </tr> <tr> <td width="100%" colspan="3" class="detailEmptyLine">&nbsp;</td> </tr> </table><p class="detailMainTxt">&nbsp;</p></td> <td width="25%" valign="top">&nbsp;</td></tr></table> <table width="100%" border="0" cellspacing="1" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">   <tr>     <td width="2%" valign="top" align="left">&nbsp;</td>     <td width="98%">     <p class="detailHdrTxt"><a name="Tools">Tools</a></p><hr class="detailLine">     </td>   </tr> </table> <table width="100%" border="0" cellspacing="1" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">   <tr>       <td width="75%" valign="top"><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="3%"  class="detailMainTxt">&nbsp;</td>    <td width="97%" class="detailMainTxt">The tools listed below are useful for diagnosing slow database problems.    </td>  </tr>  <tr>    <td width="3%" class="detailMainTxt">&nbsp;</td>    <td width="97%" class="detailMainTxt">&nbsp;</td>  </tr>  </table> <table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"> <tr> <td width="3%" class="detailMainTxt">&nbsp;</td> <td width="2%" valign="top" align="left">&nbsp;</td> <td width="95%" class="detailSubHdrTxt">Active Session History (ASH) Report </td> </tr> <tr> <td width="3%" class="detailEmptyLayer">&nbsp;</td> <td width="2%" class="detailEmptyLayer">&nbsp;</td> <td width="95%"><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="100%" class="detailMainTxt"> <a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/autostat.htm#PFGRF02606">Active Session History Reports</a>    </td>  </tr>  <tr>    <td width="100%" class="detailEmptyLine">&nbsp;</td>  </tr>  </table> </td> </tr> <tr> <td width="100%" colspan="3" class="detailEmptyLine">&nbsp;</td> </tr> </table> <table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"> <tr> <td width="3%" class="detailMainTxt">&nbsp;</td> <td width="2%" valign="top" align="left">&nbsp;</td> <td width="95%" class="detailSubHdrTxt">Automatic Workload Repository (AWR) Report </td> </tr> <tr> <td width="3%" class="detailEmptyLayer">&nbsp;</td> <td width="2%" class="detailEmptyLayer">&nbsp;</td> <td width="95%"><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="100%" class="detailMainTxt"> <a target="detailWindow" href="http://download-west.oracle.com/docs/cd/B19306_01/server.102/b14211/autostat.htm#i35176">Automatic Workload Repository Reports</a>    </td>  </tr>  <tr>    <td width="100%" class="detailEmptyLine">&nbsp;</td>  </tr>  </table> </td> </tr> <tr> <td width="100%" colspan="3" class="detailEmptyLine">&nbsp;</td> </tr> </table> <table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"> <tr> <td width="3%" class="detailMainTxt">&nbsp;</td> <td width="2%" valign="top" align="left">&nbsp;</td> <td width="95%" class="detailSubHdrTxt">10046 and TKProf </td> </tr> <tr> <td width="3%" class="detailEmptyLayer">&nbsp;</td> <td width="2%" class="detailEmptyLayer">&nbsp;</td> <td width="95%"><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="100%" class="detailMainTxt"> <a target="detailWindow" href="http://download.oracle.com/docs/cd/B14117_01/server.101/b10752/sqltrace.htm#8723">Understanding SQL Trace and TKProf</a>
<br>
<br>
 <a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=376442.1">Recommended Method for Obtaining 10046 trace for Tuning</a>    </td>  </tr>  <tr>    <td width="100%" class="detailEmptyLine">&nbsp;</td>  </tr>  </table> </td> </tr> <tr> <td width="100%" colspan="3" class="detailEmptyLine">&nbsp;</td> </tr> </table> <table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"> <tr> <td width="3%" class="detailMainTxt">&nbsp;</td> <td width="2%" valign="top" align="left">&nbsp;</td> <td width="95%" class="detailSubHdrTxt">LTOM </td> </tr> <tr> <td width="3%" class="detailEmptyLayer">&nbsp;</td> <td width="2%" class="detailEmptyLayer">&nbsp;</td> <td width="95%"><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="100%" class="detailMainTxt"> <a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=352363.1">LTOM - The On-Board Monitor User's Guide</a>    </td>  </tr>  <tr>    <td width="100%" class="detailEmptyLine">&nbsp;</td>  </tr>  </table> </td> </tr> <tr> <td width="100%" colspan="3" class="detailEmptyLine">&nbsp;</td> </tr> </table> <table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"> <tr> <td width="3%" class="detailMainTxt">&nbsp;</td> <td width="2%" valign="top" align="left">&nbsp;</td> <td width="95%" class="detailSubHdrTxt">OS Watcher </td> </tr> <tr> <td width="3%" class="detailEmptyLayer">&nbsp;</td> <td width="2%" class="detailEmptyLayer">&nbsp;</td> <td width="95%"><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="100%" class="detailMainTxt"> <a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=301137.1">OS Watcher User Guide</a>    </td>  </tr>  <tr>    <td width="100%" class="detailEmptyLine">&nbsp;</td>  </tr>  </table> </td> </tr> <tr> <td width="100%" colspan="3" class="detailEmptyLine">&nbsp;</td> </tr> </table> <table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111"> <tr> <td width="3%" class="detailMainTxt">&nbsp;</td> <td width="2%" valign="top" align="left">&nbsp;</td> <td width="95%" class="detailSubHdrTxt">Statspack Report </td> </tr> <tr> <td width="3%" class="detailEmptyLayer">&nbsp;</td> <td width="2%" class="detailEmptyLayer">&nbsp;</td> <td width="95%"><table width="98%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="#111111">  <tr>    <td width="100%" class="detailMainTxt"> <a target="detailWindow" href="https://support.oracle.com/CSP/main/article?cmd=show&type=NOT&id=94224.1">Statspack Complete Reference</a>    </td>  </tr>  <tr>    <td width="100%" class="detailEmptyLine">&nbsp;</td>  </tr>  </table> </td> </tr> <tr> <td width="100%" colspan="3" class="detailEmptyLine">&nbsp;</td> </tr> </table><p class="detailMainTxt">&nbsp;</p></td> <td width="25%" valign="top">&nbsp;</td></tr></table><p class=pagebreak>&nbsp;</p>

</body>
</html>
